"use strict";(self["webpackChunkorange"]=self["webpackChunkorange"]||[]).push([[155,1066],{10155:function(e,a,t){t.r(a),t.d(a,{default:function(){return v}});var r=t(25136),l=(t(97042),t(69957),t(21929)),o=(t(98421),t(65451)),s=(t(63390),t(76408)),i=(t(87535),t(32465),t(14022)),n=(t(72343),t(56768)),d=t(90144),u=t(45130),g=t(71066),c=t(82572),m=(0,n.pM)({__name:"editFormParam",props:{rowData:{},dialog:{},thirdParamsString:{},dialogKey:{}},setup(e){const a=(0,c.l5)(),t=e,{thirdParams:m,onCloseThirdDialog:p}=(0,g.P)(t),v=(0,n.EW)(()=>a.defaultFormItemSize||m.value.defaultFormItemSize?.value),b=(0,d.KR)(),f=(0,d.KR)({variableName:void 0}),h={variableName:[{required:!0,message:"参数名称不能为空！",trigger:"blur"},{pattern:/^[a-z][A-Za-z]+$/,message:"参数名称只支持小驼峰规则英文字母",trigger:"blur"}]},w=(0,n.EW)(()=>({rowData:t.rowData||m.value.rowData})),k=()=>{t.dialog?t.dialog.cancel():p(!1)},y=()=>{b.value.validate(e=>{e&&(t.dialog?t.dialog.submit(f.value.variableName):p(!0,w.value.rowData,f.value.variableName))})};return(0,n.sV)(()=>{w.value.rowData&&(f.value.variableName=w.value.rowData.variableName)}),(e,a)=>{const t=i.WK,g=l.xE,c=s.uD,m=o.S2,p=l.US,w=r.S2;return(0,n.uX)(),(0,n.Wv)(m,{"third-party-dlg":""},{default:(0,n.k6)(()=>[(0,n.bF)(p,{ref_key:"form",ref:b,model:(0,d.R1)(f),class:"full-width-input form-box",rules:h,style:{width:"100%"},"label-width":"100px",size:(0,d.R1)(v),"label-position":"right",onSubmit:a[1]||(a[1]=(0,u.D$)(()=>{},["prevent"]))},{default:(0,n.k6)(()=>[(0,n.bF)(m,{gutter:20},{default:(0,n.k6)(()=>[(0,n.bF)(c,{span:24},{default:(0,n.k6)(()=>[(0,n.bF)(g,{label:"参数名称",prop:"variableName"},{default:(0,n.k6)(()=>[(0,n.bF)(t,{modelValue:(0,d.R1)(f).variableName,"onUpdate:modelValue":a[0]||(a[0]=e=>(0,d.R1)(f).variableName=e),clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","size"]),(0,n.bF)(c,{span:24,class:"menu-box"},{default:(0,n.k6)(()=>[(0,n.bF)(m,{class:"no-scroll flex-box",type:"flex",justify:"end"},{default:(0,n.k6)(()=>[(0,n.bF)(w,{size:(0,d.R1)(v),plain:!0,onClick:k},{default:(0,n.k6)(()=>a[2]||(a[2]=[(0,n.eW)(" 取消 ")])),_:1,__:[2]},8,["size"]),(0,n.bF)(w,{type:"primary",size:(0,d.R1)(v),onClick:y},{default:(0,n.k6)(()=>a[3]||(a[3]=[(0,n.eW)(" 保存 ")])),_:1,__:[3]},8,["size"])]),_:1})]),_:1})]),_:1})}}});const p=m;var v=p},71066:function(e,a,t){t.d(a,{P:function(){return i},i:function(){return n}});var r=t(81387),l=t(27007),o=t(56768),s=t(90144);const i=e=>{console.log("接收到的第三方参数",e);const a=(0,s.KR)(0),t=(0,o.EW)(()=>{let a={};try{e.thirdParamsString&&(a=JSON.parse(e.thirdParamsString))}catch(t){console.log(t),a={}}return a});console.log("thirdParams",t);const r=(r,l,o)=>{console.log("onCloseThirdDialog",l,o),window.parent&&window.parent.postMessage({type:"closeDialog",data:{index:a.value,dialogKey:e.dialogKey,path:t.value.path,rowData:l?JSON.parse(JSON.stringify(l)):void 0,data:o?JSON.parse(JSON.stringify(o)):void 0,isSuccess:r}},"*")},i=(e,t)=>{switch(e){case"setToken":t.token&&(0,l.WG)(t.token);break;case"dialogIndex":a.value=t;break;case"refreshData":break;case"message":break}},n=e=>{i(e.data.type,e.data.data)};return(0,o.sV)(()=>{console.log("onMounted message"),window.addEventListener("message",n,!1)}),(0,o.hi)(()=>{console.log("onUnmounted message"),window.removeEventListener("message",n)}),{thirdParams:t,onCloseThirdDialog:r}},n=()=>{let e;const a=(0,r.lq)(),t=()=>{window.parent&&window.parent.postMessage({type:"refreshToken"},"*")};-1!==a.path.indexOf("/thirdParty/")&&((0,o.sV)(()=>{(0,l.R7)()&&(e=setInterval(()=>{console.log("refreshToken thirdParty"),t()},18e4))}),(0,o.hi)(()=>{e&&clearInterval(e)}))}}}]);