"use strict";(self["webpackChunkorange"]=self["webpackChunkorange"]||[]).push([[1066,2044],{71066:function(e,a,l){l.d(a,{P:function(){return n},i:function(){return i}});var t=l(81387),r=l(27007),o=l(56768),s=l(90144);const n=e=>{console.log("接收到的第三方参数",e);const a=(0,s.KR)(0),l=(0,o.EW)(()=>{let a={};try{e.thirdParamsString&&(a=JSON.parse(e.thirdParamsString))}catch(l){console.log(l),a={}}return a});console.log("thirdParams",l);const t=(t,r,o)=>{console.log("onCloseThirdDialog",r,o),window.parent&&window.parent.postMessage({type:"closeDialog",data:{index:a.value,dialogKey:e.dialogKey,path:l.value.path,rowData:r?JSON.parse(JSON.stringify(r)):void 0,data:o?JSON.parse(JSON.stringify(o)):void 0,isSuccess:t}},"*")},n=(e,l)=>{switch(e){case"setToken":l.token&&(0,r.WG)(l.token);break;case"dialogIndex":a.value=l;break;case"refreshData":break;case"message":break}},i=e=>{n(e.data.type,e.data.data)};return(0,o.sV)(()=>{console.log("onMounted message"),window.addEventListener("message",i,!1)}),(0,o.hi)(()=>{console.log("onUnmounted message"),window.removeEventListener("message",i)}),{thirdParams:l,onCloseThirdDialog:t}},i=()=>{let e;const a=(0,t.lq)(),l=()=>{window.parent&&window.parent.postMessage({type:"refreshToken"},"*")};-1!==a.path.indexOf("/thirdParty/")&&((0,o.sV)(()=>{(0,r.R7)()&&(e=setInterval(()=>{console.log("refreshToken thirdParty"),l()},18e4))}),(0,o.hi)(()=>{e&&clearInterval(e)}))}},92044:function(e,a,l){l.r(a),l.d(a,{default:function(){return v}});var t=l(25136),r=(l(97042),l(69957),l(21929)),o=(l(98421),l(65451)),s=(l(63390),l(76408)),n=(l(87535),l(32465),l(14022)),i=(l(72343),l(56768)),d=l(90144),u=l(45130),g=l(71066),m=l(82572);const c={class:"form-single-fragment third-party-dlg",style:{position:"relative"}};var b=(0,i.pM)({__name:"editOnlineTabPanel",props:{rowData:{},tabPanelList:{},dialog:{},thirdParamsString:{},dialogKey:{}},setup(e){const a=(0,m.l5)(),l=e,b=(0,i.EW)(()=>a.defaultFormItemSize||p.value.defaultFormItemSize?.value),{thirdParams:p,onCloseThirdDialog:v}=(0,g.P)(l),f=(0,d.KR)(),h=(0,d.KR)({showName:void 0,variableName:void 0}),w=(0,i.EW)(()=>({rowData:l.rowData||p.value.rowData,tabPanelList:l.tabPanelList||p.value.tabPanelList}));const k=(e,a,l)=>{Array.isArray(w.value.tabPanelList)&&-1!==w.value.tabPanelList.indexOf(a)?l(new Error("标签页标识不能重复")):l()},y={showName:[{required:!0,message:"标签页显示名不能为空",trigger:"blur"}],variableName:[{required:!0,message:"标签页标识不能为空",trigger:"blur"},{validator:k,trigger:"blur"}]},P=()=>{l.dialog?l.dialog.cancel():v(!1)},_=()=>{f.value.validate(e=>{e&&(l.dialog?l.dialog.submit(h.value):v(!0,w.value.rowData,h.value))})};return(0,i.sV)(()=>{w.value.rowData&&(h.value={...h.value,...w.value.rowData})}),(e,a)=>{const l=n.WK,g=r.xE,m=s.uD,p=o.S2,v=r.US,w=t.S2;return(0,i.uX)(),(0,i.CE)("div",c,[(0,i.bF)(v,{ref_key:"form",ref:f,model:(0,d.R1)(h),class:"full-width-input form-box",rules:y,style:{width:"100%"},"label-width":"100px",size:(0,d.R1)(b),"label-position":"right",onSubmit:a[2]||(a[2]=(0,u.D$)(()=>{},["prevent"]))},{default:(0,i.k6)(()=>[(0,i.bF)(p,null,{default:(0,i.k6)(()=>[(0,i.bF)(m,{span:24},{default:(0,i.k6)(()=>[(0,i.bF)(g,{label:"标签显示名",prop:"showName"},{default:(0,i.k6)(()=>[(0,i.bF)(l,{modelValue:(0,d.R1)(h).showName,"onUpdate:modelValue":a[0]||(a[0]=e=>(0,d.R1)(h).showName=e),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),(0,i.bF)(m,{span:24},{default:(0,i.k6)(()=>[(0,i.bF)(g,{label:"标签标识",prop:"variableName"},{default:(0,i.k6)(()=>[(0,i.bF)(l,{modelValue:(0,d.R1)(h).variableName,"onUpdate:modelValue":a[1]||(a[1]=e=>(0,d.R1)(h).variableName=e),clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","size"]),(0,i.bF)(p,{class:"no-scroll menu-box",type:"flex",justify:"end"},{default:(0,i.k6)(()=>[(0,i.bF)(w,{size:(0,d.R1)(b),plain:!0,onClick:P},{default:(0,i.k6)(()=>a[3]||(a[3]=[(0,i.eW)(" 取消 ")])),_:1,__:[3]},8,["size"]),(0,i.bF)(w,{type:"primary",size:(0,d.R1)(b),onClick:_},{default:(0,i.k6)(()=>a[4]||(a[4]=[(0,i.eW)(" 保存 ")])),_:1,__:[4]},8,["size"])]),_:1})])}}});const p=b;var v=p}}]);