"use strict";(self["webpackChunkorange"]=self["webpackChunkorange"]||[]).push([[1066,1658],{3829:function(e,t,a){a.d(t,{x:function(){return i},z:function(){return r}});var n=a(47378),o=a(1211);const r=(0,n.b_)({type:{type:String,values:["primary","success","info","warning","danger"],default:"primary"},closable:Boolean,disableTransitions:Boolean,hit:Boolean,color:String,size:{type:String,values:o.I},effect:{type:String,values:["dark","light","plain"],default:"light"},round:Boolean}),i={close:e=>e instanceof MouseEvent,click:e=>e instanceof MouseEvent}},6301:function(e,t,a){a.d(t,{A:function(){return c}});var n=a(60168),o=a(39578),r=function(){return o.A.Date.now()},i=r,l=a(10754),u="Expected a function",s=Math.max,d=Math.min;function p(e,t,a){var o,r,p,c,g,f,v=0,m=!1,b=!1,h=!0;if("function"!=typeof e)throw new TypeError(u);function k(t){var a=o,n=r;return o=r=void 0,v=t,c=e.apply(n,a),c}function I(e){return v=e,g=setTimeout(C,t),m?k(e):c}function y(e){var a=e-f,n=e-v,o=t-a;return b?d(o,p-n):o}function R(e){var a=e-f,n=e-v;return void 0===f||a>=t||a<0||b&&n>=p}function C(){var e=i();if(R(e))return w(e);g=setTimeout(C,y(e))}function w(e){return g=void 0,h&&o?k(e):(o=r=void 0,c)}function P(){void 0!==g&&clearTimeout(g),v=0,o=f=r=g=void 0}function M(){return void 0===g?c:w(i())}function _(){var e=i(),a=R(e);if(o=arguments,r=this,f=e,a){if(void 0===g)return I(f);if(b)return clearTimeout(g),g=setTimeout(C,t),k(f)}return void 0===g&&(g=setTimeout(C,t)),c}return t=(0,l.A)(t)||0,(0,n.A)(a)&&(m=!!a.leading,b="maxWait"in a,p=b?s((0,l.A)(a.maxWait)||0,t):p,h="trailing"in a?!!a.trailing:h),_.cancel=P,_.flush=M,_}var c=p},10754:function(e,t,a){a.d(t,{A:function(){return b}});var n=/\s/;function o(e){var t=e.length;while(t--&&n.test(e.charAt(t)));return t}var r=o,i=/^\s+/;function l(e){return e?e.slice(0,r(e)+1).replace(i,""):e}var u=l,s=a(60168),d=a(18095),p=NaN,c=/^[-+]0x[0-9a-f]+$/i,g=/^0b[01]+$/i,f=/^0o[0-7]+$/i,v=parseInt;function m(e){if("number"==typeof e)return e;if((0,d.A)(e))return p;if((0,s.A)(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=(0,s.A)(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=u(e);var a=g.test(e);return a||f.test(e)?v(e.slice(2),a?2:8):c.test(e)?p:+e}var b=m},11977:function(e,t,a){a.r(t),a.d(t,{default:function(){return y}});var n=a(25136),o=(a(97042),a(69957),a(21929)),r=(a(98421),a(65451)),i=(a(63390),a(14022)),l=(a(72343),a(76408)),u=(a(87535),a(32465),a(18888)),s=(a(3172),a(56768)),d=a(90144),p=a(45130),c=a(26695),g=a(27007),f=a(34894),v=a(99080),m=a(71066),b=a(82572);const h={class:"form-single-fragment third-party-dlg",style:{position:"relative"}};var k=(0,s.pM)({__name:"editPrintManageGroup",props:{groupId:{},groupList:{},defaultFormItemSize:{},dialog:{},thirdParamsString:{},dialogKey:{}},setup(e){const t=(0,b.l5)(),a=e,k=(0,s.EW)(()=>t.defaultFormItemSize||I.value.defaultFormItemSize?.value),{thirdParams:I,onCloseThirdDialog:y}=(0,m.P)(a),R=(0,d.KR)(),C=(0,d.KR)({ReportPrintManageGroup:{groupId:void 0,groupName:void 0,parentId:void 0,isDatasourceInit:!1}}),w={"ReportPrintManageGroup.groupName":[{required:!0,message:"请输入分组名称",trigger:"blur"}]},P=(0,s.EW)(()=>null!=M.value.groupId),M=(0,s.EW)(()=>({groupId:a.groupId||I.value.groupId,groupList:a.groupList||I.value.groupList||[]})),_=()=>Promise.resolve({dataList:M.value.groupList}),S={loadData:_,isTree:!0},T=(0,d.Kh)({formFilter:{},formFilterCopy:{},menuBlock:{isInit:!1},parentId:{impl:(0,v.B)(S),value:[]},isInit:!1}),F=()=>{a.dialog?a.dialog.cancel():y(!1)},D=()=>{R.value.validate(e=>{if(!e)return;let t={reportPrintGroupDto:{groupId:M.value.groupId,groupName:C.value.ReportPrintManageGroup.groupName,parentId:C.value.ReportPrintManageGroup.parentId,appId:C.value.ReportPrintManageGroup.appId}},n=P.value?f.b$.update(t):f.b$.add(t);n.then(()=>{c.nk.success("保存成功"),a.dialog?a.dialog.submit(!0):y(!0)}).catch(e=>{console.warn(e)})})},G=e=>{C.value.ReportPrintManageGroup.parentId=Array.isArray(e)?e[e.length-1]:void 0},x=()=>{N().then(()=>{T.isInit||T.parentId.impl.onVisibleChange(!0).then(e=>{T.parentId.value=(0,g.Zi)(e,C.value.ReportPrintManageGroup.parentId,"groupId")}).catch(e=>{console.warn(e)}),T.isInit=!0}).catch(e=>{console.warn(e)})},N=()=>new Promise((e,t)=>{if(!C.value.ReportPrintManageGroup.isDatasourceInit&&P.value){if(null==M.value.groupId)return E(),void t();let a={groupId:M.value.groupId};f.b$.view(a).then(t=>{C.value.ReportPrintManageGroup={...t.data,isDatasourceInit:!0},e(!0)}).catch(e=>{t(e)})}else C.value.CourseSection&&(C.value.CourseSection.isDatasourceInit=!0),e(!0)}),E=()=>{C.value={ReportPrintManageGroup:{groupId:void 0,groupName:void 0,parentId:void 0,isDatasourceInit:!1}}},V=()=>{x()};return(0,s.sV)(()=>{V()}),(e,t)=>{const a=u._m,c=o.xE,g=l.uD,f=i.WK,v=r.S2,m=o.US,b=n.S2;return(0,s.uX)(),(0,s.CE)("div",h,[(0,s.bF)(m,{ref_key:"form",ref:R,model:(0,d.R1)(C),class:"full-width-input form-box",rules:w,style:{width:"100%"},"label-width":"100px",size:(0,d.R1)(k),"label-position":"right",onSubmit:t[2]||(t[2]=(0,p.D$)(()=>{},["prevent"]))},{default:(0,s.k6)(()=>[(0,s.bF)(v,{gutter:20},{default:(0,s.k6)(()=>[(0,s.bF)(g,{span:24},{default:(0,s.k6)(()=>[(0,s.bF)(c,{label:"所属分组"},{default:(0,s.k6)(()=>[(0,s.bF)(a,{class:"input-item",modelValue:(0,d.R1)(T).parentId.value,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,d.R1)(T).parentId.value=e),disabled:(0,d.R1)(P),options:(0,d.R1)(T).parentId.impl.dropdownList,filterable:"",clearable:!0,"show-all-levels":!1,placeholder:"所属分组",props:{value:"groupId",label:"groupName",checkStrictly:!0},onVisibleChange:(0,d.R1)(T).parentId.impl.onVisibleChange,onChange:G},null,8,["modelValue","disabled","options","onVisibleChange"])]),_:1})]),_:1}),(0,s.bF)(g,{span:24},{default:(0,s.k6)(()=>[(0,s.bF)(c,{label:"分组名称",prop:"ReportPrintManageGroup.groupName"},{default:(0,s.k6)(()=>[(0,s.bF)(f,{class:"input-item",modelValue:(0,d.R1)(C).ReportPrintManageGroup.groupName,"onUpdate:modelValue":t[1]||(t[1]=e=>(0,d.R1)(C).ReportPrintManageGroup.groupName=e),clearable:!0,placeholder:"分组名称"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","size"]),(0,s.bF)(v,{class:"menu-box"},{default:(0,s.k6)(()=>[(0,s.bF)(g,{span:24},{default:(0,s.k6)(()=>[(0,s.bF)(v,{class:"no-scroll flex-box",type:"flex",justify:"end"},{default:(0,s.k6)(()=>[(0,s.bF)(b,{size:(0,d.R1)(k),plain:!0,onClick:F},{default:(0,s.k6)(()=>t[4]||(t[4]=[(0,s.eW)(" 取消 ")])),_:1,__:[4]},8,["size"]),(0,s.bF)(b,{type:"primary",size:(0,d.R1)(k),onClick:t[3]||(t[3]=e=>D())},{default:(0,s.k6)(()=>t[5]||(t[5]=[(0,s.eW)(" 保存 ")])),_:1,__:[5]},8,["size"])]),_:1})]),_:1})]),_:1})])}}});const I=k;var y=I},12687:function(e,t,a){a.d(t,{u:function(){return b}});var n=a(56768),o=a(24232),r=a(90144),i=a(45130),l=a(91542),u=a(57477),s=a(3829),d=a(99077),p=a(37207),c=a(93513);const g=(0,n.pM)({name:"ElTag"}),f=(0,n.pM)({...g,props:s.z,emits:s.x,setup(e,{emit:t}){const a=e,s=(0,p.NV)(),d=(0,c.DU)("tag"),g=(0,n.EW)(()=>{const{type:e,hit:t,effect:n,closable:o,round:r}=a;return[d.b(),d.is("closable",o),d.m(e||"primary"),d.m(s.value),d.m(n),d.is("hit",t),d.is("round",r)]}),f=e=>{t("close",e)},v=e=>{t("click",e)},m=e=>{var t,a,n;(null==(n=null==(a=null==(t=null==e?void 0:e.component)?void 0:t.subTree)?void 0:a.component)?void 0:n.bum)&&(e.component.subTree.component.bum=null)};return(e,t)=>e.disableTransitions?((0,n.uX)(),(0,n.CE)("span",{key:0,class:(0,o.C4)((0,r.R1)(g)),style:(0,o.Tr)({backgroundColor:e.color}),onClick:v},[(0,n.Lk)("span",{class:(0,o.C4)((0,r.R1)(d).e("content"))},[(0,n.RG)(e.$slots,"default")],2),e.closable?((0,n.uX)(),(0,n.Wv)((0,r.R1)(l.tk),{key:0,class:(0,o.C4)((0,r.R1)(d).e("close")),onClick:(0,i.D$)(f,["stop"])},{default:(0,n.k6)(()=>[(0,n.bF)((0,r.R1)(u.Close))]),_:1},8,["class","onClick"])):(0,n.Q3)("v-if",!0)],6)):((0,n.uX)(),(0,n.Wv)(i.eB,{key:1,name:`${(0,r.R1)(d).namespace.value}-zoom-in-center`,appear:"",onVnodeMounted:m},{default:(0,n.k6)(()=>[(0,n.Lk)("span",{class:(0,o.C4)((0,r.R1)(g)),style:(0,o.Tr)({backgroundColor:e.color}),onClick:v},[(0,n.Lk)("span",{class:(0,o.C4)((0,r.R1)(d).e("content"))},[(0,n.RG)(e.$slots,"default")],2),e.closable?((0,n.uX)(),(0,n.Wv)((0,r.R1)(l.tk),{key:0,class:(0,o.C4)((0,r.R1)(d).e("close")),onClick:(0,i.D$)(f,["stop"])},{default:(0,n.k6)(()=>[(0,n.bF)((0,r.R1)(u.Close))]),_:1},8,["class","onClick"])):(0,n.Q3)("v-if",!0)],6)]),_:3},8,["name"]))}});var v=(0,d.A)(f,[["__file","tag.vue"]]),m=a(25376);const b=(0,m.GU)(v)},31112:function(e,t,a){a(97042)},71066:function(e,t,a){a.d(t,{P:function(){return l},i:function(){return u}});var n=a(81387),o=a(27007),r=a(56768),i=a(90144);const l=e=>{console.log("接收到的第三方参数",e);const t=(0,i.KR)(0),a=(0,r.EW)(()=>{let t={};try{e.thirdParamsString&&(t=JSON.parse(e.thirdParamsString))}catch(a){console.log(a),t={}}return t});console.log("thirdParams",a);const n=(n,o,r)=>{console.log("onCloseThirdDialog",o,r),window.parent&&window.parent.postMessage({type:"closeDialog",data:{index:t.value,dialogKey:e.dialogKey,path:a.value.path,rowData:o?JSON.parse(JSON.stringify(o)):void 0,data:r?JSON.parse(JSON.stringify(r)):void 0,isSuccess:n}},"*")},l=(e,a)=>{switch(e){case"setToken":a.token&&(0,o.WG)(a.token);break;case"dialogIndex":t.value=a;break;case"refreshData":break;case"message":break}},u=e=>{l(e.data.type,e.data.data)};return(0,r.sV)(()=>{console.log("onMounted message"),window.addEventListener("message",u,!1)}),(0,r.hi)(()=>{console.log("onUnmounted message"),window.removeEventListener("message",u)}),{thirdParams:a,onCloseThirdDialog:n}},u=()=>{let e;const t=(0,n.lq)(),a=()=>{window.parent&&window.parent.postMessage({type:"refreshToken"},"*")};-1!==t.path.indexOf("/thirdParty/")&&((0,r.sV)(()=>{(0,o.R7)()&&(e=setInterval(()=>{console.log("refreshToken thirdParty"),a()},18e4))}),(0,r.hi)(()=>{e&&clearInterval(e)}))}}}]);