"use strict";(self["webpackChunkorange"]=self["webpackChunkorange"]||[]).push([[1066,5694,6339,8720],{61473:function(e,a,l){e.exports=l.p+"img/empty.7e47f88a.png"},71066:function(e,a,l){l.d(a,{P:function(){return d},i:function(){return u}});var t=l(81387),r=l(27007),i=l(56768),o=l(90144);const d=e=>{console.log("接收到的第三方参数",e);const a=(0,o.KR)(0),l=(0,i.EW)(()=>{let a={};try{e.thirdParamsString&&(a=JSON.parse(e.thirdParamsString))}catch(l){console.log(l),a={}}return a});console.log("thirdParams",l);const t=(t,r,i)=>{console.log("onCloseThirdDialog",r,i),window.parent&&window.parent.postMessage({type:"closeDialog",data:{index:a.value,dialogKey:e.dialogKey,path:l.value.path,rowData:r?JSON.parse(JSON.stringify(r)):void 0,data:i?JSON.parse(JSON.stringify(i)):void 0,isSuccess:t}},"*")},d=(e,l)=>{switch(e){case"setToken":l.token&&(0,r.WG)(l.token);break;case"dialogIndex":a.value=l;break;case"refreshData":break;case"message":break}},u=e=>{d(e.data.type,e.data.data)};return(0,i.sV)(()=>{console.log("onMounted message"),window.addEventListener("message",u,!1)}),(0,i.hi)(()=>{console.log("onUnmounted message"),window.removeEventListener("message",u)}),{thirdParams:l,onCloseThirdDialog:t}},u=()=>{let e;const a=(0,t.lq)(),l=()=>{window.parent&&window.parent.postMessage({type:"refreshToken"},"*")};-1!==a.path.indexOf("/thirdParty/")&&((0,i.sV)(()=>{(0,r.R7)()&&(e=setInterval(()=>{console.log("refreshToken thirdParty"),l()},18e4))}),(0,i.hi)(()=>{e&&clearInterval(e)}))}},76010:function(e,a,l){l.d(a,{Am:function(){return r},bg:function(){return i}});l(17642),l(58004),l(33853),l(45876),l(32475),l(15024),l(31698);var t=l(24232);const r=e=>[...new Set(e)],i=e=>e||0===e?(0,t.cy)(e)?e:[e]:[]},85501:function(e,a,l){l.r(a),l.d(a,{default:function(){return T}});var t=l(65451),r=(l(97042),l(63390),l(25136)),i=(l(69957),l(76408)),o=(l(87535),l(88284)),d=(l(36715),l(77649)),u=(l(87603),l(14022)),s=(l(72343),l(85415)),n=(l(22243),l(7409),l(18111),l(22489),l(61701),l(56768)),m=l(90144),p=l(61473),f=l(99540),V=l(27007),g=l(92380),c=l(71066),y=l(82572);const w={class:"set-dataset-param third-party-dlg"};var v=(0,n.pM)({__name:"index",props:{datasetParamList:{},datasetFilterParams:{},formParamList:{},widgetList:{},validFilterValueType:{},dialog:{},thirdParamsString:{},dialogKey:{}},setup(e){const a=(0,y.l5)(),l=e,v=(0,n.EW)(()=>a.defaultFormItemSize),{thirdParams:h,onCloseThirdDialog:T}=(0,c.P)(l),k=(0,n.EW)(()=>({datasetParamList:l.datasetParamList||h.value.datasetParamList||[],widgetList:l.widgetList||h.value.widgetList||[],datasetFilterParams:l.datasetFilterParams||h.value.datasetFilterParams||[],formParamList:l.formParamList||h.value.formParamList||[],validFilterValueType:l.validFilterValueType||h.value.validFilterValueType||[]})),P=(0,n.EW)(()=>k.value.datasetParamList.map(e=>{let a=(0,V.PH)(k.value.datasetFilterParams,e.paramName,"paramName")||{};return{...e,filterValueType:a.filterValueType||g.FilterValueKind.INPUT_DATA,paramValue:a.paramValue,formWidgetId:a.formWidgetId}})),F=()=>{l.dialog?l.dialog.cancel():T(!1)},b=()=>{let e=P.value.filter(e=>e.filterValueType!==g.FilterValueKind.WIDGET_DATA?null!=e.paramValue:null!=e.formWidgetId);l.dialog?l.dialog.submit(e):T(!0,null,e)},W=e=>{e.paramValue=void 0,e.formWidgetId=void 0};return(e,a)=>{const l=s.P9,V=s.AV,c=u.WK,y=d.lq,h=o.MG,T=i.uD,R=r.S2,_=t.S2;return(0,n.uX)(),(0,n.CE)("div",w,[(0,n.bF)(T,{class:"form-box",span:24},{default:(0,n.k6)(()=>[(0,n.bF)((0,m.R1)(f.CP),{data:(0,m.R1)(P),size:(0,m.R1)(v),"row-config":{isHover:!0},"header-cell-class-name":"table-header-gray",height:"100%"},{empty:(0,n.k6)(()=>a[0]||(a[0]=[(0,n.Lk)("div",{class:"table-empty unified-font"},[(0,n.Lk)("img",{src:p}),(0,n.Lk)("span",null,"暂无数据")],-1)])),default:(0,n.k6)(()=>[(0,n.bF)((0,m.R1)(f.Wq),{type:"seq",width:"55px",title:"序号"}),(0,n.bF)((0,m.R1)(f.Wq),{title:"参数名称",field:"paramName",width:"200px"}),(0,n.bF)((0,m.R1)(f.Wq),{title:"参数值类型",field:"filterValueType",width:"200px"},{default:(0,n.k6)(e=>[(0,n.bF)(V,{modelValue:e.row.filterValueType,"onUpdate:modelValue":a=>e.row.filterValueType=a,placeholder:"",size:"default",onChange:a=>W(e.row)},{default:(0,n.k6)(()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)((0,m.R1)(k).validFilterValueType,e=>((0,n.uX)(),(0,n.Wv)(l,{key:e,label:(0,m.R1)(g.FilterValueKind).getValue(e),value:e},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),(0,n.bF)((0,m.R1)(f.Wq),{title:"参数值",field:"paramValue"},{default:(0,n.k6)(e=>["String"===e.row.paramType&&e.row.filterValueType===(0,m.R1)(g.FilterValueKind).INPUT_DATA?((0,n.uX)(),(0,n.Wv)(c,{key:0,modelValue:e.row.paramValue,"onUpdate:modelValue":a=>e.row.paramValue=a,size:"default",style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue"])):(0,n.Q3)("",!0),"Number"===e.row.paramType&&e.row.filterValueType===(0,m.R1)(g.FilterValueKind).INPUT_DATA?((0,n.uX)(),(0,n.Wv)(y,{key:1,modelValue:e.row.paramValue,"onUpdate:modelValue":a=>e.row.paramValue=a,size:"default",style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue"])):(0,n.Q3)("",!0),"Date"===e.row.paramType&&e.row.filterValueType===(0,m.R1)(g.FilterValueKind).INPUT_DATA?((0,n.uX)(),(0,n.Wv)(h,{key:2,type:"datetime",modelValue:e.row.paramValue,"onUpdate:modelValue":a=>e.row.paramValue=a,size:"default",style:{width:"100%"},"value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","onUpdate:modelValue"])):(0,n.Q3)("",!0),e.row.filterValueType===(0,m.R1)(g.FilterValueKind).WIDGET_DATA?((0,n.uX)(),(0,n.Wv)(V,{modelValue:e.row.formWidgetId,"onUpdate:modelValue":a=>e.row.formWidgetId=a,key:"formWidgetId",style:{width:"100%"},size:"default",clearable:"",placeholder:""},{default:(0,n.k6)(()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)((0,m.R1)(k).widgetList,e=>((0,n.uX)(),(0,n.Wv)(l,{key:e.widgetId,label:e.showName,value:e.widgetId},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):(0,n.Q3)("",!0),e.row.filterValueType===(0,m.R1)(g.FilterValueKind).PRINT_INPUT_PARAM||e.row.filterValueType===(0,m.R1)(g.FilterValueKind).FORM_PARAM?((0,n.uX)(),(0,n.Wv)(V,{key:4,modelValue:e.row.paramValue,"onUpdate:modelValue":a=>e.row.paramValue=a,style:{width:"100%"},size:"default",clearable:"",placeholder:""},{default:(0,n.k6)(()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)((0,m.R1)(k).formParamList,e=>((0,n.uX)(),(0,n.Wv)(l,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):(0,n.Q3)("",!0)]),_:1})]),_:1},8,["data","size"])]),_:1}),(0,n.bF)(_,{class:"no-scroll menu-box",type:"flex",justify:"end",style:{"margin-top":"15px"}},{default:(0,n.k6)(()=>[(0,n.bF)(R,{size:(0,m.R1)(v),plain:!0,onClick:F},{default:(0,n.k6)(()=>a[1]||(a[1]=[(0,n.eW)(" 取消 ")])),_:1,__:[1]},8,["size"]),(0,n.bF)(R,{type:"primary",size:(0,m.R1)(v),onClick:b},{default:(0,n.k6)(()=>a[2]||(a[2]=[(0,n.eW)(" 保存 ")])),_:1,__:[2]},8,["size"])]),_:1})])}}});const h=v;var T=h}}]);