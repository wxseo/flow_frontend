"use strict";(self["webpackChunkorange"]=self["webpackChunkorange"]||[]).push([[467,9116],{4178:function(e,l,a){a.r(l),a.d(l,{default:function(){return ot}});var t=a(54880),u=(a(97042),a(51582),a(60713),a(21929)),o=(a(98421),a(14022)),i=(a(72343),a(76408)),d=(a(87535),a(32465),a(18888)),n=(a(3172),a(69225),a(65451)),r=(a(63390),a(25136)),s=(a(69957),a(18111),a(7588),a(61701),a(18237),a(56768)),m=a(90144),p=a(24232),v=a(45130),c=a(26695),b=a(57632),f=a(85285),g=a(27007),y=a(34894),h=a(54428),R=a(71066),V=a(82572);const k={pc:{gutter:20,labelWidth:100,labelPosition:"left",customFieldList:[],widgetList:[],paramList:[],formEventList:[]},mobile:{customFieldList:[],widgetList:[],paramList:[],formEventList:[]}};function _(){return JSON.parse(JSON.stringify(k))}var C=a(77195),w=(a(38389),a(61688),a(3155)),F=(a(87199),a(80434),a(38840)),W=(a(95304),a(2403)),I=(a(63266),a(44114),a(57477)),T=a(164),L=a(37972),x=a(65546),S=(a(51216),a(85415)),D=(a(22243),a(7409),a(15836)),E=(a(95815),a(17851)),A=(a(68489),a(20709),a(77649)),N=(a(87603),a(21016)),U=(a(22489),a(63019)),P=a(31372),X=a(36570),K=(0,s.pM)({__name:"index",props:{value:{}},emits:["update:value"],setup(e,{emit:l}){const a=l,t=e,u=(0,s.WQ)("formConfig",()=>(console.error("OnlineTableColumnSetting: formConfig not injected"),{})),o=e=>{a("update:value",e)},i=(e,l)=>{let u=[];null==e?(u=t.value||[],u.push(l)):u=(t.value||[]).map(e=>e.columnId===l.columnId?l:e),a("update:value",u)},d=(e=null)=>{let l=u().getTableWidgetTableList;u().form.formType!==N.SysOnlineFormType.QUERY&&(l=(l||[]).filter(e=>e.tableId===u().currentWidget.bindData.tableId)),P.l.show(e?"编辑字段":"添加字段",X["default"],{area:"600px"},{rowData:e,tableList:l,usedColumnList:t.value.map(e=>e.columnId)}).then(l=>{i(e,l)}).catch(e=>{console.warn(e)})},n=e=>{T.s.confirm("是否删除此表格列？","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{a("update:value",(t.value||[]).filter(l=>l!==e))}).catch(e=>{console.warn(e)})};return(e,l)=>((0,s.uX)(),(0,s.Wv)(U.A,{data:e.value,label:"表格字段",supportSort:!0,onAdd:l[0]||(l[0]=e=>d()),onEdit:d,onDelete:n,"onUpdate:data":o,prop:{label:"showName",value:"columnId"}},null,8,["data"]))}});const z=K;var Q=z,B=a(85676),O=a(41405),M=a(76105),G=(0,s.pM)({__name:"editWidgetAttribute",props:{value:{type:[String,Number,Boolean,Object,null]},attributeItem:{}},emits:["update:value","input","change"],setup(e,{emit:l}){const a={OnlineTableColumnSetting:Q,CustomWidgetDictSetting:B.A,OnlineTabPanelSetting:O.A,OnlineImageUrlInput:M.A},t=l,i=e;console.log(">>> >>> attributeItem",i.attributeItem);const d=(0,s.WQ)("formConfig",()=>(console.error("editWidgetAttribute: formConfig not injected"),{})),r=(0,m.KR)([]),v=(0,m.KR)({}),c=(0,s.EW)({get(){return console.log("get val",i.value),i.value},set(e){console.log("val change",e),k(e)}}),b=(0,s.EW)({get(){return console.log("get val as string",i.value),i.value},set(e){console.log("val change str",e),k(e)}}),f=(0,s.EW)({get(){return console.log("get val as boolean",i.value,typeof i.value),i.value},set(e){console.log("val change boolean",e),k(e)}}),y=(0,s.EW)({get(){return console.log("get val as number",i.value),i.value},set(e){console.log("val change number",e),k(e)}}),h=(0,s.EW)(()=>d().currentWidget),R=(0,s.EW)(()=>i.attributeItem.widgetType),V=(0,s.EW)(()=>{if(null==h.value)return!1;let e=-1!==[N.SysCustomWidgetType.Select,N.SysCustomWidgetType.Cascader,N.SysCustomWidgetType.Radio,N.SysCustomWidgetType.CheckBox].indexOf(h.value.widgetType);return e&&h.value&&"dictId"===i.attributeItem.attributeKey}),k=e=>{V.value&&(console.log("isWidgetDictSelect",V.value),h.value.dictInfo=(0,g.PH)(d().dictList,e,"id"),console.log("currentWidget.dictInfo",h.value.dictInfo)),console.log("onValueChange val",e,typeof e),t("update:value",e),i.attributeItem.customComponent&&t("change")},_=()=>{r.value=[],"function"===typeof i.attributeItem.dropdownList?V.value?r.value=i.attributeItem.dropdownList(d()):r.value=i.attributeItem.dropdownList():r.value=Array.isArray(i.attributeItem.dropdownList)?i.attributeItem.dropdownList:[],1===(r.value||[]).length&&k(r.value[0].id)},C=()=>{let e={};e=i.attributeItem.customComponent?i.attributeItem.customComponent.props||{}:i.attributeItem.props||{},e.disabled=i.attributeItem.disabled||e.disabled,v.value=Object.keys(e).reduce((l,a)=>{let t=e[a];return"function"===typeof t&&(t=t(d())),l[a]=t,l},{})};return(0,s.wB)(()=>i.value,()=>{console.log("..........",i.value)},{immediate:!0}),(0,s.wB)(()=>i.attributeItem,()=>{_()},{immediate:!0,deep:!0}),(0,s.wB)(()=>h.value,()=>{_(),C()},{deep:!0,immediate:!0}),(e,l)=>{const t=o.WK,i=A.lq,d=n.S2,g=E.Zh,h=E.MQ,V=D.B8,_=S.P9,C=S.AV,w=x.rF,F=u.xE;return(0,s.uX)(),(0,s.Wv)(F,{label:e.attributeItem.name,class:"widget-attribute-item"},{default:(0,s.k6)(()=>[(0,m.R1)(R)===(0,m.R1)(N.SysCustomWidgetType).Input?((0,s.uX)(),(0,s.Wv)(t,(0,s.v6)({key:0,style:{width:"100%"},clearable:"",modelValue:(0,m.R1)(b),"onUpdate:modelValue":l[0]||(l[0]=e=>(0,m.i9)(b)?b.value=e:null),onInput:k},(0,m.R1)(v),{onChange:l[1]||(l[1]=l=>e.$emit("change"))}),null,16,["modelValue"])):(0,s.Q3)("",!0),(0,m.R1)(R)===(0,m.R1)(N.SysCustomWidgetType).NumberInput?((0,s.uX)(),(0,s.Wv)(d,{key:1},{default:(0,s.k6)(()=>[(0,s.bF)(i,(0,s.v6)({clearable:"",style:{width:"100%"},"controls-position":"right",min:e.attributeItem.min,max:e.attributeItem.max,modelValue:(0,m.R1)(y),"onUpdate:modelValue":l[2]||(l[2]=e=>(0,m.i9)(y)?y.value=e:null),onInput:k},(0,m.R1)(v),{onChange:l[3]||(l[3]=l=>e.$emit("change"))}),null,16,["min","max","modelValue"])]),_:1})):(0,s.Q3)("",!0),(0,m.R1)(R)===(0,m.R1)(N.SysCustomWidgetType).Radio?((0,s.uX)(),(0,s.Wv)(d,{key:2,align:"middle"},{default:(0,s.k6)(()=>[(0,s.bF)(h,(0,s.v6)({size:"default",modelValue:(0,m.R1)(b),"onUpdate:modelValue":l[4]||(l[4]=e=>(0,m.i9)(b)?b.value=e:null)},(0,m.R1)(v),{onChange:k}),{default:(0,s.k6)(()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,m.R1)(r),e=>((0,s.uX)(),(0,s.Wv)(g,{key:e.id,value:e.id},{default:(0,s.k6)(()=>[(0,s.eW)((0,p.v_)(e.name),1)]),_:2},1032,["value"]))),128))]),_:1},16,["modelValue"])]),_:1})):(0,s.Q3)("",!0),(0,m.R1)(R)===(0,m.R1)(N.SysCustomWidgetType).Slider?((0,s.uX)(),(0,s.Wv)(V,(0,s.v6)({key:3,style:{width:"95%","margin-left":"5px"},min:e.attributeItem.min,max:e.attributeItem.max,modelValue:(0,m.R1)(y),"onUpdate:modelValue":l[5]||(l[5]=e=>(0,m.i9)(y)?y.value=e:null),onInput:k},(0,m.R1)(v)),null,16,["min","max","modelValue"])):(0,s.Q3)("",!0),(0,m.R1)(R)===(0,m.R1)(N.SysCustomWidgetType).Switch?((0,s.uX)(),(0,s.Wv)(d,{key:4,align:"middle",style:{width:"100%"}},{default:(0,s.k6)(()=>[(0,s.bF)(C,(0,s.v6)({style:{width:"100%"},modelValue:(0,m.R1)(f),"onUpdate:modelValue":l[6]||(l[6]=e=>(0,m.i9)(f)?f.value=e:null)},(0,m.R1)(v),{placeholder:"",onChange:k}),{default:(0,s.k6)(()=>[(0,s.bF)(_,{label:"是",value:!0}),(0,s.bF)(_,{label:"否",value:!1})]),_:1},16,["modelValue"])]),_:1})):(0,s.Q3)("",!0),(0,m.R1)(R)===(0,m.R1)(N.SysCustomWidgetType).Select?((0,s.uX)(),(0,s.Wv)(C,(0,s.v6)({key:5,style:{width:"100%"},clearable:"",modelValue:(0,m.R1)(y),"onUpdate:modelValue":l[7]||(l[7]=e=>(0,m.i9)(y)?y.value=e:null),onInput:k},(0,m.R1)(v),{placeholder:"",onChange:k}),{default:(0,s.k6)(()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,m.R1)(r),e=>((0,s.uX)(),(0,s.Wv)(_,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},16,["modelValue"])):(0,s.Q3)("",!0),(0,m.R1)(R)===(0,m.R1)(N.SysCustomWidgetType).ColorPicker?((0,s.uX)(),(0,s.Wv)(w,(0,s.v6)({key:6,size:"default",modelValue:(0,m.R1)(b),"onUpdate:modelValue":l[8]||(l[8]=e=>(0,m.i9)(b)?b.value=e:null)},(0,m.R1)(v),{onChange:k}),null,16,["modelValue"])):(0,s.Q3)("",!0),e.attributeItem.customComponent?((0,s.uX)(),(0,s.Wv)((0,s.$y)(a[e.attributeItem.customComponent.component]),(0,s.v6)({key:7,style:{width:"100%"}},(0,m.R1)(v),{value:(0,m.R1)(c),"onUpdate:value":l[9]||(l[9]=e=>(0,m.i9)(c)?c.value=e:null),onChange:k}),null,16,["value"])):(0,s.Q3)("",!0)]),_:1},8,["label"])}}}),j=a(71241);const q=(0,j.A)(G,[["__scopeId","data-v-12cdc5ec"]]);var H=q,$=(0,s.pM)({__name:"index",props:{value:{}},emits:["update:value"],setup(e,{emit:l}){const a=l,t=e,o=(0,s.WQ)("formConfig",()=>(console.error("AttributeForm: formConfig not injected"),{})),i=(0,m.KR)([]),d=(0,s.EW)({get(){return t.value||{}},set(e){console.log("AttributeForm value change",e),a("update:value",t.value)}}),n=(0,s.EW)(()=>o().currentWidget),r=(0,s.EW)(()=>(o().getWidgetAttribute(n.value?.widgetType)||{}).attribute),p=e=>"function"===typeof e?e(o()):e,c=()=>{const e=[];null!=r.value&&Object.keys(r.value).forEach(l=>{let a=r.value[l];if(null!=a){let t=Object.keys(a).reduce((e,l)=>(e[l]=p(a[l]),e),{attributeKey:l});(null==t.visible||t.visible)&&e.push(t)}}),console.log("AttributeForm attributeList",e),i.value=e};return(0,s.wB)(()=>n.value,()=>{c()},{immediate:!0}),(e,l)=>{const a=u.US;return(0,s.uX)(),(0,s.Wv)(a,{class:"custom-widget-attribute","label-position":"top","label-width":"115px",size:"default",onSubmit:l[0]||(l[0]=(0,v.D$)(()=>{},["prevent"]))},{default:(0,s.k6)(()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,m.R1)(i),e=>((0,s.uX)(),(0,s.Wv)(H,{key:e.attributeKey,value:(0,m.R1)(d)[e.attributeKey],"onUpdate:value":l=>(0,m.R1)(d)[e.attributeKey]=l,attributeItem:e},null,8,["value","onUpdate:value","attributeItem"]))),128))]),_:1})}}});const J=$;var Y=J,Z=a(92380),ee=a(85501),le=a(19875),ae=a(11001),te=a(57843),ue=a(15012),oe=a(20753),ie=a(84793),de=(0,s.pM)({__name:"editPropertyFieldBind",props:{value:{},label:{},dataset:{},validColumnList:{},fieldKey:{}},emits:["update:value"],setup(e,{emit:l}){const a=e,t=l,u=((0,V.l5)(),(0,s.EW)({get(){return a.value},set(e){t("update:value",e)}})),o=(e=null)=>{a.value&&Array.isArray(a.validColumnList)&&P.l.show("内容字段",oe["default"],{area:["600px"]},{dataset:a.dataset,rowData:e,columnList:Array.isArray(a.value)?d(a.value):[a.value],path:"editPropertyFieldBind/"+a.fieldKey},{width:"600px",height:"500px",pathName:"/thirdParty/thirdEditWidgetColumnBind"}).then(e=>{Array.isArray(a.value)?(e={columnId:e.columnId,columnName:e.columnName},t("update:value",[e])):t("update:value",e)}).catch(e=>{console.log(e)})},i=(e,l)=>{l&&Array.isArray(l)?T.s.confirm("是否删除当前列？","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{let a=l.findIndex(l=>l.columnId===e.columnId);l.splice(a,1)}).catch(e=>{console.warn(e)}):console.warn("columnList is not Array")},d=e=>a.validColumnList?.map(l=>{let a="Object"!==l.fieldType&&"Array"!==l.fieldType;return a=a&&-1!==e.map(e=>e.columnId).indexOf(l.columnId),{...l,disabled:a}}).sort((e,l)=>e.disabled?l.disabled?0:1:-1);return(e,l)=>((0,s.uX)(),(0,s.CE)("div",null,[(0,s.bF)(U.A,{data:(0,m.R1)(u),"onUpdate:data":l[0]||(l[0]=e=>(0,m.i9)(u)?u.value=e:null),disabled:!(0,m.R1)(u),supportSort:!0,maxCount:1,label:e.label,onAdd:l[1]||(l[1]=e=>o()),onEdit:o,onDelete:l[2]||(l[2]=l=>{i(l,e.value)}),prop:{label:function(e){return Array.isArray(e.columnName)?e.columnName.join(" / "):e.columnName},value:"columnId"}},null,8,["data","disabled","label","prop"])]))}});const ne=de;var re=ne;const se={key:0,style:{"margin-right":"5px","font-size":"12px",color:"#878d9f"}},me={key:0,class:"el-icon-sort-up",style:{"margin-right":"5px","font-size":"12px",color:"#878d9f"}},pe={key:1,class:"el-icon-sort-down",style:{"margin-right":"5px","font-size":"12px",color:"#878d9f"}},ve={style:{margin:"0 10px"}};var ce=(0,s.pM)({__name:"index",setup(e){(0,V.l5)();const l=(0,s.WQ)("formConfig",()=>(console.error("ChartDatasetSetting: formConfig not injected"),{})),a=(0,m.KR)(),t=(0,s.EW)(()=>l().currentWidget),o=(0,s.EW)(()=>t.value?(t.value.props||{}).datasetInfo:void 0),i=(0,s.EW)(()=>{if(o.value&&o.value.datasetId)return(0,g.Zi)(n.value,o.value.datasetId)}),n=(0,s.EW)(()=>l().reportDatasetTree),r=(0,s.EW)(()=>{if(null==t.value)return[];let e=(o.value.categroyColumnList||[]).map(e=>({id:e.columnId,columnId:e.columnId,showName:e.showName,isIndex:!1})).concat((o.value.valueColumnList||[]).map(e=>({id:e.id,showName:e.showName,columnId:e.columnId,calculateType:e.calculateType,isIndex:!0})));return e}),v=(0,s.EW)(()=>{if(!a.value||!Array.isArray(a.value?.columnList))return[];let e=-1!==[N.SysCustomWidgetType.PivotTable,N.SysCustomWidgetType.LineChart,N.SysCustomWidgetType.BarChart,N.SysCustomWidgetType.PieChart,N.SysCustomWidgetType.ScatterChart,N.SysCustomWidgetType.DataViewTable,N.SysCustomWidgetType.Carousel,N.SysCustomWidgetType.FunnelChart,N.SysCustomWidgetType.CommonList].indexOf(t.value.widgetType),l=[],u=[];a.value?.columnList.forEach(a=>{"Object"!==a.fieldType&&"Array"!==a.fieldType||(-1===u.indexOf(a.parentId)?e&&"Array"!==a.fieldType||(l.push(a),u.push(a.columnId)):u.push(a.columnId))});let o=[],i=[];return l.forEach(e=>{let l=e;do{-1===o.indexOf(l.columnId)&&(i.push({...l,children:void 0}),o.push(l.columnId)),l=(0,g.PH)(a.value?.columnList,l.parentId,"columnId")}while(null!=l)}),(0,g.BN)(i,"columnId")}),c=(0,s.EW)(()=>{if(!a.value)return[];if(a.value?.datasetType!==Z.DatasetType.API)return a.value?.columnList;{if(null==o.value.bindColumnId||""===o.value.bindColumnId)return[];let e=new Map,l=[],t=[];return(a.value?.columnList||[]).forEach(a=>{if(("Array"!==a.fieldType||a.columnId===o.value.bindColumnId)&&(-1!==l.indexOf(a.parentId)||a.columnId===o.value.bindColumnId)){l.push(a.columnId),"Object"!==a.fieldType||a.parentId===o.value.bindColumnId?t.push(a):e.set(a.columnId,a);let u=a;do{u=e.get(u.parentId),null!=u&&-1===t.indexOf(u)&&t.push(u)}while(null!=u)}}),t.length>1?t:[]}}),b=(0,s.EW)(()=>t.value.widgetType===N.SysCustomWidgetType.RadarChart?1:void 0),f=(0,s.EW)(()=>t.value.widgetType!==N.SysCustomWidgetType.PivotTable&&t.value.widgetType!==N.SysCustomWidgetType.DataViewTable&&t.value.widgetType!==N.SysCustomWidgetType.Carousel&&t.value.widgetType!==N.SysCustomWidgetType.RichText&&t.value.widgetType!==N.SysCustomWidgetType.CommonList&&t.value.widgetType!==N.SysCustomWidgetType.ProgressBar&&t.value.widgetType!==N.SysCustomWidgetType.ProgressCircle&&t.value.widgetType!==N.SysCustomWidgetType.DataCard&&t.value.widgetType!==N.SysCustomWidgetType.DataProgressCard),y=(0,s.EW)(()=>t.value.widgetType!==N.SysCustomWidgetType.DataViewTable&&t.value.widgetType!==N.SysCustomWidgetType.Carousel&&t.value.widgetType!==N.SysCustomWidgetType.RichText&&t.value.widgetType!==N.SysCustomWidgetType.CommonList&&t.value.widgetType!==N.SysCustomWidgetType.ProgressBar&&t.value.widgetType!==N.SysCustomWidgetType.ProgressCircle&&t.value.widgetType!==N.SysCustomWidgetType.DataCard&&t.value.widgetType!==N.SysCustomWidgetType.DataProgressCard),h=(0,s.EW)(()=>t.value.widgetType===N.SysCustomWidgetType.DataViewTable),R=(0,s.EW)(()=>t.value.widgetType===N.SysCustomWidgetType.Carousel),k=(e,l=null)=>c.value.map(a=>{let t="Object"!==a.fieldType&&"Array"!==a.fieldType;return t=t&&-1!==e.map(e=>e.columnId).indexOf(a.columnId),l&&(t=t&&l(a)),{...a,disabled:t}}).sort((e,l)=>e.disabled?l.disabled?0:1:-1),_=(e,l)=>{null==e?o.value.categroyColumnList.push(l):o.value.categroyColumnList=o.value.categroyColumnList.map(e=>e.columnId===l.columnId?{...l}:{...e})},C=(e=null)=>{a.value&&Array.isArray(c.value)&&P.l.show("类别轴",le["default"],{area:["600px"]},{dataset:{datasetType:a.value?.datasetType},rowData:e,columnList:k(o.value.categroyColumnList,e=>!e.dimension),path:"thirdEditWidgetCategroyColumn"},{width:"600px",height:"500px",pathName:"/thirdParty/thirdEditWidgetCategroyColumn"}).then(l=>{_(e,l)}).catch(e=>{console.log(e)})},w=(e,l)=>{null==e?o.value.rowGroupColumnList.push(l):o.value.rowGroupColumnList=o.value.rowGroupColumnList.map(e=>e.columnId===l.columnId?{...l}:{...e})},F=(e=null)=>{null!=t.value&&null!=t.value.props&&Array.isArray(c.value)&&P.l.show("行分组",le["default"],{area:["600px"]},{rowData:e,dataset:{datasetType:a.value?.datasetType},columnList:c.value.map(e=>{let l=!e.dimension||-1!==o.value.columnGroupColumnList.map(e=>e.columnId).indexOf(e.columnId)||-1!==o.value.rowGroupColumnList.map(e=>e.columnId).indexOf(e.columnId);return{...e,disabled:l&&"Object"!==e.fieldType&&"Array"!==e.fieldType}}).sort((e,l)=>e.disabled?l.disabled?0:1:-1),supportColumnWidth:!0,path:"thirdEditWidgetCategroyColumn/rowGroup"},{width:"600px",height:"500px",pathName:"/thirdParty/thirdEditWidgetCategroyColumn"}).then(l=>{w(e,l)}).catch(e=>{console.warn(e)})},W=(e,l)=>{null==e?o.value.columnGroupColumnList.push(l):o.value.columnGroupColumnList=o.value.columnGroupColumnList.map(e=>e.columnId===l.columnId?{...l}:{...e})},I=(e=null)=>{null!=t.value&&null!=t.value.props&&Array.isArray(c.value)&&P.l.show("列分组",le["default"],{area:["600px"]},{rowData:e,dataset:{datasetType:a.value?.datasetType},columnList:c.value.map(e=>{let l=!e.dimension||-1!==o.value.columnGroupColumnList.map(e=>e.columnId).indexOf(e.columnId)||-1!==o.value.rowGroupColumnList.map(e=>e.columnId).indexOf(e.columnId);return{...e,disabled:l&&"Object"!==e.fieldType&&"Array"!==e.fieldType}}).sort((e,l)=>e.disabled?l.disabled?0:1:-1),path:"thirdEditWidgetCategroyColumn/colGroup"},{width:"600px",height:"500px",pathName:"/thirdParty/thirdEditWidgetCategroyColumn"}).then(l=>{W(e,l)}).catch(e=>{console.warn(e)})},L=(e,l)=>{null==e?o.value.valueColumnList.push({...l,id:l.columnId+"__"+l.calculateType}):o.value.valueColumnList=o.value.valueColumnList.map(e=>e.id===l.id?{...l}:{...e})},x=(e=null)=>{if(!a.value||!Array.isArray(c.value))return;let u=["1200px","700px"];a.value?.datasetType===Z.DatasetType.API&&(u=["600px"]),P.l.show("数值轴",ae["default"],{area:u},{dataset:{datasetType:a.value?.datasetType},rowData:e,datasetId:o.value.datasetId,columnList:(c.value||[]).map(e=>{let l="Object"!==e.fieldType&&"Array"!==e.fieldType&&(e.dimension||-1!==o.value.valueColumnList.map(e=>e.columnId).indexOf(e.columnId));return{...e,disabled:l}}).sort((e,l)=>e.disabled?l.disabled?0:1:-1),supportColumnWidth:t.value.widgetType===Z.ReportWidgetType.PivotTable,widgetList:(l().allWidgetList||[]).map(e=>({widgetId:e.widgetId,showName:e.showName,widgetType:e.widgetType,children:(e.children||[]).map(e=>({id:e.id,showName:e.showName}))})),formParamList:(l().form.paramList||[]).map(e=>e.variableName),reportDictList:l().dictList,path:"thirdEditWidgetIndexColumn"},{width:"1200px",height:"750px",pathName:"/thirdParty/thirdEditWidgetIndexColumn"}).then(l=>{L(e,l)}).catch(e=>{console.log(e)})},S=(e,l,a)=>{null==l?e.push(a):e.forEach(e=>{e.columnId===a.columnId&&Object.keys(e).forEach(l=>{e[l]=a[l]})})},D=(e,l)=>{S(o.value.showColumnList,e,l)},E=(e=null)=>{a.value&&Array.isArray(c.value)&&P.l.show("显示字段",ie["default"],{area:["600px"]},{dataset:{datasetType:a.value?.datasetType},rowData:e,columnList:k(o.value.showColumnList),path:"thirdEditDataViewColumn"},{width:"600px",height:"500px",pathName:"/thirdParty/thirdEditDataViewColumn"}).then(l=>{D(e,l)}).catch(e=>{console.log(e)})},A=(e,l)=>{o.value.imagePath=[l]},X=(e=null)=>{a.value&&Array.isArray(c.value)&&P.l.show("图片路径字段",oe["default"],{area:["600px"]},{dataset:{datasetType:a.value?.datasetType},rowData:e,columnList:k(o.value.imagePath),path:"thirdEditWidgetColumnBind/carouselPicture"},{width:"600px",height:"500px",pathName:"/thirdParty/thirdEditWidgetColumnBind"}).then(l=>{A(e,l)}).catch(e=>{console.log(e)})},K=(e,l)=>{o.value.imageName=[l]},z=(e=null)=>{a.value&&Array.isArray(c.value)&&P.l.show("显示字段",oe["default"],{area:["600px"]},{dataset:{datasetType:a.value?.datasetType},rowData:e,columnList:k(o.value.imageName),path:"thirdEditWidgetColumnBind/carouselName"},{width:"600px",height:"500px",pathName:"/thirdParty/thirdEditWidgetColumnBind"}).then(l=>{K(e,l)}).catch(e=>{console.log(e)})},Q=(e,l)=>{o.value.textColumn=[l]},B=(e=null)=>{a.value&&Array.isArray(c.value)&&P.l.show("内容字段",oe["default"],{area:["600px"]},{dataset:{datasetType:a.value?.datasetType},rowData:e,columnList:k(o.value.textColumn),path:"thirdEditWidgetColumnBind/richHtml"},{width:"600px",height:"500px",pathName:"/thirdParty/thirdEditWidgetColumnBind"}).then(l=>{Q(e,l)}).catch(e=>{console.log(e)})},O=(e,l)=>{null==e?o.value.orderInfoList.push({...l,columnId:l.orderColumnId||l.columnId}):o.value.orderInfoList=o.value.orderInfoList.map(e=>e.id===l.id?l:e)},M=(e=null)=>{P.l.show("排序",te["default"],{area:["400px"]},{rowData:e,columnList:r.value,path:"thirdEditWidgetOrderInfo"},{width:"400px",height:"400px",pathName:"/thirdParty/thirdEditWidgetOrderInfo"}).then(l=>{O(e,l)}).catch(e=>{console.log(e)})},G=(e,l)=>{null==e?o.value.filterList.push({paramId:l.paramId,required:l.required,paramName:l.paramName,filterType:l.filterType,filterValueType:l.filterValueType,paramDictId:l.paramDictId,paramValue:l.paramValue,formWidgetId:l.formWidgetId,formWidgetColumn:l.formWidgetColumn,relationId:l.relationId}):o.value.filterList=o.value.filterList.map(e=>e.paramId===l.paramId?{paramId:l.paramId,required:l.required,paramName:l.paramName,filterType:l.filterType,filterValueType:l.filterValueType,paramDictId:l.paramDictId,paramValue:l.paramValue,formWidgetId:l.formWidgetId,formWidgetColumn:l.formWidgetColumn,relationId:l.relationId}:e)},j=(e=null)=>{if(!a.value||!Array.isArray(c.value))return;let u=c.value.map(e=>({...e,id:e.columnName,name:e.columnName,disabled:-1!==o.value.filterList.map(e=>e.columnId).indexOf(e.columnId)})).sort((e,l)=>e.disabled?l.disabled?0:1:-1);P.l.show("过滤器",ue["default"],{area:["600px"]},{rowData:e,columnList:u,widgetList:l().allWidgetList.filter(e=>e.widgetId!==t.value.widgetId).map(e=>({widgetId:e.widgetId,showName:e.showName,widgetType:e.widgetType,children:(e.children||[]).map(e=>({id:e.id,showName:e.showName}))})),formParamList:(l().form.paramList||[]).map(e=>e.variableName),reportDictList:l().dictList,validFilterValueType:[Z.FilterValueKind.FORM_PARAM,Z.FilterValueKind.WIDGET_DATA,Z.FilterValueKind.DICT_DATA,Z.FilterValueKind.COLUMN_DATA,Z.FilterValueKind.INNER_VARIABLE,Z.FilterValueKind.INPUT_DATA],path:"thirdEditReportColumnFilter"},{width:"600px",height:"450px",pathName:"/thirdParty/thirdEditReportColumnFilter"}).then(l=>{G(e,l)}).catch(e=>{console.warn(e)})},q=e=>{o.value.datasetFilterParams=(e||[]).map(e=>({paramName:e.paramName,filterValueType:e.filterValueType,paramValue:e.paramValue,formWidgetId:e.formWidgetId}))},H=()=>{P.l.show("数据集参数",ee["default"],{area:["900px","605px"]},{datasetParamList:(a.value||{}).datasetParamList,datasetFilterParams:o.value.datasetFilterParams,formParamList:(l().form.paramList||[]).map(e=>e.variableName),widgetList:(l().allWidgetList||[]).map(e=>({widgetId:e.widgetId,showName:e.showName,widgetType:e.widgetType})),validFilterValueType:[Z.FilterValueKind.FORM_PARAM,Z.FilterValueKind.WIDGET_DATA,Z.FilterValueKind.INPUT_DATA],path:"thirdSetDatasetPaam"},{width:"900px",height:"650px",pathName:"/thirdParty/thirdSetDatasetPaam"}).then(e=>{q(e)}).catch(e=>{console.warn(e)})},$=e=>{T.s.confirm("是否删除此数据集参数？","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{o.value.datasetFilterParams=o.value.datasetFilterParams.filter(l=>l.paramName!==e.paramName)}).catch(e=>{console.warn(e)})},J=(e,l)=>{T.s.confirm("是否删除显示列？","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{let a=l.findIndex(l=>l.columnId===e.columnId);l.splice(a,1)}).catch(e=>{console.warn(e)})},Y=e=>{T.s.confirm("是否删除类别轴字段？","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{o.value.categroyColumnList=o.value.categroyColumnList.filter(l=>l.columnId!==e.columnId)}).catch(e=>{console.warn(e)})},de=e=>{T.s.confirm("是否删除值轴字段？","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{o.value.valueColumnList=o.value.valueColumnList.filter(l=>l.columnId!==e.columnId||l.calculateType!==e.calculateType)}).catch(e=>{console.warn(e)})},ne=e=>{T.s.confirm("是否删除排序字段？","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{o.value.orderInfoList=o.value.orderInfoList.filter(l=>l.id!==e.id)}).catch(e=>{console.warn(e)})},ce=e=>{let l=(0,g.PH)(r.value,e,"id");return l?l.showName:void 0},be=e=>{T.s.confirm("是否删除过滤字段？","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{o.value.filterList=o.value.filterList.filter(l=>l.paramId!==e.paramId)}).catch(e=>{console.warn(e)})},fe=e=>{T.s.confirm("是否删除行分组字段？","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{o.value.rowGroupColumnList=o.value.rowGroupColumnList.filter(l=>l.columnId!==e.columnId)}).catch(e=>{console.warn(e)})},ge=e=>{T.s.confirm("是否删除列分组字段？","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{o.value.columnGroupColumnList=o.value.columnGroupColumnList.filter(l=>l.columnId!==e.columnId)}).catch(e=>{console.warn(e)})},ye=e=>{if(e.filterValueType===Z.FilterValueKind.INNER_VARIABLE)return Z.CustomDateValueType.getValue(e.paramValue);if(e.filterValueType!==Z.FilterValueKind.WIDGET_DATA)return e.paramValue;{let a=(0,g.PH)(l().allWidgetList,e.formWidgetId,"widgetId");if(null!=a){let l=null;return Array.isArray(a.children)&&a.children.length>0&&(l=(0,g.PH)(a.children,e.formWidgetColumn,"id")),a.showName+(null==l?"":` / ${l.showName}`)}}},he=()=>{o.value.datasetFilterParams=[],o.value.categroyColumnList=[],o.value.valueColumnList=[],o.value.filterList=[],o.value.orderInfoList=[],o.value.rowGroupColumnList=[],o.value.columnGroupColumnList=[],o.value.showColumnList&&(o.value.showColumnList=[]),o.value.imagePath&&(o.value.imagePath=[]),o.value.imageName&&(o.value.imageName=[]),o.value.textColumn&&(o.value.textColumn=[]),o.value.mainTextColumn&&(o.value.mainTextColumn=[]),o.value.numTextColumn&&(o.value.numTextColumn=[]),o.value.footTextColumn&&(o.value.footTextColumn=[]),o.value.footNumTextColumn&&(o.value.footNumTextColumn=[]),o.value.progressColumn&&(o.value.progressColumn=[]),o.value.titleColumn&&(o.value.titleColumn=[]),o.value.timeColumn&&(o.value.timeColumn=[])},Re=e=>{console.log("----- 数据集变化 ---------",e),o.value.datasetId=Array.isArray(e)?e[e.length-1]:void 0,o.value.bindColumnId=void 0,he()},Ve=e=>new Promise((t,u)=>{e&&a.value&&null==a.value?.columnList?l().loadDatasetInfo(e).then(e=>{const l={...a.value};l.columnList=e.columnList,l.datasetParamList=e.datasetParamList,a.value=l,t(e)}).catch(e=>{u(e)}):u()});(0,s.wB)(()=>o.value,()=>{let e;o.value&&o.value.datasetId&&(e=(0,g.PH)(l().datasetList,o.value.datasetId,"datasetId")||void 0),a.value=e,t.value&&(t.value.dataset=e),Ve((e||{}).datasetId).catch(e=>{console.warn(e)})},{deep:!0,immediate:!0});return(e,l)=>{const r=d._m,g=u.xE,V=u.US;return(0,m.R1)(o)?((0,s.uX)(),(0,s.Wv)(V,{key:0,"label-position":"top",size:"default",style:{padding:"10px 16px 0"}},{default:(0,s.k6)(()=>[(0,s.bF)(g,{label:"数据集"},{default:(0,s.k6)(()=>[(0,s.bF)(r,{style:{width:"100%"},modelValue:(0,m.R1)(i),"onUpdate:modelValue":l[0]||(l[0]=e=>(0,m.i9)(i)?i.value=e:null),onChange:Re,options:(0,m.R1)(n),props:{label:"name",value:"id"}},null,8,["modelValue","options"])]),_:1}),((0,m.R1)(a)||{}).datasetType===(0,m.R1)(Z.DatasetType).API?((0,s.uX)(),(0,s.Wv)(g,{key:0,label:"绑定字段"},{default:(0,s.k6)(()=>[(0,s.bF)(r,{style:{width:"100%"},modelValue:(0,m.R1)(o).bindColumnId,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,m.R1)(o).bindColumnId=e),options:(0,m.R1)(v),props:{label:"columnName",value:"columnId",emitPath:!1},onChange:he},null,8,["modelValue","options"])]),_:1})):(0,s.Q3)("",!0),((0,m.R1)(a)||{}).datasetType===(0,m.R1)(Z.DatasetType).SQL||((0,m.R1)(a)||{}).datasetType===(0,m.R1)(Z.DatasetType).API?((0,s.uX)(),(0,s.Wv)(U.A,{key:1,data:(0,m.R1)(o).datasetFilterParams,"onUpdate:data":l[2]||(l[2]=e=>(0,m.R1)(o).datasetFilterParams=e),disabled:null==(0,m.R1)(a),label:"数据集参数",onAdd:l[3]||(l[3]=e=>H()),onEdit:l[4]||(l[4]=e=>H()),onDelete:$,prop:{label:"paramName",value:"paramName"}},{default:(0,s.k6)(e=>[null!=e.data?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[(0,s.Lk)("span",null,(0,p.v_)(e.data.paramName),1),l[40]||(l[40]=(0,s.Lk)("span",{style:{margin:"0 10px"}},"等于",-1)),(0,s.Lk)("span",null,(0,p.v_)(ye(e.data)),1)],64)):(0,s.Q3)("",!0)]),_:1},8,["data","disabled"])):(0,s.Q3)("",!0),(0,m.R1)(f)?((0,s.uX)(),(0,s.Wv)(U.A,{key:2,data:(0,m.R1)(o).categroyColumnList,"onUpdate:data":l[5]||(l[5]=e=>(0,m.R1)(o).categroyColumnList=e),maxCount:(0,m.R1)(b),disabled:null==(0,m.R1)(a),label:"类别轴 / 维度",onAdd:l[6]||(l[6]=e=>C()),onEdit:C,onDelete:Y,prop:{label:"showName",value:"id"}},null,8,["data","maxCount","disabled"])):(0,s.Q3)("",!0),(0,m.R1)(t).widgetType===(0,m.R1)(N.SysCustomWidgetType).PivotTable?((0,s.uX)(),(0,s.Wv)(U.A,{key:3,data:(0,m.R1)(o).rowGroupColumnList,"onUpdate:data":l[7]||(l[7]=e=>(0,m.R1)(o).rowGroupColumnList=e),disabled:null==(0,m.R1)(a),label:"行分组 / 维度",onAdd:l[8]||(l[8]=e=>F()),onEdit:F,onDelete:fe,supportSort:!0,dragGroup:"rowGroup",prop:{label:"showName",value:"id"}},null,8,["data","disabled"])):(0,s.Q3)("",!0),(0,m.R1)(t).widgetType===(0,m.R1)(N.SysCustomWidgetType).PivotTable?((0,s.uX)(),(0,s.Wv)(U.A,{key:4,data:(0,m.R1)(o).columnGroupColumnList,"onUpdate:data":l[9]||(l[9]=e=>(0,m.R1)(o).columnGroupColumnList=e),disabled:null==(0,m.R1)(a),label:"列分组 / 维度",onAdd:l[10]||(l[10]=e=>I()),onEdit:I,onDelete:ge,supportSort:!0,dragGroup:"columnGroup",prop:{label:"showName",value:"id"}},null,8,["data","disabled"])):(0,s.Q3)("",!0),(0,m.R1)(y)?((0,s.uX)(),(0,s.Wv)(U.A,{key:5,maxCount:(0,m.R1)(t).widgetType===(0,m.R1)(N.SysCustomWidgetType).FunnelChart?1:void 0,data:(0,m.R1)(o).valueColumnList,"onUpdate:data":l[11]||(l[11]=e=>(0,m.R1)(o).valueColumnList=e),label:"值轴 / 指标",disabled:null==(0,m.R1)(a),onAdd:l[12]||(l[12]=e=>x()),onEdit:x,onDelete:de,supportSort:!0,dragGroup:"valueGroup",prop:{label:"showName",value:"id"}},{right:(0,s.k6)(e=>[(0,m.R1)(a)?.datasetType!==(0,m.R1)(Z.DatasetType).API?((0,s.uX)(),(0,s.CE)("span",se,(0,p.v_)((0,m.R1)(Z.CalculateType).getValue((e.data||{}).calculateType)),1)):(0,s.Q3)("",!0)]),_:1},8,["maxCount","data","disabled"])):(0,s.Q3)("",!0),(0,m.R1)(h)?((0,s.uX)(),(0,s.Wv)(U.A,{key:6,data:(0,m.R1)(o).showColumnList,"onUpdate:data":l[13]||(l[13]=e=>(0,m.R1)(o).showColumnList=e),disabled:null==(0,m.R1)(a),supportSort:!0,label:"显示字段",onAdd:l[14]||(l[14]=e=>E()),onEdit:E,onDelete:l[15]||(l[15]=e=>{J(e,(0,m.R1)(o).showColumnList)}),prop:{label:"showName",value:"columnId"}},null,8,["data","disabled"])):(0,s.Q3)("",!0),(0,m.R1)(R)?((0,s.uX)(),(0,s.Wv)(U.A,{key:7,data:(0,m.R1)(o).imagePath,"onUpdate:data":l[16]||(l[16]=e=>(0,m.R1)(o).imagePath=e),disabled:null==(0,m.R1)(a),supportSort:!0,maxCount:1,label:"图片路径字段",onAdd:l[17]||(l[17]=e=>X()),onEdit:X,onDelete:l[18]||(l[18]=e=>{J(e,(0,m.R1)(o).imagePath)}),prop:{label:function(e){return Array.isArray(e.columnName)?e.columnName.join(" / "):e.columnName},value:"columnId"}},null,8,["data","disabled","prop"])):(0,s.Q3)("",!0),(0,m.R1)(R)?((0,s.uX)(),(0,s.Wv)(U.A,{key:8,data:(0,m.R1)(o).imageName,"onUpdate:data":l[19]||(l[19]=e=>(0,m.R1)(o).imageName=e),disabled:null==(0,m.R1)(a),supportSort:!0,maxCount:1,label:"图片名称字段",onAdd:l[20]||(l[20]=e=>z()),onEdit:z,onDelete:l[21]||(l[21]=e=>{J(e,(0,m.R1)(o).imageName)}),prop:{label:function(e){return Array.isArray(e.columnName)?e.columnName.join(" / "):e.columnName},value:"columnId"}},null,8,["data","disabled","prop"])):(0,s.Q3)("",!0),(0,m.R1)(t).widgetType===(0,m.R1)(N.SysCustomWidgetType).RichText?((0,s.uX)(),(0,s.Wv)(U.A,{key:9,data:(0,m.R1)(o).textColumn,"onUpdate:data":l[22]||(l[22]=e=>(0,m.R1)(o).textColumn=e),disabled:null==(0,m.R1)(a),supportSort:!0,maxCount:1,label:"内容字段",onAdd:l[23]||(l[23]=e=>B()),onEdit:B,onDelete:l[24]||(l[24]=e=>{J(e,(0,m.R1)(o).textColumn)}),prop:{label:function(e){return Array.isArray(e.columnName)?e.columnName.join(" / "):e.columnName},value:"columnId"}},null,8,["data","disabled","prop"])):(0,s.Q3)("",!0),(0,m.R1)(t).widgetType===(0,m.R1)(N.SysCustomWidgetType).DataCard?((0,s.uX)(),(0,s.CE)(s.FK,{key:10},[(0,s.bF)(re,{fieldKey:"dataCardTitle",value:(0,m.R1)(o).mainTextColumn,"onUpdate:value":l[25]||(l[25]=e=>(0,m.R1)(o).mainTextColumn=e),validColumnList:(0,m.R1)(c),dataset:(0,m.R1)(a),label:"卡片标题"},null,8,["value","validColumnList","dataset"]),(0,s.bF)(re,{fieldKey:"dataCardContent",value:(0,m.R1)(o).numTextColumn,"onUpdate:value":l[26]||(l[26]=e=>(0,m.R1)(o).numTextColumn=e),validColumnList:(0,m.R1)(c),dataset:(0,m.R1)(a),label:"卡片内容"},null,8,["value","validColumnList","dataset"]),(0,s.bF)(re,{fieldKey:"dataCardLeftText",value:(0,m.R1)(o).footTextColumn,"onUpdate:value":l[27]||(l[27]=e=>(0,m.R1)(o).footTextColumn=e),validColumnList:(0,m.R1)(c),dataset:(0,m.R1)(a),label:"左下文字"},null,8,["value","validColumnList","dataset"]),(0,s.bF)(re,{fieldKey:"dataCardRightText",value:(0,m.R1)(o).footNumTextColumn,"onUpdate:value":l[28]||(l[28]=e=>(0,m.R1)(o).footNumTextColumn=e),validColumnList:(0,m.R1)(c),dataset:(0,m.R1)(a),label:"右下文字"},null,8,["value","validColumnList","dataset"])],64)):(0,s.Q3)("",!0),(0,m.R1)(t).widgetType===(0,m.R1)(N.SysCustomWidgetType).DataProgressCard?((0,s.uX)(),(0,s.CE)(s.FK,{key:11},[(0,s.bF)(re,{fieldKey:"progressCardTitle",value:(0,m.R1)(o).mainTextColumn,"onUpdate:value":l[29]||(l[29]=e=>(0,m.R1)(o).mainTextColumn=e),validColumnList:(0,m.R1)(c),dataset:(0,m.R1)(a),label:"卡片标题"},null,8,["value","validColumnList","dataset"]),(0,s.bF)(re,{fieldKey:"progressCardContent",value:(0,m.R1)(o).numTextColumn,"onUpdate:value":l[30]||(l[30]=e=>(0,m.R1)(o).numTextColumn=e),validColumnList:(0,m.R1)(c),dataset:(0,m.R1)(a),label:"卡片内容"},null,8,["value","validColumnList","dataset"])],64)):(0,s.Q3)("",!0),(0,m.R1)(t).widgetType===(0,m.R1)(N.SysCustomWidgetType).ProgressBar?((0,s.uX)(),(0,s.Wv)(re,{key:12,fieldKey:"progressCardDesc",value:(0,m.R1)(o).textColumn,"onUpdate:value":l[31]||(l[31]=e=>(0,m.R1)(o).textColumn=e),validColumnList:(0,m.R1)(c),dataset:(0,m.R1)(a),label:"说明字段"},null,8,["value","validColumnList","dataset"])):(0,s.Q3)("",!0),(0,m.R1)(t).widgetType===(0,m.R1)(N.SysCustomWidgetType).ProgressCircle||(0,m.R1)(t).widgetType===(0,m.R1)(N.SysCustomWidgetType).DataProgressCard||(0,m.R1)(t).widgetType===(0,m.R1)(N.SysCustomWidgetType).ProgressBar?((0,s.uX)(),(0,s.Wv)(re,{key:13,fieldKey:"progressColumn",value:(0,m.R1)(o).progressColumn,"onUpdate:value":l[32]||(l[32]=e=>(0,m.R1)(o).progressColumn=e),validColumnList:(0,m.R1)(c),dataset:(0,m.R1)(a),label:"进度字段"},null,8,["value","validColumnList","dataset"])):(0,s.Q3)("",!0),(0,m.R1)(t).widgetType===(0,m.R1)(N.SysCustomWidgetType).CommonList?((0,s.uX)(),(0,s.CE)(s.FK,{key:14},[(0,s.bF)(re,{fieldKey:"commonListTitle",value:(0,m.R1)(o).titleColumn,"onUpdate:value":l[33]||(l[33]=e=>(0,m.R1)(o).titleColumn=e),validColumnList:(0,m.R1)(c),dataset:(0,m.R1)(a),label:"内容标题字段"},null,8,["value","validColumnList","dataset"]),(0,s.bF)(re,{fieldKey:"commonListContent",value:(0,m.R1)(o).textColumn,"onUpdate:value":l[34]||(l[34]=e=>(0,m.R1)(o).textColumn=e),validColumnList:(0,m.R1)(c),dataset:(0,m.R1)(a),label:"内容文字字段"},null,8,["value","validColumnList","dataset"]),(0,s.bF)(re,{fieldKey:"commonListRight",value:(0,m.R1)(o).timeColumn,"onUpdate:value":l[35]||(l[35]=e=>(0,m.R1)(o).timeColumn=e),validColumnList:(0,m.R1)(c),dataset:(0,m.R1)(a),label:"内容时间字段"},null,8,["value","validColumnList","dataset"])],64)):(0,s.Q3)("",!0),((0,m.R1)(a)||{}).datasetType!==(0,m.R1)(Z.DatasetType).API&&-1===[(0,m.R1)(N.SysCustomWidgetType).ProgressBar,(0,m.R1)(N.SysCustomWidgetType).ProgressCircle,(0,m.R1)(N.SysCustomWidgetType).DataCard,(0,m.R1)(N.SysCustomWidgetType).DataProgressCard,(0,m.R1)(N.SysCustomWidgetType).CommonList,(0,m.R1)(N.SysCustomWidgetType).DataViewTable].indexOf((0,m.R1)(t).widgetType)?((0,s.uX)(),(0,s.Wv)(U.A,{key:15,data:(0,m.R1)(o).orderInfoList,"onUpdate:data":l[36]||(l[36]=e=>(0,m.R1)(o).orderInfoList=e),disabled:null==(0,m.R1)(a),label:"排序",maxCount:1,onAdd:l[37]||(l[37]=e=>M()),onEdit:M,onDelete:ne,prop:{label:"showName",value:"id"}},{default:(0,s.k6)(e=>[(0,s.Lk)("span",null,(0,p.v_)(ce((e.data||{}).id)),1)]),right:(0,s.k6)(e=>[(e.data||{}).orderType===(0,m.R1)(Z.OrderType).ASC?((0,s.uX)(),(0,s.CE)("i",me,(0,p.v_)((0,m.R1)(Z.OrderType).getValue((e.data||{}).orderType)),1)):(0,s.Q3)("",!0),(e.data||{}).orderType===(0,m.R1)(Z.OrderType).DESC?((0,s.uX)(),(0,s.CE)("i",pe,(0,p.v_)((0,m.R1)(Z.OrderType).getValue((e.data||{}).orderType)),1)):(0,s.Q3)("",!0)]),_:1},8,["data","disabled"])):(0,s.Q3)("",!0),((0,m.R1)(a)||{}).datasetType!==(0,m.R1)(Z.DatasetType).API?((0,s.uX)(),(0,s.Wv)(U.A,{key:16,data:(0,m.R1)(o).filterList,"onUpdate:data":l[38]||(l[38]=e=>(0,m.R1)(o).filterList=e),disabled:null==(0,m.R1)(a),label:"过滤器",onAdd:l[39]||(l[39]=e=>j()),onEdit:j,onDelete:be,prop:{label:"paramName",value:"paramId"}},{default:(0,s.k6)(e=>[null!=e.data?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[(0,s.Lk)("span",null,(0,p.v_)(e.data.paramName),1),(0,s.Lk)("span",ve,(0,p.v_)((0,m.R1)(Z.CriteriaFilterType).getValue(e.data.filterType)),1),(0,s.Lk)("span",null,(0,p.v_)(ye(e.data)),1)],64)):(0,s.Q3)("",!0)]),_:1},8,["data","disabled"])):(0,s.Q3)("",!0)]),_:1})):(0,s.Q3)("",!0)}}});const be=ce;var fe=be,ge=a(52920);a(95509);const ye={style:{"margin-left":"10px"}},he=[{id:0,name:"默认",colorList:["#5470C6","#91CC75","#FAC858","#EE6666","#73C0DE","#3BA272","#FC8452","#9A60B4","#EA7CCC"]},{id:1,name:"复古",colorList:["#0780CF","#765005","#FA6D1D","#0E2C82","#B6B51F","#DA1F18","#701866","#F47A75","#009DB2"]},{id:2,name:"淡雅",colorList:["#95A2FF","#FA8080","#FFC076","#FAE768","#87E885","#3CB9FC","#73ABF5","#CB9BFF","#434348"]}];var Re=(0,s.pM)({__name:"chartColorSelect",props:{value:{default:()=>[...he[0].colorList]}},emits:["update:value"],setup(e,{emit:l}){const a=(0,V.l5)(),t=e,o=(0,m.KR)(null),i=(0,m.KR)(),d=(0,m.KR)([...t.value]),c=(0,s.EW)(()=>{if(i.value||0===i.value)for(let e=0;e<he.length;e++)if(he[e].id===i.value)return he[e];return null}),b=l,f=()=>{null!==c.value&&(d.value=[...c.value.colorList],b("update:value",[...c.value.colorList]))},g=()=>{f()},y=(e,l)=>{let a=[...t.value];a[l]=e,d.value=a,b("update:value",a),o.value=null};return(e,l)=>{const t=n.S2,c=S.P9,b=S.AV,h=r.S2,R=u.xE,V=x.rF,k=u.US,_=ge.Vc;return(0,s.uX)(),(0,s.Wv)(_,{placement:"bottom-start",width:"400",trigger:"click",visible:(0,m.R1)(o)},{reference:(0,s.k6)(()=>[(0,s.bF)(t,null,{default:(0,s.k6)(()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.value,(e,l)=>((0,s.uX)(),(0,s.CE)("div",{class:"chart-color-item",key:l+(e||""),style:(0,p.Tr)({"background-color":e})},null,4))),128))]),_:1})]),default:(0,s.k6)(()=>[(0,s.bF)(t,null,{default:(0,s.k6)(()=>[(0,s.bF)(k,{"label-position":"left","label-width":"70px",size:(0,m.R1)(a).defaultFormItemSize,onSubmit:l[3]||(l[3]=(0,v.D$)(()=>{},["prevent"]))},{default:(0,s.k6)(()=>[(0,s.bF)(R,{label:"系统方案"},{default:(0,s.k6)(()=>[(0,s.bF)(b,{modelValue:(0,m.R1)(i),"onUpdate:modelValue":l[0]||(l[0]=e=>(0,m.i9)(i)?i.value=e:null),placeholder:"",onChange:g},{default:(0,s.k6)(()=>[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(he,e=>(0,s.bF)(c,{key:e.id,value:e.id,label:e.name},{default:(0,s.k6)(()=>[(0,s.bF)(t,{type:"flex",align:"middle"},{default:(0,s.k6)(()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.colorList,(e,l)=>((0,s.uX)(),(0,s.CE)("div",{class:"chart-color-item",key:l+e,style:(0,p.Tr)({"background-color":e})},null,4))),128)),(0,s.Lk)("span",ye,(0,p.v_)(e.name),1)]),_:2},1024)]),_:2},1032,["value","label"])),64))]),_:1},8,["modelValue"]),(0,s.bF)(h,{link:"",style:{"margin-left":"5px"},onClick:f},{default:(0,s.k6)(()=>l[4]||(l[4]=[(0,s.eW)("重置")])),_:1,__:[4]})]),_:1}),(0,s.bF)(R,{label:"自定义",style:{"margin-bottom":"0"}},{default:(0,s.k6)(()=>[(0,s.bF)(t,null,{default:(0,s.k6)(()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.value,(e,a)=>((0,s.uX)(),(0,s.Wv)(V,{key:a+(e||""),modelValue:(0,m.R1)(d)[a],"onUpdate:modelValue":e=>(0,m.R1)(d)[a]=e,style:{"margin-right":"5px"},onFocus:l[1]||(l[1]=e=>o.value=!0),onBlur:l[2]||(l[2]=e=>o.value=null),onChange:e=>y(e||void 0,a)},null,8,["modelValue","onUpdate:modelValue","onChange"]))),128))]),_:1})]),_:1})]),_:1},8,["size"])]),_:1})]),_:1},8,["visible"])}}});const Ve=(0,j.A)(Re,[["__scopeId","data-v-782446a5"]]);var ke=Ve,_e=(0,s.pM)({__name:"index",setup(e){const l=(0,s.WQ)("formConfig",()=>(console.error("ChartDatasetSetting: formConfig not injected"),{}));console.log("ChartBasicSetting formConfig()",l());const a=(0,s.EW)(()=>l().currentWidget),t=(0,s.EW)(()=>a.value?(a.value.props||{}).basicInfo:void 0);return(e,l)=>{const a=D.B8,i=u.xE,d=o.WK,n=A.lq,r=u.US;return(0,m.R1)(t)?((0,s.uX)(),(0,s.Wv)(r,{key:0,"label-position":"top",size:"default",style:{padding:"10px 16px 0"},onSubmit:l[8]||(l[8]=(0,v.D$)(()=>{},["prevent"]))},{default:(0,s.k6)(()=>[(0,s.bF)(i,{class:"view-attribute-item",label:"组件宽度"},{default:(0,s.k6)(()=>[(0,s.bF)(a,{style:{width:"95%","margin-left":"5px"},min:1,max:24,modelValue:(0,m.R1)(t).span,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,m.R1)(t).span=e)},null,8,["modelValue"])]),_:1}),null!=(0,m.R1)(t).height?((0,s.uX)(),(0,s.Wv)(i,{key:0,class:"view-attribute-item",label:"组件高度"},{default:(0,s.k6)(()=>[(0,s.bF)(d,{clearable:"",modelValue:(0,m.R1)(t).height,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,m.R1)(t).height=e)},null,8,["modelValue"])]),_:1})):(0,s.Q3)("",!0),(0,m.R1)(t).paddingBottom?((0,s.uX)(),(0,s.Wv)(i,{key:1,class:"view-attribute-item",label:"图表底部距离"},{default:(0,s.k6)(()=>[(0,s.bF)(n,{"controls-position":"right",clearable:"",style:{width:"100%"},modelValue:(0,m.R1)(t).paddingBottom,"onUpdate:modelValue":l[2]||(l[2]=e=>(0,m.R1)(t).paddingBottom=e)},null,8,["modelValue"])]),_:1})):(0,s.Q3)("",!0),(0,m.R1)(t).grid?((0,s.uX)(),(0,s.CE)(s.FK,{key:2},[(0,s.bF)(i,{class:"view-attribute-item",label:"图表左侧间距"},{default:(0,s.k6)(()=>[(0,s.bF)(d,{modelValue:(0,m.R1)(t).grid.left,"onUpdate:modelValue":l[3]||(l[3]=e=>(0,m.R1)(t).grid.left=e),placeholder:""},null,8,["modelValue"])]),_:1}),(0,s.bF)(i,{class:"view-attribute-item",label:"图表右侧间距"},{default:(0,s.k6)(()=>[(0,s.bF)(d,{modelValue:(0,m.R1)(t).grid.right,"onUpdate:modelValue":l[4]||(l[4]=e=>(0,m.R1)(t).grid.right=e),placeholder:""},null,8,["modelValue"])]),_:1}),(0,s.bF)(i,{class:"view-attribute-item",label:"图表顶部间距"},{default:(0,s.k6)(()=>[(0,s.bF)(d,{modelValue:(0,m.R1)(t).grid.top,"onUpdate:modelValue":l[5]||(l[5]=e=>(0,m.R1)(t).grid.top=e),placeholder:""},null,8,["modelValue"])]),_:1}),(0,s.bF)(i,{class:"view-attribute-item",label:"图表底部间距"},{default:(0,s.k6)(()=>[(0,s.bF)(d,{modelValue:(0,m.R1)(t).grid.bottom,"onUpdate:modelValue":l[6]||(l[6]=e=>(0,m.R1)(t).grid.bottom=e),placeholder:""},null,8,["modelValue"])]),_:1})],64)):(0,s.Q3)("",!0),(0,m.R1)(t).chartColors?((0,s.uX)(),(0,s.Wv)(i,{key:3,class:"view-attribute-item",label:"配色方案"},{default:(0,s.k6)(()=>[(0,s.bF)(ke,{value:(0,m.R1)(t).chartColors,"onUpdate:value":l[7]||(l[7]=e=>(0,m.R1)(t).chartColors=e)},null,8,["value"])]),_:1})):(0,s.Q3)("",!0)]),_:1})):(0,s.Q3)("",!0)}}});const Ce=_e;var we=Ce,Fe=a(3740),We=(a(42899),a(86449)),Ie=(0,s.pM)({__name:"lineSetting",props:{value:{}},emits:["update:value"],setup(e,{emit:l}){const a=l,t=e,o=(0,m.KR)({...(0,We.M2)()}),i=()=>{a("update:value",o.value)},d=e=>{null!=e&&(o.value.smooth=!1),i()};return(0,s.wB)(()=>t.value,e=>{o.value={...(0,We.M2)(),...e}},{immediate:!0}),(e,l)=>{const a=Fe.qi,t=u.xE,n=S.P9,r=S.AV,v=D.B8,c=E.Zh,b=E.MQ;return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(t,{label:"堆叠"},{default:(0,s.k6)(()=>[(0,s.bF)(a,{modelValue:(0,m.R1)(o).stack,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,m.R1)(o).stack=e),onChange:i},null,8,["modelValue"])]),_:1}),(0,s.bF)(t,{label:"面积"},{default:(0,s.k6)(()=>[(0,s.bF)(a,{modelValue:(0,m.R1)(o).areaStyle,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,m.R1)(o).areaStyle=e),onChange:i},null,8,["modelValue"])]),_:1}),(0,s.bF)(t,{class:"view-attribute-item",label:"阶梯折线"},{default:(0,s.k6)(()=>[(0,s.bF)(r,{modelValue:(0,m.R1)(o).step,"onUpdate:modelValue":l[2]||(l[2]=e=>(0,m.R1)(o).step=e),onChange:d},{default:(0,s.k6)(()=>[(0,s.bF)(n,{label:"不支持",value:""}),(0,s.bF)(n,{label:"当前点转弯",value:"start"}),(0,s.bF)(n,{label:"中间转弯",value:"middle"}),(0,s.bF)(n,{label:"结束点转弯",value:"end"})]),_:1},8,["modelValue"])]),_:1}),(0,s.bF)(t,{class:"view-attribute-item",label:"平滑折线"},{default:(0,s.k6)(()=>[(0,s.bF)(a,{modelValue:(0,m.R1)(o).smooth,"onUpdate:modelValue":l[3]||(l[3]=e=>(0,m.R1)(o).smooth=e),disabled:!!(0,m.R1)(o).step,onChange:i},null,8,["modelValue","disabled"])]),_:1}),(0,s.bF)(t,{class:"view-attribute-item slider-item",label:"线宽"},{default:(0,s.k6)(()=>[(0,s.bF)(v,{modelValue:(0,m.R1)(o).lineStyle.width,"onUpdate:modelValue":l[4]||(l[4]=e=>(0,m.R1)(o).lineStyle.width=e),style:{width:"100%"},min:1,max:10,onChange:i},null,8,["modelValue"])]),_:1}),(0,s.bF)(t,{class:"view-attribute-item",label:"线型"},{default:(0,s.k6)(()=>[(0,s.bF)(b,{modelValue:(0,m.R1)(o).lineStyle.type,"onUpdate:modelValue":l[5]||(l[5]=e=>(0,m.R1)(o).lineStyle.type=e),onChange:i},{default:(0,s.k6)(()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,m.R1)(Z.LineType).getList(),e=>((0,s.uX)(),(0,s.Wv)(c,{key:e.id,value:e.id},{default:(0,s.k6)(()=>[(0,s.eW)((0,p.v_)(e.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),(0,s.bF)(t,{class:"view-attribute-item",label:"折点"},{default:(0,s.k6)(()=>[(0,s.bF)(r,{modelValue:(0,m.R1)(o).symbol,"onUpdate:modelValue":l[6]||(l[6]=e=>(0,m.R1)(o).symbol=e),placeholder:"",style:{width:"100%"},onChange:i},{default:(0,s.k6)(()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,m.R1)(Z.ShapeType).getList(),e=>((0,s.uX)(),(0,s.Wv)(n,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),(0,s.bF)(t,{class:"view-attribute-item slider-item",label:"折点大小"},{default:(0,s.k6)(()=>[(0,s.bF)(v,{modelValue:(0,m.R1)(o).symbolSize,"onUpdate:modelValue":l[7]||(l[7]=e=>(0,m.R1)(o).symbolSize=e),style:{width:"100%"},min:1,max:20,onChange:i},null,8,["modelValue"])]),_:1})],64)}}});const Te=Ie;var Le=Te,xe=(0,s.pM)({__name:"barSetting",props:{value:{}},emits:["update:value"],setup(e,{emit:l}){const a=l,t=e,o=(0,m.KR)({...(0,We.n1)()}),i=()=>{a("update:value",o.value)};return(0,s.wB)(()=>t.value,e=>{o.value={...(0,We.n1)(),...e}},{immediate:!0}),(e,l)=>{const a=Fe.qi,t=u.xE,d=D.B8,r=x.rF,p=n.S2;return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(t,{label:"堆叠"},{default:(0,s.k6)(()=>[(0,s.bF)(a,{modelValue:(0,m.R1)(o).stack,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,m.R1)(o).stack=e),onChange:i},null,8,["modelValue"])]),_:1}),(0,s.bF)(t,{label:"条形显示"},{default:(0,s.k6)(()=>[(0,s.bF)(a,{modelValue:(0,m.R1)(o).lateral,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,m.R1)(o).lateral=e),onChange:i},null,8,["modelValue"])]),_:1}),(0,s.bF)(t,{class:"view-attribute-item",label:"自适应"},{default:(0,s.k6)(()=>[(0,s.bF)(a,{modelValue:(0,m.R1)(o).autoWidth,"onUpdate:modelValue":l[2]||(l[2]=e=>(0,m.R1)(o).autoWidth=e),onChange:i},null,8,["modelValue"])]),_:1}),(0,s.bF)(t,{class:"view-attribute-item slider-item",label:"柱宽"},{default:(0,s.k6)(()=>[(0,s.bF)(d,{modelValue:(0,m.R1)(o).barWidth,"onUpdate:modelValue":l[3]||(l[3]=e=>(0,m.R1)(o).barWidth=e),style:{width:"100%"},disabled:(0,m.R1)(o).autoWidth,min:1,max:50,onChange:i},null,8,["modelValue","disabled"])]),_:1}),(0,s.bF)(t,{class:"view-attribute-item",label:"柱背景色"},{default:(0,s.k6)(()=>[(0,s.bF)(p,{style:{width:"100%"},justify:"space-between",align:"middle"},{default:(0,s.k6)(()=>[(0,s.bF)(a,{modelValue:(0,m.R1)(o).showBackground,"onUpdate:modelValue":l[4]||(l[4]=e=>(0,m.R1)(o).showBackground=e),onChange:i},null,8,["modelValue"]),(0,s.bF)(r,{disabled:!(0,m.R1)(o).showBackground,modelValue:(0,m.R1)(o).backgroundStyle.color,"onUpdate:modelValue":l[5]||(l[5]=e=>(0,m.R1)(o).backgroundStyle.color=e),onChange:i},null,8,["disabled","modelValue"])]),_:1})]),_:1}),(0,s.bF)(t,{class:"view-attribute-item slider-item",label:"背景色透明度"},{default:(0,s.k6)(()=>[(0,s.bF)(d,{modelValue:(0,m.R1)(o).backgroundStyle.opacity,"onUpdate:modelValue":l[6]||(l[6]=e=>(0,m.R1)(o).backgroundStyle.opacity=e),disabled:!(0,m.R1)(o).showBackground,style:{width:"100%"},min:0,max:1,step:.05,onChange:i},null,8,["modelValue","disabled"])]),_:1})],64)}}});const Se=xe;var De=Se,Ee=(0,s.pM)({__name:"pieSetting",props:{value:{}},emits:["update:value"],setup(e,{emit:l}){const a={...(0,We.al)()},t=l,i=e,d=(0,m.KR)({...a}),n=()=>{t("update:value",d.value)},r=e=>{const l={...d.value};l.centerX=e.replace(/[^\d]/g,""),d.value=l},p=e=>{const l={...d.value};l.centerY=e.replace(/[^\d]/g,""),d.value=l};return(0,s.wB)(()=>i.value,e=>{d.value={...a,...e}},{immediate:!0}),(e,l)=>{const a=Fe.qi,t=u.xE,i=o.WK;return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(t,{class:"view-attribute-item",label:"南丁格尔图"},{default:(0,s.k6)(()=>[(0,s.bF)(a,{modelValue:(0,m.R1)(d).isRose,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,m.R1)(d).isRose=e),onChange:n},null,8,["modelValue"])]),_:1}),(0,s.bF)(t,{class:"view-attribute-item",label:"中心横坐标"},{default:(0,s.k6)(()=>[(0,s.bF)(i,{placeholder:"",modelValue:(0,m.R1)(d).centerX,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,m.R1)(d).centerX=e),onInput:r,onChange:n},{append:(0,s.k6)(()=>l[5]||(l[5]=[(0,s.eW)("%")])),_:1},8,["modelValue"])]),_:1}),(0,s.bF)(t,{class:"view-attribute-item",label:"中心纵坐标"},{default:(0,s.k6)(()=>[(0,s.bF)(i,{placeholder:"",modelValue:(0,m.R1)(d).centerY,"onUpdate:modelValue":l[2]||(l[2]=e=>(0,m.R1)(d).centerY=e),onInput:p,onChange:n},{append:(0,s.k6)(()=>l[6]||(l[6]=[(0,s.eW)("%")])),_:1},8,["modelValue"])]),_:1}),(0,s.bF)(t,{class:"view-attribute-item",label:"内径"},{default:(0,s.k6)(()=>[(0,s.bF)(i,{placeholder:"",modelValue:(0,m.R1)(d).radiusInner,"onUpdate:modelValue":l[3]||(l[3]=e=>(0,m.R1)(d).radiusInner=e),onChange:n},null,8,["modelValue"])]),_:1}),(0,s.bF)(t,{class:"view-attribute-item",label:"外径"},{default:(0,s.k6)(()=>[(0,s.bF)(i,{placeholder:"",modelValue:(0,m.R1)(d).radiusOuter,"onUpdate:modelValue":l[4]||(l[4]=e=>(0,m.R1)(d).radiusOuter=e),onChange:n},null,8,["modelValue"])]),_:1})],64)}}});const Ae=Ee;var Ne=Ae,Ue=(0,s.pM)({__name:"funnelSetting",props:{value:{}},emits:["update:value"],setup(e,{emit:l}){const a={...(0,We.QL)()},t=l,i=e,d=(0,m.KR)({...a}),n=()=>{t("update:value",d.value)},r=(e,l)=>{const a={...d.value};a[e]=l.replace(/[^\d]/g,""),d.value=a};return(0,s.wB)(()=>i.value,e=>{d.value={...a,...e}},{immediate:!0}),(e,l)=>{const a=o.WK,t=u.xE,i=A.lq,p=E.Zh,v=E.MQ,c=D.B8,b=x.rF;return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(t,{class:"view-attribute-item",label:"左侧距离"},{default:(0,s.k6)(()=>[(0,s.bF)(a,{placeholder:"",modelValue:(0,m.R1)(d).left,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,m.R1)(d).left=e),onInput:l[1]||(l[1]=e=>r("left",e)),onChange:n},{append:(0,s.k6)(()=>l[14]||(l[14]=[(0,s.eW)("%")])),_:1},8,["modelValue"])]),_:1}),(0,s.bF)(t,{class:"view-attribute-item",label:"组件宽度"},{default:(0,s.k6)(()=>[(0,s.bF)(a,{placeholder:"",modelValue:(0,m.R1)(d).width,"onUpdate:modelValue":l[2]||(l[2]=e=>(0,m.R1)(d).width=e),onInput:l[3]||(l[3]=e=>r("width",e)),onChange:n},{append:(0,s.k6)(()=>l[15]||(l[15]=[(0,s.eW)("%")])),_:1},8,["modelValue"])]),_:1}),(0,s.bF)(t,{class:"view-attribute-item",label:"上部距离"},{default:(0,s.k6)(()=>[(0,s.bF)(i,{"controls-position":"right",clearable:"",style:{width:"100%"},modelValue:(0,m.R1)(d).top,"onUpdate:modelValue":l[4]||(l[4]=e=>(0,m.R1)(d).top=e),onChange:n},null,8,["modelValue"])]),_:1}),(0,s.bF)(t,{class:"view-attribute-item",label:"下部距离"},{default:(0,s.k6)(()=>[(0,s.bF)(i,{"controls-position":"right",clearable:"",style:{width:"100%"},modelValue:(0,m.R1)(d).bottom,"onUpdate:modelValue":l[5]||(l[5]=e=>(0,m.R1)(d).bottom=e),onChange:n},null,8,["modelValue"])]),_:1}),(0,s.bF)(t,{class:"view-attribute-item",label:"最小宽度"},{default:(0,s.k6)(()=>[(0,s.bF)(a,{placeholder:"",modelValue:(0,m.R1)(d).minSize,"onUpdate:modelValue":l[6]||(l[6]=e=>(0,m.R1)(d).minSize=e),onInput:l[7]||(l[7]=e=>r("minSize",e)),onChange:n},{append:(0,s.k6)(()=>l[16]||(l[16]=[(0,s.eW)("%")])),_:1},8,["modelValue"])]),_:1}),(0,s.bF)(t,{class:"view-attribute-item",label:"最大宽度"},{default:(0,s.k6)(()=>[(0,s.bF)(a,{placeholder:"",modelValue:(0,m.R1)(d).maxSize,"onUpdate:modelValue":l[8]||(l[8]=e=>(0,m.R1)(d).maxSize=e),onInput:l[9]||(l[9]=e=>r("maxSize",e)),onChange:n},{append:(0,s.k6)(()=>l[17]||(l[17]=[(0,s.eW)("%")])),_:1},8,["modelValue"])]),_:1}),(0,s.bF)(t,{class:"view-attribute-item",label:"排序"},{default:(0,s.k6)(()=>[(0,s.bF)(v,{modelValue:(0,m.R1)(d).sort,"onUpdate:modelValue":l[10]||(l[10]=e=>(0,m.R1)(d).sort=e),onChange:n},{default:(0,s.k6)(()=>[(0,s.bF)(p,{value:"descending"},{default:(0,s.k6)(()=>l[18]||(l[18]=[(0,s.eW)("降序")])),_:1,__:[18]}),(0,s.bF)(p,{value:"ascending"},{default:(0,s.k6)(()=>l[19]||(l[19]=[(0,s.eW)("升序")])),_:1,__:[19]})]),_:1},8,["modelValue"])]),_:1}),(0,s.bF)(t,{class:"view-attribute-item",label:"间距"},{default:(0,s.k6)(()=>[(0,s.bF)(c,{style:{width:"95%","margin-left":"5px"},modelValue:(0,m.R1)(d).gap,"onUpdate:modelValue":l[11]||(l[11]=e=>(0,m.R1)(d).gap=e),min:0,max:10,onChange:n},null,8,["modelValue"])]),_:1}),(0,s.bF)(t,{class:"view-attribute-item",label:"边框颜色"},{default:(0,s.k6)(()=>[(0,s.bF)(b,{modelValue:(0,m.R1)(d).itemStyle.borderColor,"onUpdate:modelValue":l[12]||(l[12]=e=>(0,m.R1)(d).itemStyle.borderColor=e),onChange:n},null,8,["modelValue"])]),_:1}),(0,s.bF)(t,{class:"view-attribute-item",label:"边框宽度"},{default:(0,s.k6)(()=>[(0,s.bF)(c,{style:{width:"95%","margin-left":"5px"},modelValue:(0,m.R1)(d).itemStyle.borderWidth,"onUpdate:modelValue":l[13]||(l[13]=e=>(0,m.R1)(d).itemStyle.borderWidth=e),min:0,max:10,size:"default",onChange:n},null,8,["modelValue"])]),_:1})],64)}}});const Pe=Ue;var Xe=Pe,Ke=(0,s.pM)({__name:"radarPropSeriesSetting",props:{value:{}},emits:["update:value"],setup(e,{emit:l}){const a={...(0,We.Yb)()},t=l,o=e,i=(0,m.KR)({...a}),d=()=>{t("update:value",i.value)};return(0,s.wB)(()=>o.value,e=>{i.value={...a,...e}},{immediate:!0}),(e,l)=>{const a=S.P9,t=S.AV,o=u.xE,n=D.B8,r=x.rF,p=A.lq;return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(o,{label:"端点样式"},{default:(0,s.k6)(()=>[(0,s.bF)(t,{modelValue:(0,m.R1)(i).symbol,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,m.R1)(i).symbol=e),placeholder:"",onChange:d},{default:(0,s.k6)(()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,m.R1)(Z.ShapeType).getList(),e=>((0,s.uX)(),(0,s.Wv)(a,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),(0,s.bF)(o,{label:"端点大小"},{default:(0,s.k6)(()=>[(0,s.bF)(n,{modelValue:(0,m.R1)(i).symbolSize,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,m.R1)(i).symbolSize=e),min:0,max:10,onChange:d},null,8,["modelValue"])]),_:1}),(0,s.bF)(o,{label:"端点描边颜色"},{default:(0,s.k6)(()=>[(0,s.bF)(r,{modelValue:(0,m.R1)(i).itemStyle.borderColor,"onUpdate:modelValue":l[2]||(l[2]=e=>(0,m.R1)(i).itemStyle.borderColor=e),onChange:d},null,8,["modelValue"])]),_:1}),(0,s.bF)(o,{label:"端点描边宽度"},{default:(0,s.k6)(()=>[(0,s.bF)(p,{"controls-position":"right",clearable:"",style:{width:"100%"},min:0,modelValue:(0,m.R1)(i).itemStyle.borderWidth,"onUpdate:modelValue":l[3]||(l[3]=e=>(0,m.R1)(i).itemStyle.borderWidth=e),onChange:d},null,8,["modelValue"])]),_:1}),(0,s.bF)(o,{label:"高亮线条宽度"},{default:(0,s.k6)(()=>[(0,s.bF)(p,{"controls-position":"right",clearable:"",style:{width:"100%"},min:0,modelValue:(0,m.R1)(i).emphasis.lineStyle.width,"onUpdate:modelValue":l[4]||(l[4]=e=>(0,m.R1)(i).emphasis.lineStyle.width=e),onChange:d},null,8,["modelValue"])]),_:1}),(0,s.bF)(o,{label:"填充区域透明度"},{default:(0,s.k6)(()=>[(0,s.bF)(n,{modelValue:(0,m.R1)(i).areaStyleOpacity,"onUpdate:modelValue":l[5]||(l[5]=e=>(0,m.R1)(i).areaStyleOpacity=e),min:0,max:10,onChange:d},null,8,["modelValue"])]),_:1})],64)}}});const ze=Ke;var Qe=ze,Be=a(91542);a(37985);const Oe=["onClick"],Me={class:"chart-color-item-color",style:{"padding-top":"3px"}};var Ge=(0,s.pM)({__name:"radarColorSelect",props:{value:{default:()=>[]},allowCreate:{type:Boolean,default:!1},supportSort:{type:Boolean,default:!0},showAlpha:{type:Boolean,default:!1}},emits:["update:value"],setup(e,{emit:l}){const a=["#ff4500","#ff8c00","#ffd700","#90ee90","#00ced1","#1e90ff","#c71585","#c7158577","rgba(255, 69, 0, 0.68)","rgb(255, 120, 0)","hsv(51, 100, 98)","hsva(120, 40, 94, 0.5)","hsl(181, 100%, 37%)","hsla(209, 100%, 56%, 0.73)"],t=l,u=e,o=(0,m.KR)(a),i=(0,s.EW)({get:()=>u.value,set:e=>{console.log("colorList change",e),t("update:value",e)}}),d=()=>{const e=u.value;e.push("rgba(230,230,230,0.8)"),t("update:value",e)},n=e=>{i.value.splice(e,1)},r=(e,l)=>{console.log("color chage",e,l),t("update:value",u.value)};return(e,l)=>{const a=x.rF,t=Be.tk;return(0,s.uX)(),(0,s.Wv)((0,m.R1)(L.MA),{draggable:".item-draggable",modelValue:(0,m.R1)(i),"onUpdate:modelValue":l[0]||(l[0]=e=>(0,m.i9)(i)?i.value=e:null),group:"item-draggable",style:{display:"inline-block",height:"100%"},disabled:!e.supportSort},{default:(0,s.k6)(()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.value,(l,u)=>((0,s.uX)(),(0,s.CE)("div",{class:"chart-color-item item-draggable",key:u},[(0,s.bF)(a,{modelValue:(0,m.R1)(i)[u],"onUpdate:modelValue":e=>(0,m.R1)(i)[u]=e,predefine:(0,m.R1)(o),showAlpha:e.showAlpha,onChange:e=>r(e,u)},null,8,["modelValue","onUpdate:modelValue","predefine","showAlpha","onChange"]),(0,s.Lk)("div",{class:"chart-color-item-delete",onClick:e=>n(u)},[(0,s.bF)(t,null,{default:(0,s.k6)(()=>[(0,s.bF)((0,m.R1)(I.Minus))]),_:1})],8,Oe)]))),128)),(0,s.Lk)("div",{class:"chart-color-item chart-color-create",onClick:d},[(0,s.Lk)("div",Me,[(0,s.bF)(t,null,{default:(0,s.k6)(()=>[(0,s.bF)((0,m.R1)(I.Plus))]),_:1})])])]),_:1},8,["modelValue","disabled"])}}});const je=(0,j.A)(Ge,[["__scopeId","data-v-b9ae0214"]]);var qe=je,He=(0,s.pM)({__name:"EditRadarIndicatorForm",props:{rowData:{},dialog:{}},setup(e){const l=(0,V.l5)(),a=e,t=(0,s.EW)(()=>l.defaultFormItemSize),o=(0,m.KR)(),d=(0,m.KR)({columnId:void 0,min:0,max:1e4}),p=()=>{a.dialog&&a.dialog.cancel()},c=()=>{o.value.validate(e=>{e&&a.dialog&&a.dialog.submit(d.value)})};return(0,s.sV)(()=>{d.value.text=a.rowData.text,d.value.min=a.rowData.min,d.value.max=a.rowData.max,d.value.columnId=a.rowData.columnId}),(e,l)=>{const a=A.lq,b=u.xE,f=i.uD,g=n.S2,y=u.US,h=r.S2;return(0,s.uX)(),(0,s.Wv)(g,{class:"form-edit-widget-categroy-column third-party-dlg"},{default:(0,s.k6)(()=>[(0,s.bF)(y,{ref_key:"form",ref:o,model:(0,m.R1)(d),class:"full-width-input form-box",style:{width:"100%"},"label-width":"100px",size:(0,m.R1)(t),"label-position":"right",onSubmit:l[2]||(l[2]=(0,v.D$)(()=>{},["prevent"]))},{default:(0,s.k6)(()=>[(0,s.bF)(g,{gutter:20},{default:(0,s.k6)(()=>[(0,s.bF)(f,{span:24},{default:(0,s.k6)(()=>[(0,s.bF)(b,{label:"最大值",prop:"max"},{default:(0,s.k6)(()=>[(0,s.bF)(a,{modelValue:(0,m.R1)(d).max,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,m.R1)(d).max=e),"controls-position":"right",placeholder:"",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),(0,s.bF)(f,{span:24,prop:"min"},{default:(0,s.k6)(()=>[(0,s.bF)(b,{label:"最小值"},{default:(0,s.k6)(()=>[(0,s.bF)(a,{modelValue:(0,m.R1)(d).min,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,m.R1)(d).min=e),"controls-position":"right",placeholder:"",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","size"]),(0,s.bF)(g,{class:"no-scroll menu-box",type:"flex",justify:"end"},{default:(0,s.k6)(()=>[(0,s.bF)(h,{size:(0,m.R1)(t),plain:!0,onClick:p},{default:(0,s.k6)(()=>l[3]||(l[3]=[(0,s.eW)(" 取消 ")])),_:1,__:[3]},8,["size"]),(0,s.bF)(h,{type:"primary",size:(0,m.R1)(t),onClick:c},{default:(0,s.k6)(()=>l[4]||(l[4]=[(0,s.eW)(" 保存 ")])),_:1,__:[4]},8,["size"])]),_:1})]),_:1})}}});const $e=He;var Je=$e;const Ye=["onClick"],Ze={class:"indicator-label"},el={class:"indicator-value"};var ll=(0,s.pM)({__name:"radarPropRadarSetting",props:{value:{}},emits:["update:value"],setup(e,{emit:l}){const a={...(0,We.KG)()},t=l,o=e,i=(0,m.KR)({...a,...o.value,centerX:50,centerY:50}),d=(0,s.WQ)("formConfig",()=>(console.error("radarPropRadarSetting: formConfig not injected"),{})),n=(0,s.EW)(()=>d().currentWidget),r=(0,s.EW)(()=>n.value?(n.value.props||{}).radarSetting:void 0),c=(0,s.EW)(()=>n.value.props.datasetInfo.valueColumnList),b=()=>{i.value.center=[i.value.centerX+"%",i.value.centerY+"%"],t("update:value",i.value)};(0,s.wB)(()=>o.value,e=>{i.value={...a,...e}},{immediate:!0});const f=e=>{P.l.show("指示器",Je,{area:["600px"]},{rowData:e},{}).then(()=>{b()}).catch(e=>{console.warn(e)})};return(e,l)=>{const a=D.B8,t=u.xE,o=E.Zh,d=E.MQ,n=A.lq,g=x.rF,y=u.US;return(0,m.R1)(r)?((0,s.uX)(),(0,s.Wv)(y,{key:0,"label-position":"top",size:"default",onSubmit:l[9]||(l[9]=(0,v.D$)(()=>{},["prevent"]))},{default:(0,s.k6)(()=>[(0,s.bF)(t,{label:"显示位置(X)"},{default:(0,s.k6)(()=>[(0,s.bF)(a,{modelValue:(0,m.R1)(i).centerX,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,m.R1)(i).centerX=e),min:0,max:100,onChange:b},null,8,["modelValue"])]),_:1}),(0,s.bF)(t,{label:"显示位置(Y)"},{default:(0,s.k6)(()=>[(0,s.bF)(a,{modelValue:(0,m.R1)(i).centerY,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,m.R1)(i).centerY=e),min:0,max:100,onChange:b},null,8,["modelValue"])]),_:1}),(0,s.bF)(t,{label:"形状"},{default:(0,s.k6)(()=>[(0,s.bF)(d,{modelValue:(0,m.R1)(i).shape,"onUpdate:modelValue":l[2]||(l[2]=e=>(0,m.R1)(i).shape=e),onChange:b},{default:(0,s.k6)(()=>[(0,s.bF)(o,{value:"polygon"},{default:(0,s.k6)(()=>l[10]||(l[10]=[(0,s.eW)("多边形")])),_:1,__:[10]}),(0,s.bF)(o,{value:"circle"},{default:(0,s.k6)(()=>l[11]||(l[11]=[(0,s.eW)("圆形")])),_:1,__:[11]})]),_:1},8,["modelValue"])]),_:1}),(0,s.bF)(t,{label:"雷达图尺寸"},{default:(0,s.k6)(()=>[(0,s.bF)(n,{"controls-position":"right",clearable:"",style:{width:"100%"},min:0,modelValue:(0,m.R1)(i).radius,"onUpdate:modelValue":l[3]||(l[3]=e=>(0,m.R1)(i).radius=e),onChange:b},null,8,["modelValue"])]),_:1}),(0,s.bF)(t,{label:"旋转角度"},{default:(0,s.k6)(()=>[(0,s.bF)(n,{"controls-position":"right",clearable:"",style:{width:"100%"},min:0,max:180,modelValue:(0,m.R1)(i).startAngle,"onUpdate:modelValue":l[4]||(l[4]=e=>(0,m.R1)(i).startAngle=e),onChange:b},null,8,["modelValue"])]),_:1}),(0,s.bF)(t,{label:"指示器"},{default:(0,s.k6)(()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,m.R1)(c),(e,l)=>((0,s.uX)(),(0,s.CE)("div",{class:"indicator-wrapper",key:l,onClick:l=>f(e)},[(0,s.Lk)("span",Ze,(0,p.v_)(e.showName),1),(0,s.Lk)("span",el,(0,p.v_)(e.max?"最大值"+e.max:"")+" "+(0,p.v_)(e.min?"最小值"+e.min:""),1)],8,Ye))),128))]),_:1}),(0,s.bF)(t,{label:"顶点字体颜色"},{default:(0,s.k6)(()=>[(0,s.bF)(g,{modelValue:(0,m.R1)(i).axisLine.lineStyle.color,"onUpdate:modelValue":l[5]||(l[5]=e=>(0,m.R1)(i).axisLine.lineStyle.color=e),onChange:b},null,8,["modelValue"])]),_:1}),(0,s.bF)(t,{label:"分隔线颜色"},{default:(0,s.k6)(()=>[(0,s.bF)(g,{modelValue:(0,m.R1)(i).splitLine.lineStyle.color,"onUpdate:modelValue":l[6]||(l[6]=e=>(0,m.R1)(i).splitLine.lineStyle.color=e),onChange:b},null,8,["modelValue"])]),_:1}),(0,s.bF)(t,{label:"分割段数"},{default:(0,s.k6)(()=>[(0,s.bF)(a,{modelValue:(0,m.R1)(i).splitNumber,"onUpdate:modelValue":l[7]||(l[7]=e=>(0,m.R1)(i).splitNumber=e),min:0,max:10,onChange:b},null,8,["modelValue"])]),_:1}),(0,s.bF)(t,{label:"分隔区域配色"},{default:(0,s.k6)(()=>[(0,s.bF)(qe,{value:(0,m.R1)(i).splitArea.areaStyle.color,"onUpdate:value":l[8]||(l[8]=e=>(0,m.R1)(i).splitArea.areaStyle.color=e),showAlpha:!0,allowCreate:!0,onChange:b},null,8,["value"])]),_:1})]),_:1})):(0,s.Q3)("",!0)}}});const al=(0,j.A)(ll,[["__scopeId","data-v-2ad69d08"]]);var tl=al,ul=(0,s.pM)({__name:"scatterSetting",props:{value:{}},emits:["update:value"],setup(e,{emit:l}){const a={shape:1,size:20},t=l,o=e,i=(0,m.KR)({...a}),d=()=>{t("update:value",i.value)};return(0,s.wB)(()=>o.value,e=>{i.value={...a,...e}},{immediate:!0}),(e,l)=>{const a=S.P9,t=S.AV,o=u.xE,n=D.B8;return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(o,{class:"view-attribute-item",label:"气泡类型"},{default:(0,s.k6)(()=>[(0,s.bF)(t,{modelValue:(0,m.R1)(i).symbolType,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,m.R1)(i).symbolType=e),placeholder:"",onChange:d},{default:(0,s.k6)(()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,m.R1)(N.ScatterSymbolType).getList(),e=>((0,s.uX)(),(0,s.Wv)(a,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),(0,s.bF)(o,{class:"view-attribute-item slider-item",label:"气泡大小"},{default:(0,s.k6)(()=>[(0,s.bF)(n,{modelValue:(0,m.R1)(i).itemSize,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,m.R1)(i).itemSize=e),min:1,max:50,onChange:d,style:{width:"100% !important"}},null,8,["modelValue"])]),_:1})],64)}}});const ol=ul;var il=ol,dl=(0,s.pM)({__name:"gaugeSetting",props:{value:{}},emits:["update:value"],setup(e,{emit:l}){const a={...(0,We.r2)()},t=l,i=e,d=(0,m.KR)({...a,...i.value,centerX:50,centerY:50}),n=(0,s.EW)({get:function(){return Number(d.value.radius.replace("%",""))},set:function(e){d.value.radius=e+"%"}}),r=(0,s.EW)({get:function(){return d.value.axisLine.lineStyle.color[0][1]},set:function(e){d.value.axisLine.lineStyle.color[0][1]=e}}),p=(e,l)=>{let a=/^[0-9]*$/;a.test(l)&&(d.value[e]=l)},c=()=>{d.value.center=[d.value.centerX+"%",d.value.centerY+"%"],t("update:value",d.value)};return(0,s.wB)(()=>i.value,e=>{d.value={...a,...e}},{immediate:!0}),(e,l)=>{const a=o.WK,t=u.xE,i=D.B8,b=x.rF,f=u.US;return(0,s.uX)(),(0,s.Wv)(f,{"label-position":"top",size:"default",onSubmit:l[11]||(l[11]=(0,v.D$)(()=>{},["prevent"]))},{default:(0,s.k6)(()=>[(0,s.bF)(t,{label:"最小值"},{default:(0,s.k6)(()=>[(0,s.bF)(a,{type:"number",modelValue:(0,m.R1)(d).min,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,m.R1)(d).min=e),onInput:l[1]||(l[1]=e=>p("min",e)),onChange:c},null,8,["modelValue"])]),_:1}),(0,s.bF)(t,{label:"最大值"},{default:(0,s.k6)(()=>[(0,s.bF)(a,{type:"number",modelValue:(0,m.R1)(d).max,"onUpdate:modelValue":l[2]||(l[2]=e=>(0,m.R1)(d).max=e),onInput:l[3]||(l[3]=e=>p("max",e)),onChange:c},null,8,["modelValue"])]),_:1}),(0,s.bF)(t,{label:"起始角度"},{default:(0,s.k6)(()=>[(0,s.bF)(i,{modelValue:(0,m.R1)(d).startAngle,"onUpdate:modelValue":l[4]||(l[4]=e=>(0,m.R1)(d).startAngle=e),min:-360,max:360,onChange:c},null,8,["modelValue"])]),_:1}),(0,s.bF)(t,{label:"结束角度"},{default:(0,s.k6)(()=>[(0,s.bF)(i,{modelValue:(0,m.R1)(d).endAngle,"onUpdate:modelValue":l[5]||(l[5]=e=>(0,m.R1)(d).endAngle=e),min:-360,max:360,onChange:c},null,8,["modelValue"])]),_:1}),(0,s.bF)(t,{label:"缩放 %"},{default:(0,s.k6)(()=>[(0,s.bF)(i,{modelValue:(0,m.R1)(n),"onUpdate:modelValue":l[6]||(l[6]=e=>(0,m.i9)(n)?n.value=e:null),min:20,max:100,onChange:c},null,8,["modelValue"])]),_:1}),(0,s.bF)(t,{label:"显示位置(X)"},{default:(0,s.k6)(()=>[(0,s.bF)(i,{modelValue:(0,m.R1)(d).centerX,"onUpdate:modelValue":l[7]||(l[7]=e=>(0,m.R1)(d).centerX=e),min:0,max:100,onChange:c},null,8,["modelValue"])]),_:1}),(0,s.bF)(t,{label:"显示位置(Y)"},{default:(0,s.k6)(()=>[(0,s.bF)(i,{modelValue:(0,m.R1)(d).centerY,"onUpdate:modelValue":l[8]||(l[8]=e=>(0,m.R1)(d).centerY=e),min:0,max:100,onChange:c},null,8,["modelValue"])]),_:1}),(0,s.bF)(t,{label:"分割段数"},{default:(0,s.k6)(()=>[(0,s.bF)(i,{modelValue:(0,m.R1)(d).splitNumber,"onUpdate:modelValue":l[9]||(l[9]=e=>(0,m.R1)(d).splitNumber=e),min:0,max:100,onChange:c},null,8,["modelValue"])]),_:1}),(0,s.bF)(t,{label:"仪表颜色配色"},{default:(0,s.k6)(()=>[(0,s.bF)(b,{modelValue:(0,m.R1)(r),"onUpdate:modelValue":l[10]||(l[10]=e=>(0,m.i9)(r)?r.value=e:null),onChange:c},null,8,["modelValue"])]),_:1})]),_:1})}}});const nl=dl;var rl=nl,sl=(0,s.pM)({__name:"progress",props:{value:{}},emits:["update:value"],setup(e,{emit:l}){const a=l,t=e,o=(0,m.KR)({}),i=()=>{a("update:value",o.value)};return(0,s.wB)(()=>t.value,()=>{o.value=t.value},{immediate:!0}),(e,l)=>{const a=A.lq,t=u.xE,d=x.rF,n=D.B8,r=E.Zh,p=E.MQ,c=Fe.qi;return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(t,{class:"view-attribute-item",label:"进度条最大值"},{default:(0,s.k6)(()=>[(0,s.bF)(a,{"controls-position":"right",clearable:"",min:0,style:{width:"100%"},modelValue:(0,m.R1)(o).maxValue,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,m.R1)(o).maxValue=e),onChange:i},null,8,["modelValue"])]),_:1}),(0,s.bF)(t,{class:"view-attribute-item",label:"进度条颜色"},{default:(0,s.k6)(()=>[(0,s.bF)(d,{modelValue:(0,m.R1)(o).color,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,m.R1)(o).color=e),onChange:i},null,8,["modelValue"])]),_:1}),(0,s.bF)(t,{class:"view-attribute-item",label:"进度条底色"},{default:(0,s.k6)(()=>[(0,s.bF)(d,{modelValue:(0,m.R1)(o).defineBackColor,"onUpdate:modelValue":l[2]||(l[2]=e=>(0,m.R1)(o).defineBackColor=e),onChange:i},null,8,["modelValue"])]),_:1}),(0,s.bF)(t,{class:"view-attribute-item",label:"进度条宽度"},{default:(0,s.k6)(()=>[(0,s.bF)(n,{style:{width:"95%","margin-left":"5px"},modelValue:(0,m.R1)(o).strokeWidth,"onUpdate:modelValue":l[3]||(l[3]=e=>(0,m.R1)(o).strokeWidth=e),min:0,max:50,size:"default",onChange:i},null,8,["modelValue"])]),_:1}),(0,m.R1)(o).width?((0,s.uX)(),(0,s.Wv)(t,{key:0,class:"view-attribute-item",label:"进度条直径"},{default:(0,s.k6)(()=>[(0,s.bF)(a,{"controls-position":"right",clearable:"",min:5,style:{width:"100%"},modelValue:(0,m.R1)(o).width,"onUpdate:modelValue":l[4]||(l[4]=e=>(0,m.R1)(o).width=e),onChange:i},null,8,["modelValue"])]),_:1})):(0,s.Q3)("",!0),(0,m.R1)(o).strokeLinecap?((0,s.uX)(),(0,s.Wv)(t,{key:1,class:"view-attribute-item",label:"进度条两端形状"},{default:(0,s.k6)(()=>[(0,s.bF)(p,{modelValue:(0,m.R1)(o).strokeLinecap,"onUpdate:modelValue":l[5]||(l[5]=e=>(0,m.R1)(o).strokeLinecap=e),onChange:i},{default:(0,s.k6)(()=>[(0,s.bF)(r,{value:"round"},{default:(0,s.k6)(()=>l[9]||(l[9]=[(0,s.eW)("圆形")])),_:1,__:[9]}),(0,s.bF)(r,{value:"square"},{default:(0,s.k6)(()=>l[10]||(l[10]=[(0,s.eW)("方形")])),_:1,__:[10]})]),_:1},8,["modelValue"])]),_:1})):(0,s.Q3)("",!0),(0,s.bo)((0,s.bF)(t,{class:"view-attribute-item",label:"显示文字"},{default:(0,s.k6)(()=>[(0,s.bF)(c,{modelValue:(0,m.R1)(o).showText,"onUpdate:modelValue":l[6]||(l[6]=e=>(0,m.R1)(o).showText=e),onChange:i},null,8,["modelValue"])]),_:1},512),[[v.aG,void 0!=(0,m.R1)(o).showText]]),(0,m.R1)(o).showText?(0,s.bo)(((0,s.uX)(),(0,s.Wv)(t,{key:2,class:"view-attribute-item",label:"文字位置"},{default:(0,s.k6)(()=>[(0,s.bF)(p,{modelValue:(0,m.R1)(o).textInside,"onUpdate:modelValue":l[7]||(l[7]=e=>(0,m.R1)(o).textInside=e),onChange:i},{default:(0,s.k6)(()=>[(0,s.bF)(r,{value:!0},{default:(0,s.k6)(()=>l[11]||(l[11]=[(0,s.eW)("内部")])),_:1,__:[11]}),(0,s.bF)(r,{value:!1},{default:(0,s.k6)(()=>l[12]||(l[12]=[(0,s.eW)("外部")])),_:1,__:[12]})]),_:1},8,["modelValue"])]),_:1},512)),[[v.aG,void 0!=(0,m.R1)(o).textInside]]):(0,s.Q3)("",!0),(0,m.R1)(o).textStyle.width?((0,s.uX)(),(0,s.Wv)(t,{key:3,class:"view-attribute-item",label:"文字宽度"},{default:(0,s.k6)(()=>[(0,s.bF)(a,{"controls-position":"right",clearable:"",min:5,style:{width:"100%"},modelValue:(0,m.R1)(o).textStyle.width,"onUpdate:modelValue":l[8]||(l[8]=e=>(0,m.R1)(o).textStyle.width=e),onChange:i},null,8,["modelValue"])]),_:1})):(0,s.Q3)("",!0)],64)}}});const ml=sl;var pl=ml,vl=a(97863),cl=(a(44332),(0,s.pM)({__name:"font",props:{textName:{},value:{}},setup(e){const l=e,a=(0,m.KR)({});return(0,s.wB)(()=>l.value,()=>{console.log("props.value change"),a.value=l.value},{immediate:!0}),(e,l)=>{const t=o.WK,i=u.xE,d=D.B8,n=x.rF,r=S.P9,p=S.AV,c=vl.dI;return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bo)((0,s.bF)(i,{label:e.textName+"文字"},{default:(0,s.k6)(()=>[(0,s.bF)(t,{modelValue:(0,m.R1)(a).text,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,m.R1)(a).text=e),clearable:""},null,8,["modelValue"])]),_:1},8,["label"]),[[v.aG,(0,m.R1)(a).text]]),void 0!=(0,m.R1)(a).fontSize?((0,s.uX)(),(0,s.Wv)(i,{key:0,label:e.textName+"字体大小"},{default:(0,s.k6)(()=>[(0,s.bF)(d,{modelValue:(0,m.R1)(a).fontSize,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,m.R1)(a).fontSize=e),min:10,max:40,size:"default"},null,8,["modelValue"])]),_:1},8,["label"])):(0,s.Q3)("",!0),(0,s.bo)((0,s.bF)(i,{label:e.textName+"字体颜色"},{default:(0,s.k6)(()=>[(0,s.bF)(n,{modelValue:(0,m.R1)(a).color,"onUpdate:modelValue":l[2]||(l[2]=e=>(0,m.R1)(a).color=e)},null,8,["modelValue"])]),_:1},8,["label"]),[[v.aG,(0,m.R1)(a).color]]),(0,s.bo)((0,s.bF)(i,{label:e.textName+"水平位置"},{default:(0,s.k6)(()=>[(0,s.bF)(p,{modelValue:(0,m.R1)(a).textAlign,"onUpdate:modelValue":l[3]||(l[3]=e=>(0,m.R1)(a).textAlign=e),placeholder:""},{default:(0,s.k6)(()=>[(0,s.bF)(r,{label:"左",value:"left"}),(0,s.bF)(r,{label:"中",value:"center"}),(0,s.bF)(r,{label:"右",value:"right"})]),_:1},8,["modelValue"])]),_:1},8,["label"]),[[v.aG,(0,m.R1)(a).textAlign]]),(0,s.bo)((0,s.bF)(i,{label:e.textName+"字体样式"},{default:(0,s.k6)(()=>[(0,s.bo)((0,s.bF)(c,{modelValue:(0,m.R1)(a).bold,"onUpdate:modelValue":l[4]||(l[4]=e=>(0,m.R1)(a).bold=e)},{default:(0,s.k6)(()=>l[6]||(l[6]=[(0,s.eW)("粗体")])),_:1,__:[6]},8,["modelValue"]),[[v.aG,void 0!=(0,m.R1)(a).bold]]),(0,s.bo)((0,s.bF)(c,{modelValue:(0,m.R1)(a).italics,"onUpdate:modelValue":l[5]||(l[5]=e=>(0,m.R1)(a).italics=e)},{default:(0,s.k6)(()=>l[7]||(l[7]=[(0,s.eW)("斜体")])),_:1,__:[7]},8,["modelValue"]),[[v.aG,void 0!=(0,m.R1)(a).italics]])]),_:1},8,["label"]),[[v.aG,void 0!=(0,m.R1)(a).bold&&void 0!=(0,m.R1)(a).italics]])],64)}}}));const bl=cl;var fl=bl,gl=(0,s.pM)({__name:"progressBarSetting",props:{value:{}},setup(e){const l=e,a=(0,s.WQ)("formConfig",()=>(console.error("dataCardSetting: formConfig not injected"),{})),t=(0,m.KR)({}),u=(0,s.EW)(()=>a().currentWidget);return(0,s.wB)(()=>u.value,()=>{t.value=u.value?.props.seriesSetting,console.log("seriesSetting >>>",t.value,l.value)},{immediate:!0}),(e,l)=>((0,s.uX)(),(0,s.CE)("div",null,[(0,s.bF)(pl,{value:(0,m.R1)(t),"onUpdate:value":l[0]||(l[0]=e=>(0,m.i9)(t)?t.value=e:null)},null,8,["value"]),(0,m.R1)(t).showText?((0,s.uX)(),(0,s.Wv)(fl,{key:0,value:(0,m.R1)(t).textStyle,"onUpdate:value":l[1]||(l[1]=e=>(0,m.R1)(t).textStyle=e),textName:"进度条"},null,8,["value"])):(0,s.Q3)("",!0)]))}});const yl=gl;var hl=yl,Rl=(0,s.pM)({__name:"progressCircleSetting",props:{value:{}},setup(e){const l=e,a=(0,s.WQ)("formConfig",()=>(console.error("dataCardSetting: formConfig not injected"),{})),t=(0,m.KR)({}),u=(0,s.EW)(()=>a().currentWidget);return(0,s.wB)(()=>u.value,()=>{t.value=u.value?.props.seriesSetting,console.log("seriesSetting >>>",t.value,l.value)},{immediate:!0}),(e,l)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(pl,{value:(0,m.R1)(t),"onUpdate:value":l[0]||(l[0]=e=>(0,m.i9)(t)?t.value=e:null)},null,8,["value"]),(0,s.bF)(fl,{value:(0,m.R1)(t).textStyle,"onUpdate:value":l[1]||(l[1]=e=>(0,m.R1)(t).textStyle=e),textName:"进度条"},null,8,["value"])],64))}});const Vl=Rl;var kl=Vl,_l=a(11194),Cl=(a(57583),a(92358));a(5954);const wl={style:{display:"flex","align-items":"center"}},Fl=["src"];var Wl=(0,s.pM)({__name:"imageUploader",props:{value:{},textName:{}},emits:["update:value"],setup(e,{emit:l}){const a=l,t=e,o=(0,m.KR)({}),i=e=>new Promise((l,a)=>{(0,g.bB)(e).then(e=>{o.value.icon=e,l(!0)}).catch(e=>{a(e)})}),d=()=>{o.value={},a("update:value",o.value)};return(0,s.wB)(()=>t.value,()=>{o.value=t.value},{immediate:!0}),(e,l)=>{const a=r.S2,t=Cl.j5,n=u.xE,p=A.lq;return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bo)((0,s.bF)(n,{label:e.textName+"上传"},{default:(0,s.k6)(()=>[(0,s.Lk)("div",wl,[(0,s.bF)(t,{class:"upload-demo",action:"","on-remove":d,"before-upload":i,limit:1,"show-file-list":!1},{default:(0,s.k6)(()=>[(0,s.bF)(a,{size:"default",type:"primary"},{default:(0,s.k6)(()=>l[2]||(l[2]=[(0,s.eW)("点击上传")])),_:1,__:[2]})]),_:1}),(0,m.R1)(o).icon?((0,s.uX)(),(0,s.CE)("img",{key:0,src:(0,m.R1)(o).icon,style:{width:"50px",height:"50px","margin-left":"20px","border-radius":"50%"}},null,8,Fl)):(0,s.Q3)("",!0)])]),_:1},8,["label"]),[[v.aG,void 0!=(0,m.R1)(o).icon]]),(0,s.bF)(n,{class:"view-attribute-item",label:"图标大小"},{default:(0,s.k6)(()=>[(0,s.bF)(p,{"controls-position":"right",clearable:"",min:0,style:{width:"100%"},modelValue:(0,m.R1)(o).iconSize,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,m.R1)(o).iconSize=e)},null,8,["modelValue"])]),_:1}),(0,s.bF)(n,{class:"view-attribute-item",label:"圆角"},{default:(0,s.k6)(()=>[(0,s.bF)(p,{"controls-position":"right",clearable:"",min:0,max:(0,m.R1)(o).iconSize/2,style:{width:"100%"},modelValue:(0,m.R1)(o).iconRadius,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,m.R1)(o).iconRadius=e)},null,8,["max","modelValue"])]),_:1})],64)}}});const Il=Wl;var Tl=Il,Ll=(0,s.pM)({__name:"dataCardSetting",props:{value:{}},setup(e){const l=e,a=(0,s.WQ)("formConfig",()=>(console.error("dataCardSetting: formConfig not injected"),{})),t=(0,m.KR)({}),u=(0,s.EW)(()=>a().currentWidget);return(0,s.wB)(()=>u.value,()=>{t.value=u.value?.props.seriesSetting,console.log("seriesSetting >>>",t.value,l.value)},{immediate:!0}),(e,l)=>{const a=_l.fR;return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(Tl,{value:(0,m.R1)(t),"onUpdate:value":l[0]||(l[0]=e=>(0,m.i9)(t)?t.value=e:null),textName:"卡片图片"},null,8,["value"]),(0,m.R1)(t).mainTextStyle?((0,s.uX)(),(0,s.Wv)(fl,{key:0,value:(0,m.R1)(t).mainTextStyle,"onUpdate:value":l[1]||(l[1]=e=>(0,m.R1)(t).mainTextStyle=e),textName:"卡片标题"},null,8,["value"])):(0,s.Q3)("",!0),(0,s.bF)(a),(0,m.R1)(t).numTextStyle?((0,s.uX)(),(0,s.Wv)(fl,{key:1,value:(0,m.R1)(t).numTextStyle,"onUpdate:value":l[2]||(l[2]=e=>(0,m.R1)(t).numTextStyle=e),textName:"卡片内容"},null,8,["value"])):(0,s.Q3)("",!0)],64)}}});const xl=Ll;var Sl=xl,Dl=(0,s.pM)({__name:"dataProgressCardSetting",props:{value:{}},setup(e){const l=e,a=(0,s.WQ)("formConfig",()=>(console.error("dataProgressCardSetting: formConfig not injected"),{})),t=(0,m.KR)({}),u=(0,s.EW)(()=>a().currentWidget);return(0,s.wB)(()=>u.value,()=>{t.value=u.value?.props.seriesSetting,console.log("seriesSetting >>>",t.value,l.value)},{immediate:!0}),(e,l)=>{const a=_l.fR;return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(Tl,{value:(0,m.R1)(t),"onUpdate:value":l[0]||(l[0]=e=>(0,m.i9)(t)?t.value=e:null),textName:"卡片图片"},null,8,["value"]),(0,m.R1)(t).mainTextStyle?((0,s.uX)(),(0,s.Wv)(fl,{key:0,value:(0,m.R1)(t).mainTextStyle,"onUpdate:value":l[1]||(l[1]=e=>(0,m.R1)(t).mainTextStyle=e),textName:"卡片标题"},null,8,["value"])):(0,s.Q3)("",!0),(0,s.bF)(a),(0,m.R1)(t).numTextStyle?((0,s.uX)(),(0,s.Wv)(fl,{key:1,value:(0,m.R1)(t).numTextStyle,"onUpdate:value":l[2]||(l[2]=e=>(0,m.R1)(t).numTextStyle=e),textName:"卡片内容"},null,8,["value"])):(0,s.Q3)("",!0),(0,s.bF)(a),(0,s.bF)(pl,{value:(0,m.R1)(t).progress,"onUpdate:value":l[3]||(l[3]=e=>(0,m.R1)(t).progress=e)},null,8,["value"]),(0,s.bF)(fl,{value:(0,m.R1)(t).progress.textStyle,"onUpdate:value":l[4]||(l[4]=e=>(0,m.R1)(t).progress.textStyle=e),textName:"进度条"},null,8,["value"])],64)}}});const El=Dl;var Al=El,Nl=(0,s.pM)({__name:"commonListSetting",setup(e){const l=(0,s.WQ)("formConfig",()=>(console.error("commonListSetting: formConfig not injected"),{})),a=(0,m.KR)({}),t=(0,s.EW)(()=>l().currentWidget);return(0,s.wB)(()=>t.value,()=>{a.value=t.value?.props.seriesSetting},{immediate:!0}),(e,l)=>{const t=S.P9,o=S.AV,i=u.xE,d=x.rF,n=_l.fR;return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(i,{class:"view-attribute-item",label:"列表符号"},{default:(0,s.k6)(()=>[(0,s.bF)(o,{modelValue:(0,m.R1)(a).listIcon,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,m.R1)(a).listIcon=e)},{default:(0,s.k6)(()=>[(0,s.bF)(t,{label:"无",value:""}),(0,s.bF)(t,{label:"数字",value:"digit"}),(0,s.bF)(t,{label:"圆圈",value:"circle"})]),_:1},8,["modelValue"])]),_:1}),(0,s.bo)((0,s.bF)(i,{label:"列表符号颜色"},{default:(0,s.k6)(()=>[(0,s.bF)(d,{modelValue:(0,m.R1)(a).listIconColor,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,m.R1)(a).listIconColor=e)},null,8,["modelValue"])]),_:1},512),[[v.aG,(0,m.R1)(a).listIcon]]),(0,m.R1)(a).titleStyle?((0,s.uX)(),(0,s.Wv)(fl,{key:0,value:(0,m.R1)(a).titleStyle,"onUpdate:value":l[2]||(l[2]=e=>(0,m.R1)(a).titleStyle=e),textName:"内容标题"},null,8,["value"])):(0,s.Q3)("",!0),(0,s.bF)(n),(0,m.R1)(a).textStyle?((0,s.uX)(),(0,s.Wv)(fl,{key:1,value:(0,m.R1)(a).textStyle,"onUpdate:value":l[3]||(l[3]=e=>(0,m.R1)(a).textStyle=e),textName:"内容"},null,8,["value"])):(0,s.Q3)("",!0),(0,s.bF)(n),(0,m.R1)(a).timeStyle?((0,s.uX)(),(0,s.Wv)(fl,{key:2,value:(0,m.R1)(a).timeStyle,"onUpdate:value":l[4]||(l[4]=e=>(0,m.R1)(a).timeStyle=e),textName:"日期"},null,8,["value"])):(0,s.Q3)("",!0)],64)}}});const Ul=Nl;var Pl=Ul,Xl=(0,s.pM)({__name:"index",setup(e){const l=(0,s.WQ)("formConfig",()=>(console.error("ChartSeriesSetting: formConfig not injected"),{})),a=(0,s.EW)(()=>l().currentWidget),t=(0,s.EW)(()=>a.value?(a.value.props||{}).seriesSetting:void 0);return(e,l)=>{const o=u.US;return(0,m.R1)(t)?((0,s.uX)(),(0,s.Wv)(o,{key:0,"label-position":"top",size:"default",style:{padding:"10px 16px 0"},onSubmit:l[12]||(l[12]=(0,v.D$)(()=>{},["prevent"]))},{default:(0,s.k6)(()=>[(0,m.R1)(a).widgetType===(0,m.R1)(Z.ReportWidgetType).LineChart?((0,s.uX)(),(0,s.Wv)(Le,{key:0,value:(0,m.R1)(a).props.seriesSetting,"onUpdate:value":l[0]||(l[0]=e=>(0,m.R1)(a).props.seriesSetting=e)},null,8,["value"])):(0,s.Q3)("",!0),(0,m.R1)(a).widgetType===(0,m.R1)(Z.ReportWidgetType).BarChart?((0,s.uX)(),(0,s.Wv)(De,{key:1,value:(0,m.R1)(a).props.seriesSetting,"onUpdate:value":l[1]||(l[1]=e=>(0,m.R1)(a).props.seriesSetting=e)},null,8,["value"])):(0,s.Q3)("",!0),(0,m.R1)(a).widgetType===(0,m.R1)(Z.ReportWidgetType).PieChart?((0,s.uX)(),(0,s.Wv)(Ne,{key:2,value:(0,m.R1)(a).props.seriesSetting,"onUpdate:value":l[2]||(l[2]=e=>(0,m.R1)(a).props.seriesSetting=e)},null,8,["value"])):(0,s.Q3)("",!0),(0,m.R1)(a).widgetType===(0,m.R1)(Z.ReportWidgetType).FunnelChart?((0,s.uX)(),(0,s.Wv)(Xe,{key:3,value:(0,m.R1)(a).props.seriesSetting,"onUpdate:value":l[3]||(l[3]=e=>(0,m.R1)(a).props.seriesSetting=e)},null,8,["value"])):(0,s.Q3)("",!0),(0,m.R1)(a).widgetType===(0,m.R1)(Z.ReportWidgetType).RadarChart?((0,s.uX)(),(0,s.Wv)(Qe,{key:4,value:(0,m.R1)(a).props.seriesSetting,"onUpdate:value":l[4]||(l[4]=e=>(0,m.R1)(a).props.seriesSetting=e)},null,8,["value"])):(0,s.Q3)("",!0),(0,m.R1)(a).widgetType===(0,m.R1)(Z.ReportWidgetType).RadarChart?((0,s.uX)(),(0,s.Wv)(tl,{key:5,value:(0,m.R1)(a).props.radarSetting,"onUpdate:value":l[5]||(l[5]=e=>(0,m.R1)(a).props.radarSetting=e)},null,8,["value"])):(0,s.Q3)("",!0),(0,m.R1)(a).widgetType===(0,m.R1)(Z.ReportWidgetType).ScatterChart?((0,s.uX)(),(0,s.Wv)(il,{key:6,value:(0,m.R1)(a).props.seriesSetting,"onUpdate:value":l[6]||(l[6]=e=>(0,m.R1)(a).props.seriesSetting=e)},null,8,["value"])):(0,s.Q3)("",!0),(0,m.R1)(a).widgetType===(0,m.R1)(Z.ReportWidgetType).GaugeChart?((0,s.uX)(),(0,s.Wv)(rl,{key:7,value:(0,m.R1)(a).props.seriesSetting,"onUpdate:value":l[7]||(l[7]=e=>(0,m.R1)(a).props.seriesSetting=e)},null,8,["value"])):(0,s.Q3)("",!0),(0,m.R1)(a).widgetType===(0,m.R1)(Z.ReportWidgetType).ProgressBar?((0,s.uX)(),(0,s.Wv)(hl,{key:8,value:(0,m.R1)(a).props.seriesSetting,"onUpdate:value":l[8]||(l[8]=e=>(0,m.R1)(a).props.seriesSetting=e)},null,8,["value"])):(0,s.Q3)("",!0),(0,m.R1)(a).widgetType===(0,m.R1)(Z.ReportWidgetType).ProgressCircle?((0,s.uX)(),(0,s.Wv)(kl,{key:9,value:(0,m.R1)(a).props.seriesSetting,"onUpdate:value":l[9]||(l[9]=e=>(0,m.R1)(a).props.seriesSetting=e)},null,8,["value"])):(0,s.Q3)("",!0),(0,m.R1)(a).widgetType===(0,m.R1)(Z.ReportWidgetType).DataCard?((0,s.uX)(),(0,s.Wv)(Sl,{key:10,value:(0,m.R1)(a).props.seriesSetting,"onUpdate:value":l[10]||(l[10]=e=>(0,m.R1)(a).props.seriesSetting=e)},null,8,["value"])):(0,s.Q3)("",!0),(0,m.R1)(a).widgetType===(0,m.R1)(Z.ReportWidgetType).DataProgressCard?((0,s.uX)(),(0,s.Wv)(Al,{key:11,value:(0,m.R1)(a).props.seriesSetting,"onUpdate:value":l[11]||(l[11]=e=>(0,m.R1)(a).props.seriesSetting=e)},null,8,["value"])):(0,s.Q3)("",!0),(0,m.R1)(a).widgetType===(0,m.R1)(Z.ReportWidgetType).CommonList?((0,s.uX)(),(0,s.Wv)(Pl,{key:12})):(0,s.Q3)("",!0)]),_:1})):(0,s.Q3)("",!0)}}});const Kl=Xl;var zl=Kl,Ql=a(97456),Bl=(a(15936),(0,s.pM)({__name:"index",setup(e){const l=(0,s.WQ)("formConfig",()=>(console.error("ChartLabelSetting: formConfig not injected"),{})),a=(0,s.EW)(()=>l().currentWidget),t=(0,s.EW)(()=>a.value?(a.value.props||{}).labelSetting:void 0);return(e,l)=>{const i=Fe.qi,d=u.xE,n=D.B8,r=x.rF,p=S.P9,c=S.AV,b=Be.tk,f=Ql.R7,g=o.WK,y=u.US;return(0,m.R1)(t)?((0,s.uX)(),(0,s.Wv)(y,{key:0,"label-position":"top",size:"default",style:{padding:"10px 16px 0"},onSubmit:l[6]||(l[6]=(0,v.D$)(()=>{},["prevent"]))},{default:(0,s.k6)(()=>[(0,s.bF)(d,{label:"是否显示"},{default:(0,s.k6)(()=>[(0,s.bF)(i,{modelValue:(0,m.R1)(t).show,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,m.R1)(t).show=e)},null,8,["modelValue"])]),_:1}),(0,s.bo)((0,s.bF)(d,{label:"字体大小"},{default:(0,s.k6)(()=>[(0,s.bF)(n,{modelValue:(0,m.R1)(t).fontSize,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,m.R1)(t).fontSize=e),min:10,max:40,size:"default"},null,8,["modelValue"])]),_:1},512),[[v.aG,(0,m.R1)(t).show]]),(0,s.bo)((0,s.bF)(d,{label:"字体颜色"},{default:(0,s.k6)(()=>[(0,s.bF)(r,{modelValue:(0,m.R1)(t).color,"onUpdate:modelValue":l[2]||(l[2]=e=>(0,m.R1)(t).color=e)},null,8,["modelValue"])]),_:1},512),[[v.aG,(0,m.R1)(t).show]]),(0,s.bo)((0,s.bF)(d,{label:"标签位置"},{default:(0,s.k6)(()=>[(0,m.R1)(a).widgetType===(0,m.R1)(N.SysCustomWidgetType).FunnelChart?((0,s.uX)(),(0,s.Wv)(c,{key:0,modelValue:(0,m.R1)(t).position,"onUpdate:modelValue":l[3]||(l[3]=e=>(0,m.R1)(t).position=e),placeholder:"",style:{width:"100%"}},{default:(0,s.k6)(()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,m.R1)(Z.InsidePosition).getList(),e=>((0,s.uX)(),(0,s.Wv)(p,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):((0,s.uX)(),(0,s.Wv)(c,{key:1,modelValue:(0,m.R1)(t).position,"onUpdate:modelValue":l[4]||(l[4]=e=>(0,m.R1)(t).position=e),placeholder:"",style:{width:"100%"}},{default:(0,s.k6)(()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,m.R1)(Z.VerticalPosition).getList(),e=>((0,s.uX)(),(0,s.Wv)(p,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]))]),_:1},512),[[v.aG,(0,m.R1)(t).show]]),(0,s.bo)((0,s.bF)(d,{label:"内容格式"},{label:(0,s.k6)(()=>[l[8]||(l[8]=(0,s.Lk)("span",null,"内容格式",-1)),(0,s.bF)(f,{class:"item",effect:"dark",placement:"right-start"},{content:(0,s.k6)(()=>l[7]||(l[7]=[(0,s.Lk)("div",null,[(0,s.eW)(" 字符串模版 模版变量有："),(0,s.Lk)("br"),(0,s.eW)(" {a}：系列名。"),(0,s.Lk)("br"),(0,s.eW)(" {b}：数据名。"),(0,s.Lk)("br"),(0,s.eW)(" {c}：数据值。"),(0,s.Lk)("br"),(0,s.eW)(" {d}：百分比（用于饼图等）。 ")],-1)])),default:(0,s.k6)(()=>[(0,s.bF)(b,null,{default:(0,s.k6)(()=>[(0,s.bF)((0,m.R1)(I.InfoFilled))]),_:1})]),_:1})]),default:(0,s.k6)(()=>[(0,s.bF)(g,{modelValue:(0,m.R1)(t).formatter,"onUpdate:modelValue":l[5]||(l[5]=e=>(0,m.R1)(t).formatter=e),type:"textarea",rows:4},null,8,["modelValue"])]),_:1},512),[[v.aG,(0,m.R1)(t).show]])]),_:1})):(0,s.Q3)("",!0)}}}));const Ol=Bl;var Ml=Ol,Gl=a(97024);const jl={key:1};var ql=(0,s.pM)({__name:"index",props:{axisType:{default:N.DirectionType.HORIZONTAL}},setup(e){const l=e,a=(0,s.WQ)("formConfig",()=>(console.error("ChartAxisSetting: formConfig not injected"),{})),t=(0,s.EW)(()=>a().currentWidget),i=(0,s.EW)(()=>l.axisType===N.DirectionType.HORIZONTAL?"xAxisSetting":"yAxisSetting"),d=(0,s.EW)(()=>t.value?(t.value.props||{})[i.value]:void 0);return(e,l)=>{const a=Fe.qi,t=u.xE,i=E.Zh,n=E.MQ,r=o.WK,c=x.rF,b=D.B8,f=_l.fR,g=Be.tk,y=Ql.R7,h=vl.dI,R=u.US;return(0,m.R1)(d)?((0,s.uX)(),(0,s.Wv)(R,{key:0,"label-position":"top",size:"default",style:{padding:"10px 16px 0"},onSubmit:l[19]||(l[19]=(0,v.D$)(()=>{},["prevent"]))},{default:(0,s.k6)(()=>[(0,s.bF)(t,{label:"是否显示"},{default:(0,s.k6)(()=>[(0,s.bF)(a,{modelValue:(0,m.R1)(d).show,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,m.R1)(d).show=e)},null,8,["modelValue"])]),_:1}),(0,s.bo)((0,s.bF)(t,{label:"位置"},{default:(0,s.k6)(()=>[e.axisType===(0,m.R1)(N.DirectionType).HORIZONTAL?((0,s.uX)(),(0,s.Wv)(n,{key:0,modelValue:(0,m.R1)(d).position,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,m.R1)(d).position=e)},{default:(0,s.k6)(()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,m.R1)(Z.HorizontalAxisPostion).getList(),e=>((0,s.uX)(),(0,s.Wv)(i,{key:e.id,value:e.id},{default:(0,s.k6)(()=>[(0,s.eW)((0,p.v_)(e.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])):((0,s.uX)(),(0,s.Wv)(n,{key:1,modelValue:(0,m.R1)(d).position,"onUpdate:modelValue":l[2]||(l[2]=e=>(0,m.R1)(d).position=e)},{default:(0,s.k6)(()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,m.R1)(Z.VerticalAxisPosition).getList(),e=>((0,s.uX)(),(0,s.Wv)(i,{key:e.id,value:e.id},{default:(0,s.k6)(()=>[(0,s.eW)((0,p.v_)(e.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]))]),_:1},512),[[v.aG,(0,m.R1)(d).show]]),(0,s.bo)((0,s.bF)(t,{label:"名称"},{default:(0,s.k6)(()=>[(0,s.bF)(r,{modelValue:(0,m.R1)(d).name,"onUpdate:modelValue":l[3]||(l[3]=e=>(0,m.R1)(d).name=e),clearable:""},null,8,["modelValue"])]),_:1},512),[[v.aG,(0,m.R1)(d).show]]),(0,s.bo)((0,s.bF)(t,{label:"名称颜色"},{default:(0,s.k6)(()=>[(0,s.bF)(c,{modelValue:(0,m.R1)(d).nameTextStyle.color,"onUpdate:modelValue":l[4]||(l[4]=e=>(0,m.R1)(d).nameTextStyle.color=e)},null,8,["modelValue"])]),_:1},512),[[v.aG,(0,m.R1)(d).show]]),(0,s.bo)((0,s.bF)(t,{label:"名称字号"},{default:(0,s.k6)(()=>[(0,s.bF)(b,{modelValue:(0,m.R1)(d).nameTextStyle.fontSize,"onUpdate:modelValue":l[5]||(l[5]=e=>(0,m.R1)(d).nameTextStyle.fontSize=e),min:10,max:40,size:"default"},null,8,["modelValue"])]),_:1},512),[[v.aG,(0,m.R1)(d).show]]),(0,m.R1)(d).show&&e.axisType===(0,m.R1)(N.DirectionType).VERTICAL?((0,s.uX)(),(0,s.Wv)(f,{key:0})):(0,s.Q3)("",!0),(0,m.R1)(d).show&&e.axisType===(0,m.R1)(N.DirectionType).VERTICAL?((0,s.uX)(),(0,s.CE)("div",jl,[(0,s.bF)(t,{class:"view-attribute-item",label:"轴值"},{label:(0,s.k6)(()=>[l[21]||(l[21]=(0,s.Lk)("span",null,"轴值",-1)),(0,s.bF)(y,{class:"item",effect:"dark",placement:"right-start"},{content:(0,s.k6)(()=>l[20]||(l[20]=[(0,s.Lk)("div",null,[(0,s.eW)(" 最小值、最大值、间隔均为数值类型；若不填，则该项视为自动。"),(0,s.Lk)("br"),(0,s.eW)(" 请确保填写数值能正确计算，否则将无法正常显示轴值。 ")],-1)])),default:(0,s.k6)(()=>[(0,s.bF)(g,null,{default:(0,s.k6)(()=>[(0,s.bF)((0,m.R1)(I.InfoFilled))]),_:1})]),_:1})]),default:(0,s.k6)(()=>[(0,s.bF)(h,{modelValue:(0,m.R1)(d).yAxisValueAuto,"onUpdate:modelValue":l[6]||(l[6]=e=>(0,m.R1)(d).yAxisValueAuto=e)},{default:(0,s.k6)(()=>l[22]||(l[22]=[(0,s.eW)("自动")])),_:1,__:[22]},8,["modelValue"])]),_:1}),(0,s.bo)((0,s.bF)(t,{label:"最小值"},{default:(0,s.k6)(()=>[(0,s.bF)(r,{modelValue:(0,m.R1)(d).min,"onUpdate:modelValue":l[7]||(l[7]=e=>(0,m.R1)(d).min=e)},null,8,["modelValue"])]),_:1},512),[[v.aG,!(0,m.R1)(d).yAxisValueAuto]]),(0,s.bo)((0,s.bF)(t,{label:"最大值"},{default:(0,s.k6)(()=>[(0,s.bF)(r,{modelValue:(0,m.R1)(d).max,"onUpdate:modelValue":l[8]||(l[8]=e=>(0,m.R1)(d).max=e)},null,8,["modelValue"])]),_:1},512),[[v.aG,!(0,m.R1)(d).yAxisValueAuto]]),(0,s.bo)((0,s.bF)(t,{label:"间隔"},{default:(0,s.k6)(()=>[(0,s.bF)(r,{modelValue:(0,m.R1)(d).interval,"onUpdate:modelValue":l[9]||(l[9]=e=>(0,m.R1)(d).interval=e)},null,8,["modelValue"])]),_:1},512),[[v.aG,!(0,m.R1)(d).yAxisValueAuto]])])):(0,s.Q3)("",!0),(0,m.R1)(d).show?((0,s.uX)(),(0,s.Wv)(f,{key:2})):(0,s.Q3)("",!0),(0,s.bo)((0,s.Lk)("div",null,[(0,s.bF)(t,{label:"轴线显示"},{default:(0,s.k6)(()=>[(0,s.bF)(a,{modelValue:(0,m.R1)(d).splitLine.show,"onUpdate:modelValue":l[10]||(l[10]=e=>(0,m.R1)(d).splitLine.show=e)},null,8,["modelValue"])]),_:1}),(0,s.bo)((0,s.bF)(t,{label:"轴线颜色"},{default:(0,s.k6)(()=>[(0,s.bF)(c,{modelValue:(0,m.R1)(d).splitLine.lineStyle.color,"onUpdate:modelValue":l[11]||(l[11]=e=>(0,m.R1)(d).splitLine.lineStyle.color=e)},null,8,["modelValue"])]),_:1},512),[[v.aG,(0,m.R1)(d).splitLine.show]]),(0,s.bo)((0,s.bF)(t,{label:"轴线宽度"},{default:(0,s.k6)(()=>[(0,s.bF)(b,{modelValue:(0,m.R1)(d).splitLine.lineStyle.width,"onUpdate:modelValue":l[12]||(l[12]=e=>(0,m.R1)(d).splitLine.lineStyle.width=e),min:1,max:10,size:"default"},null,8,["modelValue"])]),_:1},512),[[v.aG,(0,m.R1)(d).splitLine.show]]),(0,s.bo)((0,s.bF)(t,{label:"轴线类型"},{default:(0,s.k6)(()=>[(0,s.bF)(n,{modelValue:(0,m.R1)(d).splitLine.lineStyle.type,"onUpdate:modelValue":l[13]||(l[13]=e=>(0,m.R1)(d).splitLine.lineStyle.type=e)},{default:(0,s.k6)(()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,m.R1)(Z.LineType).getList(),e=>((0,s.uX)(),(0,s.Wv)(i,{key:e.id,value:e.id},{default:(0,s.k6)(()=>[(0,s.eW)((0,p.v_)(e.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1},512),[[v.aG,(0,m.R1)(d).splitLine.show]])],512),[[v.aG,(0,m.R1)(d).show]]),(0,m.R1)(d).show?((0,s.uX)(),(0,s.Wv)(f,{key:3})):(0,s.Q3)("",!0),(0,s.bo)((0,s.Lk)("div",null,[(0,s.bF)(t,{label:"标签显示"},{default:(0,s.k6)(()=>[(0,s.bF)(a,{modelValue:(0,m.R1)(d).axisLabel.show,"onUpdate:modelValue":l[14]||(l[14]=e=>(0,m.R1)(d).axisLabel.show=e)},null,8,["modelValue"])]),_:1}),(0,s.bo)((0,s.bF)(t,{label:"标签颜色"},{default:(0,s.k6)(()=>[(0,s.bF)(c,{modelValue:(0,m.R1)(d).axisLabel.color,"onUpdate:modelValue":l[15]||(l[15]=e=>(0,m.R1)(d).axisLabel.color=e)},null,8,["modelValue"])]),_:1},512),[[v.aG,(0,m.R1)(d).axisLabel.show]]),(0,s.bo)((0,s.bF)(t,{label:"标签角度"},{default:(0,s.k6)(()=>[(0,s.bF)(b,{modelValue:(0,m.R1)(d).axisLabel.rotate,"onUpdate:modelValue":l[16]||(l[16]=e=>(0,m.R1)(d).axisLabel.rotate=e),min:-90,max:90,size:"default"},null,8,["modelValue"])]),_:1},512),[[v.aG,(0,m.R1)(d).axisLabel.show]]),(0,s.bo)((0,s.bF)(t,{label:"标签字号"},{default:(0,s.k6)(()=>[(0,s.bF)(b,{modelValue:(0,m.R1)(d).axisLabel.fontSize,"onUpdate:modelValue":l[17]||(l[17]=e=>(0,m.R1)(d).axisLabel.fontSize=e),min:10,max:40,size:"default"},null,8,["modelValue"])]),_:1},512),[[v.aG,(0,m.R1)(d).axisLabel.show]])],512),[[v.aG,(0,m.R1)(d).show]]),(0,m.R1)(d).show?((0,s.uX)(),(0,s.Wv)(f,{key:4})):(0,s.Q3)("",!0),(0,s.bo)((0,s.bF)(t,{label:"内容格式"},{default:(0,s.k6)(()=>[(0,s.bF)(r,{modelValue:(0,m.R1)(d).axisLabel.formatter,"onUpdate:modelValue":l[18]||(l[18]=e=>(0,m.R1)(d).axisLabel.formatter=e),type:"textarea",rows:4},null,8,["modelValue"])]),_:1},512),[[v.aG,(0,m.R1)(d).show]])]),_:1})):(0,s.Q3)("",!0)}}});const Hl=ql;var $l=Hl,Jl=(0,s.pM)({__name:"index",setup(e){const l=(0,s.WQ)("formConfig",()=>(console.error("ChartTitleSetting: formConfig not injected"),{})),a=(0,s.EW)(()=>l().currentWidget),t=(0,s.EW)(()=>a.value?(a.value.props||{}).titleSetting:void 0);return(e,l)=>{const a=Fe.qi,i=u.xE,d=o.WK,n=D.B8,r=x.rF,p=S.P9,c=S.AV,b=vl.dI,f=u.US;return(0,m.R1)(t)?((0,s.uX)(),(0,s.Wv)(f,{key:0,"label-position":"top",size:"default",style:{padding:"10px 16px 0"},onSubmit:l[8]||(l[8]=(0,v.D$)(()=>{},["prevent"]))},{default:(0,s.k6)(()=>[(0,s.bF)(i,{label:"是否显示"},{default:(0,s.k6)(()=>[(0,s.bF)(a,{modelValue:(0,m.R1)(t).show,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,m.R1)(t).show=e)},null,8,["modelValue"])]),_:1}),(0,s.bo)((0,s.bF)(i,{label:"标题"},{default:(0,s.k6)(()=>[(0,s.bF)(d,{modelValue:(0,m.R1)(t).text,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,m.R1)(t).text=e),clearable:""},null,8,["modelValue"])]),_:1},512),[[v.aG,(0,m.R1)(t).show]]),(0,s.bo)((0,s.bF)(i,{label:"字体大小"},{default:(0,s.k6)(()=>[(0,s.bF)(n,{modelValue:(0,m.R1)(t).textStyle.fontSize,"onUpdate:modelValue":l[2]||(l[2]=e=>(0,m.R1)(t).textStyle.fontSize=e),min:10,max:40,size:"default"},null,8,["modelValue"])]),_:1},512),[[v.aG,(0,m.R1)(t).show&&null!=(0,m.R1)(t).textStyle.fontSize]]),(0,s.bo)((0,s.bF)(i,{label:"字体颜色"},{default:(0,s.k6)(()=>[(0,s.bF)(r,{modelValue:(0,m.R1)(t).textStyle.color,"onUpdate:modelValue":l[3]||(l[3]=e=>(0,m.R1)(t).textStyle.color=e)},null,8,["modelValue"])]),_:1},512),[[v.aG,(0,m.R1)(t).show&&null!=(0,m.R1)(t).textStyle.color]]),(0,s.bo)((0,s.bF)(i,{label:"水平位置"},{default:(0,s.k6)(()=>[(0,s.bF)(c,{modelValue:(0,m.R1)(t).left,"onUpdate:modelValue":l[4]||(l[4]=e=>(0,m.R1)(t).left=e),placeholder:""},{default:(0,s.k6)(()=>[(0,s.bF)(p,{label:"左",value:"left"}),(0,s.bF)(p,{label:"中",value:"center"}),(0,s.bF)(p,{label:"右",value:"right"})]),_:1},8,["modelValue"])]),_:1},512),[[v.aG,(0,m.R1)(t).left&&null!=(0,m.R1)(t).left]]),(0,s.bo)((0,s.bF)(i,{label:"垂直位置"},{default:(0,s.k6)(()=>[(0,s.bF)(c,{modelValue:(0,m.R1)(t).top,"onUpdate:modelValue":l[5]||(l[5]=e=>(0,m.R1)(t).top=e),placeholder:""},{default:(0,s.k6)(()=>[(0,s.bF)(p,{label:"上",value:"top"}),(0,s.bF)(p,{label:"中",value:"middle"}),(0,s.bF)(p,{label:"下",value:"bottom"})]),_:1},8,["modelValue"])]),_:1},512),[[v.aG,(0,m.R1)(t).show&&null!=(0,m.R1)(t).top]]),(0,s.bo)((0,s.bF)(i,{label:"字体样式"},{default:(0,s.k6)(()=>[(0,s.bF)(b,{modelValue:(0,m.R1)(t).bold,"onUpdate:modelValue":l[6]||(l[6]=e=>(0,m.R1)(t).bold=e)},{default:(0,s.k6)(()=>l[9]||(l[9]=[(0,s.eW)("粗体")])),_:1,__:[9]},8,["modelValue"]),(0,s.bF)(b,{modelValue:(0,m.R1)(t).italics,"onUpdate:modelValue":l[7]||(l[7]=e=>(0,m.R1)(t).italics=e)},{default:(0,s.k6)(()=>l[10]||(l[10]=[(0,s.eW)("斜体")])),_:1,__:[10]},8,["modelValue"])]),_:1},512),[[v.aG,(0,m.R1)(t).show]])]),_:1})):(0,s.Q3)("",!0)}}});const Yl=Jl;var Zl=Yl,ea=(0,s.pM)({__name:"index",setup(e){const l=(0,s.WQ)("formConfig",()=>(console.error("ChartLabelSetting: formConfig not injected"),{})),a=(0,s.EW)(()=>l().currentWidget),t=(0,s.EW)(()=>a.value?(a.value.props||{}).legendSetting:void 0);return(e,l)=>{const a=Fe.qi,o=u.xE,i=S.P9,d=S.AV,n=E.Zh,r=E.MQ,p=D.B8,c=x.rF,b=u.US;return(0,m.R1)(t)?((0,s.uX)(),(0,s.Wv)(b,{key:0,"label-position":"top",size:"default",style:{padding:"10px 16px 0"},onSubmit:l[7]||(l[7]=(0,v.D$)(()=>{},["prevent"]))},{default:(0,s.k6)(()=>[(0,s.bF)(o,{label:"是否显示"},{default:(0,s.k6)(()=>[(0,s.bF)(a,{modelValue:(0,m.R1)(t).show,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,m.R1)(t).show=e)},null,8,["modelValue"])]),_:1}),(0,s.bo)((0,s.bF)(o,{label:"图标"},{default:(0,s.k6)(()=>[(0,s.bF)(d,{modelValue:(0,m.R1)(t).icon,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,m.R1)(t).icon=e),placeholder:""},{default:(0,s.k6)(()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,m.R1)(Z.ShapeType).getList(),e=>((0,s.uX)(),(0,s.Wv)(i,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},512),[[v.aG,(0,m.R1)(t).show]]),(0,s.bo)((0,s.bF)(o,{label:"方向"},{default:(0,s.k6)(()=>[(0,s.bF)(r,{modelValue:(0,m.R1)(t).orient,"onUpdate:modelValue":l[2]||(l[2]=e=>(0,m.R1)(t).orient=e)},{default:(0,s.k6)(()=>[(0,s.bF)(n,{value:"horizontal"},{default:(0,s.k6)(()=>l[8]||(l[8]=[(0,s.eW)("横向")])),_:1,__:[8]}),(0,s.bF)(n,{value:"vertical"},{default:(0,s.k6)(()=>l[9]||(l[9]=[(0,s.eW)("纵向")])),_:1,__:[9]})]),_:1},8,["modelValue"])]),_:1},512),[[v.aG,(0,m.R1)(t).show]]),(0,s.bo)((0,s.bF)(o,{label:"字体大小"},{default:(0,s.k6)(()=>[(0,s.bF)(p,{modelValue:(0,m.R1)(t).textStyle.fontSize,"onUpdate:modelValue":l[3]||(l[3]=e=>(0,m.R1)(t).textStyle.fontSize=e),min:10,max:40,size:"default"},null,8,["modelValue"])]),_:1},512),[[v.aG,(0,m.R1)(t).show]]),(0,s.bo)((0,s.bF)(o,{label:"字体颜色"},{default:(0,s.k6)(()=>[(0,s.bF)(c,{modelValue:(0,m.R1)(t).textStyle.color,"onUpdate:modelValue":l[4]||(l[4]=e=>(0,m.R1)(t).textStyle.color=e)},null,8,["modelValue"])]),_:1},512),[[v.aG,(0,m.R1)(t).show]]),(0,s.bo)((0,s.bF)(o,{label:"水平位置"},{default:(0,s.k6)(()=>[(0,s.bF)(d,{modelValue:(0,m.R1)(t).left,"onUpdate:modelValue":l[5]||(l[5]=e=>(0,m.R1)(t).left=e),placeholder:""},{default:(0,s.k6)(()=>[(0,s.bF)(i,{label:"左",value:"left"}),(0,s.bF)(i,{label:"中",value:"center"}),(0,s.bF)(i,{label:"右",value:"right"})]),_:1},8,["modelValue"])]),_:1},512),[[v.aG,(0,m.R1)(t).show]]),(0,s.bo)((0,s.bF)(o,{label:"垂直位置"},{default:(0,s.k6)(()=>[(0,s.bF)(d,{modelValue:(0,m.R1)(t).top,"onUpdate:modelValue":l[6]||(l[6]=e=>(0,m.R1)(t).top=e),placeholder:""},{default:(0,s.k6)(()=>[(0,s.bF)(i,{label:"上",value:"top"}),(0,s.bF)(i,{label:"中",value:"middle"}),(0,s.bF)(i,{label:"下",value:"bottom"})]),_:1},8,["modelValue"])]),_:1},512),[[v.aG,(0,m.R1)(t).show]])]),_:1})):(0,s.Q3)("",!0)}}});const la=ea;var aa=la,ta=a(95757),ua=a(21310),oa=a(42029),ia=a(39204);const da={style:{padding:"0 16px"}};var na=(0,s.pM)({__name:"editWidgetAttribute",props:{value:{type:[String,Number,Boolean,Object]},attributeItem:{}},emits:["update:value","input","change"],setup(e,{emit:l}){const a={OnlineTableColumnSetting:Q,CustomWidgetDictSetting:B.A,OnlineTabPanelSetting:O.A,OnlineImageUrlInput:M.A,ChartDatasetSetting:fe,ChartBasicSetting:we,ChartSeriesSetting:zl,ChartLabelSetting:Ml,ChartTooltipSetting:Gl.A,ChartAxisSetting:$l,ChartTitleSetting:Zl,ChartLegendSetting:aa,PivotTableBasicSetting:ta.A,PivotTableGroupSetting:ua.A,PivotTableTotalSetting:oa.A,DateViewTablePagerSetting:ia.A,ChartRadarSetting:tl},t=l,u=e;console.log("AttributeCollapse editWidgetAttribute.props",u);const i=(0,s.WQ)("formConfig",()=>(console.error("editWidgetAttribute: formConfig not injected"),{})),d=(0,m.KR)([]),r=(0,m.KR)({}),v=(0,s.EW)({get(){return u.value},set(e){console.log("val change",e)}}),c=(0,s.EW)({get(){return u.value},set(e){console.log("val change str",e)}}),b=(0,s.EW)({get(){return u.value},set(e){console.log("val change boolean",e)}}),f=(0,s.EW)({get(){return u.value},set(e){console.log("val change number",e)}}),y=(0,s.EW)(()=>u.attributeItem.widgetType),h=(0,s.EW)(()=>i().currentWidget),R=(0,s.EW)(()=>{if(null==h.value)return!1;let e=-1!==[N.SysCustomWidgetType.Select,N.SysCustomWidgetType.Cascader,N.SysCustomWidgetType.Radio,N.SysCustomWidgetType.CheckBox].indexOf(h.value.widgetType);return e&&h.value&&"dictId"===u.attributeItem.attributeKey}),V=e=>{console.log("AttributeCollapse editWidgetAttribute.onValueChange",typeof e,e),R.value&&(h.value.dictInfo=(0,g.PH)(i().dictList,e,"id")),t("input",e&&"object"===typeof e?e.target?.value:e),u.attributeItem.customComponent&&t("change")},k=()=>{d.value=[],"function"===typeof u.attributeItem.dropdownList?R.value?d.value=u.attributeItem.dropdownList(i()):d.value=u.attributeItem.dropdownList():d.value=Array.isArray(u.attributeItem.dropdownList)?u.attributeItem.dropdownList:[],1===(d.value||[]).length&&V(d.value[0].id)},_=()=>{let e={};e=u.attributeItem.customComponent?u.attributeItem.customComponent.props||{}:u.attributeItem.props||{},e.disabled=u.attributeItem.disabled||e.disabled,r.value=Object.keys(e).reduce((l,a)=>{let t=e[a];return"function"===typeof t&&(t=t(i())),l[a]=t,l},{}),console.log(">>> attributeProps",r.value)};return(0,s.wB)(()=>u.attributeItem,()=>{k()},{immediate:!0}),(0,s.wB)(()=>h.value,()=>{k(),_()},{deep:!0,immediate:!0}),(e,l)=>{const t=n.S2,u=o.WK,i=A.lq,g=E.Zh,h=E.MQ,R=D.B8,k=S.P9,_=S.AV,C=x.rF,F=w.SS;return(0,s.uX)(),(0,s.Wv)(F,{title:e.attributeItem.name,class:"attribute-collapse"},{title:(0,s.k6)(()=>[(0,s.bF)(t,{class:"attribute-item-title"},{default:(0,s.k6)(()=>[(0,s.Lk)("span",da,(0,p.v_)(e.attributeItem.name),1)]),_:1})]),default:(0,s.k6)(()=>[(0,m.R1)(y)===(0,m.R1)(N.SysCustomWidgetType).Input?((0,s.uX)(),(0,s.Wv)(u,(0,s.v6)({key:0,size:"default",style:{width:"100%"},clearable:"",modelValue:(0,m.R1)(c),"onUpdate:modelValue":l[0]||(l[0]=e=>(0,m.i9)(c)?c.value=e:null),onInput:V},(0,m.R1)(r),{onChange:l[1]||(l[1]=l=>e.$emit("change"))}),null,16,["modelValue"])):(0,s.Q3)("",!0),(0,m.R1)(y)===(0,m.R1)(N.SysCustomWidgetType).NumberInput?((0,s.uX)(),(0,s.Wv)(t,{key:1,type:"flex"},{default:(0,s.k6)(()=>[(0,s.bF)(i,(0,s.v6)({size:"default",clearable:"",style:{width:"100%"},"controls-position":"right",min:e.attributeItem.min,max:e.attributeItem.max,modelValue:(0,m.R1)(f),"onUpdate:modelValue":l[2]||(l[2]=e=>(0,m.i9)(f)?f.value=e:null),onInput:V},(0,m.R1)(r),{onChange:l[3]||(l[3]=l=>e.$emit("change"))}),null,16,["min","max","modelValue"])]),_:1})):(0,s.Q3)("",!0),(0,m.R1)(y)===(0,m.R1)(N.SysCustomWidgetType).Radio?((0,s.uX)(),(0,s.Wv)(t,{key:2,type:"flex",align:"middle"},{default:(0,s.k6)(()=>[(0,s.bF)(h,(0,s.v6)({size:"default",modelValue:(0,m.R1)(f),"onUpdate:modelValue":l[4]||(l[4]=e=>(0,m.i9)(f)?f.value=e:null)},(0,m.R1)(r),{onChange:V}),{default:(0,s.k6)(()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,m.R1)(d),e=>((0,s.uX)(),(0,s.Wv)(g,{key:e.id,value:e.id},{default:(0,s.k6)(()=>[(0,s.eW)((0,p.v_)(e.name),1)]),_:2},1032,["value"]))),128))]),_:1},16,["modelValue"])]),_:1})):(0,s.Q3)("",!0),(0,m.R1)(y)===(0,m.R1)(N.SysCustomWidgetType).Slider?((0,s.uX)(),(0,s.Wv)(R,(0,s.v6)({key:3,style:{width:"95%","margin-left":"5px"},size:"default",min:e.attributeItem.min,max:e.attributeItem.max,modelValue:(0,m.R1)(f),"onUpdate:modelValue":l[5]||(l[5]=e=>(0,m.i9)(f)?f.value=e:null),onInput:V},(0,m.R1)(r),{onChange:l[6]||(l[6]=l=>e.$emit("change"))}),null,16,["min","max","modelValue"])):(0,s.Q3)("",!0),(0,m.R1)(y)===(0,m.R1)(N.SysCustomWidgetType).Switch?((0,s.uX)(),(0,s.Wv)(t,{key:4,type:"flex",align:"middle"},{default:(0,s.k6)(()=>[(0,s.bF)(_,(0,s.v6)({size:"default",style:{width:"100%"},modelValue:(0,m.R1)(b),"onUpdate:modelValue":l[7]||(l[7]=e=>(0,m.i9)(b)?b.value=e:null),onInput:V},(0,m.R1)(r),{onChange:l[8]||(l[8]=l=>e.$emit("change")),placeholder:""}),{default:(0,s.k6)(()=>[(0,s.bF)(k,{label:"是",value:!0}),(0,s.bF)(k,{label:"否",value:!1})]),_:1},16,["modelValue"])]),_:1})):(0,s.Q3)("",!0),(0,m.R1)(y)===(0,m.R1)(N.SysCustomWidgetType).Select?((0,s.uX)(),(0,s.Wv)(_,(0,s.v6)({key:5,style:{width:"100%"},clearable:"",size:"default",modelValue:(0,m.R1)(f),"onUpdate:modelValue":l[9]||(l[9]=e=>(0,m.i9)(f)?f.value=e:null)},(0,m.R1)(r),{onChange:V,placeholder:""}),{default:(0,s.k6)(()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,m.R1)(d),e=>((0,s.uX)(),(0,s.Wv)(k,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},16,["modelValue"])):(0,s.Q3)("",!0),(0,m.R1)(y)===(0,m.R1)(N.SysCustomWidgetType).ColorPicker?((0,s.uX)(),(0,s.Wv)(C,(0,s.v6)({key:6,size:"default",modelValue:(0,m.R1)(c),"onUpdate:modelValue":l[10]||(l[10]=e=>(0,m.i9)(c)?c.value=e:null),onInput:V},(0,m.R1)(r),{onChange:l[11]||(l[11]=l=>e.$emit("change"))}),null,16,["modelValue"])):(0,s.Q3)("",!0),e.attributeItem.customComponent?((0,s.uX)(),(0,s.Wv)((0,s.$y)(a[e.attributeItem.customComponent.component]),(0,s.v6)({key:7,style:{width:"100%"}},(0,m.R1)(r),{value:(0,m.R1)(v),"onUpdate:value":l[12]||(l[12]=e=>(0,m.i9)(v)?v.value=e:null),onInput:V}),null,16,["value"])):(0,s.Q3)("",!0)]),_:1},8,["title"])}}});const ra=(0,j.A)(na,[["__scopeId","data-v-3d023484"]]);var sa=ra,ma=(0,s.pM)({__name:"index",props:{widget:{},value:{}},setup(e){const l=e,a=(0,s.WQ)("formConfig",()=>(console.error("AttributeCollapse: formConfig not injected"),{})),t=(0,m.KR)([]),u=(0,s.EW)({get(){return console.log("AttributeCollapse value",l.value,o.value.props),o.value.props||{}},set(e){console.log("AttributeCollapse value change",e)}}),o=(0,s.EW)(()=>a().currentWidget||{}),i=(0,s.EW)(()=>(a().getWidgetAttribute(o.value.widgetType)||{}).attribute),d=e=>"function"===typeof e?e(a()):e,n=()=>{const e=[],l=i.value;console.log("AttributeCollapse getWidgetAttributeConfig",l),l&&Object.keys(l).forEach(a=>{let t=l[a];if(null!=t){let l=Object.keys(t).reduce((e,l)=>(e[l]=d(t[l]),e),{attributeKey:a});(null==l.visible||l.visible)&&e.push(l)}}),t.value=e,console.log("AttributeCollapse attributeList",t)};return(0,s.wB)(()=>o.value,()=>{console.log("AttributeCollapse watch widget props",o.value,{...o.value}),n()},{immediate:!0}),(e,l)=>{const a=w.Vl;return(0,s.uX)(),(0,s.Wv)(a,{style:{border:"none"},accordion:!0,class:"unified-font",modelValue:void 0},{default:(0,s.k6)(()=>[(0,s.RG)(e.$slots,"default"),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,m.R1)(t),e=>((0,s.uX)(),(0,s.Wv)(sa,{key:e.attributeKey,value:(0,m.R1)(u)[e.attributeKey],"onUpdate:value":l=>(0,m.R1)(u)[e.attributeKey]=l,attributeItem:e},null,8,["value","onUpdate:value","attributeItem"]))),128))]),_:3})}}});const pa=ma;var va=pa,ca=a(40235),ba=a(74062),fa=a(97709),ga=a(93639),ya=a(89001),ha=a(36525);const Ra={class:"filter-dlg"},Va={class:"filter"},ka={class:"filter-dlg-header"};var _a=(0,s.pM)({__name:"index",props:{formConfig:{},height:{},isEdit:{type:Boolean},currentWidget:{},params:{},mode:{default:"mobile"},dialog:{},thirdParamsString:{},dialogKey:{}},emits:["widgetClick"],setup(e,{expose:l,emit:a}){const t=e,{thirdParams:u}=(0,R.P)(t),o=(0,m.KR)(!1),i=(0,m.KR)({}),d=(0,m.KR)(!1),b=new Map,f=new Map,V=(0,m.KR)([]),k=(0,m.KR)([]),_=(0,s.EW)(()=>({formConfig:t.formConfig||u.value.formConfig,isEdit:t.isEdit||u.value.isEdit||!1,height:t.height||u.value.height})),C=(0,s.EW)(()=>_.value.formConfig?.widgetList&&Array.isArray(_.value.formConfig?.widgetList)?(0,ba.o)(_.value.formConfig?.widgetList,t.mode):[]),w=(0,s.EW)(()=>{let e={};try{_.value.params&&(e=JSON.parse(_.value.params))}catch(l){console.log(l)}return e}),F=(e,l)=>e&&"function"===typeof e[l]?e[l]:null,I=e=>{if(!_.value.isEdit)return i.value[e.variableName]},T=e=>{if(_.value.isEdit||null==e||null==e.eventInfo)return!0},L=(e,l)=>{console.log("MobileReportForm.onValueChange",_.value.isEdit,e,l),_.value.isEdit||(i.value[e.variableName]=l)},x=(e,l)=>{if(_.value.isEdit||null==e||null==e.eventInfo)return;let a=F(e.eventInfo,N.OnlineFormEventType.CHANGE);a&&a(l)},S=(e,l)=>{if(null==l)return Promise.reject();let a=Object.keys(l).map(e=>({columnName:e,columnValue:l[e]}));return new Promise((l,t)=>{y.vO.listDictData({dictId:e,filterDtoList:a}).then(e=>{l(e.data)}).catch(e=>{t(e)})})},D=(e,l)=>null==e||null==e.id?Promise.resolve([]):S(e.id,l),E=e=>{if(e.filterValueType===Z.FilterValueKind.FORM_PARAM){let l=w.value[e.paramValue];return null!=l?l.filterValueType===Z.FilterValueKind.INNER_VARIABLE?{...e,filterValueType:Z.FilterValueKind.INNER_VARIABLE,paramValue:l}:{...e,paramValue:l}:{...e,paramValue:void 0}}if(e.filterValueType===Z.FilterValueKind.WIDGET_DATA){let l,a,t=(0,g.PH)(C.value,e.formWidgetId,"widgetId");if(null!=t&&(l=i.value[t.variableName],t.widgetType===Z.ReportWidgetType.Cascader&&(l=Array.isArray(l)?l[l.length-1]:void 0),""===l&&(l=void 0),t.widgetType===Z.ReportWidgetType.DateRange||t.widgetType===Z.ReportWidgetType.Date))switch(t.props.type){case"daterange":a="date";break;case"monthrange":a="month";break;case"datetimerange":case"datetime":a=void 0;break;default:a=t.props.type}return{...e,dateRange:a,paramValue:l}}return{...e}},A=e=>new Promise((l,a)=>{let t={...e,pageCode:_.value.formConfig.pageCode},u=_.value.isEdit?y.Ou.previewDataWithGroup(t):y.Ou.listDataWithGroup(t);u.then(e=>{l(e.data)}).catch(e=>{a(e),console.log(e)})}),U=(e,l)=>new Promise((a,t)=>{y.TR.listDataWithColumn({datasetId:e,columnId:l}).then(e=>{a(e.data)}).catch(e=>{t(e)})}),P=e=>new Promise((l,a)=>{let t={datasetId:e};y.TR.view(t).then(e=>{try{let l=JSON.parse(e.data.datasetInfo);e.data.datasetParamList=l.paramList,e.data.columnList=l.columnList||e.data.columnList}catch(a){e.data.datasetParamList=[]}l(e.data)}).catch(e=>{a(e)})}),X=(e,l)=>{switch(e){case ha.SysOnlineParamValueType.TABLE_COLUMN:{let e=(0,g.PH)(C.value,l,"widgetId");return e?i.value[e.variableName]:void 0}case ha.SysOnlineParamValueType.STATIC_DICT:return Array.isArray(l)?l[1]:void 0;case ha.SysOnlineParamValueType.INPUT_VALUE:return l}},K=e=>{if(Array.isArray(e.props.dictInfo.paramList)){let l={};for(let a=0;a<e.props.dictInfo.paramList.length;a++){let t=e.props.dictInfo.paramList[a];if(null==t.dictValue||null==t.dictValueType)continue;let u=X(t.dictValueType,t.dictValue);if(null==u)return null;l[t.dictParamName]=u}return l}return{}},z=(e,l)=>{console.log("mobile report form do nothing",e,l)};(0,s.Gt)("form",()=>({..._.value.formConfig,mode:t.mode,isEdit:_.value.isEdit,formType:N.SysOnlineFormType.REPORT,readOnly:!1,getWidgetValue:I,getWidgetVisible:T,onValueChange:L,onWidgetValueChange:x,getDictDataList:D,getQueryParam:E,listDataWithGroup:A,listDictData:S,listColumnData:U,loadDatasetInfo:P,getDropdownParams:K,onChartDblClick:z,isActive:e=>t.currentWidget===e}));const Q=a,B=e=>{Q("widgetClick",e)},O=(e,l=[])=>{Array.isArray(e)&&e.forEach(e=>{e&&e.props&&e.props.datasetInfo&&e.props.datasetInfo.datasetId&&-1===l.indexOf(e.props.datasetInfo.datasetId.toString())&&l.push(e.props.datasetInfo.datasetId),O(e.childWidgetList,l)})},M=e=>new Promise((l,a)=>{let t={datasetId:e};y.TR.view(t).then(a=>{try{let e=JSON.parse(a.data.datasetInfo);a.data.datasetParamList=e.paramList}catch(t){a.data.datasetParamList=[]}b.set(e,a.data),l(a.data)}).catch(e=>{a(e)})}),G=e=>{let l=[];return O(e,l),Promise.all(l.map(e=>M(e)))},j=()=>(f.clear(),new Promise((e,l)=>{h.v9.dictReportDict({}).then(l=>{l.getList().forEach(e=>{e.dictData=e.dictDataJson?JSON.parse(e.dictDataJson):void 0,f.set(e.id,e)}),e(!0)}).catch(e=>{l(e)})})),q=e=>{if(null!=e){if(e.props&&e.props.dictInfo){let l=f.get(e.props.dictInfo.dictId);e.props.dictInfo.dict=l}if(null==e.eventInfo&&(e.eventInfo={}),Array.isArray(e.childWidgetList)&&(e.childWidgetList=e.childWidgetList.map(e=>q(e))),e&&e.props&&e.props.datasetInfo&&e.props.datasetInfo.datasetId){let l=b.get(e.props.datasetInfo.datasetId);return{...e,dataset:l,columnList:(l||{}).columnList}}return{...e}}},H=()=>new Promise((e,l)=>{V.value=[],k.value=[];const a=[N.SysCustomWidgetType.MobileRadioFilter,N.SysCustomWidgetType.MobileCheckBoxFilter,N.SysCustomWidgetType.MobileInputFilter,N.SysCustomWidgetType.MobileSwitchFilter,N.SysCustomWidgetType.MobileDateRangeFilter,N.SysCustomWidgetType.MobileNumberRangeFilter];G(_.value.formConfig.widgetList).then(()=>j()).then(()=>{_.value.formConfig.widgetList=_.value.formConfig.widgetList.map(e=>q(e)),_.value.formConfig.widgetList.forEach(e=>{-1!==a.indexOf(e.widgetType)?k.value.push(e):V.value.push(e)}),e(!0)}).catch(e=>{console.log(e),l(e)})});(0,s.wB)(()=>_.value.formConfig,()=>{null!=_.value.formConfig&&(o.value=!1,b.clear(),H().then(()=>{(0,s.dY)(()=>{V.value.forEach(e=>{e.widgetImpl&&e.widgetImpl.refresh()})}),o.value=!0}).catch(e=>{console.warn(e),c.nk.error("页面初始化失败！")}))},{immediate:!0}),(0,s.wB)(()=>V.value,()=>{o.value&&(_.value.formConfig.widgetList=[...V.value,...k.value])}),(0,s.wB)(()=>k.value,()=>{o.value&&(_.value.formConfig.widgetList=[...V.value,...k.value])});const $=()=>{V.value=[],k.value=[]};return l({clearWidget:$}),(e,l)=>{const a=n.S2,t=(0,s.g2)("van-form"),u=W.kA,o=r.S2;return(0,s.uX)(),(0,s.CE)("div",{class:"online-mobile-report-form",style:(0,p.Tr)([{position:"relative","min-height":"200px"},{height:(0,m.R1)(_).height}])},[(0,s.bF)(a,{class:"header",align:"middle"},{default:(0,s.k6)(()=>[l[6]||(l[6]=(0,s.Lk)("div",{class:"order-box"},null,-1)),(0,s.Lk)("div",{class:"filter-btn",onClick:l[0]||(l[0]=(0,v.D$)(e=>d.value=!0,["stop"]))},l[5]||(l[5]=[(0,s.Lk)("span",null,"筛选",-1),(0,s.Lk)("i",{class:"online-icon icon-filter"},null,-1)]))]),_:1,__:[6]}),(0,s.bF)(a,{class:"list-box",style:{"border-top":"2px solid #f6f6f6",padding:"16px"}},{default:(0,s.k6)(()=>[(0,s.bF)(t,{ref:"form",class:"full-width-input",style:{width:"100%",height:"100%"},"label-width":((0,m.R1)(_).formConfig.labelWidth||100)+"px",onSubmit:l[2]||(l[2]=(0,v.D$)(()=>{},["prevent"]))},{default:(0,s.k6)(()=>[(0,s.bF)(ya.A,{value:(0,m.R1)(V),"onUpdate:value":l[1]||(l[1]=e=>(0,m.i9)(V)?V.value=e:null),isEdit:e.isEdit,onWidgetClick:B},null,8,["value","isEdit"])]),_:1},8,["label-width"])]),_:1}),(0,s.bo)((0,s.Lk)("div",Ra,[(0,s.Lk)("div",Va,[(0,s.Lk)("div",ka,[l[7]||(l[7]=(0,s.Lk)("div",{style:{"font-size":"14px",color:"#333"}},"筛选",-1)),(0,s.Lk)("i",{class:"close el-icon-close",onClick:l[3]||(l[3]=(0,v.D$)(e=>d.value=!1,["stop"]))})]),(0,s.bF)(u,{class:"filter-content"},{default:(0,s.k6)(()=>[(0,s.RG)(e.$slots,"filter"),(0,s.bF)(ya.A,{value:(0,m.R1)(k),"onUpdate:value":l[4]||(l[4]=e=>(0,m.i9)(k)?k.value=e:null),isEdit:e.isEdit,onWidgetClick:B},null,8,["value","isEdit"])]),_:3}),(0,s.bF)(a,{class:"filter-btn-box",type:"flex",align:"bottom"},{default:(0,s.k6)(()=>[(0,s.bF)(o,{type:"default",size:"default",style:{width:"100px"}},{default:(0,s.k6)(()=>l[8]||(l[8]=[(0,s.eW)("重置")])),_:1,__:[8]}),(0,s.bF)(o,{type:"primary",size:"default",style:{"flex-grow":"1"}},{default:(0,s.k6)(()=>l[9]||(l[9]=[(0,s.eW)("确定")])),_:1,__:[9]})]),_:1})])],512),[[v.aG,(0,m.R1)(d)]])],4)}}});const Ca=(0,j.A)(_a,[["__scopeId","data-v-3b5bfbc0"]]);var wa=Ca,Fa=a(43723),Wa=a.n(Fa),Ia=a(10155),Ta=(0,s.pM)({__name:"index",setup(e){const l=(0,s.WQ)("formConfig",()=>(console.error("CustomFormSetting: formConfig not injected"),{})),a=(0,s.EW)(()=>{let e={url:window.location.origin+"/#/thirdParty/thirdReport?pageId="+l().form.pageId};return JSON.stringify(e)}),t=(e,a)=>{if(Array.isArray(l().form.paramList)){if(null==e){let e=(0,g.PH)(l().form.paramList,a,"variableName");null!=e?c.nk.error("此参数已存在！"):l().form.paramList.push({variableName:a})}else if(e.variableName!==a){let t=(0,g.PH)(l().form.paramList,a,"variableName");null!=t?c.nk.error("此参数已存在！"):l().form.paramList=l().form.paramList.map(l=>l.variableName===e.variableName?{variableName:a}:{...l})}}else l().form.paramList=[{variableName:a}]},i=()=>{let e=new(Wa())(".formShareBtn");e.on("success",l=>{c.nk.success("接入信息复制成功！"),e.destroy()}),e.on("error",l=>{c.nk.error("浏览器不支持复制，请手动复制接入信息："+a.value),e.destroy()})},d=e=>{P.l.show(e?"编辑参数":"添加参数",Ia["default"],{area:"600px"},{rowData:e,path:"thirdEditReportFormParam"},{height:"200px",width:"600px",pathName:"/thirdParty/thirdEditReportFormParam"}).then(l=>{t(e,l)}).catch(e=>{console.warn(e)})},p=e=>{T.s.confirm("是否移除此字段？","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{l().form.paramList=l().form.paramList.filter(l=>l!==e)}).catch(e=>{console.warn(e)})};return(e,t)=>{const c=o.WK,b=r.S2,f=n.S2,g=u.xE,y=E.Zh,h=E.MQ,R=A.lq,V=u.US;return(0,s.uX)(),(0,s.Wv)(V,{"label-position":"top",size:"default",onSubmit:t[5]||(t[5]=(0,v.D$)(()=>{},["prevent"]))},{default:(0,s.k6)(()=>[(0,s.bF)(g,{label:"表单 ID"},{default:(0,s.k6)(()=>[(0,s.bF)(f,{type:"flex",justify:"space-between",align:"middle"},{default:(0,s.k6)(()=>[(0,s.bF)(c,{readonly:"",value:(0,m.R1)(l)().form.pageId},null,8,["value"]),(0,s.bF)(b,{class:"formShareBtn",link:"",icon:"el-icon-share",style:{"margin-left":"8px"},title:"复制接入信息","data-clipboard-text":(0,m.R1)(a),onClick:i},null,8,["data-clipboard-text"])]),_:1})]),_:1}),null!=(0,m.R1)(l)().form.labelPosition?((0,s.uX)(),(0,s.Wv)(g,{key:0,label:"标签位置"},{default:(0,s.k6)(()=>[(0,s.bF)(h,{modelValue:(0,m.R1)(l)().form.labelPosition,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,m.R1)(l)().form.labelPosition=e),size:"default"},{default:(0,s.k6)(()=>[(0,s.bF)(y,{value:"left"},{default:(0,s.k6)(()=>t[6]||(t[6]=[(0,s.eW)("居左")])),_:1,__:[6]}),(0,s.bF)(y,{value:"right"},{default:(0,s.k6)(()=>t[7]||(t[7]=[(0,s.eW)("居右")])),_:1,__:[7]}),(0,s.bF)(y,{value:"top"},{default:(0,s.k6)(()=>t[8]||(t[8]=[(0,s.eW)("顶部")])),_:1,__:[8]})]),_:1},8,["modelValue"])]),_:1})):(0,s.Q3)("",!0),null!=(0,m.R1)(l)().form.labelWidth?((0,s.uX)(),(0,s.Wv)(g,{key:1,label:"标签宽度"},{default:(0,s.k6)(()=>[(0,s.bF)(R,{modelValue:(0,m.R1)(l)().form.labelWidth,"onUpdate:modelValue":t[1]||(t[1]=e=>(0,m.R1)(l)().form.labelWidth=e),"controls-position":"right",style:{width:"100%"}},null,8,["modelValue"])]),_:1})):(0,s.Q3)("",!0),null!=(0,m.R1)(l)().form.gutter?((0,s.uX)(),(0,s.Wv)(g,{key:2,label:"栅格间距"},{default:(0,s.k6)(()=>[(0,s.bF)(R,{modelValue:(0,m.R1)(l)().form.gutter,"onUpdate:modelValue":t[2]||(t[2]=e=>(0,m.R1)(l)().form.gutter=e),"controls-position":"right",style:{width:"100%"}},null,8,["modelValue"])]),_:1})):(0,s.Q3)("",!0),(0,s.bF)(U.A,{label:"表单参数",data:(0,m.R1)(l)().form.paramList,"onUpdate:data":t[3]||(t[3]=e=>(0,m.R1)(l)().form.paramList=e),onAdd:t[4]||(t[4]=e=>d()),onEdit:d,onDelete:p,prop:{label:"variableName",value:"variableName"}},null,8,["data"])]),_:1})}}});const La=Ta;var xa=La,Sa=(0,s.pM)({__name:"index",props:{value:{}},emits:["update:value"],setup(e,{emit:l}){const a=l,t=e,i=(0,s.EW)({get(){return t.value.showName},set(e){const l=t.value;l.showName=e,console.log("..................",e,l),a("update:value",l)}}),d=(0,s.EW)({get(){return t.value.variableName},set(e){const l=t.value;l.variableName=e,a("update:value",l)}}),n=(0,s.EW)({get(){return t.value.bindData.systemVariableType},set(e){const l=t.value;l.bindData.systemVariableType=e,a("update:value",l)}});return(e,l)=>{const a=o.WK,t=u.xE,r=S.P9,p=S.AV,c=u.US;return(0,s.uX)(),(0,s.Wv)(c,{"label-position":"top",size:"default",onSubmit:l[3]||(l[3]=(0,v.D$)(()=>{},["prevent"]))},{default:(0,s.k6)(()=>[(0,s.bF)(t,{label:"组件类型"},{default:(0,s.k6)(()=>[(0,s.bF)(a,{value:(0,m.R1)(N.SysCustomWidgetType).getValue(e.value.widgetType),disabled:!0},null,8,["value"])]),_:1}),(0,s.bF)(t,{label:"组件名称"},{default:(0,s.k6)(()=>[(0,s.bF)(a,{modelValue:(0,m.R1)(i),"onUpdate:modelValue":l[0]||(l[0]=e=>(0,m.i9)(i)?i.value=e:null),placeholder:"",clearable:"",filterable:""},null,8,["modelValue"])]),_:1}),(0,s.bF)(t,{label:"组件标识"},{default:(0,s.k6)(()=>[(0,s.bF)(a,{modelValue:(0,m.R1)(d),"onUpdate:modelValue":l[1]||(l[1]=e=>(0,m.i9)(d)?d.value=e:null),placeholder:"",clearable:"",filterable:""},null,8,["modelValue"])]),_:1}),e.value.widgetType===(0,m.R1)(N.SysCustomWidgetType).Label?((0,s.uX)(),(0,s.Wv)(t,{key:0,label:"系统变量"},{default:(0,s.k6)(()=>[(0,s.bF)(p,{style:{width:"100%"},modelValue:(0,m.R1)(n),"onUpdate:modelValue":l[2]||(l[2]=e=>(0,m.i9)(n)?n.value=e:null),placeholder:"",filterable:""},{default:(0,s.k6)(()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,m.R1)(N.OnlineSystemVariableType).getList(),e=>((0,s.uX)(),(0,s.Wv)(r,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):(0,s.Q3)("",!0)]),_:1})}}});const Da=Sa;var Ea=Da,Aa=a(12687),Na=(a(31112),a(48680)),Ua=a(42487),Pa=(0,s.pM)({__name:"index",props:{value:{default:()=>[]},groupList:{default:()=>[]}},emits:["update:value"],setup(e,{emit:l}){const a=l,t=e,o=(0,s.WQ)("formConfig",()=>(console.error("CustomReportOperationSetting: formConfig not injected"),{})),i=(0,V.l5)(),d=(0,s.EW)({get(){return console.log("data 0>>>",t.value),t.value},set(e){a("update:value",e)}}),n=e=>{T.s.confirm("是否删除此操作？","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{a("update:value",t.value.filter(l=>l.id!==e.id))}).catch(e=>{console.warn(e)})},r=(e,l)=>{let u=[];null==e?(l.id=(new Date).getTime(),u=t.value.concat(l)):u=t.value.map(e=>e.id===l.id?l:e),a("update:value",u)},c=()=>{let e=o().currentWidget;if(null!=e&&e&&e.props&&e.props.datasetInfo){let l=e.props.datasetInfo.categroyColumnList,a=e.props.datasetInfo.valueColumnList;return(l||[]).concat((a||[]).map(e=>({columnId:e.columnId,showName:e.showName})))}return[]},b=e=>{let l=e.props.datasetInfo;if(null==l||null==l.bindColumnId||""===l.bindColumnId)return[];let a=e.dataset.columnList||e.columnList,t=new Map,u=[],o=[];return(a||[]).forEach(e=>{if(("Array"!==e.fieldType||e.columnId===l.bindColumnId)&&(-1!==u.indexOf(e.parentId)||e.columnId===l.bindColumnId)){u.push(e.columnId),"Object"!==e.fieldType||e.parentId===l.bindColumnId?o.push(e):t.set(e.columnId,e);let a=e;do{a=t.get(a.parentId),null!=a&&-1===o.indexOf(a)&&o.push(a)}while(null!=a)}}),o.length>1?o:[]},f=()=>{let e=o().currentWidget;return e&&e.dataset?g()===Z.DatasetType.API?b(e):e.columnList:[]},g=()=>{let e=o().currentWidget;return e&&e.dataset?e.dataset.datasetType:null},y=(e=null)=>{console.log("onEditOperate",e),e&&e.type===N.SysCustomWidgetOperationType.ROUTE?P.l.show(null==e?"添加操作":"编辑操作",Ua["default"],{area:"1000px",offset:"50px"},{rowData:e,activeMode:o().activeMode,columnList:f()?.map(e=>({parentId:e.parentId,columnId:e.columnId,columnName:e.columnName})),isTreeColumn:g()===Z.DatasetType.API,path:"thirdEditReportFormOperate"},{height:"600px",width:"1000px",pathName:"/thirdParty/thirdEditReportRouterOperate"}).then(l=>{r(e,l)}).catch(e=>{console.log(e)}):P.l.show(null==e?"添加操作":"编辑操作",Na["default"],{area:"1000px",offset:"50px"},{rowData:e,activeMode:o().activeMode,groupList:t.groupList,formParamList:(o().form.paramList||[]).map(e=>e.variableName),reportDictList:o().dictList,widgetList:o().allWidgetList.map(e=>({id:e.widgetId,showName:e.showName})),formConfig:o(),widgetDrillColumnList:c(),path:"thirdEditReportFormOperate"},{height:"600px",width:"1000px",pathName:"/thirdParty/thirdEditReportFormOperate"}).then(l=>{r(e,l)}).catch(e=>{console.log(e)})};return(e,l)=>{const a=Aa.u,t=u.US;return(0,s.uX)(),(0,s.Wv)(t,{size:(0,m.R1)(i).defaultFormItemSize,"label-position":"top",style:{padding:"10px 16px"},onSubmit:l[1]||(l[1]=(0,v.D$)(()=>{},["prevent"]))},{default:(0,s.k6)(()=>[(0,s.bF)(U.A,{label:"操作",data:(0,m.R1)(d),addText:"添加",supportAdd:!1,onAdd:l[0]||(l[0]=e=>y()),onEdit:y,onDelete:n,prop:{label:"name",value:"name",disabled:function(e){return e.builtin}}},{right:(0,s.k6)(e=>[null!=e.data?((0,s.uX)(),(0,s.Wv)(a,{key:0,size:"default",type:e.data?.enabled?"success":"danger"},{default:(0,s.k6)(()=>[(0,s.eW)((0,p.v_)(e.data?.enabled?"启动":"禁用"),1)]),_:2},1032,["type"])):(0,s.Q3)("",!0)]),_:1},8,["data","prop"])]),_:1},8,["size"])}}});const Xa=Pa;var Ka=Xa;const za={class:"left-menu"},Qa={class:"left-panel"},Ba={class:"base-card-header"},Oa={class:"base-card-operation"},Ma={class:"group-title"},Ga=["onClick"],ja=["title"],qa={class:"name"},Ha={class:"design-panel"},$a={style:{"font-size":"18px"}},Ja={class:"design-box"},Ya={class:"attribute-panel"};var Za=(0,s.pM)({__name:"index",props:{pageInfo:{},pageGroupList:{default:()=>[]},dictList:{default:()=>[]}},emits:["updateForm"],setup(e,{expose:l,emit:a}){const t=(0,V.l5)(),u=a,d=e;console.log("props.pageInfo",d);const c=(0,m.KR)(),b=(0,m.KR)(),f=(0,m.KR)("form"),h=(0,m.KR)("props"),R=(0,m.KR)("pc"),k=(0,m.KR)({widgetName:void 0}),_=(0,m.KR)(),x=(0,m.KR)([]),S=(0,m.KR)([]),D=(0,s.EW)(()=>fa.A.formWidgetGroupList[R.value]),E=(0,s.EW)(()=>{if(!_.value)return!1;let e=-1!==[N.SysCustomWidgetType.PivotTable,N.SysCustomWidgetType.LineChart,N.SysCustomWidgetType.BarChart,N.SysCustomWidgetType.PieChart,N.SysCustomWidgetType.ScatterChart,N.SysCustomWidgetType.DataViewTable,N.SysCustomWidgetType.Carousel,N.SysCustomWidgetType.RichText,N.SysCustomWidgetType.GaugeChart,N.SysCustomWidgetType.FunnelChart,N.SysCustomWidgetType.RadarChart,N.SysCustomWidgetType.ProgressBar,N.SysCustomWidgetType.ProgressCircle,N.SysCustomWidgetType.DataCard,N.SysCustomWidgetType.DataProgressCard,N.SysCustomWidgetType.CommonList].indexOf(_.value.widgetType);return e}),A=(0,s.EW)(()=>(d.pageInfo||{}).formInfo||{}),U=(0,s.EW)(()=>{let e=A.value[R.value];return e&&Array.isArray(e.widgetList)?(0,ba.o)(e.widgetList,R.value,!0):[]}),P=(0,s.EW)(()=>{if(Array.isArray(S.value)&&Array.isArray(x.value)){let e=new Map;S.value.forEach(l=>{l.id=l.datasetId,l.name=l.datasetName,l.isGroup=!1;let a=e.get(l.groupId);null==a&&(a=[],e.set(l.groupId,a)),a.push(l)});let l=(0,g.BN)(x.value.map(l=>({id:l.groupId,name:l.groupName,isGroup:!0,children:e.get(l.groupId)||[],...l})),"groupId","parentId");return l}return[]}),X=(0,s.EW)(()=>{let e,l,a;return"pc"===R.value?(e="100%",l="0px",a="white"):(e="375px",l="0px",a=void 0),{width:e,padding:l,background:a,border:"pc"===R.value?void 0:"1px solid #E8E8E8"}}),K=(0,s.EW)(()=>null==_.value?[]:(fa.A.getWidgetAttribute(_.value.widgetType)||{}).allowEventList||[]),z=e=>{A.value&&A.value[R.value]&&(A.value[R.value].formEventList=e)},Q=e=>{R.value=e},B=()=>{T.s.confirm("是否重置表单？","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{A.value&&A.value[R.value]&&(A.value[R.value].widgetList=[]),b.value&&b.value.clearWidget()}).catch(e=>{console.warn(e)})},O=e=>{console.log("reportDesign widgetClick",e),h.value="props",_.value=e||void 0},M=e=>{null==_.value||_.value.widgetType!==N.SysCustomWidgetType.Block&&_.value.widgetType!==N.SysCustomWidgetType.Card?A.value&&A.value[R.value]&&A.value[R.value].widgetList.push(G(e)):_.value.childWidgetList.push(G(e))},G=e=>{let l=fa.A.getWidgetObject(e);return"mobile"===R.value&&(l.props.span=24),l.widgetId=(new Date).getTime(),l},j=()=>{h.value="props",_.value=void 0},q=()=>{u("updateForm",A.value)};l({saveFormInfo:q});const H=()=>{x.value=[],S.value=[],y.TR.list({}).then(e=>{S.value=e.data.dataList}).catch(e=>{console.warn(e)}),y.AX.list({}).then(e=>{x.value=e.data}).catch(e=>{console.warn(e)})},$=e=>new Promise((l,a)=>{let t={datasetId:e};y.TR.view(t).then(e=>{try{let l=JSON.parse(e.data.datasetInfo);e.data.datasetParamList=l.paramList,e.data.columnList=l.columnList||e.data.columnList}catch(a){e.data.datasetParamList=[]}l(e.data)}).catch(e=>{a(e)})}),J=e=>new Promise((l,a)=>{y.vO.listDictData({dictId:e}).then(e=>{l(e.data)}).catch(e=>{a(e)})}),Z=(e,l)=>new Promise((a,t)=>{y.TR.listDataWithColumn({datasetId:e,columnId:l}).then(e=>{a(e.data)}).catch(e=>{t(e)})}),ee=(0,s.EW)(()=>({form:A.value[R.value],activeMode:R.value,currentWidget:_.value,getWidgetAttribute:fa.A.getWidgetAttribute,getWidgetObject:fa.A.getWidgetObject,reportDatasetTree:P.value,datasetList:S.value,allWidgetList:U.value,loadDatasetInfo:$,listDictData:J,listColumnData:Z,dictList:d.dictList}));return(0,s.Gt)("formConfig",()=>ee.value),(0,s.sV)(()=>{H()}),(e,l)=>{const a=o.WK,u=n.S2,d=i.uD,g=W.kA,y=F.Ik,V=r.S2,T=w.SS,x=w.Vl,S=C.v$,U=C.q;return(0,s.uX)(),(0,s.CE)("div",{class:"report-design",onDrop:l[11]||(l[11]=(0,v.D$)(()=>{},["prevent","stop"]))},[(0,s.Lk)("div",za,[(0,s.Lk)("div",{class:(0,p.C4)(["left-menu-item",{active:"form"===(0,m.R1)(f)}]),onClick:l[0]||(l[0]=e=>f.value="form")},l[12]||(l[12]=[(0,s.Lk)("i",{class:"online-icon icon-component"},null,-1),(0,s.Lk)("span",{style:{"margin-top":"4px"}},"组件",-1)]),2)]),(0,s.Lk)("div",Qa,[(0,s.bF)(y,{class:"base-card",shadow:"never","body-style":{padding:"0px"},style:{border:"none","flex-grow":"1"}},{header:(0,s.k6)(()=>[(0,s.Lk)("div",Ba,[l[13]||(l[13]=(0,s.Lk)("i",{class:"online-icon"},[(0,s.Lk)("span",null,"组件")],-1)),(0,s.Lk)("div",Oa,[(0,s.bF)(a,{class:"round-search","prefix-icon":"el-icon-search",modelValue:(0,m.R1)(k).widgetName,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,m.R1)(k).widgetName=e),clearable:"",placeholder:"组件名称",size:"default",style:{width:"140px"}},null,8,["modelValue"])])])]),default:(0,s.k6)(()=>[(0,s.bF)(u,{style:{height:"calc(100% - 65px)"}},{default:(0,s.k6)(()=>[(0,s.bF)(g,{style:{height:"100%"}},{default:(0,s.k6)(()=>[(0,s.bF)(d,{span:24,style:{padding:"0 16px"}},{default:(0,s.k6)(()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,m.R1)(D),e=>((0,s.uX)(),(0,s.Wv)(u,{class:"widget-group",key:e.id},{default:(0,s.k6)(()=>[(0,s.Lk)("div",Ma,(0,p.v_)(e.groupName),1),(0,s.bF)((0,m.R1)(L.MA),{class:"group-widget-list",draggable:".group-widget-item",modelValue:e.widgetList,"onUpdate:modelValue":l=>e.widgetList=l,group:{name:"componentsGroup",pull:"clone",put:!1},clone:G,sort:!1},{default:(0,s.k6)(()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.widgetList,e=>((0,s.uX)(),(0,s.CE)("div",{class:"group-widget-item",key:e.id,onClick:l=>M(e)},[(0,s.Lk)("div",{class:"icon",title:(0,m.R1)(N.SysCustomWidgetType).getValue(e.widgetType)},[(0,s.Lk)("i",{class:(0,p.C4)(["",e.icon||""])},null,2)],8,ja),(0,s.Lk)("div",qa,(0,p.v_)((0,m.R1)(N.SysCustomWidgetType).getValue(e.widgetType)),1)],8,Ga))),128)),l[14]||(l[14]=(0,s.Lk)("div",{style:{width:"64px"}},null,-1))]),_:2,__:[14]},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),(0,s.Lk)("div",Ha,[(0,s.bF)(u,{type:"flex",justify:"space-between",align:"middle",style:{height:"48px"}},{default:(0,s.k6)(()=>[(0,s.Lk)("div",$a,[(0,s.Lk)("i",{class:(0,p.C4)(["device-item online-icon icon-phone",{active:"mobile"===(0,m.R1)(R)}]),title:"手机端",onClick:l[2]||(l[2]=e=>Q("mobile"))},null,2),(0,s.Lk)("i",{class:(0,p.C4)(["device-item online-icon icon-pc",{active:"pc"===(0,m.R1)(R)}]),title:"PC 端",onClick:l[3]||(l[3]=e=>Q("pc"))},null,2)]),(0,s.bF)(V,{link:"",size:"default",icon:(0,m.R1)(I.Refresh),style:{"font-size":"14px",color:"#999","font-weight":"normal"},onClick:B},{default:(0,s.k6)(()=>l[15]||(l[15]=[(0,s.eW)(" 重置表单 ")])),_:1,__:[15]},8,["icon"])]),_:1}),(0,s.Lk)("div",Ja,[(0,s.Lk)("div",{style:(0,p.Tr)([{"max-width":"100%"},(0,m.R1)(X)]),onClick:j},["pc"===(0,m.R1)(R)?((0,s.uX)(),(0,s.Wv)(ga["default"],{key:0,ref_key:"reportForm",ref:c,isEdit:!0,height:(0,m.R1)(t).documentClientHeight-200+"px",formConfig:e.pageInfo.formInfo[(0,m.R1)(R)],currentWidget:(0,m.R1)(_),onWidgetClick:O,defaultFormItemSize:(0,m.R1)(t).defaultFormItemSize},null,8,["height","formConfig","currentWidget","defaultFormItemSize"])):(0,s.Q3)("",!0),"mobile"===(0,m.R1)(R)?((0,s.uX)(),(0,s.Wv)(wa,{key:1,ref_key:"mobileReportForm",ref:b,isEdit:!0,height:(0,m.R1)(t).documentClientHeight-200+"px",formConfig:e.pageInfo.formInfo[(0,m.R1)(R)],currentWidget:(0,m.R1)(_),onWidgetClick:O},null,8,["height","formConfig","currentWidget"])):(0,s.Q3)("",!0)],4)])]),(0,s.Lk)("div",Ya,[(0,s.bF)(U,{modelValue:(0,m.R1)(h),"onUpdate:modelValue":l[10]||(l[10]=e=>(0,m.i9)(h)?h.value=e:null)},{default:(0,s.k6)(()=>[(0,s.bF)(S,{label:"属性",name:"props"},{label:(0,s.k6)(()=>l[16]||(l[16]=[(0,s.Lk)("span",null,"基础",-1)])),default:(0,s.k6)(()=>[(0,s.bF)(g,{style:(0,p.Tr)({height:(0,m.R1)(t).documentClientHeight-138+"px"})},{default:(0,s.k6)(()=>[null==(0,m.R1)(_)?((0,s.uX)(),(0,s.Wv)(x,{key:0,style:{border:"none"}},{default:(0,s.k6)(()=>[(0,s.bF)(T,{title:"表单配置"},{title:(0,s.k6)(()=>[(0,s.bF)(u,{class:"attribute-item-title"},{default:(0,s.k6)(()=>l[17]||(l[17]=[(0,s.Lk)("span",{style:{padding:"0 16px"}},"表单配置",-1)])),_:1,__:[17]})]),default:(0,s.k6)(()=>[(0,s.bF)(xa,{style:{padding:"10px 16px 0"}})]),_:1})]),_:1})):((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[(0,m.R1)(E)?((0,s.uX)(),(0,s.Wv)(va,{key:0,value:(0,m.R1)(_).props,"onUpdate:value":l[5]||(l[5]=e=>(0,m.R1)(_).props=e),widget:(0,m.R1)(_)},{default:(0,s.k6)(()=>[(0,s.bF)(T,{title:"组件数据"},{title:(0,s.k6)(()=>[(0,s.bF)(u,{class:"attribute-item-title"},{default:(0,s.k6)(()=>l[18]||(l[18]=[(0,s.Lk)("span",{style:{padding:"0 16px"}},"组件数据",-1)])),_:1,__:[18]})]),default:(0,s.k6)(()=>[(0,s.bF)(Ea,{value:(0,m.R1)(_),"onUpdate:value":l[4]||(l[4]=e=>(0,m.i9)(_)?_.value=e:null),style:{padding:"10px 16px 0"}},null,8,["value"])]),_:1})]),_:1},8,["value","widget"])):((0,s.uX)(),(0,s.Wv)(x,{key:1,style:{border:"none"}},{default:(0,s.k6)(()=>[(0,s.bF)(T,{title:"组件数据"},{title:(0,s.k6)(()=>[(0,s.bF)(u,{class:"attribute-item-title"},{default:(0,s.k6)(()=>l[19]||(l[19]=[(0,s.Lk)("span",{style:{padding:"0 16px"}},"组件数据",-1)])),_:1,__:[19]})]),default:(0,s.k6)(()=>[(0,s.bF)(Ea,{value:(0,m.R1)(_),"onUpdate:value":l[6]||(l[6]=e=>(0,m.i9)(_)?_.value=e:null),style:{padding:"10px 16px 0"}},null,8,["value"])]),_:1}),(0,s.bF)(T,{title:"组件属性"},{title:(0,s.k6)(()=>[(0,s.bF)(u,{class:"attribute-item-title"},{default:(0,s.k6)(()=>l[20]||(l[20]=[(0,s.Lk)("span",{style:{padding:"0 16px"}},"组件属性",-1)])),_:1,__:[20]})]),default:(0,s.k6)(()=>[(0,s.bF)(Y,{class:"attribute-setting",value:(0,m.R1)(_).props,"onUpdate:value":l[7]||(l[7]=e=>(0,m.R1)(_).props=e),style:{padding:"10px 16px 0"},widget:(0,m.R1)(_)},null,8,["value","widget"])]),_:1})]),_:1}))],64))]),_:1},8,["style"])]),_:1}),null!=(0,m.R1)(_)&&null!=(0,m.R1)(_).operationList&&(0,m.R1)(_).operationList.length>0?((0,s.uX)(),(0,s.Wv)(S,{key:0,label:"操作",name:"operate"},{label:(0,s.k6)(()=>l[21]||(l[21]=[(0,s.Lk)("span",null," 操作 ",-1)])),default:(0,s.k6)(()=>[(0,s.bF)(g,{style:(0,p.Tr)({height:(0,m.R1)(t).documentClientHeight-138+"px"})},{default:(0,s.k6)(()=>[(0,s.bF)(Ka,{value:(0,m.R1)(_).operationList,"onUpdate:value":l[8]||(l[8]=e=>(0,m.R1)(_).operationList=e),groupList:e.pageGroupList},null,8,["value","groupList"])]),_:1},8,["style"])]),_:1})):(0,s.Q3)("",!0),"pc"===(0,m.R1)(R)?((0,s.uX)(),(0,s.Wv)(S,{key:1,label:"脚本",name:"script"},{label:(0,s.k6)(()=>l[22]||(l[22]=[(0,s.Lk)("span",null,"脚本",-1)])),default:(0,s.k6)(()=>[(0,s.bF)(g,{style:(0,p.Tr)({height:e.getClientHeight-138+"px"})},{default:(0,s.k6)(()=>[(0,s.bF)(u,{style:{padding:"16px 24px"}},{default:(0,s.k6)(()=>[null!=(0,m.R1)(_)?((0,s.uX)(),(0,s.Wv)(ca.A,{key:0,value:(0,m.R1)(_).eventList,"onUpdate:value":l[9]||(l[9]=e=>(0,m.R1)(_).eventList=e),labelPosition:"top",allowEventList:(0,m.R1)(K),formConfig:(0,m.R1)(ee)},null,8,["value","allowEventList","formConfig"])):null!=(0,m.R1)(A)?((0,s.uX)(),(0,s.Wv)(ca.A,{key:1,value:(0,m.R1)(A)[(0,m.R1)(R)].formEventList||[],onInput:z,labelPosition:"top",allowEventList:[(0,m.R1)(N.OnlineFormEventType).AFTER_CREATE_FORM],formConfig:(0,m.R1)(ee)},null,8,["value","allowEventList","formConfig"])):(0,s.Q3)("",!0)]),_:1})]),_:1},8,["style"])]),_:1})):(0,s.Q3)("",!0)]),_:1},8,["modelValue"])])],32)}}});const et=(0,j.A)(Za,[["__scopeId","data-v-1bdc070f"]]);var lt=et;const at={class:"main-box",style:{width:"600px"}};var tt=(0,s.pM)({__name:"index",props:{pageId:{},groupList:{},clientHeight:{},dialog:{},thirdParamsString:{},dialogKey:{}},setup(e){const l=(0,V.l5)(),a=e,{thirdParams:k,onCloseThirdDialog:C}=(0,R.P)(a),w=(0,s.EW)(()=>l.defaultFormItemSize||k.value.defaultFormItemSize?.value),F=(0,m.KR)(),W=(0,m.KR)(),I=(0,m.KR)("basicInfo"),T=(0,m.KR)({pageId:void 0,pageName:void 0,pageCode:void 0,groupId:void 0,groupPath:[],formConfig:{labelWidth:100,labelPosition:"right"}}),L=(0,m.KR)([]),x={pageName:[{required:!0,message:"请输入表单名称",trigger:"blur"}],pageCode:[{required:!0,message:"请输入表单编码",trigger:"blur"}],groupId:[{required:!0,message:"请选择所属分组",trigger:"blur"}]},S=(0,s.EW)(()=>({pageId:a.pageId||k.value.pageId,groupList:a.groupList||k.value.groupList})),D=(0,s.EW)(()=>(0,g.BN)(S.value.groupList.map(e=>({...e})),"groupId","parentId")),E=(0,s.EW)(()=>({BASIC:"basicInfo",DESIGN:"design"})),A=()=>{L.value=[],h.v9.dictReportDict({}).then(e=>{L.value=e.getList(),L.value.forEach(e=>{e.dictData=e.dictDataJson?JSON.parse(e.dictDataJson):void 0})}).catch(e=>{console.warn(e)})},N=()=>{I.value===E.value.DESIGN&&(I.value=E.value.BASIC)},U=()=>{I.value===E.value.BASIC&&P().then(e=>{null==T.value.pageId&&(T.value.pageId=e.data),I.value=E.value.DESIGN}).catch(e=>{console.log(e)})},P=(e=null)=>new Promise((l,a)=>{F.value.validate(t=>{if(!t)return void a();let u=null!=T.value.pageId;T.value.pageJson=u?null==e?T.value.pageJson:JSON.stringify(e):JSON.stringify(_());let o={reportPageDto:{pageId:T.value.pageId,pageName:T.value.pageName,pageCode:T.value.pageCode,groupId:T.value.groupId,pageJson:T.value.pageJson}},i=u?y.aS.update(o):y.aS.add(o);i.then(e=>{T.value=Q(T.value),u||(T.value.pageId=e.data),c.nk.success("保存成功！"),l(e)}).catch(()=>{a()})})}),X=()=>{I.value===E.value.BASIC?P().catch(e=>{console.warn(e)}):I.value===E.value.DESIGN&&W.value&&W.value.saveFormInfo()},K=()=>{I.value===E.value.BASIC?a.dialog?a.dialog.cancel():C(!0):N()},z=e=>{Array.isArray(e)?T.value.groupId=e[e.length-1]:T.value.groupId=void 0},Q=e=>{let l=_(),a=["pc","mobile"],t=JSON.parse(e.pageJson);t=a.reduce((e,a)=>(e[a]=t[a]||l[a],e),{});let u={pageId:e.pageId,pageName:e.pageName,pageCode:e.pageCode,groupId:e.groupId,groupPath:(0,g.Zi)(S.value.groupList,e.groupId,"groupId"),pageJson:JSON.stringify(t),formInfo:t||{}};return u.formInfo=Object.keys(u.formInfo).reduce((e,l)=>{let a=u.formInfo[l];return e[l]={pageId:u.pageId,pageName:u.pageName,pageCode:u.pageCode,gutter:"mobile"===l?void 0:a.gutter||20,labelWidth:"mobile"===l?void 0:a.labelWidth||100,labelPosition:"mobile"===l?void 0:a.labelPosition||"left",customFieldList:a.customFieldList||[],filterItemWidth:a.filterItemWidth||350,widgetList:a.widgetList||[],paramList:a.paramList||[],formEventList:a.formEventList||[]},e},{}),u},B=e=>{e&&y.aS.view({pageId:e}).then(e=>{T.value=Q(e.data)}).catch(e=>{console.log(e)})},O=e=>{if(null==e)return e;let l=e.widgetImpl,a=e.childWidgetList,t=e.columnList;e.widgetImpl=void 0,e.childWidgetList=[],e.columnList=void 0;let u=JSON.parse(JSON.stringify(e));return e.widgetImpl=l,e.childWidgetList=a,e.columnList=t,u.dataset=void 0,u.bindData.dataset=void 0,u.widgetImpl=void 0,u.props&&u.props.dictInfo&&(u.props.dictInfo.dict=void 0),u.props&&Array.isArray(u.props.tableColumnList)&&u.props.tableColumnList.forEach(e=>{e.table=void 0,e.column=void 0}),Array.isArray(e.childWidgetList)&&(u.childWidgetList=e.childWidgetList.map(e=>O(e))),u},M=e=>{if(null!=e){let l=["pc","mobile"],a=l.reduce((l,a)=>{let t=e[a];return l[a]={...t,widgetList:t.widgetList.map(e=>O(e))},l},{});P(a)}};return(0,s.sV)(()=>{B(S.value.pageId),A()}),(e,l)=>{const a=r.S2,c=n.S2,g=t.bZ,y=d._m,h=u.xE,R=i.uD,V=o.WK,k=u.US,_=t.ZO,C=t.lX;return(0,s.uX)(),(0,s.Wv)(C,{class:"edit-report-page"},{default:(0,s.k6)(()=>[(0,s.bF)(g,{class:"step-header",style:{overflow:"hidden",height:"72px",background:"white","border-bottom":"1px solid #ebeef5"}},{default:(0,s.k6)(()=>[(0,s.bF)(c,{type:"flex",justify:"space-between",align:"middle",style:{height:"100%"}},{default:(0,s.k6)(()=>[l[8]||(l[8]=(0,s.Lk)("div",{class:"title",style:{display:"flex",width:"200px",height:"40px","line-height":"40px"}},[(0,s.Lk)("span",{style:{"font-size":"22px",color:"#333","font-weight":"bold"}},"BIQS统计表单")],-1)),(0,s.bF)(b.A,{class:"step",value:(0,m.R1)(I)},{default:(0,s.k6)(()=>[(0,s.bF)(f.A,{icon:"online-icon icon-basic-info",name:(0,m.R1)(E).BASIC},{default:(0,s.k6)(()=>l[4]||(l[4]=[(0,s.eW)("基础信息")])),_:1,__:[4]},8,["name"]),(0,s.bF)(f.A,{icon:"online-icon icon-data",name:(0,m.R1)(E).DESIGN},{default:(0,s.k6)(()=>l[5]||(l[5]=[(0,s.eW)("表单设计")])),_:1,__:[5]},8,["name"])]),_:1},8,["value"]),(0,s.bF)(c,{class:"operation",type:"flex",justify:"end",style:{width:"200px"}},{default:(0,s.k6)(()=>[(0,m.R1)(I)===(0,m.R1)(E).BASIC?((0,s.uX)(),(0,s.Wv)(a,{key:0,size:"default",type:"primary",onClick:U},{default:(0,s.k6)(()=>l[6]||(l[6]=[(0,s.eW)(" 下一步 ")])),_:1,__:[6]})):(0,s.Q3)("",!0),(0,s.bF)(a,{size:"default",type:"primary",onClick:X},{default:(0,s.k6)(()=>l[7]||(l[7]=[(0,s.eW)(" 保存 ")])),_:1,__:[7]}),(0,s.bF)(a,{onClick:K,size:"default"},{default:(0,s.k6)(()=>[(0,s.eW)((0,p.v_)((0,m.R1)(I)===(0,m.R1)(E).BASIC?"退出":"返回"),1)]),_:1})]),_:1})]),_:1,__:[8]})]),_:1}),(0,s.bF)(_,{style:(0,p.Tr)({padding:(0,m.R1)(I)===(0,m.R1)(E).DESIGN?"0px":"15px"})},{default:(0,s.k6)(()=>[(0,s.bF)(c,{justify:"center",style:{width:"100%",height:"100%"}},{default:(0,s.k6)(()=>[(0,s.bo)((0,s.Lk)("div",at,[(0,s.bF)(k,{ref_key:"basicForm",ref:F,model:(0,m.R1)(T),class:"full-width-input",rules:x,"label-width":"80px",size:(0,m.R1)(w),onSubmit:l[3]||(l[3]=(0,v.D$)(()=>{},["prevent"]))},{default:(0,s.k6)(()=>[(0,s.bF)(c,{gutter:20},{default:(0,s.k6)(()=>[(0,s.bF)(R,{span:24},{default:(0,s.k6)(()=>[(0,s.bF)(h,{label:"所属分组",prop:"groupId"},{default:(0,s.k6)(()=>[(0,s.bF)(y,{class:"input-item",modelValue:(0,m.R1)(T).groupPath,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,m.R1)(T).groupPath=e),options:(0,m.R1)(D),filterable:"",clearable:!0,"show-all-levels":!1,placeholder:"所属分组",props:{value:"groupId",label:"groupName",checkStrictly:!0},onChange:z},null,8,["modelValue","options"])]),_:1})]),_:1}),(0,s.bF)(R,{span:24},{default:(0,s.k6)(()=>[(0,s.bF)(h,{label:"页面名称",prop:"pageName"},{default:(0,s.k6)(()=>[(0,s.bF)(V,{class:"input-item",modelValue:(0,m.R1)(T).pageName,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,m.R1)(T).pageName=e),clearable:!0,placeholder:"页面名称"},null,8,["modelValue"])]),_:1})]),_:1}),(0,s.bF)(R,{span:24},{default:(0,s.k6)(()=>[(0,s.bF)(h,{label:"页面编码",prop:"pageCode"},{default:(0,s.k6)(()=>[(0,s.bF)(V,{class:"input-item",modelValue:(0,m.R1)(T).pageCode,"onUpdate:modelValue":l[2]||(l[2]=e=>(0,m.R1)(T).pageCode=e),clearable:!0,placeholder:"页面编码"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","size"])],512),[[v.aG,(0,m.R1)(I)===(0,m.R1)(E).BASIC]]),(0,m.R1)(I)===(0,m.R1)(E).DESIGN?((0,s.uX)(),(0,s.Wv)(lt,{key:0,ref_key:"reportDesign",ref:W,style:{width:"100%"},pageInfo:(0,m.R1)(T),dictList:(0,m.R1)(L),pageGroupList:(0,m.R1)(D),height:e.clientHeight,onUpdateForm:M},null,8,["pageInfo","dictList","pageGroupList","height"])):(0,s.Q3)("",!0)]),_:1})]),_:1},8,["style"])]),_:1})}}});const ut=(0,j.A)(tt,[["__scopeId","data-v-c7be6f5a"]]);var ot=ut},10155:function(e,l,a){a.r(l),a.d(l,{default:function(){return b}});var t=a(25136),u=(a(97042),a(69957),a(21929)),o=(a(98421),a(65451)),i=(a(63390),a(76408)),d=(a(87535),a(32465),a(14022)),n=(a(72343),a(56768)),r=a(90144),s=a(45130),m=a(71066),p=a(82572),v=(0,n.pM)({__name:"editFormParam",props:{rowData:{},dialog:{},thirdParamsString:{},dialogKey:{}},setup(e){const l=(0,p.l5)(),a=e,{thirdParams:v,onCloseThirdDialog:c}=(0,m.P)(a),b=(0,n.EW)(()=>l.defaultFormItemSize||v.value.defaultFormItemSize?.value),f=(0,r.KR)(),g=(0,r.KR)({variableName:void 0}),y={variableName:[{required:!0,message:"参数名称不能为空！",trigger:"blur"},{pattern:/^[a-z][A-Za-z]+$/,message:"参数名称只支持小驼峰规则英文字母",trigger:"blur"}]},h=(0,n.EW)(()=>({rowData:a.rowData||v.value.rowData})),R=()=>{a.dialog?a.dialog.cancel():c(!1)},V=()=>{f.value.validate(e=>{e&&(a.dialog?a.dialog.submit(g.value.variableName):c(!0,h.value.rowData,g.value.variableName))})};return(0,n.sV)(()=>{h.value.rowData&&(g.value.variableName=h.value.rowData.variableName)}),(e,l)=>{const a=d.WK,m=u.xE,p=i.uD,v=o.S2,c=u.US,h=t.S2;return(0,n.uX)(),(0,n.Wv)(v,{"third-party-dlg":""},{default:(0,n.k6)(()=>[(0,n.bF)(c,{ref_key:"form",ref:f,model:(0,r.R1)(g),class:"full-width-input form-box",rules:y,style:{width:"100%"},"label-width":"100px",size:(0,r.R1)(b),"label-position":"right",onSubmit:l[1]||(l[1]=(0,s.D$)(()=>{},["prevent"]))},{default:(0,n.k6)(()=>[(0,n.bF)(v,{gutter:20},{default:(0,n.k6)(()=>[(0,n.bF)(p,{span:24},{default:(0,n.k6)(()=>[(0,n.bF)(m,{label:"参数名称",prop:"variableName"},{default:(0,n.k6)(()=>[(0,n.bF)(a,{modelValue:(0,r.R1)(g).variableName,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,r.R1)(g).variableName=e),clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","size"]),(0,n.bF)(p,{span:24,class:"menu-box"},{default:(0,n.k6)(()=>[(0,n.bF)(v,{class:"no-scroll flex-box",type:"flex",justify:"end"},{default:(0,n.k6)(()=>[(0,n.bF)(h,{size:(0,r.R1)(b),plain:!0,onClick:R},{default:(0,n.k6)(()=>l[2]||(l[2]=[(0,n.eW)(" 取消 ")])),_:1,__:[2]},8,["size"]),(0,n.bF)(h,{type:"primary",size:(0,r.R1)(b),onClick:V},{default:(0,n.k6)(()=>l[3]||(l[3]=[(0,n.eW)(" 保存 ")])),_:1,__:[3]},8,["size"])]),_:1})]),_:1})]),_:1})}}});const c=v;var b=c},11001:function(e,l,a){a.r(l),a.d(l,{default:function(){return I}});var t=a(21929),u=(a(97042),a(98421),a(68368)),o=(a(81208),a(47001),a(25136)),i=(a(69957),a(77649)),d=(a(87603),a(14022)),n=(a(72343),a(76408)),r=(a(87535),a(32465),a(18888)),s=(a(3172),a(85415)),m=(a(22243),a(7409),a(65451)),p=(a(63390),a(12687)),v=(a(31112),a(44114),a(18111),a(22489),a(7588),a(61701),a(56768)),c=a(90144),b=a(45130),f=a(24232),g=a(61473),y=a(164),h=a(26695),R=a(27007),V=a(34894),k=a(28705),_=a(71066),C=a(92380),w=a(82572),F=(0,v.pM)({__name:"editWidgetIndexColumn",props:{rowData:{},columnList:{},dataset:{},supportColumnWidth:{type:Boolean,default:!1},formParamList:{},reportDictList:{},widgetList:{},defaultFormItemSize:{},dialog:{},thirdParamsString:{},dialogKey:{}},setup(e){const l=(0,w.l5)(),a=e,{thirdParams:F,onCloseThirdDialog:W}=(0,_.P)(a),I=(0,v.EW)(()=>l.defaultFormItemSize),T=(0,c.KR)(),L=(0,c.KR)({id:void 0,columnId:void 0,showName:void 0,fixed:void 0,calculateType:C.CalculateType.SUM,columnWidth:void 0,filterList:[]}),x={columnId:[{required:!0,message:"请选择数据集字段！",trigger:"blur"}],showName:[{required:!0,message:"显示名称不能为空！",trigger:"blur"}]},S=(0,v.EW)(()=>A.value.dataset.datasetType===C.DatasetType.API),D=(0,v.EW)(()=>{let e=A.value.columnList.map(e=>({...e}));return(0,R.BN)(e,"columnId")}),E=(0,v.EW)(()=>null==L.value.columnId||""===L.value.columnId?[]:(0,R.Zi)(D.value,L.value.columnId,"columnId")),A=(0,v.EW)(()=>({rowData:a.rowData||F.value.rowData,dataset:a.dataset||F.value.dataset||{},supportColumnWidth:F.value.supportColumnWidth?F.value.supportColumnWidth:a.supportColumnWidth,columnList:(a.columnList||F.value.columnList||[]).map(e=>({...e,children:void 0})),formParamList:a.formParamList||F.value.formParamList||[],reportDictList:a.reportDictList||F.value.reportDictList||[],widgetList:a.widgetList||F.value.widgetList||[]})),N=(0,v.EW)(()=>[C.FilterValueKind.FORM_PARAM,C.FilterValueKind.WIDGET_DATA,C.FilterValueKind.DICT_DATA,C.FilterValueKind.COLUMN_DATA,C.FilterValueKind.INNER_VARIABLE,C.FilterValueKind.INPUT_DATA]),U=(0,v.EW)(()=>(0,R.PH)(A.value.columnList,L.value.columnId,"columnId")),P=(0,v.EW)(()=>C.CriteriaFilterType.getList().filter(e=>-1!==[C.CriteriaFilterType.EQ,C.CriteriaFilterType.NOT_EQ,C.CriteriaFilterType.GE,C.CriteriaFilterType.GT,C.CriteriaFilterType.LE,C.CriteriaFilterType.LT].indexOf(e.id))),X=(0,v.EW)(()=>null==U.value?[]:A.value.reportDictList.map(e=>({...e,disabled:!!U.value?.dictId&&e.id!==U.value.dictId,dictDataList:e.dictDataList}))),K=()=>{a.dialog?a.dialog.cancel():W(!1)},z=()=>{T.value.validate(e=>{e&&G()&&(a.dialog?a.dialog.submit(L.value):W(!0,A.value.rowData,L.value))})},Q=e=>{L.value.columnId=Array.isArray(e)?e[e.length-1]:void 0},B=(e=null)=>{null==e&&L.value.filterList.push({paramId:void 0,required:!1,filterType:C.CriteriaFilterType.EQ,filterValueType:C.FilterValueKind.INPUT_DATA,paramDictId:void 0,formWidgetId:void 0,formWidgetColumn:void 0,paramValue:void 0,relationId:void 0,paramDictDataList:[]})},O=e=>{y.s.confirm("是否删除此过滤条件？","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{L.value.filterList=L.value.filterList.filter(l=>e!==l)}).catch(e=>{console.warn(e)})},M=e=>{let l=(0,R.PH)(A.value.columnList,e.toString(),"columnId");L.value.showName=l?l.columnName:void 0,L.value.filterList=[]},G=()=>{if(Array.isArray(L.value.filterList))for(let e=0;e<L.value.filterList.length;e++){let l=L.value.filterList[e];switch(l.filterValueType){case C.FilterValueKind.WIDGET_DATA:{let e=Y(l),a=Array.isArray(e?.children)&&e.children.length>0,t=null!=l.formWidgetColumn&&""!==l.formWidgetColumn;if(null==e||a&&!t)return h.nk.error("过滤条件存在空值！"),!1;break}case C.FilterValueKind.FORM_PARAM:case C.FilterValueKind.DICT_DATA:case C.FilterValueKind.COLUMN_DATA:case C.FilterValueKind.PRINT_INPUT_PARAM:case C.FilterValueKind.INNER_VARIABLE:case C.FilterValueKind.INPUT_DATA:if(null==l.paramValue||""===l.paramValue)return h.nk.error("过滤条件存在空值！"),!1;break}}return!0},j=e=>{let l=U.value;return null==l?N.value:(0,k.D3)(N.value,e.filterType,{...l,fieldType:"Double"})},q=e=>e.filterType!==C.CriteriaFilterType.NOT_NULL&&e.filterType!==C.CriteriaFilterType.IS_NULL,H=(e,l)=>{l===C.CriteriaFilterType.IN||l===C.CriteriaFilterType.NOT_IN?e.filterValueType=C.FilterValueKind.DICT_DATA:e.filterValueType=C.FilterValueKind.INPUT_DATA,$(e)},$=e=>{e.paramDictId=void 0,e.innerVeriable=void 0,e.paramValue=void 0,e.paramDictDataList=[]},J=e=>{for(let l=0;l<X.value.length;l++)if(e.paramDictId===X.value[l].id)return X.value[l];return null},Y=e=>(0,R.PH)(A.value.widgetList,e?.formWidgetId,"widgetId"),Z=e=>{ae(e,J(e)),e.paramValue=void 0},ee=e=>new Promise((l,a)=>{V.vO.listDictData({dictId:e}).then(e=>{l(e.data)}).catch(e=>{a(e)})}),le=(e,l)=>S.value?Promise.resolve():new Promise((a,t)=>{V.TR.listDataWithColumn({datasetId:e,columnId:l}).then(e=>{a(e.data)}).catch(e=>{t(e)})}),ae=(e,l)=>{null==l||Array.isArray(l.dictDataList)?e.paramDictDataList=(l||{}).dictDataList:ee(l.id).then(a=>{e.paramDictDataList=a,l.dictDataList=a}).catch(e=>{console.warn(e)})},te=()=>{U.value&&(Array.isArray(U.value.columnDataList)||le(U.value.datasetId,U.value.columnId).then(e=>{if(U.value){let l=U.value.columnName;U.value.columnDataList=(e||[]).map(e=>null!=e[l+"__DictMap"]?{...e[l+"__DictMap"]}:{id:e[l],name:e[l]})}}).catch(e=>{console.warn(e)}))};return(0,v.wB)(()=>U.value,()=>{te()},{immediate:!0}),(0,v.sV)(()=>{null!=A.value.rowData&&(L.value={...L.value,...A.value.rowData},null==L.value.fixed&&(L.value.fixed=void 0),Array.isArray(L.value.filterList)&&(L.value.filterList=L.value.filterList.map(e=>({...e})),L.value.filterList.forEach(e=>{ae(e,J(e))})),te())}),(e,l)=>{const a=p.u,y=m.S2,h=s.P9,R=s.AV,V=r._m,k=t.xE,_=n.uD,w=d.WK,F=i.lq,W=o.S2,N=u.o8,G=u.Up,J=t.US;return(0,v.uX)(),(0,v.Wv)(y,{class:"form-edit-widget-categroy-column third-party-dlg"},{default:(0,v.k6)(()=>[(0,v.bF)(J,{ref_key:"formEditWidgetCategroyColumn",ref:T,model:(0,c.R1)(L),class:"full-width-input form-box",rules:x,style:{width:"100%",height:"570px"},"label-width":"100px",size:(0,c.R1)(I),"label-position":"right",onSubmit:l[6]||(l[6]=(0,b.D$)(()=>{},["prevent"]))},{default:(0,v.k6)(()=>[(0,v.bF)(y,{gutter:20},{default:(0,v.k6)(()=>[(0,v.bF)(_,{span:(0,c.R1)(S)?24:12},{default:(0,v.k6)(()=>[(0,v.bF)(k,{label:"数据集字段",prop:"columnId"},{default:(0,v.k6)(()=>[(0,c.R1)(S)?((0,v.uX)(),(0,v.Wv)(V,{key:1,options:(0,c.R1)(D),placeholder:"",clearable:"",modelValue:(0,c.R1)(E),"onUpdate:modelValue":Q,disabled:null!=(0,c.R1)(A).rowData,props:{label:"columnName",value:"columnId"},onChange:M},{default:(0,v.k6)(({data:e})=>[(0,v.bF)(y,{type:"flex",justify:"space-between",align:"middle"},{default:(0,v.k6)(()=>[(0,v.Lk)("span",null,(0,f.v_)(e.columnName),1),"Object"!==e.fieldType&&"Array"!==e.fieldType?((0,v.uX)(),(0,v.Wv)(a,{key:0,size:"default",type:e.dimension?"info":"success"},{default:(0,v.k6)(()=>[(0,v.eW)((0,f.v_)(e.dimension?"维度字段":"指标字段"),1)]),_:2},1032,["type"])):(0,v.Q3)("",!0)]),_:2},1024)]),_:1},8,["options","modelValue","disabled"])):((0,v.uX)(),(0,v.Wv)(R,{key:0,modelValue:(0,c.R1)(L).columnId,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,c.R1)(L).columnId=e),placeholder:"",clearable:"",disabled:null!=(0,c.R1)(A).rowData,onChange:M},{default:(0,v.k6)(()=>[((0,v.uX)(!0),(0,v.CE)(v.FK,null,(0,v.pI)((0,c.R1)(A).columnList,e=>((0,v.uX)(),(0,v.Wv)(h,{key:e.columnId,label:e.columnName,value:e.columnId,disabled:e.disabled},{default:(0,v.k6)(()=>[(0,v.bF)(y,{type:"flex",justify:"space-between",align:"middle"},{default:(0,v.k6)(()=>[(0,v.Lk)("span",null,(0,f.v_)(e.columnName),1),(0,v.bF)(a,{size:"default",type:e.dimension?"info":"success"},{default:(0,v.k6)(()=>[(0,v.eW)((0,f.v_)(e.dimension?"维度字段":"指标字段"),1)]),_:2},1032,["type"])]),_:2},1024)]),_:2},1032,["label","value","disabled"]))),128))]),_:1},8,["modelValue","disabled"]))]),_:1})]),_:1},8,["span"]),(0,v.bF)(_,{span:(0,c.R1)(S)?24:12},{default:(0,v.k6)(()=>[(0,v.bF)(k,{label:"显示名称",prop:"showName"},{default:(0,v.k6)(()=>[(0,v.bF)(w,{modelValue:(0,c.R1)(L).showName,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,c.R1)(L).showName=e),placeholder:"",clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["span"]),(0,c.R1)(S)?(0,v.Q3)("",!0):((0,v.uX)(),(0,v.Wv)(_,{key:0,span:(0,c.R1)(S)?24:12},{default:(0,v.k6)(()=>[(0,v.bF)(k,{label:"汇总方式",prop:"calculateType"},{default:(0,v.k6)(()=>[(0,v.bF)(R,{modelValue:(0,c.R1)(L).calculateType,"onUpdate:modelValue":l[2]||(l[2]=e=>(0,c.R1)(L).calculateType=e),placeholder:""},{default:(0,v.k6)(()=>[((0,v.uX)(!0),(0,v.CE)(v.FK,null,(0,v.pI)((0,c.R1)(C.CalculateType).getList(),e=>((0,v.uX)(),(0,v.Wv)(h,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["span"])),(0,v.bF)(_,{span:(0,c.R1)(S)?24:12},{default:(0,v.k6)(()=>[(0,v.bF)(k,{label:"小数位数",prop:"calculateType"},{default:(0,v.k6)(()=>[(0,v.bF)(F,{modelValue:(0,c.R1)(L).fixed,"onUpdate:modelValue":l[3]||(l[3]=e=>(0,c.R1)(L).fixed=e),"controls-position":"right",min:0,max:10},null,8,["modelValue"])]),_:1})]),_:1},8,["span"]),(0,c.R1)(A).supportColumnWidth?((0,v.uX)(),(0,v.Wv)(_,{key:1,span:(0,c.R1)(S)?24:12},{default:(0,v.k6)(()=>[(0,v.bF)(k,{label:"字段最小宽度"},{default:(0,v.k6)(()=>[(0,v.bF)(w,{modelValue:(0,c.R1)(L).columnWidth,"onUpdate:modelValue":l[4]||(l[4]=e=>(0,c.R1)(L).columnWidth=e),placeholder:"最小列宽度，会自动将剩余空间按比例分配",clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["span"])):(0,v.Q3)("",!0),(0,c.R1)(S)?(0,v.Q3)("",!0):((0,v.uX)(),(0,v.Wv)(_,{key:2,span:24,style:{"margin-bottom":"15px"}},{default:(0,v.k6)(()=>[(0,v.bF)(y,{type:"flex",justify:"space-between",align:"middle"},{default:(0,v.k6)(()=>[l[8]||(l[8]=(0,v.Lk)("span",{class:"el-form-item__label"},null,-1)),(0,v.bF)(W,{link:"",onClick:l[5]||(l[5]=e=>B()),size:(0,c.R1)(I)},{default:(0,v.k6)(()=>l[7]||(l[7]=[(0,v.eW)("添加过滤")])),_:1,__:[7]},8,["size"])]),_:1,__:[8]}),(0,v.bF)(y,null,{default:(0,v.k6)(()=>[(0,v.bF)(G,{data:(0,c.R1)(L).filterList,size:(0,c.R1)(I),"header-cell-class-name":"table-header-gray",height:"350px"},{empty:(0,v.k6)(()=>l[10]||(l[10]=[(0,v.Lk)("div",{class:"table-empty unified-font"},[(0,v.Lk)("img",{src:g}),(0,v.Lk)("span",null,"暂无数据")],-1)])),default:(0,v.k6)(()=>[(0,v.bF)(N,{label:"过滤字段",width:"200px"},{default:(0,v.k6)(()=>[(0,v.Lk)("template",null,[(0,v.Lk)("span",null,(0,f.v_)(((0,c.R1)(U)||{}).columnName),1)])]),_:1}),(0,v.bF)(N,{label:"过滤规则",width:"150px"},{default:(0,v.k6)(e=>[(0,v.bF)(R,{modelValue:e.row.filterType,"onUpdate:modelValue":l=>e.row.filterType=l,size:"default",onChange:l=>H(e.row,l)},{default:(0,v.k6)(()=>[((0,v.uX)(!0),(0,v.CE)(v.FK,null,(0,v.pI)((0,c.R1)(P),e=>((0,v.uX)(),(0,v.Wv)(h,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),(0,v.bF)(N,{label:"过滤值类型",width:"150px"},{default:(0,v.k6)(e=>[(0,v.bF)(R,{modelValue:e.row.filterValueType,"onUpdate:modelValue":l=>e.row.filterValueType=l,size:"default",placeholder:"",disabled:!q(e.row),onChange:l=>$(e.row)},{default:(0,v.k6)(()=>[((0,v.uX)(!0),(0,v.CE)(v.FK,null,(0,v.pI)(j(e.row),e=>((0,v.uX)(),(0,v.Wv)(h,{key:e,label:(0,c.R1)(C.FilterValueKind).getValue(e),value:e},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","disabled","onChange"])]),_:1}),(0,v.bF)(N,{label:"过滤值"},{default:(0,v.k6)(e=>[e.row.filterValueType===(0,c.R1)(C.FilterValueKind).FORM_PARAM?((0,v.uX)(),(0,v.Wv)(R,{key:0,style:{width:"200px"},modelValue:e.row.paramValue,"onUpdate:modelValue":l=>e.row.paramValue=l,size:"default",clearable:"",placeholder:""},{default:(0,v.k6)(()=>[((0,v.uX)(!0),(0,v.CE)(v.FK,null,(0,v.pI)((0,c.R1)(A).formParamList,e=>((0,v.uX)(),(0,v.Wv)(h,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):(0,v.Q3)("",!0),e.row.filterValueType===(0,c.R1)(C.FilterValueKind).WIDGET_DATA?((0,v.uX)(),(0,v.Wv)(R,{style:{width:"200px"},modelValue:e.row.formWidgetId,"onUpdate:modelValue":l=>e.row.formWidgetId=l,key:"formWidgetId",size:"default",clearable:"",placeholder:"",onChange:l=>e.row.formWidgetColumn=void 0},{default:(0,v.k6)(()=>[((0,v.uX)(!0),(0,v.CE)(v.FK,null,(0,v.pI)((0,c.R1)(A).widgetList,e=>((0,v.uX)(),(0,v.Wv)(h,{key:e.widgetId,label:e.showName,value:e.widgetId},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])):(0,v.Q3)("",!0),e.row.filterValueType===(0,c.R1)(C.FilterValueKind).WIDGET_DATA&&null!=Y(e.row)&&Array.isArray(Y(e.row)?.children)&&Y(e.row)?.children.length>0?((0,v.uX)(),(0,v.Wv)(R,{modelValue:e.row.formWidgetColumn,"onUpdate:modelValue":l=>e.row.formWidgetColumn=l,key:"formWidgetColumn",style:{width:"200px","margin-left":"15px"},size:"default",clearable:"",placeholder:""},{default:(0,v.k6)(()=>[((0,v.uX)(!0),(0,v.CE)(v.FK,null,(0,v.pI)((Y(e.row)||{}).children,e=>((0,v.uX)(),(0,v.Wv)(h,{key:e.id,label:e.showName,value:e.id},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):(0,v.Q3)("",!0),e.row.filterValueType===(0,c.R1)(C.FilterValueKind).DICT_DATA?((0,v.uX)(),(0,v.Wv)(R,{key:3,style:{width:"200px"},placeholder:"请选择参数值字典",modelValue:e.row.paramDictId,"onUpdate:modelValue":l=>e.row.paramDictId=l,size:"default",clearable:"",onChange:l=>Z(e.row)},{default:(0,v.k6)(()=>[((0,v.uX)(!0),(0,v.CE)(v.FK,null,(0,v.pI)((0,c.R1)(X),e=>((0,v.uX)(),(0,v.Wv)(h,{key:e.id,label:e.name,value:e.id,disabled:e.disabled},null,8,["label","value","disabled"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])):(0,v.Q3)("",!0),e.row.filterValueType===(0,c.R1)(C.FilterValueKind).DICT_DATA?((0,v.uX)(),(0,v.Wv)(R,{key:4,style:{width:"200px","margin-left":"15px"},modelValue:e.row.paramValue,"onUpdate:modelValue":l=>e.row.paramValue=l,size:"default",clearable:"",placeholder:"请选择参数值",multiple:e.row.filterType===(0,c.R1)(C.CriteriaFilterType).IN||e.row.filterType===(0,c.R1)(C.CriteriaFilterType).NOT_IN},{default:(0,v.k6)(()=>[((0,v.uX)(!0),(0,v.CE)(v.FK,null,(0,v.pI)(e.row.paramDictDataList,e=>((0,v.uX)(),(0,v.Wv)(h,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","multiple"])):(0,v.Q3)("",!0),e.row.filterValueType===(0,c.R1)(C.FilterValueKind).COLUMN_DATA?((0,v.uX)(),(0,v.Wv)(R,{key:5,style:{width:"200px"},modelValue:e.row.paramValue,"onUpdate:modelValue":l=>e.row.paramValue=l,size:"default",clearable:"",placeholder:"",multiple:e.row.filterType===(0,c.R1)(C.CriteriaFilterType).IN||e.row.filterType===(0,c.R1)(C.CriteriaFilterType).NOT_IN},{default:(0,v.k6)(()=>[((0,v.uX)(!0),(0,v.CE)(v.FK,null,(0,v.pI)(((0,c.R1)(U)||{}).columnDataList,e=>((0,v.uX)(),(0,v.Wv)(h,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","multiple"])):(0,v.Q3)("",!0),e.row.filterValueType===(0,c.R1)(C.FilterValueKind).INNER_VARIABLE?((0,v.uX)(),(0,v.Wv)(R,{key:6,style:{width:"200px"},modelValue:e.row.paramValue,"onUpdate:modelValue":l=>e.row.paramValue=l,size:"default",clearable:"",placeholder:"",disabled:!q(e.row)},{default:(0,v.k6)(()=>[((0,v.uX)(!0),(0,v.CE)(v.FK,null,(0,v.pI)((0,c.R1)(C.CustomDateValueType).getList(),e=>((0,v.uX)(),(0,v.Wv)(h,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])):(0,v.Q3)("",!0),e.row.filterValueType===(0,c.R1)(C.FilterValueKind).INPUT_DATA?((0,v.uX)(),(0,v.Wv)(F,{key:7,style:{width:"200px"},modelValue:e.row.paramValue,"onUpdate:modelValue":l=>e.row.paramValue=l,"controls-position":"right",size:"default",placeholder:"",disabled:!q(e.row)},null,8,["modelValue","onUpdate:modelValue","disabled"])):(0,v.Q3)("",!0)]),_:1}),(0,v.bF)(N,{label:"操作",width:"150px"},{default:(0,v.k6)(e=>[(0,v.bF)(W,{link:"",onClick:l=>O(e.row),size:(0,c.R1)(I)},{default:(0,v.k6)(()=>l[9]||(l[9]=[(0,v.eW)("删除")])),_:2,__:[9]},1032,["onClick","size"])]),_:1})]),_:1},8,["data","size"])]),_:1})]),_:1}))]),_:1})]),_:1},8,["model","size"]),(0,v.bF)(y,{class:"no-scroll menu-box",type:"flex",justify:"end"},{default:(0,v.k6)(()=>[(0,v.bF)(W,{size:(0,c.R1)(I),plain:!0,onClick:K},{default:(0,v.k6)(()=>l[11]||(l[11]=[(0,v.eW)(" 取消 ")])),_:1,__:[11]},8,["size"]),(0,v.bF)(W,{type:"primary",size:(0,c.R1)(I),onClick:z},{default:(0,v.k6)(()=>l[12]||(l[12]=[(0,v.eW)(" 保存 ")])),_:1,__:[12]},8,["size"])]),_:1})]),_:1})}}});const W=F;var I=W},15012:function(e,l,a){a.r(l),a.d(l,{default:function(){return W}});var t=a(21929),u=(a(97042),a(98421),a(25136)),o=(a(69957),a(14022)),i=(a(72343),a(88284)),d=(a(36715),a(77649)),n=(a(87603),a(85415)),r=(a(22243),a(7409),a(3740)),s=(a(42899),a(32465),a(18888)),m=(a(3172),a(65451)),p=(a(63390),a(12687)),v=(a(31112),a(18111),a(22489),a(61701),a(56768)),c=a(90144),b=a(45130),f=a(24232),g=a(28705),y=a(34894),h=a(27007),R=a(92380),V=a(21016),k=a(71066),_=a(82572);const C={key:0,style:{"margin-left":"15px",color:"#e6a23c","flex-grow":"0"}};var w=(0,v.pM)({__name:"editReportColumnFilter",props:{rowData:{},columnList:{},formParamList:{},reportDictList:{},widgetList:{},validFilterValueType:{},dialog:{},thirdParamsString:{},dialogKey:{}},setup(e){const l=(0,_.l5)(),a=e,{thirdParams:w,onCloseThirdDialog:F}=(0,k.P)(a),W=(0,v.EW)(()=>l.defaultFormItemSize||w.value.defaultFormItemSize?.value),I=(0,c.KR)(),T=(0,c.KR)({paramId:void 0,paramName:void 0,required:!1,filterType:void 0,filterValueType:R.FilterValueKind.INPUT_DATA,paramDictId:void 0,formWidgetId:void 0,formWidgetColumn:void 0,paramValue:void 0,relationId:void 0,paramPath:[]}),L=(0,c.KR)([]),x={paramName:[{required:!0,message:"过滤字段不能为空",trigger:"blur"}],filterType:[{required:!0,message:"过滤规则不能为空",trigger:"blur"}],filterValueType:[{required:!0,message:"过滤值类型不能为空",trigger:"blur"}],paramDictId:[{required:!0,message:"过滤值字典不能为空",trigger:"blur"}],formWidgetId:[{required:!0,message:"过滤组件不能为空",trigger:"blur"}],formWidgetColumn:[{required:!0,message:"过滤组件字段不能为空",trigger:"blur"}],paramValue:[{required:!0,message:"过滤值不能为空",trigger:"blur"}]},S=(0,v.EW)(()=>({rowData:a.rowData||w.value.rowData,columnList:a.columnList||w.value.columnList||[],formParamList:a.formParamList||w.value.formParamList||[],reportDictList:a.reportDictList||w.value.reportDictList||[],widgetList:a.widgetList||w.value.widgetList||[],validFilterValueType:a.validFilterValueType||w.value.validFilterValueType||[]})),D=(0,v.EW)(()=>T.value.filterType!==R.CriteriaFilterType.NOT_NULL&&T.value.filterType!==R.CriteriaFilterType.IS_NULL),E=(0,v.EW)(()=>{if(null==T.value.relationId)return(0,h.PH)(S.value.columnList,T.value.paramName,"id");{let e=(0,h.PH)(S.value.columnList,T.value.relationId,"id");if(null!=e)return(0,h.PH)(e.children,T.value.paramName,"id")}return null}),A=(0,v.EW)(()=>{let e=E.value;if(null==e)return[];let l=(0,g.q2)(e.fieldType);return l}),N=(0,v.EW)(()=>{let e=E.value;if(null==e)return S.value.validFilterValueType;let l=(0,g.D3)(S.value.validFilterValueType,T.value.filterType,e);return T.value.filterType===R.CriteriaFilterType.BETWEEN&&(l=l.filter(e=>e===R.FilterValueKind.WIDGET_DATA)),l}),U=(0,v.EW)(()=>null==E.value?[]:S.value.reportDictList.map(e=>({...e,dictDataList:e.dictDataList}))||[]),P=(0,v.EW)(()=>{for(let e=0;e<U.value.length;e++)if(T.value.paramDictId===U.value[e].id)return U.value[e];return null}),X=(0,v.EW)(()=>(0,h.PH)(S.value.widgetList,T.value.formWidgetId,"widgetId")),K=()=>{a.dialog?a.dialog.cancel():F(!1)},z=()=>{I.value.validate(e=>{e&&(a.dialog?a.dialog.submit(T.value):F(!0,S.value.rowData,T.value))})},Q=()=>{T.value.formInputParam=void 0,T.value.reportPrintVariable=void 0,T.value.customParam=void 0,T.value.paramDictId=(E.value||{}).dictId,T.value.paramDictData=void 0,T.value.paramColumnData=void 0,T.value.innerVeriable=void 0,T.value.paramValue=void 0,T.value.formWidgetId=void 0,T.value.formWidgetColumn=void 0},B=e=>{e===R.CriteriaFilterType.IN||e===R.CriteriaFilterType.NOT_IN?T.value.filterValueType=R.FilterValueKind.DICT_DATA:e===R.CriteriaFilterType.BETWEEN?T.value.filterValueType=R.FilterValueKind.WIDGET_DATA:T.value.filterValueType=R.FilterValueKind.INPUT_DATA,Q()},O=e=>{T.value.filterType=R.CriteriaFilterType.EQ,T.value.required=!1,T.value.relationId=void 0,Array.isArray(e)&&e.length>0?(T.value.paramName=e[e.length-1],2===e.length&&(T.value.relationId=e[0])):T.value.paramName=void 0,B(R.CriteriaFilterType.EQ)},M=e=>new Promise((l,a)=>{y.vO.listDictData({dictId:e}).then(e=>{l(e.data)}).catch(e=>{a(e)})}),G=(e,l)=>new Promise((a,t)=>{y.TR.listDataWithColumn({datasetId:e,columnId:l}).then(e=>{a(e.data)}).catch(e=>{t(e)})}),j=e=>{null==e||Array.isArray(e.dictDataList)?L.value=(e||{}).dictDataList:M(e.id).then(l=>{L.value=l,e.dictDataList=l}).catch(e=>{console.warn(e)})},q=()=>{null!=E.value&&(Array.isArray(E.value.columnDataList)||G(E.value.datasetId,E.value.columnId).then(e=>{let l=E.value?.columnName;E.value&&(E.value.columnDataList=e.map(e=>null!=e[l+"__DictMap"]?{...e[l+"__DictMap"]}:{id:e[l],name:e[l]}))}).catch(e=>{console.warn(e)}))};return(0,v.wB)(()=>P.value,e=>{j(e)},{immediate:!0}),(0,v.wB)(()=>E.value,()=>{q()},{immediate:!0}),(0,v.sV)(()=>{null!=S.value.rowData?(T.value={...T.value,...S.value.rowData},T.value.paramPath=null==T.value.relationId?[T.value.paramName]:[T.value.relationId,T.value.paramName],j(P.value),q()):T.value.paramId=(new Date).getTime()}),(e,l)=>{const a=p.u,g=m.S2,y=s._m,h=t.xE,k=r.qi,_=n.P9,w=n.AV,F=d.lq,P=i.MG,M=o.WK,G=u.S2,j=t.US;return(0,v.uX)(),(0,v.Wv)(j,{class:"edit-report-template-filter third-party-dlg",ref_key:"form",ref:I,model:(0,c.R1)(T),rules:x,"label-width":"92px",size:(0,c.R1)(W),onSubmit:l[18]||(l[18]=(0,b.D$)(()=>{},["prevent"]))},{default:(0,v.k6)(()=>[(0,v.bF)(h,{label:"过滤字段",prop:"paramName"},{default:(0,v.k6)(()=>[(0,v.bF)(y,{modelValue:(0,c.R1)(T).paramPath,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,c.R1)(T).paramPath=e),options:(0,c.R1)(S).columnList,props:{label:"name",value:"id"},size:"default",style:{width:"100%"},onChange:O},{default:(0,v.k6)(({data:e})=>[(0,v.bF)(g,{type:"flex",justify:"space-between",align:"middle"},{default:(0,v.k6)(()=>[(0,v.Lk)("span",null,(0,f.v_)(e.name),1),null!=e.dictId?((0,v.uX)(),(0,v.Wv)(a,{key:0,size:"default",style:{"margin-left":"20px"}},{default:(0,v.k6)(()=>l[19]||(l[19]=[(0,v.eW)("字典")])),_:1,__:[19]})):(0,v.Q3)("",!0)]),_:2},1024)]),_:1},8,["modelValue","options"])]),_:1}),(0,v.bF)(h,{label:"是否必填",required:""},{default:(0,v.k6)(()=>[(0,v.bF)(k,{modelValue:(0,c.R1)(T).required,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,c.R1)(T).required=e)},null,8,["modelValue"])]),_:1}),(0,v.bF)(h,{label:"过滤规则",prop:"filterType"},{default:(0,v.k6)(()=>[(0,v.bF)(w,{modelValue:(0,c.R1)(T).filterType,"onUpdate:modelValue":l[2]||(l[2]=e=>(0,c.R1)(T).filterType=e),size:"default",onChange:B},{default:(0,v.k6)(()=>[((0,v.uX)(!0),(0,v.CE)(v.FK,null,(0,v.pI)((0,c.R1)(A),e=>((0,v.uX)(),(0,v.Wv)(_,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),(0,v.bF)(h,{label:"过滤值类型",prop:"filterValueType"},{default:(0,v.k6)(()=>[(0,v.bF)(w,{modelValue:(0,c.R1)(T).filterValueType,"onUpdate:modelValue":l[3]||(l[3]=e=>(0,c.R1)(T).filterValueType=e),size:"default",placeholder:"",disabled:!(0,c.R1)(D),onChange:Q},{default:(0,v.k6)(()=>[((0,v.uX)(!0),(0,v.CE)(v.FK,null,(0,v.pI)((0,c.R1)(N),e=>((0,v.uX)(),(0,v.Wv)(_,{key:e,label:(0,c.R1)(R.FilterValueKind).getValue(e),value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),(0,c.R1)(T).filterValueType===(0,c.R1)(R.FilterValueKind).FORM_PARAM?((0,v.uX)(),(0,v.Wv)(h,{key:0,label:"过滤值",prop:(0,c.R1)(D)?"paramValue":void 0,disabled:!(0,c.R1)(D)},{default:(0,v.k6)(()=>[(0,v.bF)(w,{modelValue:(0,c.R1)(T).paramValue,"onUpdate:modelValue":l[4]||(l[4]=e=>(0,c.R1)(T).paramValue=e),size:"default",clearable:"",placeholder:""},{default:(0,v.k6)(()=>[((0,v.uX)(!0),(0,v.CE)(v.FK,null,(0,v.pI)((0,c.R1)(S).formParamList,e=>((0,v.uX)(),(0,v.Wv)(_,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["prop","disabled"])):(0,v.Q3)("",!0),(0,c.R1)(T).filterValueType===(0,c.R1)(R.FilterValueKind).WIDGET_DATA?((0,v.uX)(),(0,v.Wv)(h,{key:1,label:"过滤组件",prop:(0,c.R1)(D)?"formWidgetId":void 0,disabled:!(0,c.R1)(D)},{default:(0,v.k6)(()=>[(0,v.bF)(w,{modelValue:(0,c.R1)(T).formWidgetId,"onUpdate:modelValue":l[5]||(l[5]=e=>(0,c.R1)(T).formWidgetId=e),key:"formWidgetId",size:"default",clearable:"",placeholder:"",onChange:l[6]||(l[6]=e=>(0,c.R1)(T).formWidgetColumn=void 0)},{default:(0,v.k6)(()=>[((0,v.uX)(!0),(0,v.CE)(v.FK,null,(0,v.pI)(((0,c.R1)(S).widgetList||[]).filter(e=>(0,c.R1)(T).filterType===(0,c.R1)(R.CriteriaFilterType).BETWEEN?e.widgetType===(0,c.R1)(V.SysCustomWidgetType).DateRange:e.widgetType!==(0,c.R1)(V.SysCustomWidgetType).DateRange),e=>((0,v.uX)(),(0,v.Wv)(_,{key:e.widgetId,label:e.showName,value:e.widgetId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["prop","disabled"])):(0,v.Q3)("",!0),(0,c.R1)(T).filterValueType===(0,c.R1)(R.FilterValueKind).WIDGET_DATA&&null!=(0,c.R1)(X)&&Array.isArray((0,c.R1)(X).children)&&(0,c.R1)(X).children.length>0?((0,v.uX)(),(0,v.Wv)(h,{key:2,label:"组件字段",prop:(0,c.R1)(D)?"formWidgetColumn":void 0,disabled:!(0,c.R1)(D)},{default:(0,v.k6)(()=>[(0,v.bF)(w,{modelValue:(0,c.R1)(T).formWidgetColumn,"onUpdate:modelValue":l[7]||(l[7]=e=>(0,c.R1)(T).formWidgetColumn=e),key:"formWidgetColumn",size:"default",clearable:"",placeholder:""},{default:(0,v.k6)(()=>[((0,v.uX)(!0),(0,v.CE)(v.FK,null,(0,v.pI)(((0,c.R1)(X)||{}).children,e=>((0,v.uX)(),(0,v.Wv)(_,{key:e.id,label:e.showName,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["prop","disabled"])):(0,v.Q3)("",!0),(0,c.R1)(T).filterValueType===(0,c.R1)(R.FilterValueKind).DICT_DATA?((0,v.uX)(),(0,v.Wv)(h,{key:3,label:"过滤值字典",prop:(0,c.R1)(D)?"paramDictId":void 0,disabled:!(0,c.R1)(D)},{default:(0,v.k6)(()=>[(0,v.bF)(g,{type:"flex"},{default:(0,v.k6)(()=>[(0,v.bF)(w,{modelValue:(0,c.R1)(T).paramDictId,"onUpdate:modelValue":l[8]||(l[8]=e=>(0,c.R1)(T).paramDictId=e),key:"paramDictId",style:{width:"200px","flex-grow":"1"},size:"default",clearable:"",placeholder:"",disabled:null==(0,c.R1)(E)||null!=(0,c.R1)(E).dictId,onChange:l[9]||(l[9]=e=>(0,c.R1)(T).paramValue=void 0)},{default:(0,v.k6)(()=>[((0,v.uX)(!0),(0,v.CE)(v.FK,null,(0,v.pI)((0,c.R1)(U),e=>((0,v.uX)(),(0,v.Wv)(_,{key:e.id,label:e.name,value:e.id,disabled:e.disabled},null,8,["label","value","disabled"]))),128))]),_:1},8,["modelValue","disabled"]),null!=((0,c.R1)(E)||{}).dictId?((0,v.uX)(),(0,v.CE)("span",C,"只显示字段绑定字典")):(0,v.Q3)("",!0)]),_:1})]),_:1},8,["prop","disabled"])):(0,v.Q3)("",!0),(0,c.R1)(T).filterValueType===(0,c.R1)(R.FilterValueKind).DICT_DATA?((0,v.uX)(),(0,v.Wv)(h,{key:4,label:"字典数据",prop:(0,c.R1)(D)?"paramValue":void 0,disabled:!(0,c.R1)(D)},{default:(0,v.k6)(()=>[(0,v.bF)(w,{modelValue:(0,c.R1)(T).paramValue,"onUpdate:modelValue":l[10]||(l[10]=e=>(0,c.R1)(T).paramValue=e),size:"default",clearable:"",placeholder:"",multiple:(0,c.R1)(T).filterType===(0,c.R1)(R.CriteriaFilterType).IN||(0,c.R1)(T).filterType===(0,c.R1)(R.CriteriaFilterType).NOT_IN},{default:(0,v.k6)(()=>[((0,v.uX)(!0),(0,v.CE)(v.FK,null,(0,v.pI)((0,c.R1)(L),e=>((0,v.uX)(),(0,v.Wv)(_,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","multiple"])]),_:1},8,["prop","disabled"])):(0,v.Q3)("",!0),(0,c.R1)(T).filterValueType===(0,c.R1)(R.FilterValueKind).COLUMN_DATA?((0,v.uX)(),(0,v.Wv)(h,{key:5,label:"参数值",prop:(0,c.R1)(D)?"paramValue":void 0,disabled:!(0,c.R1)(D)},{default:(0,v.k6)(()=>[(0,v.bF)(w,{modelValue:(0,c.R1)(T).paramValue,"onUpdate:modelValue":l[11]||(l[11]=e=>(0,c.R1)(T).paramValue=e),size:"default",clearable:"",placeholder:"",multiple:(0,c.R1)(T).filterType===(0,c.R1)(R.CriteriaFilterType).IN||(0,c.R1)(T).filterType===(0,c.R1)(R.CriteriaFilterType).NOT_IN},{default:(0,v.k6)(()=>[((0,v.uX)(!0),(0,v.CE)(v.FK,null,(0,v.pI)(((0,c.R1)(E)||{}).columnDataList,e=>((0,v.uX)(),(0,v.Wv)(_,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","multiple"])]),_:1},8,["prop","disabled"])):(0,v.Q3)("",!0),(0,c.R1)(T).filterValueType===(0,c.R1)(R.FilterValueKind).PRINT_INPUT_PARAM?((0,v.uX)(),(0,v.Wv)(h,{key:6,label:"过滤值",prop:(0,c.R1)(D)?"paramValue":void 0},{default:(0,v.k6)(()=>[(0,v.bF)(w,{modelValue:(0,c.R1)(T).paramValue,"onUpdate:modelValue":l[12]||(l[12]=e=>(0,c.R1)(T).paramValue=e),size:"default",clearable:"",placeholder:"",disabled:!(0,c.R1)(D)},{default:(0,v.k6)(()=>[((0,v.uX)(!0),(0,v.CE)(v.FK,null,(0,v.pI)((0,c.R1)(S).formParamList,e=>((0,v.uX)(),(0,v.Wv)(_,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1},8,["prop"])):(0,v.Q3)("",!0),(0,c.R1)(T).filterValueType===(0,c.R1)(R.FilterValueKind).INNER_VARIABLE?((0,v.uX)(),(0,v.Wv)(h,{key:7,label:"过滤值",prop:(0,c.R1)(D)?"paramValue":void 0},{default:(0,v.k6)(()=>[(0,v.bF)(w,{modelValue:(0,c.R1)(T).paramValue,"onUpdate:modelValue":l[13]||(l[13]=e=>(0,c.R1)(T).paramValue=e),size:"default",clearable:"",placeholder:"",disabled:!(0,c.R1)(D)},{default:(0,v.k6)(()=>[((0,v.uX)(!0),(0,v.CE)(v.FK,null,(0,v.pI)((0,c.R1)(R.CustomDateValueType).getList(),e=>((0,v.uX)(),(0,v.Wv)(_,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1},8,["prop"])):(0,v.Q3)("",!0),(0,c.R1)(T).filterValueType===(0,c.R1)(R.FilterValueKind).INPUT_DATA?((0,v.uX)(),(0,v.Wv)(h,{key:8,label:"过滤值",prop:(0,c.R1)(D)?"paramValue":void 0},{default:(0,v.k6)(()=>[null!=(0,c.R1)(E)&&-1!==["Integer","Long","Double","BigDecimal"].indexOf((0,c.R1)(E).fieldType)?((0,v.uX)(),(0,v.Wv)(F,{key:0,modelValue:(0,c.R1)(T).paramValue,"onUpdate:modelValue":l[14]||(l[14]=e=>(0,c.R1)(T).paramValue=e),"controls-position":"right",size:"default",placeholder:"",disabled:!(0,c.R1)(D)},null,8,["modelValue","disabled"])):null!=(0,c.R1)(E)&&"Boolean"===(0,c.R1)(E).fieldType?((0,v.uX)(),(0,v.Wv)(k,{key:1,modelValue:(0,c.R1)(T).paramValue,"onUpdate:modelValue":l[15]||(l[15]=e=>(0,c.R1)(T).paramValue=e),size:"default",disabled:!(0,c.R1)(D)},null,8,["modelValue","disabled"])):null!=(0,c.R1)(E)&&"Date"===(0,c.R1)(E).fieldType?((0,v.uX)(),(0,v.Wv)(P,{key:2,modelValue:(0,c.R1)(T).paramValue,"onUpdate:modelValue":l[16]||(l[16]=e=>(0,c.R1)(T).paramValue=e),type:"datetime",size:"default",format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss",disabled:!(0,c.R1)(D)},null,8,["modelValue","disabled"])):((0,v.uX)(),(0,v.Wv)(M,{key:3,disabled:!(0,c.R1)(D),modelValue:(0,c.R1)(T).paramValue,"onUpdate:modelValue":l[17]||(l[17]=e=>(0,c.R1)(T).paramValue=e),size:"default",placeholder:"",clearable:""},null,8,["disabled","modelValue"]))]),_:1},8,["prop"])):(0,v.Q3)("",!0),(0,v.bF)(g,{type:"flex",justify:"end",class:"dialog-btn-layer menu-box",style:{"margin-top":"15px"}},{default:(0,v.k6)(()=>[(0,v.bF)(G,{size:(0,c.R1)(W),plain:!0,onClick:K},{default:(0,v.k6)(()=>l[20]||(l[20]=[(0,v.eW)(" 取消 ")])),_:1,__:[20]},8,["size"]),(0,v.bF)(G,{type:"primary",size:(0,c.R1)(W),onClick:z},{default:(0,v.k6)(()=>l[21]||(l[21]=[(0,v.eW)(" 确定 ")])),_:1,__:[21]},8,["size"])]),_:1})]),_:1},8,["model","size"])}}});const F=w;var W=F},19875:function(e,l,a){a.r(l),a.d(l,{default:function(){return V}});var t=a(25136),u=(a(97042),a(69957),a(21929)),o=(a(98421),a(14022)),i=(a(72343),a(76408)),d=(a(87535),a(32465),a(18888)),n=(a(3172),a(85415)),r=(a(22243),a(7409),a(65451)),s=(a(63390),a(12687)),m=(a(31112),a(18111),a(61701),a(56768)),p=a(90144),v=a(45130),c=a(24232),b=a(27007),f=a(92380),g=a(71066),y=a(82572),h=(0,m.pM)({__name:"editWidgetCategoryColumn",props:{rowData:{},columnList:{},dataset:{},supportColumnWidth:{type:Boolean,default:!1},defaultFormItemSize:{},dialog:{},thirdParamsString:{},dialogKey:{}},setup(e){const l=(0,y.l5)(),a=e,{thirdParams:h,onCloseThirdDialog:R}=(0,g.P)(a),V=(0,m.EW)(()=>l.defaultFormItemSize),k=(0,p.KR)(),_=(0,p.KR)({id:void 0,columnId:void 0,showName:void 0,columnWidth:void 0}),C={columnId:[{required:!0,message:"请选择数据集字段！",trigger:"blur"}],showName:[{required:!0,message:"显示名称不能为空！",trigger:"blur"}]},w=(0,m.EW)(()=>I.value.dataset.datasetType===f.DatasetType.API),F=(0,m.EW)(()=>{let e=I.value.columnList.map(e=>({...e}));return(0,b.BN)(e,"columnId")}),W=(0,m.EW)(()=>null==_.value.columnId||""===_.value.columnId?[]:(0,b.Zi)(F.value,_.value.columnId,"columnId")),I=(0,m.EW)(()=>({rowData:a.rowData||h.value.rowData,dataset:a.dataset||h.value.dataset||{},supportColumnWidth:h.value.supportColumnWidth?h.value.supportColumnWidth:a.supportColumnWidth,columnList:(a.columnList||h.value.columnList||[]).map(e=>({...e,children:void 0}))})),T=()=>{a.dialog?a.dialog.cancel():R(!1)},L=()=>{k.value.validate(e=>{e&&(a.dialog?a.dialog.submit(_.value):R(!0,I.value.rowData,_.value))})},x=e=>{_.value.columnId=Array.isArray(e)?e[e.length-1]:void 0},S=e=>{let l=(0,b.PH)(I.value.columnList,e,"columnId");_.value.showName=l?l.columnName:void 0};return(0,m.sV)(()=>{null!=I.value.rowData&&(_.value={...I.value.rowData})}),(e,l)=>{const a=s.u,b=r.S2,f=n.P9,g=n.AV,y=d._m,h=u.xE,R=i.uD,D=o.WK,E=u.US,A=t.S2;return(0,m.uX)(),(0,m.Wv)(b,{class:"form-edit-widget-categroy-column third-party-dlg"},{default:(0,m.k6)(()=>[(0,m.bF)(E,{ref_key:"formEditWidgetCategroyColumn",ref:k,model:(0,p.R1)(_),class:"full-width-input form-box",rules:C,style:{width:"100%"},"label-width":"100px",size:(0,p.R1)(V),"label-position":"right",onSubmit:l[4]||(l[4]=(0,v.D$)(()=>{},["prevent"]))},{default:(0,m.k6)(()=>[(0,m.bF)(b,{gutter:20},{default:(0,m.k6)(()=>[(0,m.bF)(R,{span:24},{default:(0,m.k6)(()=>[(0,m.bF)(h,{label:"数据集字段",prop:"columnId"},{default:(0,m.k6)(()=>[(0,p.R1)(w)?((0,m.uX)(),(0,m.Wv)(y,{key:1,options:(0,p.R1)(F),placeholder:"",clearable:"",modelValue:(0,p.R1)(W),"onUpdate:modelValue":[l[1]||(l[1]=e=>(0,p.i9)(W)?W.value=e:null),x],disabled:null!=(0,p.R1)(I).rowData,props:{label:"columnName",value:"columnId"},onChange:S},{default:(0,m.k6)(({data:e})=>[(0,m.bF)(b,{type:"flex",justify:"space-between",align:"middle"},{default:(0,m.k6)(()=>[(0,m.Lk)("span",null,(0,c.v_)(e.columnName),1),"Object"!==e.fieldType&&"Array"!==e.fieldType?((0,m.uX)(),(0,m.Wv)(a,{key:0,size:"default",type:e.dimension?"success":"info"},{default:(0,m.k6)(()=>[(0,m.eW)((0,c.v_)(e.dimension?"维度字段":"指标字段"),1)]),_:2},1032,["type"])):(0,m.Q3)("",!0)]),_:2},1024)]),_:1},8,["options","modelValue","disabled"])):((0,m.uX)(),(0,m.Wv)(g,{key:0,modelValue:(0,p.R1)(_).columnId,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,p.R1)(_).columnId=e),placeholder:"",clearable:"",disabled:null!=(0,p.R1)(I).rowData,onChange:S},{default:(0,m.k6)(()=>[((0,m.uX)(!0),(0,m.CE)(m.FK,null,(0,m.pI)((0,p.R1)(I).columnList,e=>((0,m.uX)(),(0,m.Wv)(f,{key:e.columnId,label:e.columnName,value:e.columnId,disabled:e.disabled},{default:(0,m.k6)(()=>[(0,m.bF)(b,{type:"flex",justify:"space-between",align:"middle"},{default:(0,m.k6)(()=>[(0,m.Lk)("span",null,(0,c.v_)(e.columnName),1),(0,m.bF)(a,{size:"default",type:e.dimension?"success":"info"},{default:(0,m.k6)(()=>[(0,m.eW)((0,c.v_)(e.dimension?"维度字段":"指标字段"),1)]),_:2},1032,["type"])]),_:2},1024)]),_:2},1032,["label","value","disabled"]))),128))]),_:1},8,["modelValue","disabled"]))]),_:1})]),_:1}),(0,m.bF)(R,{span:24},{default:(0,m.k6)(()=>[(0,m.bF)(h,{label:"显示名称",prop:"showName"},{default:(0,m.k6)(()=>[(0,m.bF)(D,{modelValue:(0,p.R1)(_).showName,"onUpdate:modelValue":l[2]||(l[2]=e=>(0,p.R1)(_).showName=e),placeholder:"",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),(0,p.R1)(I).supportColumnWidth?((0,m.uX)(),(0,m.Wv)(R,{key:0,span:24},{default:(0,m.k6)(()=>[(0,m.bF)(h,{label:"字段最小宽度"},{default:(0,m.k6)(()=>[(0,m.bF)(D,{modelValue:(0,p.R1)(_).columnWidth,"onUpdate:modelValue":l[3]||(l[3]=e=>(0,p.R1)(_).columnWidth=e),placeholder:"最小列宽度，会自动将剩余空间按比例分配",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})):(0,m.Q3)("",!0)]),_:1})]),_:1},8,["model","size"]),(0,m.bF)(b,{class:"no-scroll menu-box",type:"flex",justify:"end"},{default:(0,m.k6)(()=>[(0,m.bF)(A,{size:(0,p.R1)(V),plain:!0,onClick:T},{default:(0,m.k6)(()=>l[5]||(l[5]=[(0,m.eW)(" 取消 ")])),_:1,__:[5]},8,["size"]),(0,m.bF)(A,{type:"primary",size:(0,p.R1)(V),onClick:L},{default:(0,m.k6)(()=>l[6]||(l[6]=[(0,m.eW)(" 保存 ")])),_:1,__:[6]},8,["size"])]),_:1})]),_:1})}}});const R=h;var V=R},20753:function(e,l,a){a.r(l),a.d(l,{default:function(){return h}});var t=a(25136),u=(a(97042),a(69957),a(21929)),o=(a(98421),a(76408)),i=(a(87535),a(32465),a(18888)),d=(a(3172),a(85415)),n=(a(22243),a(7409),a(65451)),r=(a(63390),a(44114),a(18111),a(20116),a(7588),a(61701),a(56768)),s=a(90144),m=a(45130),p=a(24232),v=a(27007),c=a(92380),b=a(71066),f=a(82572),g=(0,r.pM)({__name:"editColumnBind",props:{rowData:{},dataset:{},supportColumnWidth:{type:Boolean,default:!1},columnList:{},dialog:{},thirdParamsString:{},dialogKey:{}},setup(e){const l=(0,f.l5)(),a=e,g=(0,r.EW)(()=>l.defaultFormItemSize),{thirdParams:y,onCloseThirdDialog:h}=(0,b.P)(a),R=(0,s.KR)(),V=(0,s.KR)({columnId:void 0,columnName:void 0}),k={columnId:[{required:!0,message:"字段名称不能为空",trigger:"blur"}]},_=(0,r.EW)(()=>F.value.dataset.datasetType===c.DatasetType.API),C=(0,r.EW)(()=>{let e=F.value.columnList.map(e=>({...e}));return(0,v.BN)(e,"columnId")}),w=(0,r.EW)(()=>null==V.value.columnId||""===V.value.columnId?[]:(0,v.Zi)(C.value,V.value.columnId,"columnId")),F=(0,r.EW)(()=>({rowData:a.rowData||y.value.rowData,dataset:a.dataset||y.value.dataset||{},supportColumnWidth:y.value&&null!=y.value.supportColumnWidth?y.value.supportColumnWidth:a.supportColumnWidth,columnList:(a.columnList||y.value.columnList||[]).map(e=>({...e,children:void 0}))})),W=()=>{a.dialog?a.dialog.cancel():h(!1)},I=()=>{R.value.validate(e=>{e&&(a.dialog?a.dialog.submit(V.value):h(!1,F.value.rowData,V.value))})},T=e=>{V.value.columnId=Array.isArray(e)?e[e.length-1]:void 0},L=e=>{const l=Array.isArray(e)?e[e.length-1]:e;let a=(0,v.PH)(F.value.columnList,l,"columnId"),t=[];if(Array.isArray(e))e.forEach((e,l)=>{if(l>0){let l=F.value.columnList.find(l=>l.columnId===e);l&&t.push(l)}});else{let l=F.value.columnList.find(l=>l.columnId===e);l&&t.push(l)}t&&(V.value={...a,columnName:t.map(e=>e.columnName),showName:t[t.length-1].columnComment})};return(0,r.sV)(()=>{F.value.rowData&&(V.value={...F.value.rowData})}),(e,l)=>{const a=n.S2,v=d.P9,c=d.AV,b=i._m,f=u.xE,y=o.uD,h=u.US,x=t.S2;return(0,r.uX)(),(0,r.Wv)(a,{class:"form-edit-widget-categroy-column third-party-dlg"},{default:(0,r.k6)(()=>[(0,r.bF)(h,{ref_key:"formEditWidgetCategroyColumn",ref:R,model:(0,s.R1)(V),class:"full-width-input form-box",rules:k,style:{width:"100%"},"label-width":"80px",size:(0,s.R1)(g),"label-position":"right",onSubmit:l[2]||(l[2]=(0,m.D$)(()=>{},["prevent"]))},{default:(0,r.k6)(()=>[(0,r.bF)(a,{gutter:20},{default:(0,r.k6)(()=>[(0,r.bF)(y,{span:24},{default:(0,r.k6)(()=>[(0,r.bF)(f,{label:"字段名称",prop:"columnId"},{default:(0,r.k6)(()=>[(0,s.R1)(_)?((0,r.uX)(),(0,r.Wv)(b,{key:1,options:(0,s.R1)(C),placeholder:"",clearable:"",modelValue:(0,s.R1)(w),"onUpdate:modelValue":[l[1]||(l[1]=e=>(0,s.i9)(w)?w.value=e:null),T],props:{label:"columnName",value:"columnId"},onChange:L},{default:(0,r.k6)(({data:e})=>[(0,r.bF)(a,{type:"flex",justify:"space-between",align:"middle"},{default:(0,r.k6)(()=>[(0,r.Lk)("span",null,(0,p.v_)(e.columnName),1)]),_:2},1024)]),_:1},8,["options","modelValue"])):((0,r.uX)(),(0,r.Wv)(c,{key:0,modelValue:(0,s.R1)(V).columnId,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,s.R1)(V).columnId=e),placeholder:"",clearable:"",onChange:L},{default:(0,r.k6)(()=>[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)((0,s.R1)(F).columnList,e=>((0,r.uX)(),(0,r.Wv)(v,{key:e.columnId,label:e.columnName,value:e.columnId,disabled:e.disabled},{default:(0,r.k6)(()=>[(0,r.bF)(a,{type:"flex",justify:"space-between",align:"middle"},{default:(0,r.k6)(()=>[(0,r.Lk)("span",null,(0,p.v_)(e.columnName),1)]),_:2},1024)]),_:2},1032,["label","value","disabled"]))),128))]),_:1},8,["modelValue"]))]),_:1})]),_:1})]),_:1})]),_:1},8,["model","size"]),(0,r.bF)(a,{class:"no-scroll menu-box",type:"flex",justify:"end"},{default:(0,r.k6)(()=>[(0,r.bF)(x,{size:(0,s.R1)(g),plain:!0,onClick:W},{default:(0,r.k6)(()=>l[3]||(l[3]=[(0,r.eW)(" 取消 ")])),_:1,__:[3]},8,["size"]),(0,r.bF)(x,{type:"primary",size:(0,s.R1)(g),onClick:I},{default:(0,r.k6)(()=>l[4]||(l[4]=[(0,r.eW)(" 保存 ")])),_:1,__:[4]},8,["size"])]),_:1})]),_:1})}}});const y=g;var h=y},21310:function(e,l,a){a.d(l,{A:function(){return p}});var t=a(21929),u=(a(97042),a(98421),a(17851)),o=(a(68489),a(20709),a(15836)),i=(a(95815),a(32465),a(65546)),d=(a(51216),a(56768)),n=a(90144),r=a(45130),s=(0,d.pM)({__name:"index",props:{fieldName:{default:"rowGroupSetting"}},setup(e){const l=e,a=(0,d.WQ)("formConfig",()=>(console.error("PivotTableGroupSetting: formConfig not injected"),{})),s=(0,d.EW)(()=>a().currentWidget),m=(0,d.EW)(()=>{let e=(s.value||{}).props;return e?e[l.fieldName]:{}});return(e,l)=>{const a=i.rF,s=t.xE,p=o.B8,v=u.Zh,c=u.MQ,b=t.US;return(0,n.R1)(m)?((0,d.uX)(),(0,d.Wv)(b,{key:0,"label-position":"top",size:"default",style:{padding:"10px 16px 0"},onSubmit:l[5]||(l[5]=(0,r.D$)(()=>{},["prevent"]))},{default:(0,d.k6)(()=>[(0,d.bF)(s,{class:"view-attribute-item",label:"背景色"},{default:(0,d.k6)(()=>[(0,d.bF)(a,{modelValue:(0,n.R1)(m).backgroundColor,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,n.R1)(m).backgroundColor=e)},null,8,["modelValue"])]),_:1}),(0,d.bF)(s,{class:"view-attribute-item",label:"字体颜色"},{default:(0,d.k6)(()=>[(0,d.bF)(a,{modelValue:(0,n.R1)(m).fontColor,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,n.R1)(m).fontColor=e)},null,8,["modelValue"])]),_:1}),(0,d.bF)(s,{class:"view-attribute-item",label:"字体大小"},{default:(0,d.k6)(()=>[(0,d.bF)(p,{style:{width:"95%","margin-left":"5px"},modelValue:(0,n.R1)(m).fontSize,"onUpdate:modelValue":l[2]||(l[2]=e=>(0,n.R1)(m).fontSize=e),min:10,max:40,size:"default"},null,8,["modelValue"])]),_:1}),null!=(0,n.R1)(m).headerRowHeight?((0,d.uX)(),(0,d.Wv)(s,{key:0,class:"view-attribute-item",label:"行高"},{default:(0,d.k6)(()=>[(0,d.bF)(p,{style:{width:"95%","margin-left":"5px"},modelValue:(0,n.R1)(m).headerRowHeight,"onUpdate:modelValue":l[3]||(l[3]=e=>(0,n.R1)(m).headerRowHeight=e),min:10,max:100,size:"default"},null,8,["modelValue"])]),_:1})):(0,d.Q3)("",!0),(0,d.bF)(s,{class:"view-attribute-item",label:"对齐方式"},{default:(0,d.k6)(()=>[(0,d.bF)(c,{modelValue:(0,n.R1)(m).align,"onUpdate:modelValue":l[4]||(l[4]=e=>(0,n.R1)(m).align=e)},{default:(0,d.k6)(()=>[(0,d.bF)(v,{value:"left"},{default:(0,d.k6)(()=>l[6]||(l[6]=[(0,d.eW)("居左")])),_:1,__:[6]}),(0,d.bF)(v,{value:"center"},{default:(0,d.k6)(()=>l[7]||(l[7]=[(0,d.eW)("居中")])),_:1,__:[7]}),(0,d.bF)(v,{value:"right"},{default:(0,d.k6)(()=>l[8]||(l[8]=[(0,d.eW)("居右")])),_:1,__:[8]})]),_:1},8,["modelValue"])]),_:1})]),_:1})):(0,d.Q3)("",!0)}}});const m=s;var p=m},36570:function(e,l,a){a.r(l),a.d(l,{default:function(){return _}});var t=a(25136),u=(a(97042),a(69957),a(21929)),o=(a(98421),a(3740)),i=(a(42899),a(77649)),d=(a(87603),a(85415)),n=(a(22243),a(7409),a(65451)),r=(a(63390),a(12687)),s=(a(31112),a(14022)),m=(a(72343),a(76408)),p=(a(87535),a(32465),a(17851)),v=(a(68489),a(20709),a(18111),a(22489),a(56768)),c=a(90144),b=a(45130),f=a(24232),g=a(27007),y=a(71066),h=a(82572);const R={class:"form-single-fragment third-party-dlg"};var V=(0,v.pM)({__name:"editOnlineTableColumn",props:{rowData:{},tableList:{},usedColumnList:{},dialog:{},thirdParamsString:{},dialogKey:{}},setup(e){const l=(0,h.l5)(),a=e,V=(0,v.EW)(()=>l.defaultFormItemSize||k.value.defaultFormItemSize?.value),{thirdParams:k,onCloseThirdDialog:_}=(0,y.P)(a),C=(0,c.KR)(),w=(0,c.KR)({columnId:void 0,tableId:void 0,showName:void 0,sortable:!1,columnWidth:void 0,fieldType:0,customFieldName:void 0}),F=(0,c.KR)(),W={showName:[{required:!0,message:"表格列名不能为空",trigger:"blur"}],tableId:[{required:!0,message:"表格列绑定数据表不能为空",trigger:"blur"}],columnId:[{required:!0,message:"表格列绑定字段不能为空",trigger:"blur"}],customFieldName:[{required:!0,message:"自定义字段名不能为空",trigger:"blur"}]},I=(0,v.EW)(()=>({rowData:a.rowData||k.value.rowData,tableList:a.tableList||k.value.tableList||[],usedColumnList:a.usedColumnList||k.value.usedColumnList||[]})),T=(0,v.EW)(()=>(0,g.PH)(I.value.tableList,w.value.tableId,"tableId")),L=(0,v.EW)(()=>null!=T.value?T.value.columnList.filter(e=>-1===I.value.usedColumnList.indexOf(e.columnId)||F.value===e.columnId):[]),x=()=>{a.dialog?a.dialog.cancel():_(!1)},S=()=>{C.value.validate(e=>{e&&(w.value.table=T.value,w.value.relationId=null==(T.value||{}).relationType?void 0:T.value?.id,a.dialog?a.dialog?.submit(w.value):_(!0,I.value.rowData,w.value))})},D=()=>{w.value.columnId=void 0},E=()=>{w.value.column=(0,g.PH)(L.value,w.value.columnId,"columnId"),w.value.showName=w.value.column?w.value.column.columnComment:void 0},A=()=>{w.value.customFieldName=void 0,w.value.tableId=void 0,w.value.columnId=void 0,w.value.sortable=!1,C.value&&C.value.clearValidate()};return(0,v.sV)(()=>{null!=I.value.rowData&&(w.value={...w.value,...I.value.rowData},F.value=w.value.columnId)}),(e,l)=>{const a=p.Zh,g=p.MQ,y=u.xE,h=m.uD,k=s.WK,_=r.u,F=n.S2,T=d.P9,N=d.AV,U=i.lq,P=o.qi,X=u.US,K=t.S2;return(0,v.uX)(),(0,v.CE)("div",R,[(0,v.bF)(X,{ref_key:"form",ref:C,model:(0,c.R1)(w),class:"full-width-input form-box",rules:W,style:{width:"100%"},"label-width":"100px",size:(0,c.R1)(V),"label-position":"right",onSubmit:l[7]||(l[7]=(0,b.D$)(()=>{},["prevent"]))},{default:(0,v.k6)(()=>[(0,v.bF)(F,null,{default:(0,v.k6)(()=>[(0,v.bF)(h,{span:24},{default:(0,v.k6)(()=>[(0,v.bF)(y,{label:"绑定类型"},{default:(0,v.k6)(()=>[(0,v.bF)(g,{modelValue:(0,c.R1)(w).fieldType,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,c.R1)(w).fieldType=e),disabled:null!=(0,c.R1)(I).rowData,onChange:A},{default:(0,v.k6)(()=>[(0,v.bF)(a,{value:0},{default:(0,v.k6)(()=>l[8]||(l[8]=[(0,v.eW)("表字段")])),_:1,__:[8]}),(0,v.bF)(a,{value:1},{default:(0,v.k6)(()=>l[9]||(l[9]=[(0,v.eW)("自定义")])),_:1,__:[9]})]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1}),1===(0,c.R1)(w).fieldType?((0,v.uX)(),(0,v.Wv)(h,{key:0,span:24},{default:(0,v.k6)(()=>[(0,v.bF)(y,{label:"字段名",prop:"customFieldName"},{default:(0,v.k6)(()=>[(0,v.bF)(k,{modelValue:(0,c.R1)(w).customFieldName,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,c.R1)(w).customFieldName=e),clearable:""},null,8,["modelValue"])]),_:1})]),_:1})):(0,v.Q3)("",!0),0===(0,c.R1)(w).fieldType?((0,v.uX)(),(0,v.Wv)(h,{key:1,span:24},{default:(0,v.k6)(()=>[(0,v.bF)(y,{label:"字段数据表",prop:"tableId"},{default:(0,v.k6)(()=>[(0,v.bF)(N,{class:"input-item",modelValue:(0,c.R1)(w).tableId,"onUpdate:modelValue":l[2]||(l[2]=e=>(0,c.R1)(w).tableId=e),disabled:null!=(0,c.R1)(I).rowData,clearable:!0,placeholder:"字段数据表",onChange:D},{default:(0,v.k6)(()=>[((0,v.uX)(!0),(0,v.CE)(v.FK,null,(0,v.pI)((0,c.R1)(I).tableList,(e,l)=>((0,v.uX)(),(0,v.Wv)(T,{key:e.tableId,label:e.tableName,value:e.tableId},{default:(0,v.k6)(()=>[(0,v.bF)(F,{type:"flex",justify:"space-between",align:"middle"},{default:(0,v.k6)(()=>[(0,v.Lk)("span",null,(0,f.v_)(e.tableName),1),(0,v.bF)(_,{type:null==e.relationType?"success":"primary",style:{"margin-left":"30px"},size:(0,c.R1)(V),effect:"dark"},{default:(0,v.k6)(()=>[(0,v.eW)((0,f.v_)(null==e.relationType||0===l?"主表":"一对一关联"),1)]),_:2},1032,["type","size"])]),_:2},1024)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1})):(0,v.Q3)("",!0),0===(0,c.R1)(w).fieldType?((0,v.uX)(),(0,v.Wv)(h,{key:2,span:24},{default:(0,v.k6)(()=>[(0,v.bF)(y,{label:"绑定列字段",prop:"columnId"},{default:(0,v.k6)(()=>[(0,v.bF)(N,{class:"input-item",modelValue:(0,c.R1)(w).columnId,"onUpdate:modelValue":l[3]||(l[3]=e=>(0,c.R1)(w).columnId=e),disabled:null!=(0,c.R1)(I).rowData,clearable:!0,placeholder:"字段数据表",onChange:E},{default:(0,v.k6)(()=>[((0,v.uX)(!0),(0,v.CE)(v.FK,null,(0,v.pI)((0,c.R1)(L),e=>((0,v.uX)(),(0,v.Wv)(T,{key:e.columnId,label:e.columnName,value:e.columnId},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1})):(0,v.Q3)("",!0),(0,v.bF)(h,{span:24},{default:(0,v.k6)(()=>[(0,v.bF)(y,{label:"表格列名",prop:"showName"},{default:(0,v.k6)(()=>[(0,v.bF)(k,{class:"input-item",modelValue:(0,c.R1)(w).showName,"onUpdate:modelValue":l[4]||(l[4]=e=>(0,c.R1)(w).showName=e),clearable:!0,placeholder:"表格列名"},null,8,["modelValue"])]),_:1})]),_:1}),(0,v.bF)(h,{span:24},{default:(0,v.k6)(()=>[(0,v.bF)(y,{label:"表格列宽"},{default:(0,v.k6)(()=>[(0,v.bF)(U,{class:"input-item",modelValue:(0,c.R1)(w).columnWidth,"onUpdate:modelValue":l[5]||(l[5]=e=>(0,c.R1)(w).columnWidth=e),placeholder:"表格列宽"},null,8,["modelValue"])]),_:1})]),_:1}),(0,v.bF)(h,{span:24},{default:(0,v.k6)(()=>[(0,v.bF)(y,{label:"支持排序"},{default:(0,v.k6)(()=>[(0,v.bF)(P,{modelValue:(0,c.R1)(w).sortable,"onUpdate:modelValue":l[6]||(l[6]=e=>(0,c.R1)(w).sortable=e),disabled:1==(0,c.R1)(w).fieldType},null,8,["modelValue","disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","size"]),(0,v.bF)(F,{class:"no-scroll menu-box",type:"flex",justify:"end"},{default:(0,v.k6)(()=>[(0,v.bF)(K,{size:(0,c.R1)(V),plain:!0,onClick:x},{default:(0,v.k6)(()=>l[10]||(l[10]=[(0,v.eW)(" 取消 ")])),_:1,__:[10]},8,["size"]),(0,v.bF)(K,{type:"primary",size:(0,c.R1)(V),onClick:S},{default:(0,v.k6)(()=>l[11]||(l[11]=[(0,v.eW)(" 保存 ")])),_:1,__:[11]},8,["size"])]),_:1})])}}});const k=V;var _=k},39204:function(e,l,a){a.d(l,{A:function(){return p}});var t=a(21929),u=(a(97042),a(98421),a(17851)),o=(a(68489),a(20709),a(85415)),i=(a(22243),a(7409),a(32465),a(3740)),d=(a(42899),a(56768)),n=a(90144),r=a(45130),s=(0,d.pM)({__name:"index",props:{fieldName:{default:"pagerSetting"}},setup(e){const l=e,a=(0,d.WQ)("formConfig",()=>(console.error("PivotTableTotalSetting: formConfig not injected"),{})),s=(0,d.EW)(()=>a().currentWidget),m=(0,d.EW)(()=>{let e=(s.value||{}).props;return e?e[l.fieldName]:{}});return(e,l)=>{const a=i.qi,s=t.xE,p=o.P9,v=o.AV,c=u.Zh,b=u.MQ,f=t.US;return(0,n.R1)(m)?((0,d.uX)(),(0,d.Wv)(f,{key:0,"label-position":"top",size:"default",style:{padding:"10px 16px 0"},onSubmit:l[4]||(l[4]=(0,r.D$)(()=>{},["prevent"]))},{default:(0,d.k6)(()=>[(0,d.bF)(s,{class:"view-attribute-item",label:"是否显示"},{default:(0,d.k6)(()=>[(0,d.bF)(a,{modelValue:(0,n.R1)(m).show,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,n.R1)(m).show=e)},null,8,["modelValue"])]),_:1}),(0,d.bF)(s,{class:"view-attribute-item",label:"尺寸"},{default:(0,d.k6)(()=>[(0,d.bF)(v,{modelValue:(0,n.R1)(m).size,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,n.R1)(m).size=e),placeholder:""},{default:(0,d.k6)(()=>[(0,d.bF)(p,{label:"默认",value:"default"}),(0,d.bF)(p,{label:"小",value:"small"})]),_:1},8,["modelValue"])]),_:1}),(0,d.bF)(s,{class:"view-attribute-item",label:"样式"},{default:(0,d.k6)(()=>[(0,d.bF)(v,{modelValue:(0,n.R1)(m).background,"onUpdate:modelValue":l[2]||(l[2]=e=>(0,n.R1)(m).background=e),placeholder:""},{default:(0,d.k6)(()=>[(0,d.bF)(p,{label:"按钮",value:"1"}),(0,d.bF)(p,{label:"文字",value:"0"})]),_:1},8,["modelValue"])]),_:1}),(0,d.bF)(s,{class:"view-attribute-item",label:"对齐方式"},{default:(0,d.k6)(()=>[(0,d.bF)(b,{modelValue:(0,n.R1)(m).align,"onUpdate:modelValue":l[3]||(l[3]=e=>(0,n.R1)(m).align=e)},{default:(0,d.k6)(()=>[(0,d.bF)(c,{value:"left"},{default:(0,d.k6)(()=>l[5]||(l[5]=[(0,d.eW)("居左")])),_:1,__:[5]}),(0,d.bF)(c,{value:"center"},{default:(0,d.k6)(()=>l[6]||(l[6]=[(0,d.eW)("居中")])),_:1,__:[6]}),(0,d.bF)(c,{value:"right"},{default:(0,d.k6)(()=>l[7]||(l[7]=[(0,d.eW)("居右")])),_:1,__:[7]})]),_:1},8,["modelValue"])]),_:1})]),_:1})):(0,d.Q3)("",!0)}}});const m=s;var p=m},41405:function(e,l,a){a.d(l,{A:function(){return p}});a(44114),a(18111),a(22489),a(61701);var t=a(56768),u=a(90144),o=a(164),i=a(21231),d=a(83430),n=a(31372),r=a(52279),s=(0,t.pM)({__name:"index",setup(e){const l=(0,t.WQ)("formConfig",()=>(console.error("editWidgetAttribute: formConfig not injected"),{})),a=(e,a)=>{null==e?(a=p(a),l().currentWidget.childWidgetList.push(a)):l().currentWidget.childWidgetList=l().currentWidget.childWidgetList.map(l=>l.variableName===e.variableName?a:l)},s=(e=null)=>{n.l.show(e?"编辑标签页":"添加标签页",r["default"],{area:"600px"},{rowData:e,tabPanelList:(l().currentWidget.childWidgetList||[]).filter(l=>null==e||l.variableName!==e.variableName).map(e=>e.variableName),path:"thirdEditOnlineTabPanel"},{width:"600px",height:"500px",pathName:"/thirdParty/thirdEditOnlineTabPanel"}).then(l=>{a(e,l)}).catch(e=>{console.log(e)})},m=e=>{o.s.confirm("是否删除此标签页？","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{l().currentWidget.childWidgetList=l().currentWidget.childWidgetList.filter(l=>l.variableName!==e.variableName)}).catch(e=>{console.warn(e)})},p=e=>{let a=l().getWidgetObject(d.A);return a.showName=e.showName,a.variableName=e.variableName,a.relation=void 0,a.datasource=void 0,a.column=void 0,a};return(e,a)=>((0,t.uX)(),(0,t.Wv)(i.A,{data:((0,u.R1)(l)().currentWidget||{}).childWidgetList,addText:"添加标签页",onAdd:a[0]||(a[0]=e=>s()),onEdit:s,onDelete:m,prop:{label:"showName",value:"variableName"}},null,8,["data"]))}});const m=s;var p=m},42029:function(e,l,a){a.d(l,{A:function(){return m}});var t=a(21929),u=(a(97042),a(98421),a(14022)),o=(a(72343),a(32465),a(3740)),i=(a(42899),a(56768)),d=a(90144),n=a(45130),r=(0,i.pM)({__name:"index",props:{fieldName:{default:"rowTotalSetting"}},setup(e){const l=e,a=(0,i.WQ)("formConfig",()=>(console.error("PivotTableTotalSetting: formConfig not injected"),{})),r=(0,i.EW)(()=>a().currentWidget),s=(0,i.EW)(()=>{let e=(r.value||{}).props;return e?e[l.fieldName]:{}});return(e,l)=>{const a=o.qi,r=t.xE,m=u.WK,p=t.US;return(0,d.R1)(s)?((0,i.uX)(),(0,i.Wv)(p,{key:0,"label-position":"top",size:"default",style:{padding:"10px 16px 0"},onSubmit:l[2]||(l[2]=(0,n.D$)(()=>{},["prevent"]))},{default:(0,i.k6)(()=>[(0,i.bF)(r,{class:"view-attribute-item",label:"是否显示"},{default:(0,i.k6)(()=>[(0,i.bF)(a,{modelValue:(0,d.R1)(s).show,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,d.R1)(s).show=e)},null,8,["modelValue"])]),_:1}),(0,i.bF)(r,{class:"view-attribute-item",label:"别名"},{default:(0,i.k6)(()=>[(0,i.bF)(m,{modelValue:(0,d.R1)(s).showName,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,d.R1)(s).showName=e),disabled:!(0,d.R1)(s).show},null,8,["modelValue","disabled"])]),_:1})]),_:1})):(0,i.Q3)("",!0)}}});const s=r;var m=s},42487:function(e,l,a){a.r(l),a.d(l,{default:function(){return T}});var t=a(76408),u=(a(97042),a(87535),a(68368)),o=(a(81208),a(18888)),i=(a(3172),a(85415)),d=(a(22243),a(7409),a(17851)),n=(a(68489),a(62436),a(47001),a(21929)),r=(a(98421),a(25136)),s=(a(69957),a(3740)),m=(a(42899),a(32465),a(14022)),p=(a(72343),a(44114),a(18111),a(22489),a(61701),a(56768)),v=a(90144),c=a(45130),b=a(24232),f=a(61473),g=a(164),y=a(26695),h=a(27007),R=a(71066),V=a(82572);const k={class:"form-edit-report-operation third-party-dlg",style:{position:"relative"}},_={class:"form-box"},C={key:0},w={key:0},F={key:0};var W=(0,p.pM)({__name:"editRouteOperation",props:{rowData:{},activeMode:{},operationItem:{},isTreeColumn:{type:Boolean},columnList:{},dialog:{},thirdParamsString:{},dialogKey:{}},setup(e){const l=(0,V.l5)(),a=e,{thirdParams:W,onCloseThirdDialog:I}=(0,R.P)(a),T=(0,p.EW)(()=>l.defaultFormItemSize||W.value.defaultFormItemSize?.value),L=(0,v.KR)(),x=(0,v.KR)({routeName:void 0,enabled:!1,routeParams:[]}),S=(0,v.KR)(),D={routeName:[{required:!0,message:"路由名称不能为空",trigger:"blur"}]},E=(0,p.EW)(()=>(x.value.routeParams||[]).filter(e=>e.isEdit).length>0),A=(0,p.EW)(()=>({rowData:a.rowData||W.value.rowData,activeMode:a.activeMode||W.value.activeMode,columnList:a.columnList||W.value.columnList||[],isTreeColumn:a.isTreeColumn||W.value.isTreeColumn})),N=(0,p.EW)(()=>a.isTreeColumn?(0,h.BN)(A.value.columnList,"columnId"):A.value.columnList),U=()=>{x.value.routeParams.push({id:(new Date).getTime(),paramName:void 0,valueType:"fixed",paramValue:void 0,isNew:!0,isEdit:!0})},P=e=>{S.value={...e},e.isEdit=!0},X=e=>{g.s.confirm("是否删除此参数？","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{x.value.routeParams=x.value.routeParams.filter(l=>l!==e)}).catch(e=>{console.warn(e)})},K=e=>{e.isNew?x.value.routeParams=x.value.routeParams.filter(l=>l!==e):x.value.routeParams=x.value.routeParams.map(l=>l===e?S.value:l)},z=e=>{null!=e.paramName&&""!==e.paramName?null!=e.paramValue&&""!==e.paramValue?(e.isEdit=!1,e.isNew=!1,x.value.routeParams=[...x.value.routeParams]):y.nk.error("参数值不能为空！"):y.nk.error("参数名不能为空！")},Q=e=>(0,h.Zi)(N.value,e,"columnId"),B=(e,l)=>{e.paramValue=Array.isArray(l)?l[l.length-1]:void 0},O=e=>{e.paramValue=void 0},M=e=>{if("bind"!==e.valueType)return e.paramValue;{let l=(0,h.I_)(N.value,e.paramValue,"columnId");if(Array.isArray(l)&&l.length>0)return l.map(e=>e.columnName).join(" / ")}},G=e=>"fixed"===e?"固定值":"绑定字段",j=()=>{L.value.validate(e=>{if(!e)return;const l={...x.value,routeParams:x.value.routeParams.map(e=>({...e,isEdit:void 0,isNew:void 0}))};a.dialog?a.dialog.submit(l):I(!1,A.value.rowData,l)})};return(0,p.sV)(()=>{A.value.rowData&&(x.value={...A.value.rowData,routeParams:(A.value.rowData.routeParams||[]).map(e=>({...e,isEdit:!1,isNew:!1}))})}),(e,l)=>{const a=m.WK,g=n.xE,y=s.qi,h=r.S2,R=n.US,V=u.o8,W=d.ll,I=d.MQ,A=i.P9,q=i.AV,H=o._m,$=u.Up,J=t.uD;return(0,p.uX)(),(0,p.CE)("div",k,[(0,p.Lk)("div",_,[(0,p.bF)(R,{ref_key:"form",ref:L,model:(0,v.R1)(x),class:"full-width-input",rules:D,style:{width:"100%"},"label-width":"80px",inline:!0,size:(0,v.R1)(T),"label-position":"left",onSubmit:l[4]||(l[4]=(0,c.D$)(()=>{},["prevent"]))},{default:(0,p.k6)(()=>[(0,p.bF)(g,{label:"路由名称",prop:"routeName"},{default:(0,p.k6)(()=>[(0,p.bF)(a,{modelValue:(0,v.R1)(x).routeName,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,v.R1)(x).routeName=e),clearable:""},null,8,["modelValue"])]),_:1}),(0,p.bF)(g,{label:"是否启用"},{default:(0,p.k6)(()=>[(0,p.bF)(y,{modelValue:(0,v.R1)(x).enabled,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,v.R1)(x).enabled=e)},null,8,["modelValue"])]),_:1}),(0,p.bF)(g,{style:{float:"right","text-align":"right"}},{default:(0,p.k6)(()=>[(0,p.bF)(h,{type:"success",disabled:(0,v.R1)(E),onClick:l[2]||(l[2]=e=>U())},{default:(0,p.k6)(()=>l[5]||(l[5]=[(0,p.eW)(" 添加参数 ")])),_:1,__:[5]},8,["disabled"]),(0,p.bF)(h,{type:"primary",disabled:(0,v.R1)(E),onClick:l[3]||(l[3]=e=>j())},{default:(0,p.k6)(()=>l[6]||(l[6]=[(0,p.eW)(" 保存 ")])),_:1,__:[6]},8,["disabled"])]),_:1})]),_:1},8,["model","size"]),(0,p.bF)(J,{span:24,style:{"margin-bottom":"18px"}},{default:(0,p.k6)(()=>[(0,p.bF)($,{data:(0,v.R1)(x).routeParams,size:"default",border:"",height:"400px","header-cell-class-name":"table-header-gray"},{empty:(0,p.k6)(()=>l[13]||(l[13]=[(0,p.Lk)("div",{class:"table-empty unified-font"},[(0,p.Lk)("img",{src:f}),(0,p.Lk)("span",null,"暂无数据")],-1)])),default:(0,p.k6)(()=>[(0,p.bF)(V,{label:"参数名",prop:"paramName",width:"200px"},{default:(0,p.k6)(e=>[e.row.isEdit?((0,p.uX)(),(0,p.Wv)(a,{key:1,class:"table-input",size:"default",modelValue:e.row.paramName,"onUpdate:modelValue":l=>e.row.paramName=l},null,8,["modelValue","onUpdate:modelValue"])):((0,p.uX)(),(0,p.CE)("span",C,(0,b.v_)(e.row.paramName),1))]),_:1}),(0,p.bF)(V,{label:"参数值类型",prop:"valueType",width:"300px"},{default:(0,p.k6)(e=>[e.row.isEdit?((0,p.uX)(),(0,p.Wv)(I,{key:1,modelValue:e.row.valueType,"onUpdate:modelValue":l=>e.row.valueType=l,size:"default",onChange:l=>O(e.row)},{default:(0,p.k6)(()=>[(0,p.bF)(W,{value:"fixed"},{default:(0,p.k6)(()=>l[7]||(l[7]=[(0,p.eW)("固定值")])),_:1,__:[7]}),(0,p.bF)(W,{value:"bind"},{default:(0,p.k6)(()=>l[8]||(l[8]=[(0,p.eW)("字段绑定")])),_:1,__:[8]})]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])):((0,p.uX)(),(0,p.CE)("span",w,(0,b.v_)(G(e.row.valueType)),1))]),_:1}),(0,p.bF)(V,{label:"参数值"},{default:(0,p.k6)(l=>[l.row.isEdit?((0,p.uX)(),(0,p.CE)(p.FK,{key:1},["fixed"===l.row.valueType?((0,p.uX)(),(0,p.Wv)(a,{key:0,modelValue:l.row.paramValue,"onUpdate:modelValue":e=>l.row.paramValue=e,size:"default"},null,8,["modelValue","onUpdate:modelValue"])):"bind"===l.row.valueType?((0,p.uX)(),(0,p.CE)(p.FK,{key:1},[e.isTreeColumn?((0,p.uX)(),(0,p.Wv)(H,{key:1,size:"default",placeholder:"",clearable:"",options:e.columnList,value:Q(l.row.paramValue),onInput:e=>B(l.row,e),props:{label:"columnName",value:"columnId"}},null,8,["options","value","onInput"])):((0,p.uX)(),(0,p.Wv)(q,{key:0,size:"default",clearable:"",placeholder:"",modelValue:l.row.paramValue,"onUpdate:modelValue":e=>l.row.paramValue=e},{default:(0,p.k6)(()=>[((0,p.uX)(!0),(0,p.CE)(p.FK,null,(0,p.pI)((0,v.R1)(N),e=>((0,p.uX)(),(0,p.Wv)(A,{key:e.columnId,label:e.columnName,value:e.columnId},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"]))],64)):(0,p.Q3)("",!0)],64)):((0,p.uX)(),(0,p.CE)("span",F,(0,b.v_)(M(l.row)),1))]),_:1}),(0,p.bF)(V,{label:"操作",width:"110px",align:"center"},{default:(0,p.k6)(e=>[e.row.isEdit?(0,p.Q3)("",!0):((0,p.uX)(),(0,p.Wv)(h,{key:0,link:"",disabled:((0,v.R1)(S)||{}).id===e.row.id,onClick:l=>P(e.row)},{default:(0,p.k6)(()=>l[9]||(l[9]=[(0,p.eW)(" 编辑 ")])),_:2,__:[9]},1032,["disabled","onClick"])),e.row.isEdit?(0,p.Q3)("",!0):((0,p.uX)(),(0,p.Wv)(h,{key:1,link:"",disabled:((0,v.R1)(S)||{}).id===e.row.id,onClick:l=>X(e.row)},{default:(0,p.k6)(()=>l[10]||(l[10]=[(0,p.eW)(" 删除 ")])),_:2,__:[10]},1032,["disabled","onClick"])),e.row.isEdit?((0,p.uX)(),(0,p.Wv)(h,{key:2,link:"",onClick:l=>z(e.row)},{default:(0,p.k6)(()=>l[11]||(l[11]=[(0,p.eW)(" 保存 ")])),_:2,__:[11]},1032,["onClick"])):(0,p.Q3)("",!0),e.row.isEdit?((0,p.uX)(),(0,p.Wv)(h,{key:3,link:"",onClick:l=>K(e.row)},{default:(0,p.k6)(()=>l[12]||(l[12]=[(0,p.eW)(" 取消 ")])),_:2,__:[12]},1032,["onClick"])):(0,p.Q3)("",!0)]),_:1})]),_:1},8,["data"])]),_:1})])])}}});const I=W;var T=I},48680:function(e,l,a){a.r(l),a.d(l,{default:function(){return F}});var t=a(65451),u=(a(97042),a(63390),a(25136)),o=(a(69957),a(76408)),i=(a(87535),a(14022)),d=(a(72343),a(21929)),n=(a(98421),a(3740)),r=(a(42899),a(85415)),s=(a(22243),a(7409),a(32465),a(18888)),m=(a(3172),a(18111),a(22489),a(61701),a(18237),a(56768)),p=a(90144),v=a(45130),c=a(61473),b=a(99540),f=a(27007),g=a(34894),y=a(92380),h=a(21016),R=a(71066),V=a(82572);const k={class:"form-edit-report-operation third-party-dlg",style:{position:"relative"}},_={class:"form-box"};var C=(0,m.pM)({__name:"editReportOperation",props:{rowData:{},activeMode:{},groupList:{default:()=>[]},formParamList:{default:()=>[]},reportDictList:{default:()=>[]},widgetList:{default:()=>[]},widgetDrillColumnList:{},dialog:{},thirdParamsString:{},dialogKey:{}},setup(e){const l=(0,V.l5)(),a=e,{thirdParams:C,onCloseThirdDialog:w}=(0,R.P)(a),F=(0,m.EW)(()=>l.defaultFormItemSize||C.value.defaultFormItemSize?.value),W=(0,p.KR)(),I=(0,p.KR)({id:void 0,name:void 0,type:void 0,groupId:void 0,pageId:void 0,enabled:!1}),T={pageId:[{required:!0,message:"请选择下钻页面！",trigger:"change"}]},L=(0,p.KR)(null),x=(0,p.KR)([]),S=(0,p.KR)([]),D=(0,m.EW)(()=>({rowData:a.rowData||C.value.rowData,activeMode:a.activeMode||C.value.activeMode||"",groupList:a.groupList||C.value.groupList,formParamList:a.formParamList||C.value.formParamList,reportDictList:a.reportDictList||C.value.reportDictList,widgetList:a.widgetList||C.value.widgetList,widgetDrillColumnList:a.widgetDrillColumnList||C.value.widgetDrillColumnList})),E=(0,m.EW)(()=>(0,f.PH)(x.value,I.value.pageId,"pageId")),A=(0,m.EW)(()=>[y.FilterValueKind.FORM_PARAM,y.FilterValueKind.WIDGET_DATA,y.FilterValueKind.DRILL_DATA,y.FilterValueKind.DICT_DATA,y.FilterValueKind.INNER_VARIABLE,y.FilterValueKind.INPUT_DATA]),N=(0,m.EW)(()=>D.value.reportDictList.map(e=>({...e,dictDataList:e.dictDataList}))),U=()=>{a.dialog?a.dialog.cancel():w(!1)},P=()=>{W.value.validate(e=>{if(!e)return;const l={...I.value,groupId:Array.isArray(I.value.groupId)?I.value.groupId[I.value.groupId.length-1]:void 0,pageId:I.value.pageId,pageName:E.value?.pageName,filterList:S.value.map(e=>({...e,paramDictDataList:void 0}))};a.dialog?a.dialog.submit(l):w(!0,D.value.rowData,l)})},X=e=>{let l={pageId:e.pageId,pageName:e.pageName,pageCode:e.pageCode,groupId:e.groupId,pageJson:e.pageJson,formInfo:e.pageJson?JSON.parse(e.pageJson):{}};return l.formInfo=Object.keys(l.formInfo).reduce((e,a)=>{let t=l.formInfo[a];return e[a]={pageId:l.pageId,pageName:l.pageName,pageCode:l.pageCode,gutter:t.gutter||20,labelWidth:t.labelWidth||100,labelPosition:t.labelPosition||"left",customFieldList:t.customFieldList||[],filterItemWidth:t.filterItemWidth||350,widgetList:t.widgetList||[],paramList:t.paramList||[]},e},{}),l},K=()=>{x.value=[],null!=I.value.groupId&&""!==I.value.groupId&&g.aS.list({reportPageDtoFilter:{groupId:Array.isArray(I.value.groupId)?I.value.groupId[I.value.groupId.length-1]:void 0}}).then(e=>{x.value=(e.data.dataList||[]).map(e=>X(e))}).catch(e=>{console.warn(e)})},z=()=>{I.value.pageId=void 0,K()},Q=e=>{e.paramDictId=void 0,e.innerVeriable=void 0,e.paramValue=void 0,e.paramDictDataList=[]},B=e=>{for(let l=0;l<N.value.length;l++)if(e.paramDictId===N.value[l].id)return N.value[l];return null},O=e=>(0,f.PH)(D.value.widgetList,e.formWidgetId,"widgetId"),M=e=>{G(e,B(e)),e.paramValue=void 0},G=(e,l)=>{null==l||Array.isArray(l.dictDataList)?e.paramDictDataList=(l||{}).dictDataList:g.vO.listDictData({dictId:l.id}).then(a=>{e.paramDictDataList=a.data,l.dictDataList=a.data}).catch(e=>{console.warn(e)})};return(0,m.wB)(()=>E.value,()=>{if(null==E.value)S.value=[];else{let e=[];g.aS.view({pageId:E.value.pageId}).then(l=>{null!=E.value?(E.value.formInfo=l.data.pageJson?JSON.parse(l.data.pageJson):{},E.value.formInfo[D.value.activeMode]&&Array.isArray(E.value.formInfo[D.value.activeMode].paramList)&&(e=E.value.formInfo[D.value.activeMode].paramList),S.value=e.map(e=>{if(null!=e.variableName&&""!==e.variableName){let l=null;null!=L.value&&(l=(0,f.PH)(L.value,e.variableName,"paramName"));let a={paramName:e.variableName,filterValueType:l?l.filterValueType:y.FilterValueKind.INPUT_DATA,paramDictId:l?l.paramDictId:void 0,formWidgetId:l?l.formWidgetId:void 0,formWidgetColumn:l?l.formWidgetColumn:void 0,paramValue:l?l.paramValue:void 0,paramDictDataList:[]};return G(a,B(a)),a}return null}).filter(e=>null!=e),L.value=null):console.error("currentPage is null")}).catch(e=>{console.warn(e)})}}),(0,m.sV)(()=>{if(null!=D.value.rowData){let e=(0,f.Zi)(D.value.groupList,D.value.rowData.groupId,"groupId");I.value={id:D.value.rowData.id||(new Date).getTime(),name:D.value.rowData.name||h.SysCustomWidgetOperationType.getValue(D.value.rowData.type),type:D.value.rowData.type,groupId:e,pageId:D.value.rowData.pageId,enabled:D.value.rowData.enabled,builtin:D.value.rowData.builtin},L.value=D.value.rowData.filterList,K()}}),(e,l)=>{const a=s._m,f=d.xE,g=r.P9,h=r.AV,R=n.qi,V=d.US,C=i.WK,w=o.uD,L=u.S2,E=t.S2;return(0,m.uX)(),(0,m.CE)("div",k,[(0,m.Lk)("div",_,[(0,m.bF)(V,{ref_key:"form",ref:W,model:(0,p.R1)(I),class:"full-width-input",rules:T,style:{width:"100%"},"label-width":"80px",inline:!0,size:(0,p.R1)(F),onSubmit:l[3]||(l[3]=(0,v.D$)(()=>{},["prevent"]))},{default:(0,m.k6)(()=>[(0,m.bF)(f,{label:"所属分组"},{default:(0,m.k6)(()=>[(0,m.bF)(a,{modelValue:(0,p.R1)(I).groupId,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,p.R1)(I).groupId=e),options:(0,p.R1)(D).groupList,props:{label:"groupName",value:"groupId"},onChange:z},null,8,["modelValue","options"])]),_:1}),(0,m.bF)(f,{label:"下钻页面",prop:"pageId"},{default:(0,m.k6)(()=>[(0,m.bF)(h,{modelValue:(0,p.R1)(I).pageId,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,p.R1)(I).pageId=e),clearable:"",placeholder:"",style:{width:"250px"}},{default:(0,m.k6)(()=>[((0,m.uX)(!0),(0,m.CE)(m.FK,null,(0,m.pI)((0,p.R1)(x),e=>((0,m.uX)(),(0,m.Wv)(g,{key:e.pageId,label:e.pageName,value:e.pageId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),(0,m.bF)(f,{label:"是否启用"},{default:(0,m.k6)(()=>[(0,m.bF)(R,{modelValue:(0,p.R1)(I).enabled,"onUpdate:modelValue":l[2]||(l[2]=e=>(0,p.R1)(I).enabled=e)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","size"]),(0,m.bF)(w,{span:24,style:{"margin-bottom":"18px"}},{default:(0,m.k6)(()=>[(0,m.bF)((0,p.R1)(b.CP),{data:(0,p.R1)(S),size:(0,p.R1)(F),"header-cell-class-name":"table-header-gray",height:"400px","row-config":{isHover:!0}},{empty:(0,m.k6)(()=>l[4]||(l[4]=[(0,m.Lk)("div",{class:"table-empty unified-font"},[(0,m.Lk)("img",{src:c}),(0,m.Lk)("span",null,"暂无数据")],-1)])),default:(0,m.k6)(()=>[(0,m.bF)((0,p.R1)(b.Wq),{title:"参数名",field:"paramName",width:"150px"}),(0,m.bF)((0,p.R1)(b.Wq),{title:"参数值类型",field:"filterValueType",width:"150px"},{default:(0,m.k6)(e=>[(0,m.bF)(h,{modelValue:e.row.filterValueType,"onUpdate:modelValue":l=>e.row.filterValueType=l,size:"default",placeholder:"",onChange:l=>Q(e.row)},{default:(0,m.k6)(()=>[((0,m.uX)(!0),(0,m.CE)(m.FK,null,(0,m.pI)((0,p.R1)(A),e=>((0,m.uX)(),(0,m.Wv)(g,{key:e,label:(0,p.R1)(y.FilterValueKind).getValue(e),value:e},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),(0,m.bF)((0,p.R1)(b.Wq),{title:"参数值",field:"paramValue"},{default:(0,m.k6)(e=>[e.row.filterValueType===(0,p.R1)(y.FilterValueKind).FORM_PARAM?((0,m.uX)(),(0,m.Wv)(h,{key:0,style:{width:"200px"},modelValue:e.row.paramValue,"onUpdate:modelValue":l=>e.row.paramValue=l,size:"default",clearable:"",placeholder:""},{default:(0,m.k6)(()=>[((0,m.uX)(!0),(0,m.CE)(m.FK,null,(0,m.pI)((0,p.R1)(D).formParamList,e=>((0,m.uX)(),(0,m.Wv)(g,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):(0,m.Q3)("",!0),e.row.filterValueType===(0,p.R1)(y.FilterValueKind).WIDGET_DATA?((0,m.uX)(),(0,m.Wv)(h,{style:{width:"200px"},modelValue:e.row.formWidgetId,"onUpdate:modelValue":l=>e.row.formWidgetId=l,key:"formWidgetId",size:"default",clearable:"",placeholder:"",onChange:l=>e.row.formWidgetColumn=void 0},{default:(0,m.k6)(()=>[((0,m.uX)(!0),(0,m.CE)(m.FK,null,(0,m.pI)((0,p.R1)(D).widgetList,e=>((0,m.uX)(),(0,m.Wv)(g,{key:e.id,label:e.showName,value:e.id},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])):(0,m.Q3)("",!0),e.row.filterValueType===(0,p.R1)(y.FilterValueKind).WIDGET_DATA&&Array.isArray((O(e.row)||{}).children)&&(O(e.row)||{children:[]}).children.length>0?((0,m.uX)(),(0,m.Wv)(h,{modelValue:e.row.formWidgetColumn,"onUpdate:modelValue":l=>e.row.formWidgetColumn=l,key:"formWidgetColumn",style:{width:"200px","margin-left":"15px"},size:"default",clearable:"",placeholder:""},{default:(0,m.k6)(()=>[((0,m.uX)(!0),(0,m.CE)(m.FK,null,(0,m.pI)((O(e.row)||{}).children,e=>((0,m.uX)(),(0,m.Wv)(g,{key:e.id,label:e.showName,value:e.id},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):(0,m.Q3)("",!0),e.row.filterValueType===(0,p.R1)(y.FilterValueKind).DICT_DATA?((0,m.uX)(),(0,m.Wv)(h,{key:3,style:{width:"200px"},placeholder:"请选择参数值字典",modelValue:e.row.paramDictId,"onUpdate:modelValue":l=>e.row.paramDictId=l,size:"default",clearable:"",onChange:l=>M(e.row)},{default:(0,m.k6)(()=>[((0,m.uX)(!0),(0,m.CE)(m.FK,null,(0,m.pI)((0,p.R1)(N),e=>((0,m.uX)(),(0,m.Wv)(g,{key:e.id,label:e.name,value:e.id,disabled:e.disabled},null,8,["label","value","disabled"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])):(0,m.Q3)("",!0),e.row.filterValueType===(0,p.R1)(y.FilterValueKind).DICT_DATA?((0,m.uX)(),(0,m.Wv)(h,{key:4,style:{width:"200px","margin-left":"15px"},modelValue:e.row.paramValue,"onUpdate:modelValue":l=>e.row.paramValue=l,size:"default",clearable:"",placeholder:"请选择参数值"},{default:(0,m.k6)(()=>[((0,m.uX)(!0),(0,m.CE)(m.FK,null,(0,m.pI)(e.row.paramDictDataList,e=>((0,m.uX)(),(0,m.Wv)(g,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):(0,m.Q3)("",!0),e.row.filterValueType===(0,p.R1)(y.FilterValueKind).INNER_VARIABLE?((0,m.uX)(),(0,m.Wv)(h,{key:5,style:{width:"200px"},modelValue:e.row.paramValue,"onUpdate:modelValue":l=>e.row.paramValue=l,size:"default",clearable:"",placeholder:""},{default:(0,m.k6)(()=>[((0,m.uX)(!0),(0,m.CE)(m.FK,null,(0,m.pI)((0,p.R1)(y.CustomDateValueType).getList(),e=>((0,m.uX)(),(0,m.Wv)(g,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):(0,m.Q3)("",!0),e.row.filterValueType===(0,p.R1)(y.FilterValueKind).INPUT_DATA?((0,m.uX)(),(0,m.Wv)(C,{key:6,style:{width:"200px"},modelValue:e.row.paramValue,"onUpdate:modelValue":l=>e.row.paramValue=l,size:"default",placeholder:""},null,8,["modelValue","onUpdate:modelValue"])):(0,m.Q3)("",!0),e.row.filterValueType===(0,p.R1)(y.FilterValueKind).DRILL_DATA?((0,m.uX)(),(0,m.Wv)(h,{key:(0,p.R1)(y.FilterValueKind).DRILL_DATA,style:{width:"200px"},modelValue:e.row.paramValue,"onUpdate:modelValue":l=>e.row.paramValue=l,size:"default",placeholder:""},{default:(0,m.k6)(()=>[((0,m.uX)(!0),(0,m.CE)(m.FK,null,(0,m.pI)((0,p.R1)(D).widgetDrillColumnList,e=>((0,m.uX)(),(0,m.Wv)(g,{key:e.columnId,label:e.showName,value:e.columnId},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):(0,m.Q3)("",!0)]),_:1})]),_:1},8,["data","size"])]),_:1})]),(0,m.bF)(E,{class:"no-scroll menu-box",type:"flex",justify:"end"},{default:(0,m.k6)(()=>[(0,m.bF)(L,{size:(0,p.R1)(F),plain:!0,onClick:U},{default:(0,m.k6)(()=>l[5]||(l[5]=[(0,m.eW)(" 取消 ")])),_:1,__:[5]},8,["size"]),(0,m.bF)(L,{type:"primary",size:(0,p.R1)(F),onClick:P},{default:(0,m.k6)(()=>l[6]||(l[6]=[(0,m.eW)(" 保存 ")])),_:1,__:[6]},8,["size"])]),_:1})])}}});const w=C;var F=w},50380:function(e,l,a){a.r(l),a.d(l,{default:function(){return V}});var t=a(25136),u=(a(97042),a(69957),a(21929)),o=(a(98421),a(65451)),i=(a(63390),a(14022)),d=(a(72343),a(18888)),n=(a(3172),a(76408)),r=(a(87535),a(32465),a(85415)),s=(a(22243),a(7409),a(18111),a(22489),a(61701),a(56768)),m=a(90144),p=a(45130),v=a(26695),c=a(78430),b=a(36525),f=a(71066),g=a(82572);const y={class:"form-single-fragment third-party-dlg",style:{position:"relative"}};var h=(0,s.pM)({__name:"editDictParamValue",props:{rowData:{},paramList:{},columnList:{},dialog:{},thirdParamsString:{},dialogKey:{}},setup(e){const l=(0,g.l5)(),a={...c.A},h=e,R=(0,s.EW)(()=>l.defaultFormItemSize||V.value.defaultFormItemSize?.value),{thirdParams:V,onCloseThirdDialog:k}=(0,f.P)(h),_=(0,m.KR)(),C=(0,m.KR)({dictParamName:void 0,dictValue:void 0,dictValueType:void 0}),w={label:"name",value:"id"},F=(0,m.KR)([]),W={dictParamName:[{required:!0,message:"请选择参数",trigger:"blur"}],dictValueType:[{required:!0,message:"请选择参数值类型",trigger:"blur"}],dictValue:[{required:!0,message:"请选择参数值",trigger:"blur"}]},I=(0,s.EW)(()=>({rowData:h.rowData||V.value.rowData,paramList:h.paramList||V.value.paramList,columnList:h.columnList||V.value.columnList})),T=()=>{h.dialog?h.dialog.cancel():k(!1)},L=()=>{_.value.validate(e=>{e&&(C.value.dictValueType!==b.SysOnlineParamValueType.STATIC_DICT||2===C.value.dictValue.length?h.dialog?h.dialog.submit(C.value):k(!0,I.value.rowData,C.value):v.nk.error("静态字典类型的参数值必须选择静态字典的值！"))})},x=()=>{C.value.dictValue=void 0,_.value.clearValidate()},S=()=>{const e=a;F.value=Object.keys(e).map(l=>{if("DictionaryBase"===l)return;let a=e[l];return{id:l,name:a.showName,children:a.getList()}}).filter(e=>!!e)};return(0,s.sV)(()=>{C.value={...C.value,...I.value.rowData},S()}),(e,l)=>{const a=r.P9,v=r.AV,c=u.xE,f=n.uD,g=d._m,h=i.WK,V=o.S2,k=u.US,S=t.S2;return(0,s.uX)(),(0,s.CE)("div",y,[(0,s.bF)(k,{ref_key:"form",ref:_,model:(0,m.R1)(C),class:"full-width-input form-box",rules:W,"label-width":"100px",size:(0,m.R1)(R),"label-position":"right",onSubmit:l[5]||(l[5]=(0,p.D$)(()=>{},["prevent"]))},{default:(0,s.k6)(()=>[(0,s.bF)(V,null,{default:(0,s.k6)(()=>[(0,s.bF)(f,{span:24},{default:(0,s.k6)(()=>[(0,s.bF)(c,{label:"参数名称",prop:"dictParamName"},{default:(0,s.k6)(()=>[(0,s.bF)(v,{modelValue:(0,m.R1)(C).dictParamName,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,m.R1)(C).dictParamName=e),placeholder:"",disabled:null!=e.rowData},{default:(0,s.k6)(()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,m.R1)(I).paramList,e=>((0,s.uX)(),(0,s.Wv)(a,{key:e.dictParamName,label:e.dictParamName,value:e.dictParamName},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1}),(0,s.bF)(f,{span:24},{default:(0,s.k6)(()=>[(0,s.bF)(c,{label:"参数值类型",prop:"dictValueType"},{default:(0,s.k6)(()=>[(0,s.bF)(v,{class:"input-item",modelValue:(0,m.R1)(C).dictValueType,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,m.R1)(C).dictValueType=e),clearable:!0,placeholder:"参数值类型",onChange:x},{default:(0,s.k6)(()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,m.R1)(b.SysOnlineParamValueType).getList(),e=>((0,s.uX)(),(0,s.Wv)(a,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),(0,m.R1)(C).dictValueType===(0,m.R1)(b.SysOnlineParamValueType).TABLE_COLUMN?((0,s.uX)(),(0,s.Wv)(f,{key:0,span:24},{default:(0,s.k6)(()=>[(0,s.bF)(c,{label:"参数值",prop:"dictValue"},{default:(0,s.k6)(()=>[(0,s.bF)(v,{class:"input-item",modelValue:(0,m.R1)(C).dictValue,"onUpdate:modelValue":l[2]||(l[2]=e=>(0,m.R1)(C).dictValue=e),key:"TABLE_COLUMN",clearable:!0,placeholder:"参数值"},{default:(0,s.k6)(()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,m.R1)(I).columnList,e=>((0,s.uX)(),(0,s.Wv)(a,{key:e.columnId,label:e.objectFieldName,value:e.columnId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})):(0,s.Q3)("",!0),(0,m.R1)(C).dictValueType===(0,m.R1)(b.SysOnlineParamValueType).STATIC_DICT?((0,s.uX)(),(0,s.Wv)(f,{key:1,span:24},{default:(0,s.k6)(()=>[(0,s.bF)(c,{label:"参数值",prop:"dictValue"},{default:(0,s.k6)(()=>[(0,s.bF)(g,{modelValue:(0,m.R1)(C).dictValue,"onUpdate:modelValue":l[3]||(l[3]=e=>(0,m.R1)(C).dictValue=e),options:(0,m.R1)(F),props:w},null,8,["modelValue","options"])]),_:1})]),_:1})):(0,s.Q3)("",!0),(0,m.R1)(C).dictValueType===(0,m.R1)(b.SysOnlineParamValueType).INPUT_VALUE?((0,s.uX)(),(0,s.Wv)(f,{key:2,span:24},{default:(0,s.k6)(()=>[(0,s.bF)(c,{label:"参数值",prop:"dictValue"},{default:(0,s.k6)(()=>[(0,s.bF)(h,{modelValue:(0,m.R1)(C).dictValue,"onUpdate:modelValue":l[4]||(l[4]=e=>(0,m.R1)(C).dictValue=e),placeholder:"请输入参数值",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})):(0,s.Q3)("",!0)]),_:1})]),_:1},8,["model","size"]),(0,s.bF)(V,{class:"no-scroll menu-box",type:"flex",justify:"end",style:{"margin-top":"15px"}},{default:(0,s.k6)(()=>[(0,s.bF)(S,{size:(0,m.R1)(R),plain:!0,onClick:T},{default:(0,s.k6)(()=>l[6]||(l[6]=[(0,s.eW)(" 取消 ")])),_:1,__:[6]},8,["size"]),(0,s.bF)(S,{type:"primary",size:(0,m.R1)(R),onClick:L},{default:(0,s.k6)(()=>l[7]||(l[7]=[(0,s.eW)(" 保存 ")])),_:1,__:[7]},8,["size"])]),_:1})])}}});const R=h;var V=R},51216:function(e,l,a){a(97042),a(72343),a(69957)},52279:function(e,l,a){a.r(l),a.d(l,{default:function(){return f}});var t=a(25136),u=(a(97042),a(69957),a(21929)),o=(a(98421),a(65451)),i=(a(63390),a(76408)),d=(a(87535),a(32465),a(14022)),n=(a(72343),a(56768)),r=a(90144),s=a(45130),m=a(71066),p=a(82572);const v={class:"form-single-fragment third-party-dlg",style:{position:"relative"}};var c=(0,n.pM)({__name:"editOnlineTabPanel",props:{rowData:{},tabPanelList:{},dialog:{},thirdParamsString:{},dialogKey:{}},setup(e){const l=(0,p.l5)(),a=e,c=(0,n.EW)(()=>l.defaultFormItemSize||b.value.defaultFormItemSize?.value),{thirdParams:b,onCloseThirdDialog:f}=(0,m.P)(a),g=(0,r.KR)(),y=(0,r.KR)({showName:void 0,variableName:void 0});const h=(e,l,a)=>{Array.isArray(V.value.tabPanelList)&&-1!==V.value.tabPanelList.indexOf(l)?a(new Error("标签页标识不能重复")):a()},R={showName:[{required:!0,message:"标签页显示名不能为空",trigger:"blur"}],variableName:[{required:!0,message:"标签页标识不能为空",trigger:"blur"},{validator:h,trigger:"blur"}]},V=(0,n.EW)(()=>({rowData:a.rowData||b.value.rowData,tabPanelList:a.tabPanelList||b.value.tabPanelList})),k=()=>{a.dialog?a.dialog.cancel():f(!1)},_=()=>{g.value.validate(e=>{e&&(a.dialog?a.dialog.submit(y.value):f(!0,V.value.rowData,y.value))})};return(0,n.sV)(()=>{null!=V.value.rowData&&(y.value={...y.value,...V.value.rowData})}),(e,l)=>{const a=d.WK,m=u.xE,p=i.uD,b=o.S2,f=u.US,h=t.S2;return(0,n.uX)(),(0,n.CE)("div",v,[(0,n.bF)(f,{ref_key:"form",ref:g,model:(0,r.R1)(y),class:"full-width-input form-box",rules:R,style:{width:"100%"},"label-width":"100px",size:(0,r.R1)(c),"label-position":"right",onSubmit:l[2]||(l[2]=(0,s.D$)(()=>{},["prevent"]))},{default:(0,n.k6)(()=>[(0,n.bF)(b,null,{default:(0,n.k6)(()=>[(0,n.bF)(p,{span:24},{default:(0,n.k6)(()=>[(0,n.bF)(m,{label:"标签显示名",prop:"showName"},{default:(0,n.k6)(()=>[(0,n.bF)(a,{modelValue:(0,r.R1)(y).showName,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,r.R1)(y).showName=e),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),(0,n.bF)(p,{span:24},{default:(0,n.k6)(()=>[(0,n.bF)(m,{label:"标签标识",prop:"variableName"},{default:(0,n.k6)(()=>[(0,n.bF)(a,{modelValue:(0,r.R1)(y).variableName,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,r.R1)(y).variableName=e),clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","size"]),(0,n.bF)(b,{class:"no-scroll menu-box",type:"flex",justify:"end"},{default:(0,n.k6)(()=>[(0,n.bF)(h,{size:(0,r.R1)(c),plain:!0,onClick:k},{default:(0,n.k6)(()=>l[3]||(l[3]=[(0,n.eW)(" 取消 ")])),_:1,__:[3]},8,["size"]),(0,n.bF)(h,{type:"primary",size:(0,r.R1)(c),onClick:_},{default:(0,n.k6)(()=>l[4]||(l[4]=[(0,n.eW)(" 保存 ")])),_:1,__:[4]},8,["size"])]),_:1})])}}});const b=c;var f=b},57632:function(e,l,a){a.d(l,{A:function(){return n}});var t=a(56768),u=a(24232),o=(0,t.pM)({__name:"index",props:{value:{},backgroundColor:{default:"#F6F7F9"},textColor:{default:"#999999"}},emits:["update:value"],setup(e,{emit:l}){const a=l,o=e,i=(0,t.EW)(()=>({activeStep:o.value,backgroundColor:o.backgroundColor,textColor:o.textColor}));(0,t.Gt)("stepBarInfo",i);const d=e=>{a("update:value",e)};return(0,t.Gt)("setActiveStep",d),(e,l)=>((0,t.uX)(),(0,t.CE)("div",{class:"step-bar",style:(0,u.Tr)({background:e.backgroundColor})},[(0,t.RG)(e.$slots,"default")],4))}}),i=a(71241);const d=(0,i.A)(o,[["__scopeId","data-v-1f1ad451"]]);var n=d},57843:function(e,l,a){a.r(l),a.d(l,{default:function(){return R}});var t=a(25136),u=(a(97042),a(69957),a(21929)),o=(a(98421),a(85415)),i=(a(22243),a(7409),a(65451)),d=(a(63390),a(12687)),n=(a(31112),a(76408)),r=(a(87535),a(32465),a(17851)),s=(a(68489),a(20709),a(56768)),m=a(90144),p=a(45130),v=a(24232),c=a(27007),b=a(92380),f=a(71066),g=a(82572),y=(0,s.pM)({__name:"editWidgetOrderInfo",props:{rowData:{},columnList:{},defaultFormItemSize:{},dialog:{},thirdParamsString:{},dialogKey:{}},setup(e){const l=(0,g.l5)(),a=e,y=(0,s.EW)(()=>l.defaultFormItemSize||h.value.defaultFormItemSize?.value),{thirdParams:h,onCloseThirdDialog:R}=(0,f.P)(a),V=(0,m.KR)(),k=(0,m.KR)({id:void 0,orderColumnId:void 0,calculateType:void 0,orderType:b.OrderType.ASC}),_={id:[{required:!0,message:"请选择排序字段！",trigger:"blur"}],orderType:[{required:!0,message:"请选择排序类型！",trigger:"blur"}]},C=(0,s.EW)(()=>({rowData:a.rowData||h.value.rowData,columnList:a.columnList||h.value.columnList||[]})),w=()=>{a.dialog?a.dialog.cancel():R(!1)},F=()=>{V.value.validate(e=>{e&&(a.dialog?a.dialog.submit(k.value):R(!0,C.value.rowData,k.value))})},W=e=>{let l=(0,c.PH)(C.value.columnList,e,"id");k.value.calculateType=(l||{}).calculateType,k.value.orderColumnId=l?.columnId};return(0,s.sV)(()=>{null!=C.value.rowData?k.value={...C.value.rowData}:k.value.orderType=b.OrderType.ASC}),(e,l)=>{const a=r.Zh,c=r.MQ,f=u.xE,g=n.uD,h=d.u,R=i.S2,I=o.P9,T=o.AV,L=u.US,x=t.S2;return(0,s.uX)(),(0,s.Wv)(R,{class:"form-edit-widget-order third-party-dlg"},{default:(0,s.k6)(()=>[(0,s.bF)(L,{ref_key:"formEditWidgetOrder",ref:V,model:(0,m.R1)(k),class:"full-width-input form-box",rules:_,style:{width:"100%"},"label-width":"80px",size:(0,m.R1)(y),"label-position":"right",onSubmit:l[2]||(l[2]=(0,p.D$)(()=>{},["prevent"]))},{default:(0,s.k6)(()=>[(0,s.bF)(R,{gutter:20},{default:(0,s.k6)(()=>[(0,s.bF)(g,{span:24},{default:(0,s.k6)(()=>[(0,s.bF)(f,{label:"排序方式",prop:"orderType"},{default:(0,s.k6)(()=>[(0,s.bF)(c,{modelValue:(0,m.R1)(k).orderType,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,m.R1)(k).orderType=e)},{default:(0,s.k6)(()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,m.R1)(b.OrderType).getList(),e=>((0,s.uX)(),(0,s.Wv)(a,{key:e.id,value:e.id},{default:(0,s.k6)(()=>[(0,s.eW)((0,v.v_)(e.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),(0,s.bF)(g,{span:24},{default:(0,s.k6)(()=>[(0,s.bF)(f,{label:"排序字段",prop:"id"},{default:(0,s.k6)(()=>[(0,s.bF)(T,{modelValue:(0,m.R1)(k).id,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,m.R1)(k).id=e),placeholder:"",clearable:"",onChange:W},{default:(0,s.k6)(()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,m.R1)(C).columnList,e=>((0,s.uX)(),(0,s.Wv)(I,{key:e.id,label:e.showName,value:e.id,disabled:e.disabled},{default:(0,s.k6)(()=>[(0,s.bF)(R,{type:"flex",justify:"space-between",align:"middle"},{default:(0,s.k6)(()=>[(0,s.Lk)("span",null,(0,v.v_)(e.showName),1),void 0!==e.isIndex?((0,s.uX)(),(0,s.Wv)(h,{key:0,size:"default",type:e.isIndex?"primary":"success",style:{"margin-left":"100px"}},{default:(0,s.k6)(()=>[(0,s.eW)((0,v.v_)(e.isIndex?"值轴":"分类轴"),1)]),_:2},1032,["type"])):(0,s.Q3)("",!0)]),_:2},1024)]),_:2},1032,["label","value","disabled"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","size"]),(0,s.bF)(R,{class:"no-scroll menu-box",type:"flex",justify:"end"},{default:(0,s.k6)(()=>[(0,s.bF)(x,{size:(0,m.R1)(y),plain:!0,onClick:w},{default:(0,s.k6)(()=>l[3]||(l[3]=[(0,s.eW)(" 取消 ")])),_:1,__:[3]},8,["size"]),(0,s.bF)(x,{type:"primary",size:(0,m.R1)(y),onClick:F},{default:(0,s.k6)(()=>l[4]||(l[4]=[(0,s.eW)(" 保存 ")])),_:1,__:[4]},8,["size"])]),_:1})]),_:1})}}});const h=y;var R=h},68489:function(e,l,a){a(97042)},76105:function(e,l,a){a.d(l,{A:function(){return v}});var t=a(14022),u=(a(97042),a(72343),a(25136)),o=(a(69957),a(56768)),i=a(90144),d=a(45130),n=a(57477),r=a(31932),s=a(18384),m=(0,o.pM)({__name:"OnlineImageUrlInput",props:{value:{},size:{default:"small"},disabled:{type:Boolean,default:!1}},emits:["update:value"],setup(e,{emit:l}){const{getUploadActionUrl:a,fetchUpload:m}=(0,r.v)(),p=(0,i.KR)(),v=()=>{p.value.click()},c=e=>{const l=e.target;if(l&&l.files){console.log("files",l.files);let e=l.files[0];if(null!=e){let l=a(s.x+"/commonext/util/uploadImage");m(l,{uploadFile:e}).then(e=>{f(JSON.stringify(e))}).catch(e=>{console.warn(e)})}}},b=l,f=e=>{b("update:value",e)};return(e,l)=>{const a=u.S2,r=t.WK;return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.bF)(r,{value:e.value,size:e.size,disabled:e.disabled},{append:(0,o.k6)(()=>[(0,o.bF)(a,{icon:(0,i.R1)(n.Upload),onClick:v,disabled:e.disabled},null,8,["icon","disabled"])]),_:1},8,["value","size","disabled"]),(0,o.bo)((0,o.Lk)("input",{type:"file",ref_key:"fileSelect",ref:p,accept:"image/*",onChange:(0,d.D$)(c,["stop"])},null,544),[[d.aG,!1]])])}}});const p=m;var v=p},80434:function(e,l,a){a(97042)},84793:function(e,l,a){a.r(l),a.d(l,{default:function(){return k}});var t=a(25136),u=(a(97042),a(69957),a(21929)),o=(a(98421),a(77649)),i=(a(87603),a(14022)),d=(a(72343),a(76408)),n=(a(87535),a(32465),a(18888)),r=(a(3172),a(85415)),s=(a(22243),a(7409),a(65451)),m=(a(63390),a(18111),a(22489),a(20116),a(61701),a(56768)),p=a(90144),v=a(45130),c=a(24232),b=a(27007),f=a(92380),g=a(71066),y=a(82572);const h={key:1};var R=(0,m.pM)({__name:"editDataViewTableColumn",props:{rowData:{},columnList:{},dataset:{},supportColumnWidth:{type:Boolean,default:!1},defaultFormItemSize:{},dialog:{},thirdParamsString:{},dialogKey:{}},setup(e){const l=(0,y.l5)(),a=e,R=(0,m.EW)(()=>l.defaultFormItemSize),{thirdParams:V,onCloseThirdDialog:k}=(0,g.P)(a),_=(0,p.KR)(),C=(0,p.KR)({columnId:void 0,columnName:void 0,columnWidth:void 0}),w={columnId:[{required:!0,message:"字段名称不能为空",trigger:"blur"}],showName:[{required:!0,message:"显示名称不能为空",trigger:"blur"}]},F=(0,m.EW)(()=>T.value.dataset.datasetType===f.DatasetType.API),W=(0,m.EW)(()=>{let e=T.value.columnList.map(e=>({...e}));return(0,b.BN)(e,"columnId")}),I=(0,m.EW)(()=>null==C.value.columnId||""===C.value.columnId?[]:(0,b.Zi)(W.value,C.value.columnId,"columnId")),T=(0,m.EW)(()=>({rowData:a.rowData||V.value.rowData,dataset:a.dataset||V.value.dataset||{},supportColumnWidth:V&&null!=V.value.supportColumnWidth?V.value.supportColumnWidth:a.supportColumnWidth,columnList:(a.columnList||V.value.columnList||[]).map(e=>({...e,children:void 0}))})),L=()=>{a.dialog?a.dialog.cancel():k(!1)},x=()=>{_.value.validate(e=>{e&&(a.dialog?a.dialog.submit(C.value):k(!0,T.value.rowData,C.value))})},S=e=>{C.value.columnId=Array.isArray(e)?e[e.length-1]:void 0},D=e=>{let l=(0,b.PH)(T.value.columnList,Array.isArray(e)?e[e.length-1]:e,"columnId");if(Array.isArray(e)&&e.length>0){let l=e.map((e,l)=>{let a=null;return l>0&&(a=T.value.columnList.find(l=>l.columnId===e)),a}).filter(e=>null!=e);C.value.columnName=l.map(e=>e.columnName)}else null!=l&&(C.value.columnName=l.columnName)};return(0,m.sV)(()=>{null!=T.value.rowData&&(C.value={...T.value.rowData})}),(e,l)=>{const a=s.S2,b=r.P9,f=r.AV,g=n._m,y=u.xE,V=d.uD,k=i.WK,E=o.lq,A=u.US,N=t.S2;return(0,m.uX)(),(0,m.Wv)(a,{class:"form-edit-widget-categroy-column third-party-dlg"},{default:(0,m.k6)(()=>[(0,m.bF)(A,{ref_key:"formEditWidgetCategroyColumn",ref:_,model:(0,p.R1)(C),class:"full-width-input form-box",rules:w,style:{width:"100%"},"label-width":"80px",size:(0,p.R1)(R),"label-position":"right",onSubmit:l[3]||(l[3]=(0,v.D$)(()=>{},["prevent"]))},{default:(0,m.k6)(()=>[(0,m.bF)(a,{gutter:20},{default:(0,m.k6)(()=>[(0,m.bF)(V,{span:24},{default:(0,m.k6)(()=>[(0,m.bF)(y,{label:"字段名称",prop:"columnId"},{default:(0,m.k6)(()=>[(0,p.R1)(F)?((0,m.uX)(),(0,m.CE)("div",h,[(0,m.bF)(g,{options:(0,p.R1)(W),placeholder:"",clearable:"",modelValue:(0,p.R1)(I),"onUpdate:modelValue":S,disabled:null!=(0,p.R1)(T).rowData,props:{label:"columnName",value:"columnId"},onChange:D},{default:(0,m.k6)(({data:e})=>[(0,m.bF)(a,{type:"flex",justify:"space-between",align:"middle"},{default:(0,m.k6)(()=>[(0,m.Lk)("span",null,(0,c.v_)(e.columnName),1)]),_:2},1024)]),_:1},8,["options","modelValue","disabled"])])):((0,m.uX)(),(0,m.Wv)(f,{key:0,modelValue:(0,p.R1)(C).columnId,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,p.R1)(C).columnId=e),placeholder:"",clearable:"",disabled:null!=(0,p.R1)(T).rowData,onChange:D},{default:(0,m.k6)(()=>[((0,m.uX)(!0),(0,m.CE)(m.FK,null,(0,m.pI)((0,p.R1)(T).columnList,e=>((0,m.uX)(),(0,m.Wv)(b,{key:e.columnId,label:e.columnName,value:e.columnId,disabled:e.disabled},{default:(0,m.k6)(()=>[(0,m.bF)(a,{type:"flex",justify:"space-between",align:"middle"},{default:(0,m.k6)(()=>[(0,m.Lk)("span",null,(0,c.v_)(e.columnName),1)]),_:2},1024)]),_:2},1032,["label","value","disabled"]))),128))]),_:1},8,["modelValue","disabled"]))]),_:1})]),_:1}),(0,m.bF)(V,{span:24},{default:(0,m.k6)(()=>[(0,m.bF)(y,{label:"显示名称",prop:"showName"},{default:(0,m.k6)(()=>[(0,m.bF)(k,{modelValue:(0,p.R1)(C).showName,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,p.R1)(C).showName=e)},null,8,["modelValue"])]),_:1})]),_:1}),(0,m.bF)(V,{span:24},{default:(0,m.k6)(()=>[(0,m.bF)(y,{label:"表格列宽",prop:"columnWidth"},{default:(0,m.k6)(()=>[(0,m.bF)(E,{class:"input-item",modelValue:(0,p.R1)(C).columnWidth,"onUpdate:modelValue":l[2]||(l[2]=e=>(0,p.R1)(C).columnWidth=e),placeholder:"表格列宽"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","size"]),(0,m.bF)(a,{class:"no-scroll menu-box",type:"flex",justify:"end"},{default:(0,m.k6)(()=>[(0,m.bF)(N,{size:(0,p.R1)(R),plain:!0,onClick:L},{default:(0,m.k6)(()=>l[4]||(l[4]=[(0,m.eW)(" 取消 ")])),_:1,__:[4]},8,["size"]),(0,m.bF)(N,{type:"primary",size:(0,p.R1)(R),onClick:x},{default:(0,m.k6)(()=>l[5]||(l[5]=[(0,m.eW)(" 保存 ")])),_:1,__:[5]},8,["size"])]),_:1})]),_:1})}}});const V=R;var k=V},85285:function(e,l,a){a.d(l,{A:function(){return s}});var t=a(56768),u=a(24232),o=a(90144);const i={name:"StepBarItem"};var d=(0,t.pM)({...i,props:{name:{},icon:{}},setup(e){const l=e,a=(0,t.WQ)("stepBarInfo",(0,o.KR)({backgroundColor:"#F6F7F9",textColor:"#999999",activeStep:""})),i=(0,t.WQ)("setActiveStep",e=>e),d=()=>{i(l.name)},n=(0,t.EW)(()=>a.value.activeStep==l.name);return(e,l)=>((0,t.uX)(),(0,t.CE)("div",{class:(0,u.C4)(["step-bar-item",{active:n.value}]),style:(0,u.Tr)({background:n.value?void 0:(0,o.R1)(a).backgroundColor,color:n.value?void 0:(0,o.R1)(a).textColor}),onClick:d},[e.icon?((0,t.uX)(),(0,t.CE)("i",{key:0,class:(0,u.C4)(e.icon),style:{"margin-right":"3px"}},null,2)):(0,t.Q3)("",!0),(0,t.RG)(e.$slots,"default")],6))}}),n=a(71241);const r=(0,n.A)(d,[["__scopeId","data-v-35e87c20"]]);var s=r},85501:function(e,l,a){a.r(l),a.d(l,{default:function(){return V}});var t=a(65451),u=(a(97042),a(63390),a(25136)),o=(a(69957),a(76408)),i=(a(87535),a(88284)),d=(a(36715),a(77649)),n=(a(87603),a(14022)),r=(a(72343),a(85415)),s=(a(22243),a(7409),a(18111),a(22489),a(61701),a(56768)),m=a(90144),p=a(61473),v=a(99540),c=a(27007),b=a(92380),f=a(71066),g=a(82572);const y={class:"set-dataset-param third-party-dlg"};var h=(0,s.pM)({__name:"index",props:{datasetParamList:{},datasetFilterParams:{},formParamList:{},widgetList:{},validFilterValueType:{},dialog:{},thirdParamsString:{},dialogKey:{}},setup(e){const l=(0,g.l5)(),a=e,h=(0,s.EW)(()=>l.defaultFormItemSize),{thirdParams:R,onCloseThirdDialog:V}=(0,f.P)(a),k=(0,s.EW)(()=>({datasetParamList:a.datasetParamList||R.value.datasetParamList||[],widgetList:a.widgetList||R.value.widgetList||[],datasetFilterParams:a.datasetFilterParams||R.value.datasetFilterParams||[],formParamList:a.formParamList||R.value.formParamList||[],validFilterValueType:a.validFilterValueType||R.value.validFilterValueType||[]})),_=(0,s.EW)(()=>k.value.datasetParamList.map(e=>{let l=(0,c.PH)(k.value.datasetFilterParams,e.paramName,"paramName")||{};return{...e,filterValueType:l.filterValueType||b.FilterValueKind.INPUT_DATA,paramValue:l.paramValue,formWidgetId:l.formWidgetId}})),C=()=>{a.dialog?a.dialog.cancel():V(!1)},w=()=>{let e=_.value.filter(e=>e.filterValueType!==b.FilterValueKind.WIDGET_DATA?null!=e.paramValue:null!=e.formWidgetId);a.dialog?a.dialog.submit(e):V(!0,null,e)},F=e=>{e.paramValue=void 0,e.formWidgetId=void 0};return(e,l)=>{const a=r.P9,c=r.AV,f=n.WK,g=d.lq,R=i.MG,V=o.uD,W=u.S2,I=t.S2;return(0,s.uX)(),(0,s.CE)("div",y,[(0,s.bF)(V,{class:"form-box",span:24},{default:(0,s.k6)(()=>[(0,s.bF)((0,m.R1)(v.CP),{data:(0,m.R1)(_),size:(0,m.R1)(h),"row-config":{isHover:!0},"header-cell-class-name":"table-header-gray",height:"100%"},{empty:(0,s.k6)(()=>l[0]||(l[0]=[(0,s.Lk)("div",{class:"table-empty unified-font"},[(0,s.Lk)("img",{src:p}),(0,s.Lk)("span",null,"暂无数据")],-1)])),default:(0,s.k6)(()=>[(0,s.bF)((0,m.R1)(v.Wq),{type:"seq",width:"55px",title:"序号"}),(0,s.bF)((0,m.R1)(v.Wq),{title:"参数名称",field:"paramName",width:"200px"}),(0,s.bF)((0,m.R1)(v.Wq),{title:"参数值类型",field:"filterValueType",width:"200px"},{default:(0,s.k6)(e=>[(0,s.bF)(c,{modelValue:e.row.filterValueType,"onUpdate:modelValue":l=>e.row.filterValueType=l,placeholder:"",size:"default",onChange:l=>F(e.row)},{default:(0,s.k6)(()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,m.R1)(k).validFilterValueType,e=>((0,s.uX)(),(0,s.Wv)(a,{key:e,label:(0,m.R1)(b.FilterValueKind).getValue(e),value:e},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),(0,s.bF)((0,m.R1)(v.Wq),{title:"参数值",field:"paramValue"},{default:(0,s.k6)(e=>["String"===e.row.paramType&&e.row.filterValueType===(0,m.R1)(b.FilterValueKind).INPUT_DATA?((0,s.uX)(),(0,s.Wv)(f,{key:0,modelValue:e.row.paramValue,"onUpdate:modelValue":l=>e.row.paramValue=l,size:"default",style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue"])):(0,s.Q3)("",!0),"Number"===e.row.paramType&&e.row.filterValueType===(0,m.R1)(b.FilterValueKind).INPUT_DATA?((0,s.uX)(),(0,s.Wv)(g,{key:1,modelValue:e.row.paramValue,"onUpdate:modelValue":l=>e.row.paramValue=l,size:"default",style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue"])):(0,s.Q3)("",!0),"Date"===e.row.paramType&&e.row.filterValueType===(0,m.R1)(b.FilterValueKind).INPUT_DATA?((0,s.uX)(),(0,s.Wv)(R,{key:2,type:"datetime",modelValue:e.row.paramValue,"onUpdate:modelValue":l=>e.row.paramValue=l,size:"default",style:{width:"100%"},"value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","onUpdate:modelValue"])):(0,s.Q3)("",!0),e.row.filterValueType===(0,m.R1)(b.FilterValueKind).WIDGET_DATA?((0,s.uX)(),(0,s.Wv)(c,{modelValue:e.row.formWidgetId,"onUpdate:modelValue":l=>e.row.formWidgetId=l,key:"formWidgetId",style:{width:"100%"},size:"default",clearable:"",placeholder:""},{default:(0,s.k6)(()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,m.R1)(k).widgetList,e=>((0,s.uX)(),(0,s.Wv)(a,{key:e.widgetId,label:e.showName,value:e.widgetId},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):(0,s.Q3)("",!0),e.row.filterValueType===(0,m.R1)(b.FilterValueKind).PRINT_INPUT_PARAM||e.row.filterValueType===(0,m.R1)(b.FilterValueKind).FORM_PARAM?((0,s.uX)(),(0,s.Wv)(c,{key:4,modelValue:e.row.paramValue,"onUpdate:modelValue":l=>e.row.paramValue=l,style:{width:"100%"},size:"default",clearable:"",placeholder:""},{default:(0,s.k6)(()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,m.R1)(k).formParamList,e=>((0,s.uX)(),(0,s.Wv)(a,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):(0,s.Q3)("",!0)]),_:1})]),_:1},8,["data","size"])]),_:1}),(0,s.bF)(I,{class:"no-scroll menu-box",type:"flex",justify:"end",style:{"margin-top":"15px"}},{default:(0,s.k6)(()=>[(0,s.bF)(W,{size:(0,m.R1)(h),plain:!0,onClick:C},{default:(0,s.k6)(()=>l[1]||(l[1]=[(0,s.eW)(" 取消 ")])),_:1,__:[1]},8,["size"]),(0,s.bF)(W,{type:"primary",size:(0,m.R1)(h),onClick:w},{default:(0,s.k6)(()=>l[2]||(l[2]=[(0,s.eW)(" 保存 ")])),_:1,__:[2]},8,["size"])]),_:1})])}}});const R=h;var V=R},85676:function(e,l,a){a.d(l,{A:function(){return g}});var t=a(65451),u=(a(97042),a(63390),a(76408)),o=(a(87535),a(85415)),i=(a(22243),a(7409),a(18111),a(22489),a(61701),a(56768)),d=a(90144),n=a(164),r=a(21231),s=a(27007),m=a(31372),p=a(21016),v=a(36525),c=a(50380),b=(0,i.pM)({__name:"index",props:{value:{default:()=>({})}},emits:["update:value"],setup(e,{emit:l}){const a=e,b=(0,i.WQ)("formConfig",()=>(console.error("CustomWidgetDictSetting: formConfig not injected"),{}));console.log(">>> >>> dictSetting",b());const f=(0,d.KR)([]),g=(0,i.EW)(()=>b().currentWidget),y=(0,i.EW)(()=>b().dictList),h=(0,i.EW)(()=>(0,s.PH)(y.value,a.value.dictId,"id")),R=(0,i.EW)(()=>h.value?(h.value.dictData||{}).paramList:void 0),V=(0,i.EW)({get(){return a.value.dictId},set(e){k(e)}}),k=e=>{w({dictId:e,paramList:[]})},_=()=>{f.value=[],null!=g.value&&Array.isArray(y.value)&&(g.value.bindData.dataType===p.SysCustomWidgetBindDataType.Column?null!=g.value.bindData.column&&null!=g.value.bindData.column.dictId&&(f.value=(y.value||[]).filter(e=>e.id===g.value.bindData.column.dictId)):g.value.bindData.dataType===p.SysCustomWidgetBindDataType.Custom&&(f.value=y.value))},C=l,w=e=>{(0,i.dY)(()=>{C("update:value",{...e,dict:(0,s.PH)(y.value,(e||{}).dictId,"id")})})},F=(e,l)=>{null!=l&&w(e?{dictId:a.value.dictId,paramList:a.value.paramList.map(a=>a.dictParamName===e.dictParamName?l:a)}:{dictId:a.value.dictId,paramList:[...a.value.paramList,l]})},W=(e=null)=>{let l=(R.value||[]).filter(e=>{let l=a.value.paramList,t=(0,s.PH)(l,e.dictParamName,"dictParamName");return null==t}),t=[];if(null!=b().form.pageCode)t=(b().allWidgetList||[]).map(e=>({columnId:e.widgetId,objectFieldName:e.showName}));else{let e=b().getMasterTable;b().currentWidget&&b().currentWidget.bindData&&b().currentWidget.bindData.table&&(e=b().currentWidget.bindData.table),t=e.columnList.filter(e=>b().form.formType!==p.SysOnlineFormType.QUERY||e.filterType!==v.SysOnlineColumnFilterType.NONE)}m.l.show(e?"编辑参数":"添加参数",c["default"],{area:"600px"},{rowData:e,paramList:l,columnList:t,path:"thirdEditDictParamValue"},{width:"600px",height:"400px",pathName:"/thirdParty/thirdEditDictParamValue"}).then(l=>{F(e,l)}).catch(e=>{console.warn(e)})},I=e=>{n.s.confirm("是否删除此参数？","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{w({dictId:a.value.dictId,paramList:a.value.paramList.filter(l=>l.dictParamName!==e.dictParamName)})}).catch(e=>{console.warn(e)})};return(0,i.wB)(()=>g.value,()=>{_()},{deep:!0,immediate:!0}),(0,i.wB)(()=>f.value,()=>{1!==f.value.length||a.value.dictId||w({dictId:f.value[0].id,paramList:[]})},{immediate:!0}),(e,l)=>{const a=o.P9,n=o.AV,s=u.uD,m=t.S2;return(0,i.uX)(),(0,i.Wv)(m,null,{default:(0,i.k6)(()=>[(0,i.bF)(s,{span:24},{default:(0,i.k6)(()=>[(0,i.bF)(n,{modelValue:(0,d.R1)(V),"onUpdate:modelValue":l[0]||(l[0]=e=>(0,d.i9)(V)?V.value=e:null),clearable:"",placeholder:"",style:{width:"100%"},onChange:k},{default:(0,i.k6)(()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)((0,d.R1)(f),e=>((0,i.uX)(),(0,i.Wv)(a,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),(0,d.R1)(R)&&(0,d.R1)(R).length>0?((0,i.uX)(),(0,i.Wv)(s,{key:0,span:24,style:{"margin-top":"10px"}},{default:(0,i.k6)(()=>[(0,i.bF)(r.A,{data:(e.value||{}).paramList,addText:"添加字典过滤参数",maxCount:(0,d.R1)(R)?(0,d.R1)(R).length:0,onAdd:l[1]||(l[1]=e=>W()),onEdit:W,onDelete:I,prop:{label:"dictParamName",value:"dictParamName"}},null,8,["data","maxCount"])]),_:1})):(0,i.Q3)("",!0)]),_:1})}}});const f=b;var g=f},87199:function(e,l,a){a(97042)},95757:function(e,l,a){a.d(l,{A:function(){return f}});var t=a(21929),u=(a(97042),a(98421),a(85415)),o=(a(22243),a(7409),a(17851)),i=(a(68489),a(20709),a(65546)),d=(a(51216),a(77649)),n=(a(87603),a(14022)),r=(a(72343),a(32465),a(15836)),s=(a(95815),a(56768)),m=a(90144),p=a(45130),v=a(21016),c=(0,s.pM)({__name:"index",setup(e){const l=(0,s.WQ)("formConfig",()=>(console.error("PivotTableBasicSetting: formConfig not injected"),{})),a=(0,s.EW)(()=>l().currentWidget),c=(0,s.EW)(()=>a.value?(a.value.props||{}).basicInfo:void 0);return(e,l)=>{const b=r.B8,f=t.xE,g=n.WK,y=d.lq,h=i.rF,R=o.Zh,V=o.MQ,k=u.P9,_=u.AV,C=t.US;return(0,m.R1)(c)?((0,s.uX)(),(0,s.Wv)(C,{key:0,"label-position":"top",size:"default",style:{padding:"10px 16px 0"},onSubmit:l[11]||(l[11]=(0,p.D$)(()=>{},["prevent"]))},{default:(0,s.k6)(()=>[(0,s.bF)(f,{class:"view-attribute-item",label:"组件宽度"},{default:(0,s.k6)(()=>[(0,s.bF)(b,{style:{width:"95%","margin-left":"5px"},min:1,max:24,modelValue:(0,m.R1)(c).span,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,m.R1)(c).span=e)},null,8,["modelValue"])]),_:1}),(0,m.R1)(a).widgetType!==(0,m.R1)(v.SysCustomWidgetType).RichText?((0,s.uX)(),(0,s.Wv)(f,{key:0,class:"view-attribute-item",label:"组件高度"},{default:(0,s.k6)(()=>[(0,s.bF)(g,{clearable:"",modelValue:(0,m.R1)(c).height,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,m.R1)(c).height=e)},null,8,["modelValue"])]),_:1})):(0,s.Q3)("",!0),null!=(0,m.R1)(c).paddingBottom?((0,s.uX)(),(0,s.Wv)(f,{key:1,class:"view-attribute-item",label:"底部距离"},{default:(0,s.k6)(()=>[(0,s.bF)(y,{"controls-position":"right",clearable:"",style:{width:"100%"},modelValue:(0,m.R1)(c).paddingBottom,"onUpdate:modelValue":l[2]||(l[2]=e=>(0,m.R1)(c).paddingBottom=e)},null,8,["modelValue"])]),_:1})):(0,s.Q3)("",!0),null!=(0,m.R1)(c).borderColor?((0,s.uX)(),(0,s.Wv)(f,{key:2,class:"view-attribute-item",label:"边框颜色"},{default:(0,s.k6)(()=>[(0,s.bF)(h,{modelValue:(0,m.R1)(c).borderColor,"onUpdate:modelValue":l[3]||(l[3]=e=>(0,m.R1)(c).borderColor=e)},null,8,["modelValue"])]),_:1})):(0,s.Q3)("",!0),null!=(0,m.R1)(c).cellBackgroundColor?((0,s.uX)(),(0,s.Wv)(f,{key:3,class:"view-attribute-item",label:"背景色"},{default:(0,s.k6)(()=>[(0,s.bF)(h,{modelValue:(0,m.R1)(c).cellBackgroundColor,"onUpdate:modelValue":l[4]||(l[4]=e=>(0,m.R1)(c).cellBackgroundColor=e)},null,8,["modelValue"])]),_:1})):(0,s.Q3)("",!0),null!=(0,m.R1)(c).cellFontColor?((0,s.uX)(),(0,s.Wv)(f,{key:4,class:"view-attribute-item",label:"字体颜色"},{default:(0,s.k6)(()=>[(0,s.bF)(h,{modelValue:(0,m.R1)(c).cellFontColor,"onUpdate:modelValue":l[5]||(l[5]=e=>(0,m.R1)(c).cellFontColor=e)},null,8,["modelValue"])]),_:1})):(0,s.Q3)("",!0),null!=(0,m.R1)(c).cellFontSize?((0,s.uX)(),(0,s.Wv)(f,{key:5,class:"view-attribute-item",label:"字体大小"},{default:(0,s.k6)(()=>[(0,s.bF)(b,{style:{width:"95%","margin-left":"5px"},modelValue:(0,m.R1)(c).cellFontSize,"onUpdate:modelValue":l[6]||(l[6]=e=>(0,m.R1)(c).cellFontSize=e),min:10,max:40,size:"default"},null,8,["modelValue"])]),_:1})):(0,s.Q3)("",!0),null!=(0,m.R1)(c).cellRowHeight?((0,s.uX)(),(0,s.Wv)(f,{key:6,class:"view-attribute-item",label:"行高"},{default:(0,s.k6)(()=>[(0,s.bF)(b,{style:{width:"95%","margin-left":"5px"},modelValue:(0,m.R1)(c).cellRowHeight,"onUpdate:modelValue":l[7]||(l[7]=e=>(0,m.R1)(c).cellRowHeight=e),min:10,max:100,size:"default"},null,8,["modelValue"])]),_:1})):(0,s.Q3)("",!0),null!=(0,m.R1)(c).cellRowMaxHeight?((0,s.uX)(),(0,s.Wv)(f,{key:7,class:"view-attribute-item",label:"高度"},{default:(0,s.k6)(()=>[(0,s.bF)(b,{style:{width:"95%","margin-left":"5px"},modelValue:(0,m.R1)(c).cellRowMaxHeight,"onUpdate:modelValue":l[8]||(l[8]=e=>(0,m.R1)(c).cellRowMaxHeight=e),min:10,max:100,size:"default"},null,8,["modelValue"])]),_:1})):(0,s.Q3)("",!0),null!=(0,m.R1)(c).cellAlign?((0,s.uX)(),(0,s.Wv)(f,{key:8,class:"view-attribute-item",label:"对齐方式"},{default:(0,s.k6)(()=>[(0,s.bF)(V,{modelValue:(0,m.R1)(c).cellAlign,"onUpdate:modelValue":l[9]||(l[9]=e=>(0,m.R1)(c).cellAlign=e)},{default:(0,s.k6)(()=>[(0,s.bF)(R,{value:"left"},{default:(0,s.k6)(()=>l[12]||(l[12]=[(0,s.eW)("居左")])),_:1,__:[12]}),(0,s.bF)(R,{value:"center"},{default:(0,s.k6)(()=>l[13]||(l[13]=[(0,s.eW)("居中")])),_:1,__:[13]}),(0,s.bF)(R,{value:"right"},{default:(0,s.k6)(()=>l[14]||(l[14]=[(0,s.eW)("居右")])),_:1,__:[14]})]),_:1},8,["modelValue"])]),_:1})):(0,s.Q3)("",!0),null!=(0,m.R1)(c).indicatorPosition?((0,s.uX)(),(0,s.Wv)(f,{key:9,class:"view-attribute-item",label:"指示器位置"},{default:(0,s.k6)(()=>[(0,s.bF)(_,{modelValue:(0,m.R1)(c).indicatorPosition,"onUpdate:modelValue":l[10]||(l[10]=e=>(0,m.R1)(c).indicatorPosition=e),placeholder:""},{default:(0,s.k6)(()=>[(0,s.bF)(k,{label:"外部",value:"outside"}),(0,s.bF)(k,{label:"不显示",value:"none"})]),_:1},8,["modelValue"])]),_:1})):(0,s.Q3)("",!0)]),_:1})):(0,s.Q3)("",!0)}}});const b=c;var f=b},95815:function(e,l,a){a(97042),a(87603),a(15936)},97024:function(e,l,a){a.d(l,{A:function(){return h}});var t=a(21929),u=(a(97042),a(98421),a(14022)),o=(a(72343),a(97456)),i=(a(15936),a(91542)),d=(a(37985),a(85415)),n=(a(22243),a(7409),a(65546)),r=(a(51216),a(15836)),s=(a(95815),a(32465),a(3740)),m=(a(42899),a(56768)),p=a(90144),v=a(45130),c=a(57477),b=a(21016),f=a(92380),g=(0,m.pM)({__name:"index",setup(e){const l=(0,m.WQ)("formConfig",()=>(console.error("ChartTooltipSetting: formConfig not injected"),{})),a=(0,m.EW)(()=>l().currentWidget),g=(0,m.EW)(()=>a.value?(a.value.props||{}).tooltipSetting:void 0),y=(0,m.EW)(()=>![b.SysCustomWidgetType.FunnelChart,b.SysCustomWidgetType.RadarChart,b.SysCustomWidgetType.GaugeChart].find(e=>e===a.value.widgetType));return(e,l)=>{const a=s.qi,b=t.xE,h=r.B8,R=n.rF,V=d.P9,k=d.AV,_=i.tk,C=o.R7,w=u.WK,F=t.US;return(0,p.R1)(g)?((0,m.uX)(),(0,m.Wv)(F,{key:0,"label-position":"top",size:"default",style:{padding:"10px 16px 0"},onSubmit:l[5]||(l[5]=(0,v.D$)(()=>{},["prevent"]))},{default:(0,m.k6)(()=>[(0,m.bF)(b,{label:"是否显示"},{default:(0,m.k6)(()=>[(0,m.bF)(a,{modelValue:(0,p.R1)(g).show,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,p.R1)(g).show=e)},null,8,["modelValue"])]),_:1}),(0,m.bo)((0,m.bF)(b,{label:"字体大小"},{default:(0,m.k6)(()=>[(0,m.bF)(h,{modelValue:(0,p.R1)(g).textStyle.fontSize,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,p.R1)(g).textStyle.fontSize=e),min:10,max:40,size:"default"},null,8,["modelValue"])]),_:1},512),[[v.aG,(0,p.R1)(g).show]]),(0,m.bo)((0,m.bF)(b,{label:"字体颜色"},{default:(0,m.k6)(()=>[(0,m.bF)(R,{modelValue:(0,p.R1)(g).textStyle.color,"onUpdate:modelValue":l[2]||(l[2]=e=>(0,p.R1)(g).textStyle.color=e)},null,8,["modelValue"])]),_:1},512),[[v.aG,(0,p.R1)(g).show]]),(0,p.R1)(y)?(0,m.bo)(((0,m.uX)(),(0,m.Wv)(b,{key:0,label:"触发位置"},{default:(0,m.k6)(()=>[(0,m.bF)(k,{modelValue:(0,p.R1)(g).trigger,"onUpdate:modelValue":l[3]||(l[3]=e=>(0,p.R1)(g).trigger=e),placeholder:"",style:{width:"100%"}},{default:(0,m.k6)(()=>[((0,m.uX)(!0),(0,m.CE)(m.FK,null,(0,m.pI)((0,p.R1)(f.TipsTriggerType).getList(),e=>((0,m.uX)(),(0,m.Wv)(V,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},512)),[[v.aG,(0,p.R1)(g).show]]):(0,m.Q3)("",!0),(0,m.bo)((0,m.bF)(b,{label:"内容格式"},{label:(0,m.k6)(()=>[l[7]||(l[7]=(0,m.Lk)("span",null,"内容格式",-1)),(0,m.bF)(C,{class:"item",effect:"dark",placement:"right-start"},{content:(0,m.k6)(()=>l[6]||(l[6]=[(0,m.Lk)("div",null,[(0,m.eW)(" 模版变量有 {a}, {b}，{c}，{d}，分别表示系列名，数据名，数据值等。"),(0,m.Lk)("br"),(0,m.eW)(" 在 触发位置 为 '坐标轴' 的时候，会有多个系列的数据，此时可以通过 {a0}, {a1}, {a2} 这种后面加索引的方式表示系列的索引。"),(0,m.Lk)("br"),(0,m.eW)(" 不同图表类型下的 {a}，{b}，{c}，{d} 含义不一样。 其中变量{a}, {b}, {c}, {d}在不同图表类型下代表数据含义为："),(0,m.Lk)("br"),(0,m.eW)(" 折线（区域）图、柱状（条形）图、仪表盘 : {a}（系列名称），{b}（类目值），{c}（数值）"),(0,m.Lk)("br"),(0,m.eW)(" 饼图、漏斗图: {a}（系列名称），{b}（数据项名称），{c}（数值）, {d}（百分比） ")],-1)])),default:(0,m.k6)(()=>[(0,m.bF)(_,null,{default:(0,m.k6)(()=>[(0,m.bF)((0,p.R1)(c.InfoFilled))]),_:1})]),_:1})]),default:(0,m.k6)(()=>[(0,m.bF)(w,{modelValue:(0,p.R1)(g).formatter,"onUpdate:modelValue":l[4]||(l[4]=e=>(0,p.R1)(g).formatter=e),type:"textarea",rows:4},null,8,["modelValue"])]),_:1},512),[[v.aG,(0,p.R1)(g).show]])]),_:1})):(0,m.Q3)("",!0)}}});const y=g;var h=y}}]);