"use strict";(self["webpackChunkorange"]=self["webpackChunkorange"]||[]).push([[1066,1588,6339,8720],{3829:function(e,t,n){n.d(t,{x:function(){return s},z:function(){return r}});var o=n(47378),a=n(1211);const r=(0,o.b_)({type:{type:String,values:["primary","success","info","warning","danger"],default:"primary"},closable:Boolean,disableTransitions:Boolean,hit:Boolean,color:String,size:{type:String,values:a.I},effect:{type:String,values:["dark","light","plain"],default:"light"},round:Boolean}),s={close:e=>e instanceof MouseEvent,click:e=>e instanceof MouseEvent}},6301:function(e,t,n){n.d(t,{A:function(){return p}});var o=n(60168),a=n(39578),r=function(){return a.A.Date.now()},s=r,i=n(10754),l="Expected a function",d=Math.max,u=Math.min;function c(e,t,n){var a,r,c,p,f,v,y=0,m=!1,b=!1,g=!0;if("function"!=typeof e)throw new TypeError(l);function h(t){var n=a,o=r;return a=r=void 0,y=t,p=e.apply(o,n),p}function k(e){return y=e,f=setTimeout(I,t),m?h(e):p}function _(e){var n=e-v,o=e-y,a=t-n;return b?u(a,c-o):a}function w(e){var n=e-v,o=e-y;return void 0===v||n>=t||n<0||b&&o>=c}function I(){var e=s();if(w(e))return R(e);f=setTimeout(I,_(e))}function R(e){return f=void 0,g&&a?h(e):(a=r=void 0,p)}function C(){void 0!==f&&clearTimeout(f),y=0,a=v=r=f=void 0}function L(){return void 0===f?p:R(s())}function P(){var e=s(),n=w(e);if(a=arguments,r=this,v=e,n){if(void 0===f)return k(v);if(b)return clearTimeout(f),f=setTimeout(I,t),h(v)}return void 0===f&&(f=setTimeout(I,t)),p}return t=(0,i.A)(t)||0,(0,o.A)(n)&&(m=!!n.leading,b="maxWait"in n,c=b?d((0,i.A)(n.maxWait)||0,t):c,g="trailing"in n?!!n.trailing:g),P.cancel=C,P.flush=L,P}var p=c},10754:function(e,t,n){n.d(t,{A:function(){return b}});var o=/\s/;function a(e){var t=e.length;while(t--&&o.test(e.charAt(t)));return t}var r=a,s=/^\s+/;function i(e){return e?e.slice(0,r(e)+1).replace(s,""):e}var l=i,d=n(60168),u=n(18095),c=NaN,p=/^[-+]0x[0-9a-f]+$/i,f=/^0b[01]+$/i,v=/^0o[0-7]+$/i,y=parseInt;function m(e){if("number"==typeof e)return e;if((0,u.A)(e))return c;if((0,d.A)(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=(0,d.A)(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=l(e);var n=f.test(e);return n||v.test(e)?y(e.slice(2),n?2:8):p.test(e)?c:+e}var b=m},12687:function(e,t,n){n.d(t,{u:function(){return b}});var o=n(56768),a=n(24232),r=n(90144),s=n(45130),i=n(91542),l=n(57477),d=n(3829),u=n(99077),c=n(37207),p=n(93513);const f=(0,o.pM)({name:"ElTag"}),v=(0,o.pM)({...f,props:d.z,emits:d.x,setup(e,{emit:t}){const n=e,d=(0,c.NV)(),u=(0,p.DU)("tag"),f=(0,o.EW)(()=>{const{type:e,hit:t,effect:o,closable:a,round:r}=n;return[u.b(),u.is("closable",a),u.m(e||"primary"),u.m(d.value),u.m(o),u.is("hit",t),u.is("round",r)]}),v=e=>{t("close",e)},y=e=>{t("click",e)},m=e=>{var t,n,o;(null==(o=null==(n=null==(t=null==e?void 0:e.component)?void 0:t.subTree)?void 0:n.component)?void 0:o.bum)&&(e.component.subTree.component.bum=null)};return(e,t)=>e.disableTransitions?((0,o.uX)(),(0,o.CE)("span",{key:0,class:(0,a.C4)((0,r.R1)(f)),style:(0,a.Tr)({backgroundColor:e.color}),onClick:y},[(0,o.Lk)("span",{class:(0,a.C4)((0,r.R1)(u).e("content"))},[(0,o.RG)(e.$slots,"default")],2),e.closable?((0,o.uX)(),(0,o.Wv)((0,r.R1)(i.tk),{key:0,class:(0,a.C4)((0,r.R1)(u).e("close")),onClick:(0,s.D$)(v,["stop"])},{default:(0,o.k6)(()=>[(0,o.bF)((0,r.R1)(l.Close))]),_:1},8,["class","onClick"])):(0,o.Q3)("v-if",!0)],6)):((0,o.uX)(),(0,o.Wv)(s.eB,{key:1,name:`${(0,r.R1)(u).namespace.value}-zoom-in-center`,appear:"",onVnodeMounted:m},{default:(0,o.k6)(()=>[(0,o.Lk)("span",{class:(0,a.C4)((0,r.R1)(f)),style:(0,a.Tr)({backgroundColor:e.color}),onClick:y},[(0,o.Lk)("span",{class:(0,a.C4)((0,r.R1)(u).e("content"))},[(0,o.RG)(e.$slots,"default")],2),e.closable?((0,o.uX)(),(0,o.Wv)((0,r.R1)(i.tk),{key:0,class:(0,a.C4)((0,r.R1)(u).e("close")),onClick:(0,s.D$)(v,["stop"])},{default:(0,o.k6)(()=>[(0,o.bF)((0,r.R1)(l.Close))]),_:1},8,["class","onClick"])):(0,o.Q3)("v-if",!0)],6)]),_:3},8,["name"]))}});var y=(0,u.A)(v,[["__file","tag.vue"]]),m=n(25376);const b=(0,m.GU)(y)},17582:function(e,t,n){n.d(t,{A:function(){return $}});var o=n(12739),a=n(57179),r=1,s=2;function i(e,t,n,i){var l=n.length,d=l,u=!i;if(null==e)return!d;e=Object(e);while(l--){var c=n[l];if(u&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}while(++l<d){c=n[l];var p=c[0],f=e[p],v=c[1];if(u&&c[2]){if(void 0===f&&!(p in e))return!1}else{var y=new o.A;if(i)var m=i(f,v,p,e,t,y);if(!(void 0===m?(0,a.A)(v,f,r|s,i,y):m))return!1}}return!0}var l=i,d=n(60168);function u(e){return e===e&&!(0,d.A)(e)}var c=u,p=n(96166);function f(e){var t=(0,p.A)(e),n=t.length;while(n--){var o=t[n],a=e[o];t[n]=[o,a,c(a)]}return t}var v=f;function y(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}var m=y;function b(e){var t=v(e);return 1==t.length&&t[0][2]?m(t[0][0],t[0][1]):function(n){return n===e||l(n,e,t)}}var g=b,h=n(29615),k=n(6865),_=n(71191),w=n(13708),I=1,R=2;function C(e,t){return(0,_.A)(e)&&c(t)?m((0,w.A)(e),t):function(n){var o=(0,h.A)(n,e);return void 0===o&&o===t?(0,k.A)(n,e):(0,a.A)(t,o,I|R)}}var L=C,P=n(69937),A=n(23506);function S(e){return function(t){return null==t?void 0:t[e]}}var T=S,F=n(12623);function W(e){return function(t){return(0,F.A)(t,e)}}var z=W;function x(e){return(0,_.A)(e)?T((0,w.A)(e)):z(e)}var D=x;function E(e){return"function"==typeof e?e:null==e?P.A:"object"==typeof e?(0,A.A)(e)?L(e[0],e[1]):g(e):D(e)}var $=E},20709:function(e,t,n){n(97042)},31112:function(e,t,n){n(97042)},38840:function(e,t,n){n.d(t,{Ik:function(){return f}});var o=n(56768),a=n(24232),r=n(90144),s=n(84565),i=n(99077),l=n(93513);const d=(0,o.pM)({name:"ElCard"}),u=(0,o.pM)({...d,props:s.b,setup(e){const t=(0,l.DU)("card");return(e,n)=>((0,o.uX)(),(0,o.CE)("div",{class:(0,a.C4)([(0,r.R1)(t).b(),(0,r.R1)(t).is(`${e.shadow}-shadow`)])},[e.$slots.header||e.header?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,a.C4)([(0,r.R1)(t).e("header"),e.headerClass])},[(0,o.RG)(e.$slots,"header",{},()=>[(0,o.eW)((0,a.v_)(e.header),1)])],2)):(0,o.Q3)("v-if",!0),(0,o.Lk)("div",{class:(0,a.C4)([(0,r.R1)(t).e("body"),e.bodyClass]),style:(0,a.Tr)(e.bodyStyle)},[(0,o.RG)(e.$slots,"default")],6),e.$slots.footer||e.footer?((0,o.uX)(),(0,o.CE)("div",{key:1,class:(0,a.C4)([(0,r.R1)(t).e("footer"),e.footerClass])},[(0,o.RG)(e.$slots,"footer",{},()=>[(0,o.eW)((0,a.v_)(e.footer),1)])],2)):(0,o.Q3)("v-if",!0)],2))}});var c=(0,i.A)(u,[["__file","card.vue"]]),p=n(25376);const f=(0,p.GU)(c)},61473:function(e,t,n){e.exports=n.p+"img/empty.7e47f88a.png"},64379:function(e,t,n){n.r(t),n.d(t,{default:function(){return I}});var o=n(54880),a=(n(97042),n(51582),n(60713),n(38840)),r=(n(95304),n(68368)),s=(n(81208),n(12687)),i=(n(31112),n(47001),n(25136)),l=(n(69957),n(65451)),d=(n(63390),n(18888)),u=(n(3172),n(17851)),c=(n(68489),n(20709),n(18111),n(22489),n(61701),n(56768)),p=n(90144),f=n(45130),v=n(24232),y=n(61473),m=n(71066),b=n(82572);const g={class:"base-card-header"},h={class:"base-card-operation"};var k=(0,c.pM)({__name:"TaskPostSelect",props:{deptList:{},postList:{},deptPostList:{},usedIdList:{},dialog:{},thirdParamsString:{},dialogKey:{}},setup(e){const t=e,{thirdParams:n,onCloseThirdDialog:k}=(0,m.P)(t),_=(0,b.l5)(),w=(0,p.KR)({deptType:"allDeptPost",deptId:void 0,postId:void 0}),I=(0,p.KR)([]),R=(0,c.EW)(()=>({deptList:t.deptList||n.value.deptList,postList:t.postList||n.value.postList,deptPostList:t.deptPostList||n.value.deptPostList,usedIdList:t.usedIdList||n.value.usedIdList})),C=(0,c.EW)(()=>"deptPost"!==w.value.deptType?R.value.postList||[]:(R.value.deptPostList||[]).filter(e=>e.deptId===(Array.isArray(w.value.deptId)?w.value.deptId[w.value.deptId.length-1]:w.value.deptId))),L=e=>!(Array.isArray(R.value.usedIdList)&&R.value.usedIdList.length>0)||-1===R.value.usedIdList.map(e=>e.split("__")[1]).indexOf(e.deptPostId||e.postId),P=e=>{I.value=e},A=()=>{const e=I.value.map(e=>({id:`${w.value.deptType}__${e.deptPostId||e.postId}`,deptType:w.value.deptType,deptPostId:"deptPost"===w.value.deptType?e.deptPostId:void 0,postId:"deptPost"===w.value.deptType?void 0:e.postId}));t.dialog?t.dialog.submit(e):k(!0,void 0,e)};return(e,t)=>{const n=u.Zh,m=u.MQ,b=d._m,k=l.S2,S=i.S2,T=r.o8,F=s.u,W=r.Up,z=a.Ik,x=o.ZO,D=o.lX;return(0,c.uX)(),(0,c.Wv)(D,null,{default:(0,c.k6)(()=>[(0,c.bF)(x,{style:{"background-color":"white"}},{default:(0,c.k6)(()=>[(0,c.bF)(z,{class:"base-card",shadow:"never","body-style":{padding:"16px"},style:{border:"none"}},{header:(0,c.k6)(()=>[(0,c.Lk)("div",g,[(0,c.bF)(k,{align:"middle",style:{"flex-wrap":"nowrap"}},{default:(0,c.k6)(()=>[(0,c.bF)(m,{modelValue:(0,p.R1)(w).deptType,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,p.R1)(w).deptType=e),size:(0,p.R1)(_).defaultFormItemSize,onChange:t[1]||(t[1]=e=>(0,p.R1)(w).deptId=void 0)},{default:(0,c.k6)(()=>[(0,c.bF)(n,{value:"allDeptPost"},{default:(0,c.k6)(()=>t[4]||(t[4]=[(0,c.eW)("全部")])),_:1,__:[4]}),(0,c.bF)(n,{value:"selfDeptPost"},{default:(0,c.k6)(()=>t[5]||(t[5]=[(0,c.eW)("本部门")])),_:1,__:[5]}),(0,c.bF)(n,{value:"siblingDeptPost"},{default:(0,c.k6)(()=>t[6]||(t[6]=[(0,c.eW)("同级部门")])),_:1,__:[6]}),(0,c.bF)(n,{value:"upDeptPost"},{default:(0,c.k6)(()=>t[7]||(t[7]=[(0,c.eW)("上级部门")])),_:1,__:[7]}),(0,c.bF)(n,{value:"deptPost"},{default:(0,c.k6)(()=>t[8]||(t[8]=[(0,c.eW)("指定部门")])),_:1,__:[8]})]),_:1},8,["modelValue","size"]),(0,c.bo)((0,c.Lk)("div",null,[(0,c.bF)(b,{modelValue:(0,p.R1)(w).deptId,"onUpdate:modelValue":t[2]||(t[2]=e=>(0,p.R1)(w).deptId=e),clearable:!0,size:(0,p.R1)(_).defaultFormItemSize,placeholder:"选择部门",props:{value:"id",label:"name",checkStrictly:!0},options:(0,p.R1)(R).deptList},null,8,["modelValue","size","options"])],512),[[f.aG,"deptPost"===(0,p.R1)(w).deptType]])]),_:1}),(0,c.Lk)("div",h,[(0,c.bF)(S,{type:"primary",size:(0,p.R1)(_).defaultFormItemSize,disabled:(0,p.R1)(I).length<=0,onClick:t[3]||(t[3]=e=>A())},{default:(0,c.k6)(()=>t[9]||(t[9]=[(0,c.eW)(" 添加岗位 ")])),_:1,__:[9]},8,["size","disabled"])])])]),default:(0,c.k6)(()=>[(0,c.bF)(W,{data:(0,p.R1)(C),size:(0,p.R1)(_).defaultFormItemSize,height:"470px","header-cell-class-name":"table-header-gray","row-key":"deptPost"===(0,p.R1)(w).deptType?"deptPostId":"postId",onSelectionChange:P},{empty:(0,c.k6)(()=>t[10]||(t[10]=[(0,c.Lk)("div",{class:"table-empty unified-font"},[(0,c.Lk)("img",{src:y}),(0,c.Lk)("span",null,"暂无数据")],-1)])),default:(0,c.k6)(()=>[(0,c.bF)(T,{type:"selection",width:"50px",selectable:L}),(0,c.bF)(T,{label:"岗位名称"},{default:(0,c.k6)(e=>[(0,c.Lk)("span",null,(0,v.v_)(e.row.postShowName||e.row.postName),1)]),_:1}),(0,c.bF)(T,{label:"领导岗位"},{default:(0,c.k6)(e=>[(0,c.bF)(F,{size:(0,p.R1)(_).defaultFormItemSize,type:e.row.leaderPost?"success":"danger"},{default:(0,c.k6)(()=>[(0,c.eW)((0,v.v_)(e.row.leaderPost?"是":"否"),1)]),_:2},1032,["size","type"])]),_:1}),(0,c.bF)(T,{label:"岗位级别",prop:"postLevel"})]),_:1},8,["data","size","row-key"])]),_:1})]),_:1})]),_:1})}}}),_=n(71241);const w=(0,_.A)(k,[["__scopeId","data-v-4b6f04a2"]]);var I=w},68489:function(e,t,n){n(97042)},71066:function(e,t,n){n.d(t,{P:function(){return i},i:function(){return l}});var o=n(81387),a=n(27007),r=n(56768),s=n(90144);const i=e=>{console.log("接收到的第三方参数",e);const t=(0,s.KR)(0),n=(0,r.EW)(()=>{let t={};try{e.thirdParamsString&&(t=JSON.parse(e.thirdParamsString))}catch(n){console.log(n),t={}}return t});console.log("thirdParams",n);const o=(o,a,r)=>{console.log("onCloseThirdDialog",a,r),window.parent&&window.parent.postMessage({type:"closeDialog",data:{index:t.value,dialogKey:e.dialogKey,path:n.value.path,rowData:a?JSON.parse(JSON.stringify(a)):void 0,data:r?JSON.parse(JSON.stringify(r)):void 0,isSuccess:o}},"*")},i=(e,n)=>{switch(e){case"setToken":n.token&&(0,a.WG)(n.token);break;case"dialogIndex":t.value=n;break;case"refreshData":break;case"message":break}},l=e=>{i(e.data.type,e.data.data)};return(0,r.sV)(()=>{console.log("onMounted message"),window.addEventListener("message",l,!1)}),(0,r.hi)(()=>{console.log("onUnmounted message"),window.removeEventListener("message",l)}),{thirdParams:n,onCloseThirdDialog:o}},l=()=>{let e;const t=(0,o.lq)(),n=()=>{window.parent&&window.parent.postMessage({type:"refreshToken"},"*")};-1!==t.path.indexOf("/thirdParty/")&&((0,r.sV)(()=>{(0,a.R7)()&&(e=setInterval(()=>{console.log("refreshToken thirdParty"),n()},18e4))}),(0,r.hi)(()=>{e&&clearInterval(e)}))}},84565:function(e,t,n){n.d(t,{b:function(){return a}});var o=n(47378);const a=(0,o.b_)({header:{type:String,default:""},footer:{type:String,default:""},bodyStyle:{type:(0,o.jq)([String,Object,Array]),default:""},headerClass:String,bodyClass:String,footerClass:String,shadow:{type:String,values:["always","hover","never"],default:"always"}})},95304:function(e,t,n){n(97042)}}]);