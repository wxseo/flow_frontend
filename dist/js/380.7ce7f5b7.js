"use strict";(self["webpackChunkorange"]=self["webpackChunkorange"]||[]).push([[380,1066],{50380:function(e,a,l){l.r(a),l.d(a,{default:function(){return k}});var t=l(25136),n=(l(97042),l(69957),l(21929)),i=(l(98421),l(65451)),o=(l(63390),l(14022)),d=(l(72343),l(18888)),r=(l(3172),l(76408)),u=(l(87535),l(32465),l(85415)),s=(l(22243),l(7409),l(18111),l(22489),l(61701),l(56768)),m=l(90144),c=l(45130),p=l(26695),b=l(78430),y=l(36525),v=l(71066),f=l(82572);const g={class:"form-single-fragment third-party-dlg",style:{position:"relative"}};var R=(0,s.pM)({__name:"editDictParamValue",props:{rowData:{},paramList:{},columnList:{},dialog:{},thirdParamsString:{},dialogKey:{}},setup(e){const a=(0,f.l5)(),l={...b.A},R=e,V=(0,s.EW)(()=>a.defaultFormItemSize||k.value.defaultFormItemSize?.value),{thirdParams:k,onCloseThirdDialog:E}=(0,v.P)(R),_=(0,m.KR)(),w=(0,m.KR)({dictParamName:void 0,dictValue:void 0,dictValueType:void 0}),h={label:"name",value:"id"},T=(0,m.KR)([]),S={dictParamName:[{required:!0,message:"请选择参数",trigger:"blur"}],dictValueType:[{required:!0,message:"请选择参数值类型",trigger:"blur"}],dictValue:[{required:!0,message:"请选择参数值",trigger:"blur"}]},L=(0,s.EW)(()=>({rowData:R.rowData||k.value.rowData,paramList:R.paramList||k.value.paramList,columnList:R.columnList||k.value.columnList})),O=()=>{R.dialog?R.dialog.cancel():E(!1)},P=()=>{_.value.validate(e=>{e&&(w.value.dictValueType!==y.SysOnlineParamValueType.STATIC_DICT||2===w.value.dictValue.length?R.dialog?R.dialog.submit(w.value):E(!0,L.value.rowData,w.value):p.nk.error("静态字典类型的参数值必须选择静态字典的值！"))})},C=()=>{w.value.dictValue=void 0,_.value.clearValidate()},F=()=>{const e=l;T.value=Object.keys(e).map(a=>{if("DictionaryBase"===a)return;let l=e[a];return{id:a,name:l.showName,children:l.getList()}}).filter(e=>!!e)};return(0,s.sV)(()=>{w.value={...w.value,...L.value.rowData},F()}),(e,a)=>{const l=u.P9,p=u.AV,b=n.xE,v=r.uD,f=d._m,R=o.WK,k=i.S2,E=n.US,F=t.S2;return(0,s.uX)(),(0,s.CE)("div",g,[(0,s.bF)(E,{ref_key:"form",ref:_,model:(0,m.R1)(w),class:"full-width-input form-box",rules:S,"label-width":"100px",size:(0,m.R1)(V),"label-position":"right",onSubmit:a[5]||(a[5]=(0,c.D$)(()=>{},["prevent"]))},{default:(0,s.k6)(()=>[(0,s.bF)(k,null,{default:(0,s.k6)(()=>[(0,s.bF)(v,{span:24},{default:(0,s.k6)(()=>[(0,s.bF)(b,{label:"参数名称",prop:"dictParamName"},{default:(0,s.k6)(()=>[(0,s.bF)(p,{modelValue:(0,m.R1)(w).dictParamName,"onUpdate:modelValue":a[0]||(a[0]=e=>(0,m.R1)(w).dictParamName=e),placeholder:"",disabled:null!=e.rowData},{default:(0,s.k6)(()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,m.R1)(L).paramList,e=>((0,s.uX)(),(0,s.Wv)(l,{key:e.dictParamName,label:e.dictParamName,value:e.dictParamName},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1}),(0,s.bF)(v,{span:24},{default:(0,s.k6)(()=>[(0,s.bF)(b,{label:"参数值类型",prop:"dictValueType"},{default:(0,s.k6)(()=>[(0,s.bF)(p,{class:"input-item",modelValue:(0,m.R1)(w).dictValueType,"onUpdate:modelValue":a[1]||(a[1]=e=>(0,m.R1)(w).dictValueType=e),clearable:!0,placeholder:"参数值类型",onChange:C},{default:(0,s.k6)(()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,m.R1)(y.SysOnlineParamValueType).getList(),e=>((0,s.uX)(),(0,s.Wv)(l,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),(0,m.R1)(w).dictValueType===(0,m.R1)(y.SysOnlineParamValueType).TABLE_COLUMN?((0,s.uX)(),(0,s.Wv)(v,{key:0,span:24},{default:(0,s.k6)(()=>[(0,s.bF)(b,{label:"参数值",prop:"dictValue"},{default:(0,s.k6)(()=>[(0,s.bF)(p,{class:"input-item",modelValue:(0,m.R1)(w).dictValue,"onUpdate:modelValue":a[2]||(a[2]=e=>(0,m.R1)(w).dictValue=e),key:"TABLE_COLUMN",clearable:!0,placeholder:"参数值"},{default:(0,s.k6)(()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,m.R1)(L).columnList,e=>((0,s.uX)(),(0,s.Wv)(l,{key:e.columnId,label:e.objectFieldName,value:e.columnId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})):(0,s.Q3)("",!0),(0,m.R1)(w).dictValueType===(0,m.R1)(y.SysOnlineParamValueType).STATIC_DICT?((0,s.uX)(),(0,s.Wv)(v,{key:1,span:24},{default:(0,s.k6)(()=>[(0,s.bF)(b,{label:"参数值",prop:"dictValue"},{default:(0,s.k6)(()=>[(0,s.bF)(f,{modelValue:(0,m.R1)(w).dictValue,"onUpdate:modelValue":a[3]||(a[3]=e=>(0,m.R1)(w).dictValue=e),options:(0,m.R1)(T),props:h},null,8,["modelValue","options"])]),_:1})]),_:1})):(0,s.Q3)("",!0),(0,m.R1)(w).dictValueType===(0,m.R1)(y.SysOnlineParamValueType).INPUT_VALUE?((0,s.uX)(),(0,s.Wv)(v,{key:2,span:24},{default:(0,s.k6)(()=>[(0,s.bF)(b,{label:"参数值",prop:"dictValue"},{default:(0,s.k6)(()=>[(0,s.bF)(R,{modelValue:(0,m.R1)(w).dictValue,"onUpdate:modelValue":a[4]||(a[4]=e=>(0,m.R1)(w).dictValue=e),placeholder:"请输入参数值",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})):(0,s.Q3)("",!0)]),_:1})]),_:1},8,["model","size"]),(0,s.bF)(k,{class:"no-scroll menu-box",type:"flex",justify:"end",style:{"margin-top":"15px"}},{default:(0,s.k6)(()=>[(0,s.bF)(F,{size:(0,m.R1)(V),plain:!0,onClick:O},{default:(0,s.k6)(()=>a[6]||(a[6]=[(0,s.eW)(" 取消 ")])),_:1,__:[6]},8,["size"]),(0,s.bF)(F,{type:"primary",size:(0,m.R1)(V),onClick:P},{default:(0,s.k6)(()=>a[7]||(a[7]=[(0,s.eW)(" 保存 ")])),_:1,__:[7]},8,["size"])]),_:1})])}}});const V=R;var k=V},71066:function(e,a,l){l.d(a,{P:function(){return d},i:function(){return r}});var t=l(81387),n=l(27007),i=l(56768),o=l(90144);const d=e=>{console.log("接收到的第三方参数",e);const a=(0,o.KR)(0),l=(0,i.EW)(()=>{let a={};try{e.thirdParamsString&&(a=JSON.parse(e.thirdParamsString))}catch(l){console.log(l),a={}}return a});console.log("thirdParams",l);const t=(t,n,i)=>{console.log("onCloseThirdDialog",n,i),window.parent&&window.parent.postMessage({type:"closeDialog",data:{index:a.value,dialogKey:e.dialogKey,path:l.value.path,rowData:n?JSON.parse(JSON.stringify(n)):void 0,data:i?JSON.parse(JSON.stringify(i)):void 0,isSuccess:t}},"*")},d=(e,l)=>{switch(e){case"setToken":l.token&&(0,n.WG)(l.token);break;case"dialogIndex":a.value=l;break;case"refreshData":break;case"message":break}},r=e=>{d(e.data.type,e.data.data)};return(0,i.sV)(()=>{console.log("onMounted message"),window.addEventListener("message",r,!1)}),(0,i.hi)(()=>{console.log("onUnmounted message"),window.removeEventListener("message",r)}),{thirdParams:l,onCloseThirdDialog:t}},r=()=>{let e;const a=(0,t.lq)(),l=()=>{window.parent&&window.parent.postMessage({type:"refreshToken"},"*")};-1!==a.path.indexOf("/thirdParty/")&&((0,i.sV)(()=>{(0,n.R7)()&&(e=setInterval(()=>{console.log("refreshToken thirdParty"),l()},18e4))}),(0,i.hi)(()=>{e&&clearInterval(e)}))}},78430:function(e,a,l){l.d(a,{A:function(){return c}});var t={};l.r(t),l.d(t,{ClassLevel:function(){return i},CourseDifficult:function(){return u},Gender:function(){return d},StudentActionType:function(){return s},StudentExpLevel:function(){return o},TeacherLevelType:function(){return r}});var n=l(52081);const i=new n.w("班级级别",[{id:0,name:"初级班",symbol:"LOWER"},{id:1,name:"培优班",symbol:"HIGH"},{id:2,name:"冲刺提分班",symbol:"INCREASE"},{id:3,name:"竞赛班",symbol:"MATH"}]),o=new n.w("学生经验等级",[{id:0,name:"初级学员",symbol:"LOWER"},{id:1,name:"中级学员",symbol:"NORMAL"},{id:2,name:"高级学员",symbol:"HIGH"},{id:3,name:"资深学员",symbol:"SENIOR"}]),d=new n.w("性别字典",[{id:1,name:"男",symbol:"MALE"},{id:0,name:"女",symbol:"FEMALE"}]),r=new n.w("教师职级",[{id:0,name:"初级教师",symbol:"LOWER"},{id:1,name:"中级教师",symbol:"NORMAL"},{id:2,name:"高级教师",symbol:"HIGH"}]),u=new n.w("课程难度",[{id:0,name:"容易",symbol:"EASY"},{id:1,name:"普通",symbol:"NORMAL"},{id:2,name:"困难",symbol:"DIFFICULT"}]),s=new n.w("学生行为",[{id:0,name:"充值",symbol:"RECHARGE"},{id:1,name:"购买课程",symbol:"BUY_COURSE"},{id:2,name:"上课签到",symbol:"SIGNIN_COURSE"},{id:3,name:"下课签退",symbol:"SIGNOUT_COURSE"},{id:4,name:"看视频课",symbol:"WATCH_VIDEO"},{id:5,name:"做作业",symbol:"DO_PAPER"},{id:6,name:"刷题",symbol:"REFRESH_EXERCISE"},{id:7,name:"献花",symbol:"PRESENT_FLOWER"},{id:8,name:"购买视频课",symbol:"BUY_VIDEO_COURSE"},{id:9,name:"购买鲜花",symbol:"BUY_FLOWER"},{id:10,name:"购买作业",symbol:"BUY_PAPER"}]);var m=l(21016),c={...m,...t}}}]);