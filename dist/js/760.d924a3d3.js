"use strict";(self["webpackChunkorange"]=self["webpackChunkorange"]||[]).push([[760,1066,6339,8720],{21013:function(e,t,s){s.d(t,{A:function(){return u}});var r=s(55583),a=s(18384);class u extends r.w{static getUserList(e,t){return super.post(a.x+"/upms/sysUser/list",e,t)}static addUser(e,t){return super.post(a.x+"/upms/sysUser/add",e,t)}static updateUser(e,t){return super.post(a.x+"/upms/sysUser/update",e,t)}static deleteUser(e,t){return super.post(a.x+"/upms/sysUser/delete",e,t)}static viewMenu(e,t){return super.post(a.x+"/upms/sysMenu/view",e,t)}static syncAzureUser(e){return super.post(a.x+"/upms/sysUser/syncAzureUser",e)}static getUser(e,t){return super.get(a.x+"/upms/sysUser/view",e,t)}static resetUserPassword(e,t){return super.post(a.x+"/upms/sysUser/resetPassword",e,t)}static listSysPermWithDetail(e,t){return super.get(a.x+"/upms/sysUser/listSysPermWithDetail",e,t)}static listSysPermCodeWithDetail(e,t){return super.get(a.x+"/upms/sysUser/listSysPermCodeWithDetail",e,t)}static listSysMenuWithDetail(e,t){return super.get(a.x+"/upms/sysUser/listSysMenuWithDetail",e,t)}}},54428:function(e,t,s){s.d(t,{v9:function(){return l},n5:function(){return i},lE:function(){return v},_4:function(){return h},C7:function(){return p},If:function(){return D},qY:function(){return o},ek:function(){return c},$z:function(){return d},$D:function(){return w},S_:function(){return g},fe:function(){return n},sV:function(){return m},r0:function(){return y.A}});s(18111),s(61701);var r=s(55583),a=s(52081),u=s(18384);class l extends r.w{static dictSysRole(e,t){return new Promise((s,r)=>{super.get(u.x+"/upms/sysRole/listDict",e,t).then(e=>{const t=new a.w("角色字典",e.data);s(t)}).catch(e=>{r(e)})})}static dictGlobalDict(e,t){return new Promise((s,r)=>{super.get(u.x+"/upms/globalDict/listDict",e,t).then(e=>{const t=new a.w("编码字典",(e.data||[]).map(e=>({...e,disabled:1===e.status})));s(t)}).catch(e=>{r(e)})})}static dictGlobalDictByIds(e,t){return new Promise((s,r)=>{super.get(u.x+"/upms/globalDict/listDictByIds",e,t).then(e=>{const t=new a.w("编码字典",e.data);s(t)}).catch(e=>{r(e)})})}static dictAllMenu(e,t){return new Promise((s,r)=>{super.get(u.x+"/upms/sysMenu/listDict",e,t).then(e=>{const t=new a.w("菜单字典",e.data);s(t)}).catch(e=>{r(e)})})}static dictSysMenu(e,t){return new Promise((s,r)=>{super.get(u.x+"/upms/sysMenu/listMenuDict",e,t).then(e=>{const t=new a.w("菜单字典",e.data);s(t)}).catch(e=>{r(e)})})}static dictDeptPost(e,t){return new Promise((s,r)=>{super.get(u.x+"/upms/sysDept/listSysDeptPostWithRelation",e,t).then(e=>{s(e.data)}).catch(e=>{r(e)})})}static dictSysPost(e,t){return new Promise((s,r)=>{super.get(u.x+"/upms/sysPost/listDict",e,t).then(e=>{const t=new a.w("岗位字典",e.data);s(t)}).catch(e=>{r(e)})})}static dictReportDblink(e,t){return new Promise((s,r)=>{super.get(u.x+"/report/reportDblink/listDict",e,t).then(e=>{const t=new a.w("数据库链接",e.data);s(t)}).catch(e=>{r(e)})})}static dictReportDict(e,t){return new Promise((s,r)=>{super.get(u.x+"/report/reportDict/listDict",e,t).then(e=>{const t=new a.w("字典管理",e.data);s(t)}).catch(e=>{r(e)})})}static dictSysUser(e,t){return new Promise((s,r)=>{super.get("/admin/upms/sysUser/listDict",e,t).then(e=>{let t=new a.w("用户字典",e.data);s(t)}).catch(e=>{r(e)})})}static dictSysDept(e,t){return new Promise((s,r)=>{super.get("/admin/upms/sysDept/listDict",e,t).then(e=>{let t=new a.w("部门字典",e.data);s(t)}).catch(e=>{r(e)})})}static dictSysDeptByParentId(e,t){return new Promise((s,r)=>{super.get("/admin/upms/sysDept/listDictByParentId",e,t).then(e=>{let t=new a.w("部门字典",e.data);s(t)}).catch(e=>{r(e)})})}}class i extends r.w{static listSysLoginUser(e,t){return super.post(u.x+"/upms/loginUser/list",e,t)}static deleteSysLoginUser(e,t){return super.post(u.x+"/upms/loginUser/delete",e,t)}}class n extends r.w{static getMenuPermList(e,t){return super.post(u.x+"/upms/sysMenu/list",e,t)}static addMenu(e,t){return super.post(u.x+"/upms/sysMenu/add",e,t)}static updateMenu(e,t){return super.post(u.x+"/upms/sysMenu/update",e,t)}static deleteMenu(e,t){return super.post(u.x+"/upms/sysMenu/delete",e,t)}static viewMenu(e,t){return super.get(u.x+"/upms/sysMenu/view",e,t)}static listMenuPermCode(e,t){return super.get(u.x+"/upms/sysMenu/listMenuPerm",e,t)}static listSysPermByMenuIdWithDetail(e,t){return super.get(u.x+"/upms/sysMenu/listSysPermWithDetail",e,t)}static listSysUserByMenuIdWithDetail(e,t){return super.get(u.x+"/upms/sysMenu/listSysUserWithDetail",e,t)}}class o extends r.w{static updateSysConf(e,t){return super.post(u.x+"/upms/sysConf/update",e,t)}static getSysConf(e,t){return super.get(u.x+"/upms/sysConf/view",e,t)}}class p extends r.w{static getPermCodeList(e,t){return super.get(u.x+"/upms/login/getAllPermCodes",e,t)}}class c extends r.w{static add(e,t){return super.post(u.x+"/upms/sysDataPerm/add",e,t)}static update(e,t){return super.post(u.x+"/upms/sysDataPerm/update",e,t)}static delete(e,t){return super.post(u.x+"/upms/sysDataPerm/delete",e,t)}static list(e,t){return super.post(u.x+"/upms/sysDataPerm/list",e,t)}static view(e,t){return super.get(u.x+"/upms/sysDataPerm/view",e,t)}static listDataPermUser(e,t){return super.post(u.x+"/upms/sysDataPerm/listDataPermUser",e,t)}static addDataPermUser(e,t){return super.post(u.x+"/upms/sysDataPerm/addDataPermUser",e,t)}static deleteDataPermUser(e,t){return super.post(u.x+"/upms/sysDataPerm/deleteDataPermUser",e,t)}static listNotInDataPermUser(e,t){return super.post(u.x+"/upms/sysDataPerm/listNotInDataPermUser",e,t)}}class d extends r.w{static list(e,t){return super.post(u.x+"/upms/sysDept/list",e,t)}static view(e,t){return super.get(u.x+"/upms/sysDept/view",e,t)}static export(e,t){return super.download(u.x+"/upms/sysDept/export",e,t)}static add(e,t){return super.post(u.x+"/upms/sysDept/add",e,t)}static update(e,t){return super.post(u.x+"/upms/sysDept/update",e,t)}static delete(e,t){return super.post(u.x+"/upms/sysDept/delete",e,t)}static listNotInSysDeptPost(e,t){return super.post(u.x+"/upms/sysDept/listNotInSysDeptPost",e,t)}static listSysDeptPost(e,t){return super.post(u.x+"/upms/sysDept/listSysDeptPost",e,t)}static addSysDeptPost(e,t){return super.post(u.x+"/upms/sysDept/addSysDeptPost",e,t)}static updateSysDeptPost(e,t){return super.post(u.x+"/upms/sysDept/updateSysDeptPost",e,t)}static deleteSysDeptPost(e,t){return super.post(u.x+"/upms/sysDept/deleteSysDeptPost",e,t)}static viewSysDeptPost(e,t){return super.get(u.x+"/upms/sysDept/viewSysDeptPost",e,t)}}class m extends r.w{static getRoleList(e,t){return super.post(u.x+"/upms/sysRole/list",e,t)}static getRole(e,t){return super.get(u.x+"/upms/sysRole/view",e,t)}static deleteRole(e,t){return super.post(u.x+"/upms/sysRole/delete",e,t)}static addRole(e,t){return super.post(u.x+"/upms/sysRole/add",e,t)}static updateRole(e,t){return super.post(u.x+"/upms/sysRole/update",e,t)}static listRoleUser(e,t){return super.post(u.x+"/upms/sysRole/listUserRole",e,t)}static listNotInUserRole(e,t){return super.post(u.x+"/upms/sysRole/listNotInUserRole",e,t)}static addRoleUser(e,t){return super.post(u.x+"/upms/sysRole/addUserRole",e,t)}static deleteRoleUser(e,t){return super.post(u.x+"/upms/sysRole/deleteUserRole",e,t)}}var y=s(21013);class g extends r.w{static list(e,t){return super.post(u.x+"/upms/sysPost/list",e,t)}static view(e,t){return super.get(u.x+"/upms/sysPost/view",e,t)}static add(e,t){return super.post(u.x+"/upms/sysPost/add",e,t)}static update(e,t){return super.post(u.x+"/upms/sysPost/update",e,t)}static delete(e,t){return super.post(u.x+"/upms/sysPost/delete",e,t)}}class v extends r.w{static list(e,t){return super.post(u.x+"/mobile/mobileEntry/list",e,t)}static view(e,t){return super.get(u.x+"/mobile/mobileEntry/view",e,t)}static add(e,t){return super.post(u.x+"/mobile/mobileEntry/add",e,t)}static update(e,t){return super.post(u.x+"/mobile/mobileEntry/update",e,t)}static delete(e,t){return super.post(u.x+"/mobile/mobileEntry/delete",e,t)}static uploadImage(e,t){return super.post(u.x+"/mobile/mobileEntry/uploadImage",e,t)}static downloadImage(e,t){return super.post(u.x+"/mobile/mobileEntry/downloadImage",e,t)}}var x=s(53155);class w{static list(e,t){return(0,x.bE)(u.x+"/upms/globalDict/list",e,t)}static listAll(e,t){return(0,x.Jt)(u.x+"/upms/globalDict/listAll",e,t)}static add(e,t){return(0,x.bE)(u.x+"/upms/globalDict/add",e,t)}static update(e,t){return(0,x.bE)(u.x+"/upms/globalDict/update",e,t)}static delete(e,t){return(0,x.bE)(u.x+"/upms/globalDict/delete",e,t)}static addItem(e,t){return(0,x.bE)(u.x+"/upms/globalDict/addItem",e,t)}static updateItem(e,t){return(0,x.bE)(u.x+"/upms/globalDict/updateItem",e,t)}static updateItemStatus(e,t){return(0,x.bE)(u.x+"/upms/globalDict/updateItemStatus",e,t)}static deleteItem(e,t){return(0,x.bE)(u.x+"/upms/globalDict/deleteItem",e,t)}static reloadCachedData(e,t){return(0,x.Jt)(u.x+"/upms/globalDict/reloadCachedData",e,t)}}class h extends r.w{static listSysOperationLog(e,t){return super.post(u.x+"/upms/sysOperationLog/list",e,t)}}class D extends r.w{static list(e,t){return super.post(u.x+"/commonext/bizwidget/list",e,t)}static viewByIds(e,t){return super.post(u.x+"/commonext/bizwidget/view",e,t)}}},60760:function(e,t,s){s.r(t),s.d(t,{default:function(){return P}});var r=s(25136),a=(s(97042),s(69957),s(69080)),u=(s(25374),s(76408)),l=(s(87535),s(21929)),i=(s(98421),s(65451)),n=(s(63390),s(32465),s(14022)),o=(s(72343),s(44114),s(18111),s(22489),s(61701),s(56768)),p=s(45130),c=s(90144),d=s(61473),m=s(99540),y=s(60265),g=s(54428),v=s(27007),x=s(71066);const w={style:{width:"100%"}};var h=(0,o.pM)({__name:"UserSelectDlg",props:{value:{},props:{default:()=>({label:"showName",value:"userId"})},multiple:{type:Boolean,default:!1},dialog:{},thirdParamsString:{},dialogKey:{}},setup(e){const t=e,{thirdParams:s,onCloseThirdDialog:h}=(0,x.P)(t),D=(0,c.KR)(),b=(0,c.Kh)({sysUserLoginName:void 0}),P=(0,c.KR)(),f=(0,o.EW)(()=>({value:t.value||s.value.value,props:t.props||null==s.value.props?t.props:s.value.props||{},multiple:t.multiple||null==s.value.multiple?t.multiple:s.value.multiple})),S=(0,o.EW)(()=>{let e=f.value.multiple&&Array.isArray(P.value)?(P.value||[]).map(e=>e[f.value.props.value]):(P.value||{})[f.value.props.value];return{highlight:!0,checkStrictly:!0,checkRowKeys:f.value.multiple?e:void 0,checkRowKey:f.value.multiple?void 0:e,showHeader:!1}}),U=()=>{null!=D.value&&Array.isArray(I.dataList)&&setTimeout(()=>{if(D.value.clearRadioRow(),D.value.clearCheckboxRow(),f.value.multiple)D.value.setCheckboxRow(I.dataList.filter(e=>null!=(0,v.PH)(P.value,e[f.value.props.value],f.value.props.value)),!0);else{let e=(0,v.PH)(I.dataList,(P.value||{})[f.value.props.value],f.value.props.value);D.value.setRadioRow(e)}},50)},k=e=>(e.widgetType="upms_user",e.filter={loginName:b.sysUserLoginName},new Promise((t,s)=>{g.If.list(e).then(e=>{t({dataList:e.data.dataList,totalCount:e.data.totalCount}),(0,o.dY)(()=>{U()})}).catch(e=>{s(e)})})),R=()=>!0,C={loadTableData:k,verifyTableParameter:R,paged:!0},I=(0,c.Kh)((0,y.K)(C)),M=(e=!1)=>{e?I.refreshTable(!0,1):I.refreshTable()},L=({checked:e,row:t})=>{f.value.multiple?null==t?(P.value=[],e&&(P.value=I.dataList)):(null==P.value&&(P.value=[]),e?P.value.push(t):P.value=P.value.filter(e=>e[f.value.props.value]!==t[f.value.props.value])):P.value=t},E=()=>{t.dialog?t.dialog.submit(P.value):h(!0,f.value.value,P.value)},W=()=>{t.dialog&&t.dialog.cancel()},_=({row:e})=>{if(f.value.multiple){const t=D.value.isCheckedByCheckboxRow(e);D.value.setCheckboxRow(e,!t),P.value||(P.value=[]),t?P.value=P.value.filter(t=>t[f.value.props.value]!==e[f.value.props.value]):P.value.push(e)}else D.value.setRadioRow(e),P.value=e};return(0,o.sV)(()=>{Array.isArray(f.value.value)&&f.value.value.length>0&&(f.value.multiple?P.value=f.value.value.map(e=>({...e})):P.value={...f.value.value[0]}),M(!0)}),(e,t)=>{const s=n.WK,y=l.xE,g=i.S2,v=l.US,x=u.uD,h=a.aQ,P=r.S2;return(0,o.uX)(),(0,o.CE)("div",w,[(0,o.bF)(v,{ref:"formSysUser",model:b,"label-width":"75px",size:"default","label-position":"right",onSubmit:t[2]||(t[2]=(0,p.D$)(()=>{},["prevent"]))},{default:(0,o.k6)(()=>[(0,o.bF)(g,{type:"flex",justify:"space-between"},{default:(0,o.k6)(()=>[(0,o.bF)(y,{label:"登录名称",prop:"sysUserLoginName"},{default:(0,o.k6)(()=>[(0,o.bF)(s,{modelValue:b.sysUserLoginName,"onUpdate:modelValue":t[0]||(t[0]=e=>b.sysUserLoginName=e),style:{width:"200px"},clearable:!0,placeholder:"登录名称",onChange:t[1]||(t[1]=e=>M(!0))},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model"]),(0,o.bF)(g,null,{default:(0,o.k6)(()=>[(0,o.bF)(x,{span:24},{default:(0,o.k6)(()=>[(0,o.bF)((0,c.R1)(m.CP),{ref_key:"table",ref:D,"row-id":f.value.props.value,data:I.dataList,height:"468","show-overflow":"title","show-header-overflow":"title","row-config":{height:35,isHover:!0},"radio-config":{highlight:!0},"checkbox-config":S.value,onRadioChange:L,onCheckboxChange:L,onCheckboxAll:L,onCellClick:_},{empty:(0,o.k6)(()=>t[3]||(t[3]=[(0,o.Lk)("div",{class:"table-empty unified-font"},[(0,o.Lk)("img",{src:d}),(0,o.Lk)("span",null,"暂无数据")],-1)])),default:(0,o.k6)(()=>[(0,o.bF)((0,c.R1)(m.Wq),{type:f.value.multiple?"checkbox":"radio",width:50},null,8,["type"]),(0,o.bF)((0,c.R1)(m.Wq),{title:"用户名",field:"loginName"}),(0,o.bF)((0,c.R1)(m.Wq),{title:"昵称",field:"showName"}),(0,o.bF)((0,c.R1)(m.Wq),{title:"所属部门",field:"deptIdDictMap.name"})]),_:1},8,["row-id","data","checkbox-config"])]),_:1}),(0,o.bF)(x,{span:24},{default:(0,o.k6)(()=>[(0,o.bF)(g,{type:"flex",justify:"space-between",style:{"margin-top":"12px"}},{default:(0,o.k6)(()=>[(0,o.bF)(h,{total:I.totalCount,"current-page":I.currentPage,"page-size":I.pageSize,layout:"total, prev, pager, next",onCurrentChange:I.onCurrentPageChange,onSizeChange:I.onPageSizeChange},null,8,["total","current-page","page-size","onCurrentChange","onSizeChange"]),(0,o.Lk)("div",null,[(0,o.bF)(P,{onClick:W},{default:(0,o.k6)(()=>t[4]||(t[4]=[(0,o.eW)("取消")])),_:1,__:[4]}),(0,o.bF)(P,{type:"primary",onClick:E},{default:(0,o.k6)(()=>t[5]||(t[5]=[(0,o.eW)("确认选择")])),_:1,__:[5]})])]),_:1})]),_:1})]),_:1})])}}}),D=s(71241);const b=(0,D.A)(h,[["__scopeId","data-v-66825c4e"]]);var P=b},61473:function(e,t,s){e.exports=s.p+"img/empty.7e47f88a.png"},71066:function(e,t,s){s.d(t,{P:function(){return i},i:function(){return n}});var r=s(81387),a=s(27007),u=s(56768),l=s(90144);const i=e=>{console.log("接收到的第三方参数",e);const t=(0,l.KR)(0),s=(0,u.EW)(()=>{let t={};try{e.thirdParamsString&&(t=JSON.parse(e.thirdParamsString))}catch(s){console.log(s),t={}}return t});console.log("thirdParams",s);const r=(r,a,u)=>{console.log("onCloseThirdDialog",a,u),window.parent&&window.parent.postMessage({type:"closeDialog",data:{index:t.value,dialogKey:e.dialogKey,path:s.value.path,rowData:a?JSON.parse(JSON.stringify(a)):void 0,data:u?JSON.parse(JSON.stringify(u)):void 0,isSuccess:r}},"*")},i=(e,s)=>{switch(e){case"setToken":s.token&&(0,a.WG)(s.token);break;case"dialogIndex":t.value=s;break;case"refreshData":break;case"message":break}},n=e=>{i(e.data.type,e.data.data)};return(0,u.sV)(()=>{console.log("onMounted message"),window.addEventListener("message",n,!1)}),(0,u.hi)(()=>{console.log("onUnmounted message"),window.removeEventListener("message",n)}),{thirdParams:s,onCloseThirdDialog:r}},n=()=>{let e;const t=(0,r.lq)(),s=()=>{window.parent&&window.parent.postMessage({type:"refreshToken"},"*")};-1!==t.path.indexOf("/thirdParty/")&&((0,u.sV)(()=>{(0,a.R7)()&&(e=setInterval(()=>{console.log("refreshToken thirdParty"),s()},18e4))}),(0,u.hi)(()=>{e&&clearInterval(e)}))}}}]);