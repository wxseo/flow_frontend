"use strict";(self["webpackChunkorange"]=self["webpackChunkorange"]||[]).push([[7021],{30058:function(e,t,a){a.d(t,{A:function(){return h}});var i=a(65451),l=(a(97042),a(63390),a(91542)),n=(a(37985),a(25136)),r=(a(69957),a(76408)),o=(a(87535),a(18111),a(22489),a(56768)),d=a(90144),s=a(24232),c=a(57477);const u={style:{"margin-right":"4px","font-size":"14px"}},p={key:2,style:{"flex-grow":"1","min-width":"10px"}};var f=(0,o.pM)({__name:"index",props:{hasSearch:{type:Boolean,default:!0},hasReset:{type:Boolean,default:!0}},emits:["reset","search"],setup(e,{emit:t}){const a=(0,o.Ht)(),f=t,m=(0,d.KR)(!1),y=()=>{f("search")},h=()=>{f("reset")},g=(0,o.EW)(()=>{let e=a.default?a.default():[];return e.filter(e=>e.type&&e.type.name&&null!==e.type.name)}),k=(0,o.EW)(()=>{if(m.value){let e=g.value.length%4;return 0===e?24:6*(4-e)}return g.value.length<=3?6*(4-g.value.length):6});return(0,o.sV)(()=>{null!=a.operation&&(m.value=!0)}),(e,t)=>{const f=r.uD,F=n.S2,b=l.tk,v=i.S2;return(0,o.uX)(),(0,o.Wv)(v,{class:"flex-box",type:"flex"},{default:(0,o.k6)(()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)((0,d.R1)(g),(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,{key:t},[t<((0,d.R1)(m)?(0,d.R1)(g).length:3)?((0,o.uX)(),(0,o.Wv)(f,{key:0,span:6},{default:(0,o.k6)(()=>[((0,o.uX)(),(0,o.Wv)((0,o.$y)(e),{style:{width:"100%"}}))]),_:2},1024)):(0,o.Q3)("",!0)],64))),128)),e.hasSearch?((0,o.uX)(),(0,o.Wv)(f,{key:0,span:(0,d.R1)(k),class:"search-box"},{default:(0,o.k6)(()=>[(0,o.bF)(v,{type:"flex",align:"middle"},{default:(0,o.k6)(()=>[(0,o.bF)(F,{class:"search-btn",type:"default",plain:"",onClick:y,icon:(0,d.R1)(c.Search)},{default:(0,o.k6)(()=>t[1]||(t[1]=[(0,o.eW)(" 查询 ")])),_:1,__:[1]},8,["icon"]),e.hasReset?((0,o.uX)(),(0,o.Wv)(F,{key:0,type:"default",plain:"",onClick:h,style:{width:"72px"}},{default:(0,o.k6)(()=>t[2]||(t[2]=[(0,o.eW)("重置")])),_:1,__:[2]})):(0,o.Q3)("",!0),(0,d.R1)(g).length>3&&null==(0,d.R1)(a).operation?((0,o.uX)(),(0,o.Wv)(v,{key:1,type:"flex",align:"middle",class:"expand-btn",onClick:t[0]||(t[0]=e=>m.value=!(0,d.R1)(m))},{default:(0,o.k6)(()=>[(0,o.Lk)("span",u,(0,s.v_)((0,d.R1)(m)?"收起":"展开"),1),(0,o.bF)(b,null,{default:(0,o.k6)(()=>[(0,d.R1)(m)?((0,o.uX)(),(0,o.Wv)((0,d.R1)(c.ArrowUp),{key:0})):((0,o.uX)(),(0,o.Wv)((0,d.R1)(c.ArrowDown),{key:1}))]),_:1})]),_:1})):(0,o.Q3)("",!0),(0,d.R1)(a).operation?((0,o.uX)(),(0,o.CE)("div",p)):(0,o.Q3)("",!0),(0,o.RG)(e.$slots,"operation")]),_:3})]),_:3},8,["span"])):(0,o.Q3)("",!0)]),_:3})}}}),m=a(71241);const y=(0,m.A)(f,[["__scopeId","data-v-3d53564d"]]);var h=y},96515:function(e,t,a){a.r(t),a.d(t,{default:function(){return R}});var i=a(70944),l=a(65451),n=(a(97042),a(63390),a(69080)),r=(a(25374),a(12687)),o=(a(31112),a(25136)),d=(a(69957),a(21929)),s=(a(98421),a(30058)),c=a(14022),u=(a(72343),a(32465),a(85415)),p=(a(22243),a(7409),a(18111),a(7588),a(61701),a(56768)),f=a(90144),m=a(45130),y=a(24232),h=a(57477),g=a(164),k=a(26695),F=a(36947),b=a(8588),v=a(36525),_=a(71066),S=a(82572),C=a(69550);const x={style:{position:"relative"}},T={name:"formOnlineDict"};var z=(0,p.pM)({...T,setup(e){const t=(0,S.l5)();(0,_.i)();const{useTable:a,Dialog:T}=(0,b.x)(),z=(0,f.KR)(),w=(0,f.KR)([]),R=()=>{w.value=[],F.S1.list({}).then(e=>{e.data.dataList.forEach(e=>{try{let t=JSON.parse(e.dictDataJson);e.dialogSetting=t.dialogSetting}catch(t){console.log("字典数据解析失败",t)}}),w.value=e.data.dataList})},D=e=>(e={...e,onlineDictDtoFilter:{dictName:N.formFilterCopy.dictName,dictType:N.formFilterCopy.dictType}},new Promise((t,a)=>{F.S1.list(e).then(e=>{e.data.dataList.forEach(e=>{try{let t=JSON.parse(e.dictDataJson);e.dialogSetting=t.dialogSetting}catch(t){console.log("字典数据解析失败",t)}}),t({dataList:e.data.dataList.map(e=>({...e})),totalCount:e.data.totalCount})}).catch(e=>{a(e)})})),I=()=>(N.formFilterCopy.dictName=N.formFilter.dictName,N.formFilterCopy.dictType=N.formFilter.dictType,!0),W={loadTableData:D,verifyTableParameter:I,paged:!0},N=(0,f.Kh)({formFilter:{dictName:void 0,dictType:void 0},formFilterCopy:{dictName:void 0,dictType:void 0},dict:{impl:a(W)},isInit:!1}),X=e=>{e?N.dict.impl.refreshTable(!0,1):N.dict.impl.refreshTable(),N.isInit,N.isInit=!0},E=()=>{z.value.resetFields(),X(!0)},L=e=>{switch(e){case v.SysOnlineDictType.TABLE:return"success";case v.SysOnlineDictType.URL:return"primary";case v.SysOnlineDictType.STATIC:return"warning";case v.SysOnlineDictType.CUSTOM:return"danger";default:return"info"}},O=()=>{T.show("新建字典",C["default"],{area:"600px",offset:"100px"},{dictList:w.value},{pathName:"/thirdParty/thirdEditOnlineDict"}).then(e=>{N.dict.impl.refreshTable(),R()}).catch(e=>{console.warn(e)})},P=e=>{T.show("编辑字典",C["default"],{area:"600px",offset:"100px"},{dictId:e.dictId,dictList:w.value},{pathName:"/thirdParty/thirdEditOnlineDict"}).then(e=>{N.dict.impl.refreshTable(),R()}).catch(e=>{console.warn(e)})},A=e=>{g.s.confirm(`是否删除字典【${e.dictName}】？`,"",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(t=>{let a={dictId:e.dictId};return F.S1.delete(a)}).then(e=>{k.nk.success("删除成功！"),N.dict.impl.refreshTable(),R()}).catch(e=>{console.warn(e)})},V=()=>{X(!1),R()};return(0,p.sV)(()=>{V()}),(e,a)=>{const g=u.P9,k=u.AV,F=d.xE,b=c.WK,_=s.A,S=d.US,C=o.S2,T=(0,p.g2)("vxe-column"),w=r.u,R=n.aQ,D=l.S2,I=i.A;return(0,p.uX)(),(0,p.CE)("div",x,[(0,p.bF)(S,{ref_key:"form",ref:z,model:N,"label-width":"80px",size:(0,f.R1)(t).defaultFormItemSize,"label-position":"right",onSubmit:a[3]||(a[3]=(0,m.D$)(()=>{},["prevent"]))},{default:(0,p.k6)(()=>[(0,p.bF)(_,{"item-width":350,onSearch:a[2]||(a[2]=e=>X(!0)),onReset:E},{default:(0,p.k6)(()=>[(0,p.bF)(F,{label:"字典类型",prop:"formFilter.dictType"},{default:(0,p.k6)(()=>[(0,p.bF)(k,{class:"filter-item",modelValue:N.formFilter.dictType,"onUpdate:modelValue":a[0]||(a[0]=e=>N.formFilter.dictType=e),placeholder:"",clearable:""},{default:(0,p.k6)(()=>[((0,p.uX)(!0),(0,p.CE)(p.FK,null,(0,p.pI)((0,f.R1)(v.SysOnlineDictType).getList(),e=>((0,p.uX)(),(0,p.Wv)(g,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),(0,p.bF)(F,{label:"字典名称",prop:"formFilter.dictName"},{default:(0,p.k6)(()=>[(0,p.bF)(b,{class:"filter-item",modelValue:N.formFilter.dictName,"onUpdate:modelValue":a[1]||(a[1]=e=>N.formFilter.dictName=e),clearable:!0,placeholder:"字典名称"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model","size"]),(0,p.bF)(I,{class:"page-table",data:N.dict.impl.dataList,onSortChange:N.dict.impl.onSortChange,onRefresh:a[5]||(a[5]=e=>X(!0)),"seq-config":{startIndex:(N.dict.impl.currentPage-1)*N.dict.impl.pageSize}},{operator:(0,p.k6)(()=>[(0,p.bF)(C,{type:"primary",icon:(0,f.R1)(h.Plus),size:(0,f.R1)(t).defaultFormItemSize,onClick:a[4]||(a[4]=e=>O())},{default:(0,p.k6)(()=>a[6]||(a[6]=[(0,p.eW)("新建")])),_:1,__:[6]},8,["icon","size"])]),pagination:(0,p.k6)(()=>[(0,p.bF)(D,{type:"flex",justify:"end",style:{"margin-top":"16px"}},{default:(0,p.k6)(()=>[(0,p.bF)(R,{total:N.dict.impl.totalCount,"current-page":N.dict.impl.currentPage,"page-size":N.dict.impl.pageSize,"page-sizes":[10,20,50,100],layout:"total, prev, pager, next, sizes",onCurrentChange:N.dict.impl.onCurrentPageChange,onSizeChange:N.dict.impl.onPageSizeChange},null,8,["total","current-page","page-size","onCurrentChange","onSizeChange"])]),_:1})]),default:(0,p.k6)(()=>[(0,p.bF)(T,{title:"序号",type:"seq",width:"55px",index:N.dict.impl.getTableIndex},null,8,["index"]),(0,p.bF)(T,{title:"字典名称",field:"dictName"}),(0,p.bF)(T,{title:"字典类型",field:"dictTypeDictMap.name"},{default:(0,p.k6)(e=>[(0,p.bF)(w,{size:(0,f.R1)(t).defaultFormItemSize,type:L(e.row.dictType)},{default:(0,p.k6)(()=>[(0,p.eW)((0,y.v_)(e.row.dictTypeDictMap.name),1)]),_:2},1032,["size","type"])]),_:1}),(0,p.bF)(T,{title:"是否树字典"},{default:(0,p.k6)(e=>[(0,p.bF)(w,{size:(0,f.R1)(t).defaultFormItemSize,type:e.row.treeFlag?"success":"danger"},{default:(0,p.k6)(()=>[(0,p.eW)((0,y.v_)(e.row.treeFlag?"是":"否"),1)]),_:2},1032,["size","type"])]),_:1}),(0,p.bF)(T,{title:"弹窗设置"},{default:(0,p.k6)(t=>[(0,p.bF)(w,{size:e.defaultFormItemSize,type:t.row.dialogSetting?"success":"danger"},{default:(0,p.k6)(()=>[(0,p.eW)((0,y.v_)(t.row.dialogSetting?"是":"否"),1)]),_:2},1032,["size","type"])]),_:1}),(0,p.bF)(T,{title:"操作",fixed:"right",width:"100px"},{default:(0,p.k6)(e=>[(0,p.bF)(C,{onClick:(0,m.D$)(t=>P(e.row),["stop"]),link:"",type:"primary",size:(0,f.R1)(t).defaultFormItemSize},{default:(0,p.k6)(()=>a[7]||(a[7]=[(0,p.eW)(" 编辑 ")])),_:2,__:[7]},1032,["onClick","size"]),(0,p.bF)(C,{onClick:(0,m.D$)(t=>A(e.row),["stop"]),type:"danger",link:"",size:(0,f.R1)(t).defaultFormItemSize},{default:(0,p.k6)(()=>a[8]||(a[8]=[(0,p.eW)(" 删除 ")])),_:2,__:[8]},1032,["onClick","size"])]),_:1})]),_:1},8,["data","onSortChange","seq-config"])])}}});const w=z;var R=w}}]);