"use strict";(self["webpackChunkorange"]=self["webpackChunkorange"]||[]).push([[1456],{1456:function(e,l,t){t.r(l),t.d(l,{default:function(){return K}});var a=t(77195),n=(t(97042),t(38389),t(12687)),u=(t(31112),t(21929)),o=(t(98421),t(30058)),d=(t(32465),t(85415)),i=(t(22243),t(7409),t(61688),t(70944)),r=t(25136),s=(t(69957),t(18111),t(61701),t(56768)),m=t(90144),c=t(24232),p=t(45130),f=t(57477),b=t(164),h=t(9009),k=t(54898),y=t(21016),_=t(27007),g=t(90450),v=t(65451),R=(t(63390),t(27385)),F=t(77649),w=(t(87603),t(76408)),S=(t(87535),t(14022)),x=(t(72343),t(26695)),I=t(54428),z=t(82572),W=(0,s.pM)({__name:"editColumn",props:{columnId:{},columnName:{},showOrder:{},icon:{},dialog:{}},setup(e){const l=(0,z.l5)(),t=e,a=(0,s.EW)(()=>l.defaultFormItemSize),n=(0,m.KR)(),o=(0,m.KR)({menuId:t.columnId,parentId:void 0,menuName:t.columnName,showOrder:t.showOrder,menuType:y.SysMenuType.DIRECTORY,icon:t.icon}),d={menuName:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],showOrder:[{required:!0,message:"请输入菜单显示顺序",trigger:"blur"}]},i=(0,s.EW)(()=>null!=o.value.menuId),c=()=>{t.dialog&&t.dialog.cancel()},f=()=>{console.log("onSubmit"),n.value.validate(e=>{if(e){if(t.dialog){let e={};e.sysMenuDto={...o.value},i.value?I.fe.updateMenu(e).then(e=>{x.nk.success("编辑成功"),t.dialog.submit(e)}).catch(e=>{console.error(e)}):I.fe.addMenu(e).then(e=>{x.nk.success("添加成功"),t.dialog.submit(e)}).catch(e=>{console.error(e)})}}else console.log("表单验证失败")})};return(e,l)=>{const t=S.WK,i=u.xE,b=w.uD,h=F.lq,k=R.A,y=v.S2,_=r.S2,g=u.US;return(0,s.uX)(),(0,s.Wv)(g,{ref_key:"form",ref:n,model:(0,m.R1)(o),rules:d,"label-width":"80px",size:(0,m.R1)(a),"label-position":"right",onSubmit:l[3]||(l[3]=(0,p.D$)(()=>{},["prevent"]))},{default:(0,s.k6)(()=>[(0,s.bF)(y,{gutter:20,class:"full-width-input"},{default:(0,s.k6)(()=>[(0,s.bF)(b,{span:24},{default:(0,s.k6)(()=>[(0,s.bF)(i,{label:"栏目名称",prop:"menuName"},{default:(0,s.k6)(()=>[(0,s.bF)(t,{modelValue:(0,m.R1)(o).menuName,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,m.R1)(o).menuName=e),placeholder:"栏目名称",clearable:"",maxlength:"30"},null,8,["modelValue"])]),_:1})]),_:1}),(0,s.bF)(b,{span:24},{default:(0,s.k6)(()=>[(0,s.bF)(i,{label:"显示顺序",prop:"showOrder"},{default:(0,s.k6)(()=>[(0,s.bF)(h,{modelValue:(0,m.R1)(o).showOrder,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,m.R1)(o).showOrder=e),"controls-position":"right",min:1,max:99999,placeholder:"请输入显示顺序"},null,8,["modelValue"])]),_:1})]),_:1}),(0,s.bF)(b,{span:24},{default:(0,s.k6)(()=>[(0,s.bF)(i,{label:"栏目图标",prop:"icon"},{default:(0,s.k6)(()=>[(0,s.bF)(k,{value:(0,m.R1)(o).icon,"onUpdate:value":l[2]||(l[2]=e=>(0,m.R1)(o).icon=e),height:28},null,8,["value"])]),_:1})]),_:1})]),_:1}),(0,s.bF)(y,{type:"flex",justify:"end",class:"dialog-btn-layer mt20"},{default:(0,s.k6)(()=>[(0,s.bF)(_,{plain:!0,onClick:c},{default:(0,s.k6)(()=>l[4]||(l[4]=[(0,s.eW)("取消")])),_:1,__:[4]}),(0,s.bF)(_,{type:"primary",onClick:f},{default:(0,s.k6)(()=>l[5]||(l[5]=[(0,s.eW)("确定")])),_:1,__:[5]})]),_:1})]),_:1},8,["model","size"])}}});const C=W;var M=C,N=t(31372),T=t(56903);const E={class:"tab-dialog-box",style:{position:"relative"}},X={name:"formSysMenu"};var V=(0,s.pM)({...X,setup(e){const{checkPermCodeExist:l}=(0,k.S)(),t=(0,m.KR)("fragmentSysColumn"),v=(0,m.KR)();let R=[];const F=(0,m.KR)([]),w=(0,z.l5)(),S=(0,s.WQ)("mainContextHeight",document.documentElement.clientHeight),x=(0,s.EW)(()=>{if(!v.value)return[];for(let e=0;e<F.value.length;e++)if(F.value[e].menuId===v.value)return F.value[e].children;return[]}),W=(0,s.EW)(()=>F.value.map(e=>({menuId:e.menuId,menuName:e.menuName,columnId:e.menuId,columnName:e.menuName,icon:e.icon,showOrder:e.showOrder}))),{getMenuType:C}=(0,T.I)(),X=()=>{N.l.show("新建",M,{area:["500px"]},{}).then(()=>{U()}).catch(e=>{console.log(e)})},V=e=>{N.l.show("编辑",M,{area:["500px"]},{...e}).then(()=>{U()}).catch(e=>{console.log(e)})},A=()=>{let e={parentId:v.value,menuList:R};N.l.show("新建",g.A,{area:["944px","650px"]},e).then(()=>{U()}).catch(e=>{console.log(e)})},O=e=>{I.fe.viewMenu({menuId:e.menuId}).then(l=>{let t={rowData:l.data,menuId:e.menuId,menuList:R};N.l.show("编辑",g.A,{area:["944px","650px"]},t).then(()=>{U()}).catch(e=>{console.log(e)})}).catch(e=>{console.log(e)})},K=e=>{let l={parentId:e.menuId,menuList:R};N.l.show("添加子菜单",g.A,{area:["900px","650px"]},l).then(()=>{U()}).catch(e=>{console.log(e)})},D=(e,l)=>{let t={menuId:e.menuId};b.s.confirm(`是否删除${1==l?"栏目":"菜单项"}【${e.menuName}】？`,"",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{I.fe.deleteMenu(t).then(()=>{U()}).catch(e=>{console.log(e)})}).catch(e=>{console.log(e)})},U=()=>{I.fe.getMenuPermList({}).then(e=>{R=e.data.map(e=>({...e})),F.value=(0,_.BN)(e.data,"menuId");let l=v.value;v.value=void 0;for(let t=0;t<F.value.length;t++)F.value[t].menuType===y.SysMenuType.DIRECTORY&&(null==v.value&&(v.value=F.value[t].menuId),F.value[t].menuId===l&&(v.value=l))}).catch(e=>{console.log(e)})};return(0,s.sV)(()=>{U()}),(e,b)=>{const k=r.S2,_=(0,s.g2)("vxe-column"),g=i.A,R=a.v$,F=d.P9,I=d.AV,z=u.xE,M=o.A,N=u.US,T=n.u,Q=a.q;return(0,s.uX)(),(0,s.CE)("div",E,[(0,s.bF)(Q,{modelValue:(0,m.R1)(t),"onUpdate:modelValue":b[4]||(b[4]=e=>(0,m.i9)(t)?t.value=e:null)},{default:(0,s.k6)(()=>[(0,s.bF)(R,{label:"栏目管理",name:"fragmentSysColumn",style:{width:"100%"}},{default:(0,s.k6)(()=>[(0,s.Lk)("div",{class:"tab-content-box",style:(0,c.Tr)("min-height:"+((0,m.R1)(S)-76)+"px")},[(0,s.bF)(g,{class:"border-bottom-0 page-table",data:(0,m.R1)(W),size:(0,m.R1)(w).defaultFormItemSize,onRefresh:U},{operator:(0,s.k6)(()=>[(0,s.bF)(k,{type:"primary",icon:(0,m.R1)(f.Plus),size:(0,m.R1)(w).defaultFormItemSize,disabled:!(0,m.R1)(l)("formSysMenu:fragmentSysMenu:add"),onClick:b[0]||(b[0]=e=>X())},{default:(0,s.k6)(()=>b[5]||(b[5]=[(0,s.eW)(" 新建 ")])),_:1,__:[5]},8,["icon","size","disabled"])]),default:(0,s.k6)(()=>[(0,s.bF)(_,{title:"序号",type:"seq",width:"55px"}),(0,s.bF)(_,{title:"栏目名称",field:"columnName"}),(0,s.bF)(_,{title:"栏目图标",field:"icon"},{default:(0,s.k6)(e=>[e.row.icon?((0,s.uX)(),(0,s.Wv)(h.A,{key:0,icon:e.row.icon},null,8,["icon"])):(0,s.Q3)("",!0)]),_:1}),(0,s.bF)(_,{title:"显示顺序",field:"showOrder"}),(0,s.bF)(_,{title:"操作",width:"100px"},{default:(0,s.k6)(e=>[(0,s.bF)(k,{onClick:l=>V(e.row),type:"primary",link:"",size:(0,m.R1)(w).defaultFormItemSize,disabled:!(0,m.R1)(l)("formSysMenu:fragmentSysMenu:update")},{default:(0,s.k6)(()=>b[6]||(b[6]=[(0,s.eW)(" 编辑 ")])),_:2,__:[6]},1032,["onClick","size","disabled"]),(0,s.bF)(k,{onClick:l=>D(e.row,1),link:"",type:"danger",size:(0,m.R1)(w).defaultFormItemSize,disabled:!(0,m.R1)(l)("formSysMenu:fragmentSysMenu:delete")},{default:(0,s.k6)(()=>b[7]||(b[7]=[(0,s.eW)(" 删除 ")])),_:2,__:[7]},1032,["onClick","size","disabled"])]),_:1})]),_:1},8,["data","size"])],4)]),_:1}),(0,s.bF)(R,{label:"菜单管理",name:"fragmentSysMenu",style:{width:"100%"}},{default:(0,s.k6)(()=>[(0,s.Lk)("div",{class:"tab-content-box",style:(0,c.Tr)("min-height:"+((0,m.R1)(S)-76)+"px")},[(0,s.bF)(N,{"label-width":"80px",size:(0,m.R1)(w).defaultFormItemSize,"label-position":"right",onSubmit:b[2]||(b[2]=(0,p.D$)(()=>{},["prevent"]))},{default:(0,s.k6)(()=>[(0,s.bF)(M,{"item-width":350,hasSearch:!1},{default:(0,s.k6)(()=>[(0,s.bF)(z,{label:"所属栏目",style:{"flex-grow":"1"}},{default:(0,s.k6)(()=>[(0,s.bF)(I,{class:"filter-item",modelValue:(0,m.R1)(v),"onUpdate:modelValue":b[1]||(b[1]=e=>(0,m.i9)(v)?v.value=e:null),filterable:"",placeholder:"所属栏目"},{default:(0,s.k6)(()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,m.R1)(W),e=>((0,s.uX)(),(0,s.Wv)(F,{key:e.columnId,value:e.columnId,label:e.columnName},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["size"]),(0,s.bF)(g,{data:(0,m.R1)(x),size:(0,m.R1)(w).defaultFormItemSize,"tree-config":{rowField:"menuId",parentField:"parentId"},onRefresh:U,class:"border-bottom-0 page-table"},{operator:(0,s.k6)(()=>[(0,s.bF)(k,{type:"primary",icon:(0,m.R1)(f.Plus),size:(0,m.R1)(w).defaultFormItemSize,disabled:!(0,m.R1)(l)("formSysMenu:fragmentSysMenu:add"),onClick:b[3]||(b[3]=e=>A())},{default:(0,s.k6)(()=>b[8]||(b[8]=[(0,s.eW)(" 新建 ")])),_:1,__:[8]},8,["icon","size","disabled"])]),default:(0,s.k6)(()=>[(0,s.bF)(_,{title:"菜单名称",field:"menuName",width:"300px","tree-node":""}),(0,s.bF)(_,{title:"菜单图标",field:"icon",width:"100px"},{default:(0,s.k6)(e=>[e.row.icon?((0,s.uX)(),(0,s.Wv)(h.A,{key:0,icon:e.row.icon},null,8,["icon"])):(0,s.Q3)("",!0)]),_:1}),(0,s.bF)(_,{title:"菜单顺序",field:"showOrder",width:"100px"}),(0,s.bF)(_,{title:"菜单类型",field:"menuType",width:"100px"},{default:(0,s.k6)(e=>[(0,s.bF)(T,{size:(0,m.R1)(w).defaultFormItemSize,type:(0,m.R1)(C)(e.row)},{default:(0,s.k6)(()=>[(0,s.eW)((0,c.v_)((0,m.R1)(y.SysMenuType).getValue(e.row.menuType)),1)]),_:2},1032,["size","type"])]),_:1}),(0,s.bF)(_,{title:"菜单路由",field:"formRouterName","min-width":"250px"}),(0,s.bF)(_,{title:"操作",width:"220px"},{default:(0,s.k6)(e=>[(0,s.bF)(k,{onClick:l=>O(e.row),type:"primary",link:"",size:(0,m.R1)(w).defaultFormItemSize,disabled:!(0,m.R1)(l)("formSysMenu:fragmentSysMenu:update")},{default:(0,s.k6)(()=>b[9]||(b[9]=[(0,s.eW)(" 编辑 ")])),_:2,__:[9]},1032,["onClick","size","disabled"]),(0,s.bF)(k,{onClick:l=>K(e.row),type:"primary",link:"",size:(0,m.R1)(w).defaultFormItemSize,disabled:!(0,m.R1)(l)("formSysMenu:fragmentSysMenu:add")||e.row.menuType===(0,m.R1)(y.SysMenuType).BUTTON},{default:(0,s.k6)(()=>b[10]||(b[10]=[(0,s.eW)(" 添加 ")])),_:2,__:[10]},1032,["onClick","size","disabled"]),(0,s.bF)(k,{onClick:l=>D(e.row,2),link:"",type:"danger",size:(0,m.R1)(w).defaultFormItemSize,disabled:!(0,m.R1)(l)("formSysMenu:fragmentSysMenu:delete")},{default:(0,s.k6)(()=>b[11]||(b[11]=[(0,s.eW)(" 删除 ")])),_:2,__:[11]},1032,["onClick","size","disabled"])]),_:1})]),_:1},8,["data","size"])],4)]),_:1})]),_:1},8,["modelValue"])])}}}),A=t(71241);const O=(0,A.A)(V,[["__scopeId","data-v-5c0bf802"]]);var K=O},30058:function(e,l,t){t.d(l,{A:function(){return h}});var a=t(65451),n=(t(97042),t(63390),t(91542)),u=(t(37985),t(25136)),o=(t(69957),t(76408)),d=(t(87535),t(18111),t(22489),t(56768)),i=t(90144),r=t(24232),s=t(57477);const m={style:{"margin-right":"4px","font-size":"14px"}},c={key:2,style:{"flex-grow":"1","min-width":"10px"}};var p=(0,d.pM)({__name:"index",props:{hasSearch:{type:Boolean,default:!0},hasReset:{type:Boolean,default:!0}},emits:["reset","search"],setup(e,{emit:l}){const t=(0,d.Ht)(),p=l,f=(0,i.KR)(!1),b=()=>{p("search")},h=()=>{p("reset")},k=(0,d.EW)(()=>{let e=t.default?t.default():[];return e.filter(e=>e.type&&e.type.name&&null!==e.type.name)}),y=(0,d.EW)(()=>{if(f.value){let e=k.value.length%4;return 0===e?24:6*(4-e)}return k.value.length<=3?6*(4-k.value.length):6});return(0,d.sV)(()=>{null!=t.operation&&(f.value=!0)}),(e,l)=>{const p=o.uD,_=u.S2,g=n.tk,v=a.S2;return(0,d.uX)(),(0,d.Wv)(v,{class:"flex-box",type:"flex"},{default:(0,d.k6)(()=>[((0,d.uX)(!0),(0,d.CE)(d.FK,null,(0,d.pI)((0,i.R1)(k),(e,l)=>((0,d.uX)(),(0,d.CE)(d.FK,{key:l},[l<((0,i.R1)(f)?(0,i.R1)(k).length:3)?((0,d.uX)(),(0,d.Wv)(p,{key:0,span:6},{default:(0,d.k6)(()=>[((0,d.uX)(),(0,d.Wv)((0,d.$y)(e),{style:{width:"100%"}}))]),_:2},1024)):(0,d.Q3)("",!0)],64))),128)),e.hasSearch?((0,d.uX)(),(0,d.Wv)(p,{key:0,span:(0,i.R1)(y),class:"search-box"},{default:(0,d.k6)(()=>[(0,d.bF)(v,{type:"flex",align:"middle"},{default:(0,d.k6)(()=>[(0,d.bF)(_,{class:"search-btn",type:"default",plain:"",onClick:b,icon:(0,i.R1)(s.Search)},{default:(0,d.k6)(()=>l[1]||(l[1]=[(0,d.eW)(" 查询 ")])),_:1,__:[1]},8,["icon"]),e.hasReset?((0,d.uX)(),(0,d.Wv)(_,{key:0,type:"default",plain:"",onClick:h,style:{width:"72px"}},{default:(0,d.k6)(()=>l[2]||(l[2]=[(0,d.eW)("重置")])),_:1,__:[2]})):(0,d.Q3)("",!0),(0,i.R1)(k).length>3&&null==(0,i.R1)(t).operation?((0,d.uX)(),(0,d.Wv)(v,{key:1,type:"flex",align:"middle",class:"expand-btn",onClick:l[0]||(l[0]=e=>f.value=!(0,i.R1)(f))},{default:(0,d.k6)(()=>[(0,d.Lk)("span",m,(0,r.v_)((0,i.R1)(f)?"收起":"展开"),1),(0,d.bF)(g,null,{default:(0,d.k6)(()=>[(0,i.R1)(f)?((0,d.uX)(),(0,d.Wv)((0,i.R1)(s.ArrowUp),{key:0})):((0,d.uX)(),(0,d.Wv)((0,i.R1)(s.ArrowDown),{key:1}))]),_:1})]),_:1})):(0,d.Q3)("",!0),(0,i.R1)(t).operation?((0,d.uX)(),(0,d.CE)("div",c)):(0,d.Q3)("",!0),(0,d.RG)(e.$slots,"operation")]),_:3})]),_:3},8,["span"])):(0,d.Q3)("",!0)]),_:3})}}}),f=t(71241);const b=(0,f.A)(p,[["__scopeId","data-v-3d53564d"]]);var h=b}}]);