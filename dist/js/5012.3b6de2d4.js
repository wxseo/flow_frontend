"use strict";(self["webpackChunkorange"]=self["webpackChunkorange"]||[]).push([[1066,5012,7497],{3740:function(e,a,l){l.d(a,{qi:function(){return I}});var i=l(56768),t=l(90144),r=l(24232),u=l(45130),n=l(91542),d=l(57477),o=l(93889),p=l(99077),s=l(44216),c=l(37207),v=l(93513),m=l(93558),f=l(92056),y=l(86894),T=l(12235);const R="ElSwitch",V=(0,i.pM)({name:R}),b=(0,i.pM)({...V,props:o.Z,emits:o.x,setup(e,{expose:a,emit:l}){const o=e,{formItem:p}=(0,s.j)(),V=(0,c.NV)(),b=(0,v.DU)("switch"),{inputId:g}=(0,s.W)(o,{formItemContext:p}),_=(0,c.CB)((0,i.EW)(()=>o.loading)),I=(0,t.KR)(!1!==o.modelValue),F=(0,t.KR)(),k=(0,t.KR)(),C=(0,i.EW)(()=>[b.b(),b.m(V.value),b.is("disabled",_.value),b.is("checked",W.value)]),D=(0,i.EW)(()=>[b.e("label"),b.em("label","left"),b.is("active",!W.value)]),h=(0,i.EW)(()=>[b.e("label"),b.em("label","right"),b.is("active",W.value)]),A=(0,i.EW)(()=>({width:(0,m._V)(o.width)}));(0,i.wB)(()=>o.modelValue,()=>{I.value=!0});const N=(0,i.EW)(()=>!!I.value&&o.modelValue),W=(0,i.EW)(()=>N.value===o.activeValue);[o.activeValue,o.inactiveValue].includes(N.value)||(l(f.l4,o.inactiveValue),l(f.YU,o.inactiveValue),l(f.qs,o.inactiveValue)),(0,i.wB)(W,e=>{var a;F.value.checked=e,o.validateEvent&&(null==(a=null==p?void 0:p.validate)||a.call(p,"change").catch(e=>(0,y.U)(e)))});const E=()=>{const e=W.value?o.inactiveValue:o.activeValue;l(f.l4,e),l(f.YU,e),l(f.qs,e),(0,i.dY)(()=>{F.value.checked=W.value})},L=()=>{if(_.value)return;const{beforeChange:e}=o;if(!e)return void E();const a=e(),l=[(0,r.yL)(a),(0,T.Lm)(a)].includes(!0);l||(0,y.$)(R,"beforeChange must return type `Promise<boolean>` or `boolean`"),(0,r.yL)(a)?a.then(e=>{e&&E()}).catch(e=>{(0,y.U)(R,`some error occurred: ${e}`)}):a&&E()},K=()=>{var e,a;null==(a=null==(e=F.value)?void 0:e.focus)||a.call(e)};return(0,i.sV)(()=>{F.value.checked=W.value}),a({focus:K,checked:W}),(e,a)=>((0,i.uX)(),(0,i.CE)("div",{class:(0,r.C4)((0,t.R1)(C)),onClick:(0,u.D$)(L,["prevent"])},[(0,i.Lk)("input",{id:(0,t.R1)(g),ref_key:"input",ref:F,class:(0,r.C4)((0,t.R1)(b).e("input")),type:"checkbox",role:"switch","aria-checked":(0,t.R1)(W),"aria-disabled":(0,t.R1)(_),"aria-label":e.ariaLabel,name:e.name,"true-value":e.activeValue,"false-value":e.inactiveValue,disabled:(0,t.R1)(_),tabindex:e.tabindex,onChange:E,onKeydown:(0,u.jR)(L,["enter"])},null,42,["id","aria-checked","aria-disabled","aria-label","name","true-value","false-value","disabled","tabindex","onKeydown"]),e.inlinePrompt||!e.inactiveIcon&&!e.inactiveText?(0,i.Q3)("v-if",!0):((0,i.uX)(),(0,i.CE)("span",{key:0,class:(0,r.C4)((0,t.R1)(D))},[e.inactiveIcon?((0,i.uX)(),(0,i.Wv)((0,t.R1)(n.tk),{key:0},{default:(0,i.k6)(()=>[((0,i.uX)(),(0,i.Wv)((0,i.$y)(e.inactiveIcon)))]),_:1})):(0,i.Q3)("v-if",!0),!e.inactiveIcon&&e.inactiveText?((0,i.uX)(),(0,i.CE)("span",{key:1,"aria-hidden":(0,t.R1)(W)},(0,r.v_)(e.inactiveText),9,["aria-hidden"])):(0,i.Q3)("v-if",!0)],2)),(0,i.Lk)("span",{ref_key:"core",ref:k,class:(0,r.C4)((0,t.R1)(b).e("core")),style:(0,r.Tr)((0,t.R1)(A))},[e.inlinePrompt?((0,i.uX)(),(0,i.CE)("div",{key:0,class:(0,r.C4)((0,t.R1)(b).e("inner"))},[e.activeIcon||e.inactiveIcon?((0,i.uX)(),(0,i.Wv)((0,t.R1)(n.tk),{key:0,class:(0,r.C4)((0,t.R1)(b).is("icon"))},{default:(0,i.k6)(()=>[((0,i.uX)(),(0,i.Wv)((0,i.$y)((0,t.R1)(W)?e.activeIcon:e.inactiveIcon)))]),_:1},8,["class"])):e.activeText||e.inactiveText?((0,i.uX)(),(0,i.CE)("span",{key:1,class:(0,r.C4)((0,t.R1)(b).is("text")),"aria-hidden":!(0,t.R1)(W)},(0,r.v_)((0,t.R1)(W)?e.activeText:e.inactiveText),11,["aria-hidden"])):(0,i.Q3)("v-if",!0)],2)):(0,i.Q3)("v-if",!0),(0,i.Lk)("div",{class:(0,r.C4)((0,t.R1)(b).e("action"))},[e.loading?((0,i.uX)(),(0,i.Wv)((0,t.R1)(n.tk),{key:0,class:(0,r.C4)((0,t.R1)(b).is("loading"))},{default:(0,i.k6)(()=>[(0,i.bF)((0,t.R1)(d.Loading))]),_:1},8,["class"])):(0,t.R1)(W)?(0,i.RG)(e.$slots,"active-action",{key:1},()=>[e.activeActionIcon?((0,i.uX)(),(0,i.Wv)((0,t.R1)(n.tk),{key:0},{default:(0,i.k6)(()=>[((0,i.uX)(),(0,i.Wv)((0,i.$y)(e.activeActionIcon)))]),_:1})):(0,i.Q3)("v-if",!0)]):(0,t.R1)(W)?(0,i.Q3)("v-if",!0):(0,i.RG)(e.$slots,"inactive-action",{key:2},()=>[e.inactiveActionIcon?((0,i.uX)(),(0,i.Wv)((0,t.R1)(n.tk),{key:0},{default:(0,i.k6)(()=>[((0,i.uX)(),(0,i.Wv)((0,i.$y)(e.inactiveActionIcon)))]),_:1})):(0,i.Q3)("v-if",!0)])],2)],6),e.inlinePrompt||!e.activeIcon&&!e.activeText?(0,i.Q3)("v-if",!0):((0,i.uX)(),(0,i.CE)("span",{key:1,class:(0,r.C4)((0,t.R1)(h))},[e.activeIcon?((0,i.uX)(),(0,i.Wv)((0,t.R1)(n.tk),{key:0},{default:(0,i.k6)(()=>[((0,i.uX)(),(0,i.Wv)((0,i.$y)(e.activeIcon)))]),_:1})):(0,i.Q3)("v-if",!0),!e.activeIcon&&e.activeText?((0,i.uX)(),(0,i.CE)("span",{key:1,"aria-hidden":!(0,t.R1)(W)},(0,r.v_)(e.activeText),9,["aria-hidden"])):(0,i.Q3)("v-if",!0)],2))],10,["onClick"]))}});var g=(0,p.A)(b,[["__file","switch.vue"]]),_=l(25376);const I=(0,_.GU)(g)},15012:function(e,a,l){l.r(a),l.d(a,{default:function(){return D}});var i=l(21929),t=(l(97042),l(98421),l(25136)),r=(l(69957),l(14022)),u=(l(72343),l(88284)),n=(l(36715),l(77649)),d=(l(87603),l(85415)),o=(l(22243),l(7409),l(3740)),p=(l(42899),l(32465),l(18888)),s=(l(3172),l(65451)),c=(l(63390),l(12687)),v=(l(31112),l(18111),l(22489),l(61701),l(56768)),m=l(90144),f=l(45130),y=l(24232),T=l(28705),R=l(34894),V=l(27007),b=l(92380),g=l(21016),_=l(71066),I=l(82572);const F={key:0,style:{"margin-left":"15px",color:"#e6a23c","flex-grow":"0"}};var k=(0,v.pM)({__name:"editReportColumnFilter",props:{rowData:{},columnList:{},formParamList:{},reportDictList:{},widgetList:{},validFilterValueType:{},dialog:{},thirdParamsString:{},dialogKey:{}},setup(e){const a=(0,I.l5)(),l=e,{thirdParams:k,onCloseThirdDialog:C}=(0,_.P)(l),D=(0,v.EW)(()=>a.defaultFormItemSize||k.value.defaultFormItemSize?.value),h=(0,m.KR)(),A=(0,m.KR)({paramId:void 0,paramName:void 0,required:!1,filterType:void 0,filterValueType:b.FilterValueKind.INPUT_DATA,paramDictId:void 0,formWidgetId:void 0,formWidgetColumn:void 0,paramValue:void 0,relationId:void 0,paramPath:[]}),N=(0,m.KR)([]),W={paramName:[{required:!0,message:"过滤字段不能为空",trigger:"blur"}],filterType:[{required:!0,message:"过滤规则不能为空",trigger:"blur"}],filterValueType:[{required:!0,message:"过滤值类型不能为空",trigger:"blur"}],paramDictId:[{required:!0,message:"过滤值字典不能为空",trigger:"blur"}],formWidgetId:[{required:!0,message:"过滤组件不能为空",trigger:"blur"}],formWidgetColumn:[{required:!0,message:"过滤组件字段不能为空",trigger:"blur"}],paramValue:[{required:!0,message:"过滤值不能为空",trigger:"blur"}]},E=(0,v.EW)(()=>({rowData:l.rowData||k.value.rowData,columnList:l.columnList||k.value.columnList||[],formParamList:l.formParamList||k.value.formParamList||[],reportDictList:l.reportDictList||k.value.reportDictList||[],widgetList:l.widgetList||k.value.widgetList||[],validFilterValueType:l.validFilterValueType||k.value.validFilterValueType||[]})),L=(0,v.EW)(()=>A.value.filterType!==b.CriteriaFilterType.NOT_NULL&&A.value.filterType!==b.CriteriaFilterType.IS_NULL),K=(0,v.EW)(()=>{if(null==A.value.relationId)return(0,V.PH)(E.value.columnList,A.value.paramName,"id");{let e=(0,V.PH)(E.value.columnList,A.value.relationId,"id");if(null!=e)return(0,V.PH)(e.children,A.value.paramName,"id")}return null}),w=(0,v.EW)(()=>{let e=K.value;if(null==e)return[];let a=(0,T.q2)(e.fieldType);return a}),P=(0,v.EW)(()=>{let e=K.value;if(null==e)return E.value.validFilterValueType;let a=(0,T.D3)(E.value.validFilterValueType,A.value.filterType,e);return A.value.filterType===b.CriteriaFilterType.BETWEEN&&(a=a.filter(e=>e===b.FilterValueKind.WIDGET_DATA)),a}),X=(0,v.EW)(()=>null==K.value?[]:E.value.reportDictList.map(e=>({...e,dictDataList:e.dictDataList}))||[]),U=(0,v.EW)(()=>{for(let e=0;e<X.value.length;e++)if(A.value.paramDictId===X.value[e].id)return X.value[e];return null}),x=(0,v.EW)(()=>(0,V.PH)(E.value.widgetList,A.value.formWidgetId,"widgetId")),O=()=>{l.dialog?l.dialog.cancel():C(!1)},M=()=>{h.value.validate(e=>{e&&(l.dialog?l.dialog.submit(A.value):C(!0,E.value.rowData,A.value))})},S=()=>{A.value.formInputParam=void 0,A.value.reportPrintVariable=void 0,A.value.customParam=void 0,A.value.paramDictId=(K.value||{}).dictId,A.value.paramDictData=void 0,A.value.paramColumnData=void 0,A.value.innerVeriable=void 0,A.value.paramValue=void 0,A.value.formWidgetId=void 0,A.value.formWidgetColumn=void 0},Q=e=>{e===b.CriteriaFilterType.IN||e===b.CriteriaFilterType.NOT_IN?A.value.filterValueType=b.FilterValueKind.DICT_DATA:e===b.CriteriaFilterType.BETWEEN?A.value.filterValueType=b.FilterValueKind.WIDGET_DATA:A.value.filterValueType=b.FilterValueKind.INPUT_DATA,S()},B=e=>{A.value.filterType=b.CriteriaFilterType.EQ,A.value.required=!1,A.value.relationId=void 0,Array.isArray(e)&&e.length>0?(A.value.paramName=e[e.length-1],2===e.length&&(A.value.relationId=e[0])):A.value.paramName=void 0,Q(b.CriteriaFilterType.EQ)},z=e=>new Promise((a,l)=>{R.vO.listDictData({dictId:e}).then(e=>{a(e.data)}).catch(e=>{l(e)})}),q=(e,a)=>new Promise((l,i)=>{R.TR.listDataWithColumn({datasetId:e,columnId:a}).then(e=>{l(e.data)}).catch(e=>{i(e)})}),G=e=>{null==e||Array.isArray(e.dictDataList)?N.value=(e||{}).dictDataList:z(e.id).then(a=>{N.value=a,e.dictDataList=a}).catch(e=>{console.warn(e)})},Y=()=>{null!=K.value&&(Array.isArray(K.value.columnDataList)||q(K.value.datasetId,K.value.columnId).then(e=>{let a=K.value?.columnName;K.value&&(K.value.columnDataList=e.map(e=>null!=e[a+"__DictMap"]?{...e[a+"__DictMap"]}:{id:e[a],name:e[a]}))}).catch(e=>{console.warn(e)}))};return(0,v.wB)(()=>U.value,e=>{G(e)},{immediate:!0}),(0,v.wB)(()=>K.value,()=>{Y()},{immediate:!0}),(0,v.sV)(()=>{null!=E.value.rowData?(A.value={...A.value,...E.value.rowData},A.value.paramPath=null==A.value.relationId?[A.value.paramName]:[A.value.relationId,A.value.paramName],G(U.value),Y()):A.value.paramId=(new Date).getTime()}),(e,a)=>{const l=c.u,T=s.S2,R=p._m,V=i.xE,_=o.qi,I=d.P9,k=d.AV,C=n.lq,U=u.MG,z=r.WK,q=t.S2,G=i.US;return(0,v.uX)(),(0,v.Wv)(G,{class:"edit-report-template-filter third-party-dlg",ref_key:"form",ref:h,model:(0,m.R1)(A),rules:W,"label-width":"92px",size:(0,m.R1)(D),onSubmit:a[18]||(a[18]=(0,f.D$)(()=>{},["prevent"]))},{default:(0,v.k6)(()=>[(0,v.bF)(V,{label:"过滤字段",prop:"paramName"},{default:(0,v.k6)(()=>[(0,v.bF)(R,{modelValue:(0,m.R1)(A).paramPath,"onUpdate:modelValue":a[0]||(a[0]=e=>(0,m.R1)(A).paramPath=e),options:(0,m.R1)(E).columnList,props:{label:"name",value:"id"},size:"default",style:{width:"100%"},onChange:B},{default:(0,v.k6)(({data:e})=>[(0,v.bF)(T,{type:"flex",justify:"space-between",align:"middle"},{default:(0,v.k6)(()=>[(0,v.Lk)("span",null,(0,y.v_)(e.name),1),null!=e.dictId?((0,v.uX)(),(0,v.Wv)(l,{key:0,size:"default",style:{"margin-left":"20px"}},{default:(0,v.k6)(()=>a[19]||(a[19]=[(0,v.eW)("字典")])),_:1,__:[19]})):(0,v.Q3)("",!0)]),_:2},1024)]),_:1},8,["modelValue","options"])]),_:1}),(0,v.bF)(V,{label:"是否必填",required:""},{default:(0,v.k6)(()=>[(0,v.bF)(_,{modelValue:(0,m.R1)(A).required,"onUpdate:modelValue":a[1]||(a[1]=e=>(0,m.R1)(A).required=e)},null,8,["modelValue"])]),_:1}),(0,v.bF)(V,{label:"过滤规则",prop:"filterType"},{default:(0,v.k6)(()=>[(0,v.bF)(k,{modelValue:(0,m.R1)(A).filterType,"onUpdate:modelValue":a[2]||(a[2]=e=>(0,m.R1)(A).filterType=e),size:"default",onChange:Q},{default:(0,v.k6)(()=>[((0,v.uX)(!0),(0,v.CE)(v.FK,null,(0,v.pI)((0,m.R1)(w),e=>((0,v.uX)(),(0,v.Wv)(I,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),(0,v.bF)(V,{label:"过滤值类型",prop:"filterValueType"},{default:(0,v.k6)(()=>[(0,v.bF)(k,{modelValue:(0,m.R1)(A).filterValueType,"onUpdate:modelValue":a[3]||(a[3]=e=>(0,m.R1)(A).filterValueType=e),size:"default",placeholder:"",disabled:!(0,m.R1)(L),onChange:S},{default:(0,v.k6)(()=>[((0,v.uX)(!0),(0,v.CE)(v.FK,null,(0,v.pI)((0,m.R1)(P),e=>((0,v.uX)(),(0,v.Wv)(I,{key:e,label:(0,m.R1)(b.FilterValueKind).getValue(e),value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),(0,m.R1)(A).filterValueType===(0,m.R1)(b.FilterValueKind).FORM_PARAM?((0,v.uX)(),(0,v.Wv)(V,{key:0,label:"过滤值",prop:(0,m.R1)(L)?"paramValue":void 0,disabled:!(0,m.R1)(L)},{default:(0,v.k6)(()=>[(0,v.bF)(k,{modelValue:(0,m.R1)(A).paramValue,"onUpdate:modelValue":a[4]||(a[4]=e=>(0,m.R1)(A).paramValue=e),size:"default",clearable:"",placeholder:""},{default:(0,v.k6)(()=>[((0,v.uX)(!0),(0,v.CE)(v.FK,null,(0,v.pI)((0,m.R1)(E).formParamList,e=>((0,v.uX)(),(0,v.Wv)(I,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["prop","disabled"])):(0,v.Q3)("",!0),(0,m.R1)(A).filterValueType===(0,m.R1)(b.FilterValueKind).WIDGET_DATA?((0,v.uX)(),(0,v.Wv)(V,{key:1,label:"过滤组件",prop:(0,m.R1)(L)?"formWidgetId":void 0,disabled:!(0,m.R1)(L)},{default:(0,v.k6)(()=>[(0,v.bF)(k,{modelValue:(0,m.R1)(A).formWidgetId,"onUpdate:modelValue":a[5]||(a[5]=e=>(0,m.R1)(A).formWidgetId=e),key:"formWidgetId",size:"default",clearable:"",placeholder:"",onChange:a[6]||(a[6]=e=>(0,m.R1)(A).formWidgetColumn=void 0)},{default:(0,v.k6)(()=>[((0,v.uX)(!0),(0,v.CE)(v.FK,null,(0,v.pI)(((0,m.R1)(E).widgetList||[]).filter(e=>(0,m.R1)(A).filterType===(0,m.R1)(b.CriteriaFilterType).BETWEEN?e.widgetType===(0,m.R1)(g.SysCustomWidgetType).DateRange:e.widgetType!==(0,m.R1)(g.SysCustomWidgetType).DateRange),e=>((0,v.uX)(),(0,v.Wv)(I,{key:e.widgetId,label:e.showName,value:e.widgetId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["prop","disabled"])):(0,v.Q3)("",!0),(0,m.R1)(A).filterValueType===(0,m.R1)(b.FilterValueKind).WIDGET_DATA&&null!=(0,m.R1)(x)&&Array.isArray((0,m.R1)(x).children)&&(0,m.R1)(x).children.length>0?((0,v.uX)(),(0,v.Wv)(V,{key:2,label:"组件字段",prop:(0,m.R1)(L)?"formWidgetColumn":void 0,disabled:!(0,m.R1)(L)},{default:(0,v.k6)(()=>[(0,v.bF)(k,{modelValue:(0,m.R1)(A).formWidgetColumn,"onUpdate:modelValue":a[7]||(a[7]=e=>(0,m.R1)(A).formWidgetColumn=e),key:"formWidgetColumn",size:"default",clearable:"",placeholder:""},{default:(0,v.k6)(()=>[((0,v.uX)(!0),(0,v.CE)(v.FK,null,(0,v.pI)(((0,m.R1)(x)||{}).children,e=>((0,v.uX)(),(0,v.Wv)(I,{key:e.id,label:e.showName,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["prop","disabled"])):(0,v.Q3)("",!0),(0,m.R1)(A).filterValueType===(0,m.R1)(b.FilterValueKind).DICT_DATA?((0,v.uX)(),(0,v.Wv)(V,{key:3,label:"过滤值字典",prop:(0,m.R1)(L)?"paramDictId":void 0,disabled:!(0,m.R1)(L)},{default:(0,v.k6)(()=>[(0,v.bF)(T,{type:"flex"},{default:(0,v.k6)(()=>[(0,v.bF)(k,{modelValue:(0,m.R1)(A).paramDictId,"onUpdate:modelValue":a[8]||(a[8]=e=>(0,m.R1)(A).paramDictId=e),key:"paramDictId",style:{width:"200px","flex-grow":"1"},size:"default",clearable:"",placeholder:"",disabled:null==(0,m.R1)(K)||null!=(0,m.R1)(K).dictId,onChange:a[9]||(a[9]=e=>(0,m.R1)(A).paramValue=void 0)},{default:(0,v.k6)(()=>[((0,v.uX)(!0),(0,v.CE)(v.FK,null,(0,v.pI)((0,m.R1)(X),e=>((0,v.uX)(),(0,v.Wv)(I,{key:e.id,label:e.name,value:e.id,disabled:e.disabled},null,8,["label","value","disabled"]))),128))]),_:1},8,["modelValue","disabled"]),null!=((0,m.R1)(K)||{}).dictId?((0,v.uX)(),(0,v.CE)("span",F,"只显示字段绑定字典")):(0,v.Q3)("",!0)]),_:1})]),_:1},8,["prop","disabled"])):(0,v.Q3)("",!0),(0,m.R1)(A).filterValueType===(0,m.R1)(b.FilterValueKind).DICT_DATA?((0,v.uX)(),(0,v.Wv)(V,{key:4,label:"字典数据",prop:(0,m.R1)(L)?"paramValue":void 0,disabled:!(0,m.R1)(L)},{default:(0,v.k6)(()=>[(0,v.bF)(k,{modelValue:(0,m.R1)(A).paramValue,"onUpdate:modelValue":a[10]||(a[10]=e=>(0,m.R1)(A).paramValue=e),size:"default",clearable:"",placeholder:"",multiple:(0,m.R1)(A).filterType===(0,m.R1)(b.CriteriaFilterType).IN||(0,m.R1)(A).filterType===(0,m.R1)(b.CriteriaFilterType).NOT_IN},{default:(0,v.k6)(()=>[((0,v.uX)(!0),(0,v.CE)(v.FK,null,(0,v.pI)((0,m.R1)(N),e=>((0,v.uX)(),(0,v.Wv)(I,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","multiple"])]),_:1},8,["prop","disabled"])):(0,v.Q3)("",!0),(0,m.R1)(A).filterValueType===(0,m.R1)(b.FilterValueKind).COLUMN_DATA?((0,v.uX)(),(0,v.Wv)(V,{key:5,label:"参数值",prop:(0,m.R1)(L)?"paramValue":void 0,disabled:!(0,m.R1)(L)},{default:(0,v.k6)(()=>[(0,v.bF)(k,{modelValue:(0,m.R1)(A).paramValue,"onUpdate:modelValue":a[11]||(a[11]=e=>(0,m.R1)(A).paramValue=e),size:"default",clearable:"",placeholder:"",multiple:(0,m.R1)(A).filterType===(0,m.R1)(b.CriteriaFilterType).IN||(0,m.R1)(A).filterType===(0,m.R1)(b.CriteriaFilterType).NOT_IN},{default:(0,v.k6)(()=>[((0,v.uX)(!0),(0,v.CE)(v.FK,null,(0,v.pI)(((0,m.R1)(K)||{}).columnDataList,e=>((0,v.uX)(),(0,v.Wv)(I,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","multiple"])]),_:1},8,["prop","disabled"])):(0,v.Q3)("",!0),(0,m.R1)(A).filterValueType===(0,m.R1)(b.FilterValueKind).PRINT_INPUT_PARAM?((0,v.uX)(),(0,v.Wv)(V,{key:6,label:"过滤值",prop:(0,m.R1)(L)?"paramValue":void 0},{default:(0,v.k6)(()=>[(0,v.bF)(k,{modelValue:(0,m.R1)(A).paramValue,"onUpdate:modelValue":a[12]||(a[12]=e=>(0,m.R1)(A).paramValue=e),size:"default",clearable:"",placeholder:"",disabled:!(0,m.R1)(L)},{default:(0,v.k6)(()=>[((0,v.uX)(!0),(0,v.CE)(v.FK,null,(0,v.pI)((0,m.R1)(E).formParamList,e=>((0,v.uX)(),(0,v.Wv)(I,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1},8,["prop"])):(0,v.Q3)("",!0),(0,m.R1)(A).filterValueType===(0,m.R1)(b.FilterValueKind).INNER_VARIABLE?((0,v.uX)(),(0,v.Wv)(V,{key:7,label:"过滤值",prop:(0,m.R1)(L)?"paramValue":void 0},{default:(0,v.k6)(()=>[(0,v.bF)(k,{modelValue:(0,m.R1)(A).paramValue,"onUpdate:modelValue":a[13]||(a[13]=e=>(0,m.R1)(A).paramValue=e),size:"default",clearable:"",placeholder:"",disabled:!(0,m.R1)(L)},{default:(0,v.k6)(()=>[((0,v.uX)(!0),(0,v.CE)(v.FK,null,(0,v.pI)((0,m.R1)(b.CustomDateValueType).getList(),e=>((0,v.uX)(),(0,v.Wv)(I,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1},8,["prop"])):(0,v.Q3)("",!0),(0,m.R1)(A).filterValueType===(0,m.R1)(b.FilterValueKind).INPUT_DATA?((0,v.uX)(),(0,v.Wv)(V,{key:8,label:"过滤值",prop:(0,m.R1)(L)?"paramValue":void 0},{default:(0,v.k6)(()=>[null!=(0,m.R1)(K)&&-1!==["Integer","Long","Double","BigDecimal"].indexOf((0,m.R1)(K).fieldType)?((0,v.uX)(),(0,v.Wv)(C,{key:0,modelValue:(0,m.R1)(A).paramValue,"onUpdate:modelValue":a[14]||(a[14]=e=>(0,m.R1)(A).paramValue=e),"controls-position":"right",size:"default",placeholder:"",disabled:!(0,m.R1)(L)},null,8,["modelValue","disabled"])):null!=(0,m.R1)(K)&&"Boolean"===(0,m.R1)(K).fieldType?((0,v.uX)(),(0,v.Wv)(_,{key:1,modelValue:(0,m.R1)(A).paramValue,"onUpdate:modelValue":a[15]||(a[15]=e=>(0,m.R1)(A).paramValue=e),size:"default",disabled:!(0,m.R1)(L)},null,8,["modelValue","disabled"])):null!=(0,m.R1)(K)&&"Date"===(0,m.R1)(K).fieldType?((0,v.uX)(),(0,v.Wv)(U,{key:2,modelValue:(0,m.R1)(A).paramValue,"onUpdate:modelValue":a[16]||(a[16]=e=>(0,m.R1)(A).paramValue=e),type:"datetime",size:"default",format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss",disabled:!(0,m.R1)(L)},null,8,["modelValue","disabled"])):((0,v.uX)(),(0,v.Wv)(z,{key:3,disabled:!(0,m.R1)(L),modelValue:(0,m.R1)(A).paramValue,"onUpdate:modelValue":a[17]||(a[17]=e=>(0,m.R1)(A).paramValue=e),size:"default",placeholder:"",clearable:""},null,8,["disabled","modelValue"]))]),_:1},8,["prop"])):(0,v.Q3)("",!0),(0,v.bF)(T,{type:"flex",justify:"end",class:"dialog-btn-layer menu-box",style:{"margin-top":"15px"}},{default:(0,v.k6)(()=>[(0,v.bF)(q,{size:(0,m.R1)(D),plain:!0,onClick:O},{default:(0,v.k6)(()=>a[20]||(a[20]=[(0,v.eW)(" 取消 ")])),_:1,__:[20]},8,["size"]),(0,v.bF)(q,{type:"primary",size:(0,m.R1)(D),onClick:M},{default:(0,v.k6)(()=>a[21]||(a[21]=[(0,v.eW)(" 确定 ")])),_:1,__:[21]},8,["size"])]),_:1})]),_:1},8,["model","size"])}}});const C=k;var D=C},28705:function(e,a,l){l.d(a,{D3:function(){return u},JY:function(){return d},Sb:function(){return o},Uo:function(){return c},dU:function(){return n},oG:function(){return s},ok:function(){return v},q2:function(){return r},wr:function(){return p}});l(44114),l(18111),l(22489),l(7588);var i=l(27007),t=l(92380);function r(e){return t.CriteriaFilterType.getList().filter(a=>{switch(e){case"Boolean":return-1!==[t.CriteriaFilterType.EQ,t.CriteriaFilterType.NOT_EQ].indexOf(a.id);case"String":return-1!==[t.CriteriaFilterType.EQ,t.CriteriaFilterType.NOT_EQ,t.CriteriaFilterType.LIKE,t.CriteriaFilterType.NOT_NULL,t.CriteriaFilterType.IS_NULL,t.CriteriaFilterType.IN,t.CriteriaFilterType.NOT_IN].indexOf(a.id);case"Date":return-1!==[t.CriteriaFilterType.EQ,t.CriteriaFilterType.GE,t.CriteriaFilterType.GT,t.CriteriaFilterType.LE,t.CriteriaFilterType.LT,t.CriteriaFilterType.BETWEEN,t.CriteriaFilterType.NOT_NULL,t.CriteriaFilterType.IS_NULL].indexOf(a.id);case"Integer":case"Long":case"Double":case"BigDecimal":return-1!==[t.CriteriaFilterType.EQ,t.CriteriaFilterType.NOT_EQ,t.CriteriaFilterType.GE,t.CriteriaFilterType.GT,t.CriteriaFilterType.LE,t.CriteriaFilterType.LT,t.CriteriaFilterType.NOT_NULL,t.CriteriaFilterType.IS_NULL,t.CriteriaFilterType.IN,t.CriteriaFilterType.NOT_IN].indexOf(a.id);default:return[]}})}function u(e,a,l){return Array.isArray(e)?e.filter(e=>{switch(l.fieldType){case"Boolean":return-1!==[t.FilterValueKind.FORM_PARAM,t.FilterValueKind.WIDGET_DATA,t.FilterValueKind.DICT_DATA,t.FilterValueKind.PRINT_INPUT_PARAM,t.FilterValueKind.INPUT_DATA].indexOf(e);case"String":return-1!==[t.FilterValueKind.FORM_PARAM,t.FilterValueKind.WIDGET_DATA,t.FilterValueKind.DICT_DATA,t.FilterValueKind.COLUMN_DATA,t.FilterValueKind.PRINT_INPUT_PARAM,t.FilterValueKind.INPUT_DATA].indexOf(e);case"Date":return-1!==[t.FilterValueKind.FORM_PARAM,t.FilterValueKind.WIDGET_DATA,t.FilterValueKind.DICT_DATA,t.FilterValueKind.COLUMN_DATA,t.FilterValueKind.PRINT_INPUT_PARAM,t.FilterValueKind.INNER_VARIABLE,t.FilterValueKind.INPUT_DATA].indexOf(e);case"Integer":case"Long":case"Double":case"BigDecimal":return-1!==[t.FilterValueKind.FORM_PARAM,t.FilterValueKind.WIDGET_DATA,t.FilterValueKind.DICT_DATA,t.FilterValueKind.COLUMN_DATA,t.FilterValueKind.PRINT_INPUT_PARAM,t.FilterValueKind.INPUT_DATA].indexOf(e);default:return[]}}).filter(e=>a!==t.CriteriaFilterType.IN&&a!==t.CriteriaFilterType.NOT_IN||(e===t.FilterValueKind.DICT_DATA||e===t.FilterValueKind.COLUMN_DATA)):[]}function n(e,a){let l=null;if(null==a||""===a)return l;switch(e){case t.CalculateType.SUM:l="sumOf";break;case t.CalculateType.COUNT:l="countOf";break;case t.CalculateType.AVG:l="avgOf";break;case t.CalculateType.MIN_BY:l="minOf";break;case t.CalculateType.MAX_BY:l="maxOf";break;case t.CalculateType.STD_DEV:l="stddevOf";break;case t.CalculateType.MEAN_DEV:l="varpopOf";break}return l+(0,i.ET)(a,1)}const d=(e,a,l)=>{if(null==e)return null;if(Array.isArray(a)){let i=a.length>0?e:void 0;for(let e=0;e<a.length;e++){const l=a[e];if(null==l||null==i){i=void 0;break}i=i[l]}return null!=i&&"number"===typeof i?o(i,l):i}{const l=a+"__DictMap";return e[l]?e[l].name:e[a]}},o=(e,a)=>void 0===a||null==e||null==e.toFixed?e:Number(e.toFixed(a)),p=(e,a)=>{const l=[];return a.forEach(a=>{l.push(o(e[a.columnName],a.fixed))}),l},s=(e,a)=>{if(e){if(Array.isArray(a)){let l=a.length>0?e:void 0;for(let e=0;e<a.length;e++){const i=a[e];if(!i||!l){l=void 0;break}const t=i+"__DictMap";l=l[t]?l[t].name:l[i]}return l}{const l=a,i=l+"__DictMap";return e[i]?e[i].name:e[l]}}},c=e=>Array.isArray(e)?e.join("__"):e,v=(e,a)=>{const l=[];return a.forEach(a=>{l.push(s(e,a.columnName))}),l.join("\r\n")}},42899:function(e,a,l){l(97042)},71066:function(e,a,l){l.d(a,{P:function(){return n},i:function(){return d}});var i=l(81387),t=l(27007),r=l(56768),u=l(90144);const n=e=>{console.log("接收到的第三方参数",e);const a=(0,u.KR)(0),l=(0,r.EW)(()=>{let a={};try{e.thirdParamsString&&(a=JSON.parse(e.thirdParamsString))}catch(l){console.log(l),a={}}return a});console.log("thirdParams",l);const i=(i,t,r)=>{console.log("onCloseThirdDialog",t,r),window.parent&&window.parent.postMessage({type:"closeDialog",data:{index:a.value,dialogKey:e.dialogKey,path:l.value.path,rowData:t?JSON.parse(JSON.stringify(t)):void 0,data:r?JSON.parse(JSON.stringify(r)):void 0,isSuccess:i}},"*")},n=(e,l)=>{switch(e){case"setToken":l.token&&(0,t.WG)(l.token);break;case"dialogIndex":a.value=l;break;case"refreshData":break;case"message":break}},d=e=>{n(e.data.type,e.data.data)};return(0,r.sV)(()=>{console.log("onMounted message"),window.addEventListener("message",d,!1)}),(0,r.hi)(()=>{console.log("onUnmounted message"),window.removeEventListener("message",d)}),{thirdParams:l,onCloseThirdDialog:i}},d=()=>{let e;const a=(0,i.lq)(),l=()=>{window.parent&&window.parent.postMessage({type:"refreshToken"},"*")};-1!==a.path.indexOf("/thirdParty/")&&((0,r.sV)(()=>{(0,t.R7)()&&(e=setInterval(()=>{console.log("refreshToken thirdParty"),l()},18e4))}),(0,r.hi)(()=>{e&&clearInterval(e)}))}},93889:function(e,a,l){l.d(a,{Z:function(){return p},x:function(){return s}});var i=l(3027),t=l(47378),r=l(20464),u=l(58501),n=l(92056),d=l(12235),o=l(24232);const p=(0,t.b_)({modelValue:{type:[Boolean,String,Number],default:!1},disabled:Boolean,loading:Boolean,size:{type:String,validator:i.x},width:{type:[String,Number],default:""},inlinePrompt:Boolean,inactiveActionIcon:{type:r.Ze},activeActionIcon:{type:r.Ze},activeIcon:{type:r.Ze},inactiveIcon:{type:r.Ze},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},beforeChange:{type:(0,t.jq)(Function)},id:String,tabindex:{type:[String,Number]},...(0,u.l)(["ariaLabel"])}),s={[n.l4]:e=>(0,d.Lm)(e)||(0,o.Kg)(e)||(0,d.Et)(e),[n.YU]:e=>(0,d.Lm)(e)||(0,o.Kg)(e)||(0,d.Et)(e),[n.qs]:e=>(0,d.Lm)(e)||(0,o.Kg)(e)||(0,d.Et)(e)}}}]);