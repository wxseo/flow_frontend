"use strict";(self["webpackChunkorange"]=self["webpackChunkorange"]||[]).push([[2817],{30058:function(e,a,t){t.d(a,{A:function(){return g}});var l=t(65451),s=(t(97042),t(63390),t(91542)),n=(t(37985),t(25136)),r=(t(69957),t(76408)),o=(t(87535),t(18111),t(22489),t(56768)),i=t(90144),d=t(24232),u=t(57477);const c={style:{"margin-right":"4px","font-size":"14px"}},p={key:2,style:{"flex-grow":"1","min-width":"10px"}};var f=(0,o.pM)({__name:"index",props:{hasSearch:{type:Boolean,default:!0},hasReset:{type:Boolean,default:!0}},emits:["reset","search"],setup(e,{emit:a}){const t=(0,o.Ht)(),f=a,m=(0,i.KR)(!1),h=()=>{f("search")},g=()=>{f("reset")},v=(0,o.EW)(()=>{let e=t.default?t.default():[];return e.filter(e=>e.type&&e.type.name&&null!==e.type.name)}),k=(0,o.EW)(()=>{if(m.value){let e=v.value.length%4;return 0===e?24:6*(4-e)}return v.value.length<=3?6*(4-v.value.length):6});return(0,o.sV)(()=>{null!=t.operation&&(m.value=!0)}),(e,a)=>{const f=r.uD,b=n.S2,I=s.tk,y=l.S2;return(0,o.uX)(),(0,o.Wv)(y,{class:"flex-box",type:"flex"},{default:(0,o.k6)(()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)((0,i.R1)(v),(e,a)=>((0,o.uX)(),(0,o.CE)(o.FK,{key:a},[a<((0,i.R1)(m)?(0,i.R1)(v).length:3)?((0,o.uX)(),(0,o.Wv)(f,{key:0,span:6},{default:(0,o.k6)(()=>[((0,o.uX)(),(0,o.Wv)((0,o.$y)(e),{style:{width:"100%"}}))]),_:2},1024)):(0,o.Q3)("",!0)],64))),128)),e.hasSearch?((0,o.uX)(),(0,o.Wv)(f,{key:0,span:(0,i.R1)(k),class:"search-box"},{default:(0,o.k6)(()=>[(0,o.bF)(y,{type:"flex",align:"middle"},{default:(0,o.k6)(()=>[(0,o.bF)(b,{class:"search-btn",type:"default",plain:"",onClick:h,icon:(0,i.R1)(u.Search)},{default:(0,o.k6)(()=>a[1]||(a[1]=[(0,o.eW)(" 查询 ")])),_:1,__:[1]},8,["icon"]),e.hasReset?((0,o.uX)(),(0,o.Wv)(b,{key:0,type:"default",plain:"",onClick:g,style:{width:"72px"}},{default:(0,o.k6)(()=>a[2]||(a[2]=[(0,o.eW)("重置")])),_:1,__:[2]})):(0,o.Q3)("",!0),(0,i.R1)(v).length>3&&null==(0,i.R1)(t).operation?((0,o.uX)(),(0,o.Wv)(y,{key:1,type:"flex",align:"middle",class:"expand-btn",onClick:a[0]||(a[0]=e=>m.value=!(0,i.R1)(m))},{default:(0,o.k6)(()=>[(0,o.Lk)("span",c,(0,d.v_)((0,i.R1)(m)?"收起":"展开"),1),(0,o.bF)(I,null,{default:(0,o.k6)(()=>[(0,i.R1)(m)?((0,o.uX)(),(0,o.Wv)((0,i.R1)(u.ArrowUp),{key:0})):((0,o.uX)(),(0,o.Wv)((0,i.R1)(u.ArrowDown),{key:1}))]),_:1})]),_:1})):(0,o.Q3)("",!0),(0,i.R1)(t).operation?((0,o.uX)(),(0,o.CE)("div",p)):(0,o.Q3)("",!0),(0,o.RG)(e.$slots,"operation")]),_:3})]),_:3},8,["span"])):(0,o.Q3)("",!0)]),_:3})}}}),m=t(71241);const h=(0,m.A)(f,[["__scopeId","data-v-3d53564d"]]);var g=h},35342:function(e,a,t){t.r(a),t.d(a,{default:function(){return v}});var l=t(25136),s=(t(97042),t(69957),t(21929)),n=(t(98421),t(65451)),r=(t(63390),t(76408)),o=(t(87535),t(32465),t(14022)),i=(t(72343),t(56768)),d=t(90144),u=t(45130),c=t(61617),p=t(71066),f=t(82572);const m={class:"form-single-fragment third-party-dlg",style:{position:"relative"}};var h=(0,i.pM)({__name:"stopTask",props:{processInstanceId:{},taskId:{},dialog:{},thirdParamsString:{},dialogKey:{}},setup(e){const a=(0,f.l5)(),t=e,{thirdParams:h,onCloseThirdDialog:g}=(0,p.P)(t),v=(0,i.EW)(()=>a.defaultFormItemSize||h.value.defaultFormItemSize?.value),k=(0,d.KR)(),b=(0,d.KR)({reason:void 0}),I={reason:[{required:!0,message:"请输入终止原因",trigger:"blur"}]},y=(0,i.EW)(()=>({processInstanceId:t.processInstanceId||h.value.processInstanceId,taskId:t.taskId||h.value.taskId})),w=()=>{t.dialog?t.dialog.cancel():g(!1)},_=()=>{k.value.validate(e=>{e&&c.wI.stopProcessInstance({processInstanceId:y.value.processInstanceId,taskId:y.value.taskId,stopReason:b.value.reason}).then(()=>{t.dialog?t.dialog.submit(!0):g(!0)}).catch(e=>{console.warn(e)})})};return(e,a)=>{const t=o.WK,c=s.xE,p=r.uD,f=n.S2,h=s.US,g=l.S2;return(0,i.uX)(),(0,i.CE)("div",m,[(0,i.bF)(h,{ref_key:"form",ref:k,model:(0,d.R1)(b),class:"full-width-input form-box",rules:I,style:{width:"100%"},"label-width":"80px",size:(0,d.R1)(v),"label-position":"right",onSubmit:a[1]||(a[1]=(0,u.D$)(()=>{},["prevent"]))},{default:(0,i.k6)(()=>[(0,i.bF)(f,{gutter:20},{default:(0,i.k6)(()=>[(0,i.bF)(p,{span:24},{default:(0,i.k6)(()=>[(0,i.bF)(c,{label:"终止原因",prop:"reason"},{default:(0,i.k6)(()=>[(0,i.bF)(t,{class:"input-item",modelValue:(0,d.R1)(b).reason,"onUpdate:modelValue":a[0]||(a[0]=e=>(0,d.R1)(b).reason=e),type:"textarea",clearable:!0,placeholder:"终止原因"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","size"]),(0,i.bF)(f,{class:"no-scroll flex-box menu-box",type:"flex",justify:"end"},{default:(0,i.k6)(()=>[(0,i.bF)(g,{size:(0,d.R1)(v),plain:!0,onClick:w},{default:(0,i.k6)(()=>a[2]||(a[2]=[(0,i.eW)(" 取消 ")])),_:1,__:[2]},8,["size"]),(0,i.bF)(g,{type:"primary",size:(0,d.R1)(v),onClick:_},{default:(0,i.k6)(()=>a[3]||(a[3]=[(0,i.eW)(" 保存 ")])),_:1,__:[3]},8,["size"])]),_:1})])}}});const g=h;var v=g},43377:function(e,a,t){t.r(a),t.d(a,{default:function(){return _}});var l=t(21929),s=(t(97042),t(98421),t(65451)),n=(t(63390),t(14022)),r=(t(72343),t(25136)),o=(t(69957),t(76408)),i=(t(87535),t(32465),t(44114),t(18111),t(7588),t(61701),t(56768)),d=t(90144),u=t(45130),c=t(57477),p=t(99397),f=t(19183),m=t(9924),h=t(61617),g=t(31372),v=t(71066),k=t(82572);const b={class:"form-single-fragment third-party-dlg",style:{position:"relative"}};var I=(0,i.pM)({__name:"formInterposeInstance",props:{processInstanceId:{},processDefinitionId:{},taskId:{},dialog:{},thirdParamsString:{},dialogKey:{}},setup(e){const a=(0,k.l5)(),t=e,{thirdParams:I,onCloseThirdDialog:y}=(0,v.P)(t),w=(0,i.EW)(()=>a.defaultFormItemSize||I.value.defaultFormItemSize?.value),_=(0,d.KR)(),R=(0,d.KR)({taskComment:void 0,delegateAssignee:void 0,targetTaskKey:void 0}),F={taskComment:[{required:!0,message:"请输入干预原因",trigger:"blur"}]},x=(0,d.KR)(),D=(0,d.KR)([]),C=(0,d.KR)(),z=(0,i.EW)(()=>({taskId:t.taskId||I.value.taskId,processDefinitionId:t.processDefinitionId||I.value.processDefinitionId,processInstanceId:t.processInstanceId||I.value.processInstanceId})),T=()=>{t.dialog?t.dialog.cancel():y(!1)},S=()=>{_.value.validate(e=>{if(e){let e={processInstanceId:z.value.processInstanceId,taskId:z.value.taskId,delegateAssignee:R.value.delegateAssignee,targetTaskKey:R.value.targetTaskKey,taskComment:R.value.taskComment};h.wI.interveneRuntimeTask(e).then(e=>{t.dialog?t.dialog.submit(e):y(!0)}).catch(e=>{console.warn(e)})}})},A=e=>{if(Array.isArray(e)){let a=D.value.map(e=>e.id);const t=[];e.forEach(e=>{-1===a.indexOf(e.loginName)&&t.push({id:e.loginName,name:e.showName||e.loginName})}),D.value=D.value?D.value.concat(t):t}},W=()=>{let e=null==R.value.delegateAssignee||""===R.value.delegateAssignee?[]:R.value.delegateAssignee.split(",");g.l.show("选择用户",f["default"],{area:["1000px","600px"]},{showAssignee:!1,showStartUser:!1,multiple:!0,usedUserIdList:e,path:"thirdTaskUserSelect"},{width:"1000px",height:"640px",pathName:"/thirdParty/thirdTaskUserSelect"}).then(e=>{A(e)}).catch(e=>{console.warn(e)})},K=()=>{let e={processDefinitionId:z.value.processDefinitionId};h.wI.viewProcessBpmn(e).then(e=>{x.value=e.data}).catch(e=>{console.warn(e)})},V=()=>{if(null==z.value.processInstanceId||""===z.value.processInstanceId)return;let e={processInstanceId:z.value.processInstanceId};h.wI.viewHighlightFlowData(e).then(e=>{C.value=e.data}).catch(e=>{console.warn(e)})};return(0,i.wB)(D,e=>{if(e){let a=e.map(e=>e.id);R.value.delegateAssignee=a.join(",")}},{deep:!0}),(0,i.sV)(()=>{K(),V()}),(e,a)=>{const t=l.xE,f=o.uD,h=r.S2,g=n.WK,v=s.S2,k=l.US;return(0,i.uX)(),(0,i.CE)("div",b,[(0,i.bF)(k,{ref_key:"form",ref:_,model:(0,d.R1)(R),class:"full-width-input form-box",style:{width:"100%"},"label-width":"100px",size:(0,d.R1)(w),"label-position":"right",onSubmit:a[3]||(a[3]=(0,u.D$)(()=>{},["prevent"])),rules:F},{default:(0,i.k6)(()=>[(0,i.bF)(v,{gutter:20},{default:(0,i.k6)(()=>[(0,i.bF)(f,{span:24},{default:(0,i.k6)(()=>[(0,i.bF)(t,{label:"跳转节点",prop:"targetTaskKey"},{default:(0,i.k6)(()=>[(0,i.bF)(m.A,{value:(0,d.R1)(R).targetTaskKey,"onUpdate:value":a[0]||(a[0]=e=>(0,d.R1)(R).targetTaskKey=e),xml:(0,d.R1)(x),placeholder:"请选择跳转任务节点",disabled:null==(0,d.R1)(x),finishedInfo:(0,d.R1)(C)},null,8,["value","xml","disabled","finishedInfo"])]),_:1})]),_:1}),(0,i.bF)(f,{span:24},{default:(0,i.k6)(()=>[(0,i.bF)(t,{label:"处理用户",prop:"delegateAssignee"},{default:(0,i.k6)(()=>[(0,i.bF)(p.A,{value:(0,d.R1)(D),"onUpdate:value":a[1]||(a[1]=e=>(0,d.i9)(D)?D.value=e:null)},{append:(0,i.k6)(()=>[(0,i.bF)(h,{class:"append-add",type:"default",icon:(0,d.R1)(c.Plus),onClick:W},null,8,["icon"])]),_:1},8,["value"])]),_:1})]),_:1}),(0,i.bF)(f,{span:24},{default:(0,i.k6)(()=>[(0,i.bF)(t,{label:"干预原因",prop:"taskComment"},{default:(0,i.k6)(()=>[(0,i.bF)(g,{modelValue:(0,d.R1)(R).taskComment,"onUpdate:modelValue":a[2]||(a[2]=e=>(0,d.R1)(R).taskComment=e),clearable:"",placeholder:"请输入干预原因"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","size"]),(0,i.bF)(v,{class:"no-scroll flex-box menu-box",type:"flex",justify:"end"},{default:(0,i.k6)(()=>[(0,i.bF)(h,{size:(0,d.R1)(w),plain:!0,onClick:T},{default:(0,i.k6)(()=>a[4]||(a[4]=[(0,i.eW)(" 取消 ")])),_:1,__:[4]},8,["size"]),(0,i.bF)(h,{type:"primary",size:(0,d.R1)(w),onClick:S},{default:(0,i.k6)(()=>a[5]||(a[5]=[(0,i.eW)(" 提交 ")])),_:1,__:[5]},8,["size"])]),_:1})])}}}),y=t(71241);const w=(0,y.A)(I,[["__scopeId","data-v-837e8232"]]);var _=w},54744:function(e,a,t){t.r(a),t.d(a,{default:function(){return y}});var l=t(65451),s=(t(97042),t(63390),t(25136)),n=(t(69957),t(76408)),r=(t(87535),t(17851)),o=(t(68489),t(68368)),i=(t(81208),t(62436),t(47001),t(18111),t(61701),t(56768)),d=t(90144),u=t(24232),c=t(61473),p=t(26695),f=t(27007),m=t(61617),h=t(71066),g=t(82572);const v={class:"sql-list"};var k=(0,i.pM)({__name:"processCompensation",props:{dataList:{},dialog:{},thirdParamsString:{},dialogKey:{}},setup(e){const a=(0,g.l5)(),t=e,{thirdParams:k,onCloseThirdDialog:b}=(0,h.P)(t),I=(0,i.EW)(()=>a.defaultFormItemSize||k.value.defaultFormItemSize?.value),y=(0,d.KR)(),w=(0,d.KR)(),_=(0,i.EW)(()=>({dataList:t.dataList||k.value.dataList})),R=(0,i.EW)(()=>_.value.dataList.map(e=>({...e,sqlDataList:JSON.parse(e.sqlData)}))),F=()=>{t.dialog?t.dialog.cancel():b(!1)},x=()=>{if(null==y.value)return void p.nk.warning("请选择要补偿的任务！");let e={transId:y.value,processInstanceId:w.value};m.wI.fixBusinessData(e).then(()=>{p.nk.success("补偿成功！"),t.dialog?t.dialog.submit(!0):b(!0)}).catch(e=>{console.warn(e)})},D=e=>{let a=(0,f.PH)(R.value,e,"taskId");null!=a&&(y.value=a.transId,w.value=a.processInstanceId)};return(e,a)=>{const t=o.o8,p=r.ll,f=o.Up,m=r.MQ,h=n.uD,g=s.S2,k=l.S2;return(0,i.uX)(),(0,i.Wv)(k,{class:"process-data-compensation third-party-dlg",style:{position:"relative"}},{default:(0,i.k6)(()=>[(0,i.bF)(h,{span:24,class:"form-box"},{default:(0,i.k6)(()=>[(0,i.bF)(m,{modelValue:(0,d.R1)(y),"onUpdate:modelValue":a[0]||(a[0]=e=>(0,d.i9)(y)?y.value=e:null),style:{width:"100%"},onChange:D},{default:(0,i.k6)(()=>[(0,i.bF)(f,{data:(0,d.R1)(R),size:(0,d.R1)(I),"header-cell-class-name":"table-header-gray",height:"600px",style:{width:"100%"}},{empty:(0,i.k6)(()=>a[1]||(a[1]=[(0,i.Lk)("div",{class:"table-empty unified-font"},[(0,i.Lk)("img",{src:c}),(0,i.Lk)("span",null,"暂无数据")],-1)])),default:(0,i.k6)(()=>[(0,i.bF)(t,{type:"expand"},{default:(0,i.k6)(e=>[(0,i.Lk)("div",v,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.row.sqlDataList,(e,a)=>((0,i.uX)(),(0,i.CE)("div",{class:"sql-item",key:a},[(0,i.Lk)("span",null,(0,u.v_)(e.sql),1)]))),128))])]),_:1}),(0,i.bF)(t,{label:"任务名称",prop:"taskName",width:"150px"},{default:(0,i.k6)(e=>[(0,i.bF)(p,{value:e.row.transId},{default:(0,i.k6)(()=>[(0,i.eW)((0,u.v_)(e.row.taskName),1)]),_:2},1032,["value"])]),_:1}),(0,i.bF)(t,{label:"创建人",prop:"createUsername",width:"150px"}),(0,i.bF)(t,{label:"创建时间",prop:"createTime",width:"200px"}),(0,i.bF)(t,{label:"错误原因",prop:"errorReason"})]),_:1},8,["data","size"])]),_:1},8,["modelValue"])]),_:1}),(0,i.bF)(h,{span:24,style:{"margin-top":"20px"},class:"menu-box"},{default:(0,i.k6)(()=>[(0,i.bF)(k,{type:"flex",justify:"end"},{default:(0,i.k6)(()=>[(0,i.bF)(g,{size:(0,d.R1)(I),plain:!0,onClick:F},{default:(0,i.k6)(()=>a[2]||(a[2]=[(0,i.eW)(" 取消 ")])),_:1,__:[2]},8,["size"]),(0,i.bF)(g,{type:"primary",size:(0,d.R1)(I),disabled:null==(0,d.R1)(y),onClick:x},{default:(0,i.k6)(()=>a[3]||(a[3]=[(0,i.eW)(" 补偿数据 ")])),_:1,__:[3]},8,["size","disabled"])]),_:1})]),_:1})]),_:1})}}}),b=t(71241);const I=(0,b.A)(k,[["__scopeId","data-v-4a8e2f30"]]);var y=I},62817:function(e,a,t){t.r(a),t.d(a,{default:function(){return z}});var l=t(70944),s=t(65451),n=(t(97042),t(63390),t(69080)),r=(t(25374),t(25136)),o=(t(69957),t(21929)),i=(t(98421),t(30058)),d=t(72382),u=(t(32465),t(14022)),c=(t(72343),t(18111),t(7588),t(56768)),p=t(90144),f=t(45130),m=t(164),h=t(26695),g=t(23855),v=t(35342),k=t(43377),b=t(54744),I=t(81997),y=t(31372),w=t(60265),_=t(61617),R=t(22414),F=t(82572);const x={style:{position:"relative"}};var D=(0,c.pM)({__name:"formAllInstance",setup(e,{expose:a}){const t=(0,F.l5)(),D=(0,p.KR)(),C=(0,p.Kh)({processDefinitionName:void 0,startUser:void 0,createDate:[]}),z=(0,p.Kh)({processDefinitionName:void 0,startUser:void 0,createDate:[]}),T=e=>(null==e&&(e={}),e={...e,processDefinitionName:z.processDefinitionName,startUser:z.startUser,beginDate:z.createDate[0],endDate:z.createDate[1]},new Promise((a,t)=>{_.wI.listAllHistoricProcessInstance(e).then(e=>{e.data.dataList.forEach(e=>{e.taskId=Array.isArray(e.runtimeTaskInfoList)&&e.runtimeTaskInfoList.length>0?e.runtimeTaskInfoList[0].taskId:void 0}),a({dataList:e.data.dataList,totalCount:e.data.totalCount})}).catch(e=>{t(e)})})),S=()=>(z.processDefinitionName=C.processDefinitionName,z.startUser=C.startUser,z.createDate=Array.isArray(C.createDate)?[...C.createDate]:[],!0),A={loadTableData:T,verifyTableParameter:S,paged:!0,orderFieldName:"showOrder",ascending:!0},W=(0,p.Kh)((0,w.K)(A)),K=(e=!1)=>{e?W.refreshTable(!0,1):W.refreshTable()},V=()=>{D.value.resetFields(),K(!0)},E=e=>{y.l.show("流程图",g["default"],{area:["1200px","750px"]},{processDefinitionId:e.processDefinitionId,processInstanceId:e.processInstanceId},{width:"1200px",height:"750px",pathName:"/thirdParty/thirdFormTaskProcessViewer"}).catch(e=>{console.warn(e)})},P=e=>{y.l.show("终止任务",v["default"],{area:"500px"},{processInstanceId:e.processInstanceId,taskId:e.taskId},{width:"500px",height:"200px",pathName:"/thirdParty/thirdFormStopTaskInstance"}).then(()=>{W.refreshTable()}).catch(e=>{console.warn(e)})},U=e=>{m.s.confirm("是否删除此流程实例？","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>_.wI.deleteProcessInstance({processInstanceId:e.processInstanceId})).then(()=>{h.nk.success("删除成功"),W.refreshTable()}).catch(e=>{console.warn(e)})},L=e=>{y.l.show("流程复活",I["default"],{area:"600px"},{processDefinitionId:e.processDefinitionId,processInstanceId:e.processInstanceId},{width:"600px",height:"500px",pathName:"/thirdParty/thirdFormRestartInstance"}).then(()=>{K()}).catch(e=>{console.warn(e)})},Y=e=>{y.l.show("流程干预",k["default"],{area:"500px"},{processDefinitionId:e.processDefinitionId,processInstanceId:e.processInstanceId,taskId:e.taskId},{width:"500px",height:"280px",pathName:"/thirdParty/thirdFormInterposeInstance"}).then(()=>{K()}).catch(e=>{console.warn(e)})},M=e=>{e.flowType!==R.FlowEntryType.AUTO_TASK?y.l.show("数据补偿",b["default"],{area:"1100px",offset:"60px"},{dataList:e.flowTransList||[]},{width:"800px",height:"600px",pathName:"/thirdParty/thirdFormCompensationInstance"}).then(()=>{K()}).catch(e=>{console.warn(e)}):m.s.confirm("是否为自动化任务执行数据补偿？","数据补偿",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{let a;Array.isArray(e.flowTransList)&&e.flowTransList.length>0&&(a=e.flowTransList[0].transId);let t={processInstanceId:e.processInstanceId,transId:a};_.wI.fixAutoFlow(t).then(e=>{h.nk.success("补偿成功！"),K()}).catch(e=>{console.error(e)})}).catch(e=>{console.warn(e)})},N=()=>{K()};(0,c.sV)(()=>{N()});const X=()=>{K()};return(0,c.n)(()=>{X()}),a({onResume:X}),(e,a)=>{const m=u.WK,h=o.xE,g=d.A,v=i.A,k=o.US,b=(0,c.g2)("vxe-column"),I=r.S2,y=n.aQ,w=s.S2,_=l.A;return(0,c.uX)(),(0,c.CE)("div",x,[(0,c.bF)(k,{ref_key:"form",ref:D,model:(0,p.R1)(C),"label-width":"80px",size:(0,p.R1)(t).defaultFormItemSize,"label-position":"right",onSubmit:a[4]||(a[4]=(0,f.D$)(()=>{},["prevent"]))},{default:(0,c.k6)(()=>[(0,c.bF)(v,{"item-width":350,onSearch:a[3]||(a[3]=e=>K(!0)),onReset:V},{default:(0,c.k6)(()=>[(0,c.bF)(h,{label:"流程名称",prop:"processDefinitionName"},{default:(0,c.k6)(()=>[(0,c.bF)(m,{class:"filter-item",modelValue:(0,p.R1)(C).processDefinitionName,"onUpdate:modelValue":a[0]||(a[0]=e=>(0,p.R1)(C).processDefinitionName=e),clearable:!0,placeholder:"流程名称"},null,8,["modelValue"])]),_:1}),(0,c.bF)(h,{label:"发起人",prop:"startUser"},{default:(0,c.k6)(()=>[(0,c.bF)(m,{class:"filter-item",modelValue:(0,p.R1)(C).startUser,"onUpdate:modelValue":a[1]||(a[1]=e=>(0,p.R1)(C).startUser=e),clearable:!0,placeholder:"发起人"},null,8,["modelValue"])]),_:1}),(0,c.bF)(h,{label:"发起时间",prop:"createDate"},{default:(0,c.k6)(()=>[(0,c.bF)(g,{class:"filter-item",modelValue:(0,p.R1)(C).createDate,"onUpdate:modelValue":a[2]||(a[2]=e=>(0,p.R1)(C).createDate=e),clearable:!0,allowTypes:["day"],align:"left","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model","size"]),(0,c.bF)(_,{class:"page-table",data:(0,p.R1)(W).dataList,size:(0,p.R1)(t).defaultFormItemSize,onSortChange:(0,p.R1)(W).onSortChange,onRefresh:a[5]||(a[5]=e=>K(!0)),"seq-config":{startIndex:((0,p.R1)(W).currentPage-1)*(0,p.R1)(W).pageSize},hasExtend:!1},{pagination:(0,c.k6)(()=>[(0,c.bF)(w,{type:"flex",justify:"end",style:{"margin-top":"16px"}},{default:(0,c.k6)(()=>[(0,c.bF)(y,{total:(0,p.R1)(W).totalCount,"current-page":(0,p.R1)(W).currentPage,"page-size":(0,p.R1)(W).pageSize,"page-sizes":[10,20,50,100],layout:"total, prev, pager, next, sizes",onCurrentChange:(0,p.R1)(W).onCurrentPageChange,onSizeChange:(0,p.R1)(W).onPageSizeChange},null,8,["total","current-page","page-size","onCurrentChange","onSizeChange"])]),_:1})]),default:(0,c.k6)(()=>[(0,c.bF)(b,{title:"序号",type:"seq",width:"70px",index:(0,p.R1)(W).getTableIndex},null,8,["index"]),(0,c.bF)(b,{title:"流程名称",field:"processDefinitionName"}),(0,c.bF)(b,{title:"流程标识",field:"processDefinitionKey"}),(0,c.bF)(b,{title:"任务发起人",field:"startUserId"}),(0,c.bF)(b,{title:"任务发起时间",field:"startTime"}),(0,c.bF)(b,{title:"任务结束时间",field:"endTime"}),(0,c.bF)(b,{title:"操作",width:"390px"},{default:(0,c.k6)(e=>[(0,c.bF)(I,{size:(0,p.R1)(t).defaultFormItemSize,type:"primary",link:"",onClick:a=>E(e.row)},{default:(0,c.k6)(()=>a[6]||(a[6]=[(0,c.eW)("流程图")])),_:2,__:[6]},1032,["size","onClick"]),(0,c.bF)(I,{size:(0,p.R1)(t).defaultFormItemSize,type:"primary",link:"",disabled:null==e.row.endTime||e.row.flowType===(0,p.R1)(R.FlowEntryType).AUTO_TASK,onClick:a=>L(e.row)},{default:(0,c.k6)(()=>a[7]||(a[7]=[(0,c.eW)(" 流程复活 ")])),_:2,__:[7]},1032,["size","disabled","onClick"]),(0,c.bF)(I,{size:(0,p.R1)(t).defaultFormItemSize,type:"primary",link:"",disabled:null==e.row.processInstanceId||null==e.row.taskId||e.row.flowType===(0,p.R1)(R.FlowEntryType).AUTO_TASK,onClick:a=>Y(e.row)},{default:(0,c.k6)(()=>a[8]||(a[8]=[(0,c.eW)(" 流程干预 ")])),_:2,__:[8]},1032,["size","disabled","onClick"]),(0,c.bF)(I,{size:(0,p.R1)(t).defaultFormItemSize,type:"primary",link:"",onClick:a=>M(e.row),disabled:!Array.isArray(e.row.flowTransList)||0===e.row.flowTransList.length},{default:(0,c.k6)(()=>a[9]||(a[9]=[(0,c.eW)(" 数据补偿 ")])),_:2,__:[9]},1032,["size","onClick","disabled"]),(0,c.bF)(I,{size:(0,p.R1)(t).defaultFormItemSize,type:"danger",link:"",disabled:null!=e.row.endTime,onClick:a=>P(e.row)},{default:(0,c.k6)(()=>a[10]||(a[10]=[(0,c.eW)(" 终止 ")])),_:2,__:[10]},1032,["size","disabled","onClick"]),(0,c.bF)(I,{size:(0,p.R1)(t).defaultFormItemSize,type:"danger",link:"",disabled:null==e.row.endTime,onClick:a=>U(e.row)},{default:(0,c.k6)(()=>a[11]||(a[11]=[(0,c.eW)(" 删除 ")])),_:2,__:[11]},1032,["size","disabled","onClick"])]),_:1})]),_:1},8,["data","size","onSortChange","seq-config"])])}}});const C=D;var z=C},72382:function(e,a,t){t.d(a,{A:function(){return p}});var l=t(88284),s=(t(97042),t(36715),t(85415)),n=(t(22243),t(7409),t(56768)),r=t(90144),o=t(57477);const i={class:"date-range"};var d=(0,n.pM)({__name:"index",props:{modelValue:{default:()=>""},defaultDateType:{default:"day"},size:{default:"default"},hideTypeOnlyOne:{type:Boolean,default:!0},allowTypes:{default:()=>["day","month","year"]},isRange:{type:Boolean,default:!0},editable:{type:Boolean,default:!0},clearable:{type:Boolean,default:!0},align:{default:"left"},rangeSeparator:{default:"-"},format:{default:"YYYY-MM-DD"},valueFormat:{default:"YYYY-MM-DD HH:mm:ss"},prefixIcon:{default:o.Calendar},clearIcon:{default:o.CircleClose},placeholder:{},startPlaceholder:{},endPlaceholder:{},readonly:{type:Boolean},disabled:{type:Boolean}},emits:["update:modelValue","change"],setup(e,{emit:a}){const t=[{value:"day",label:"自然日"},{value:"month",label:"自然月"},{value:"year",label:"自然年"}],o=a,d=e,u=(0,r.KR)(d.defaultDateType),c=(0,n.EW)({get(){return d.modelValue},set(e){o("update:modelValue",e)}}),p=()=>{let e=[];if(null!=c.value&&(d.isRange?Array.isArray(c.value)&&2==c.value.length&&(e[0]=new Date(c.value[0]),e[1]=new Date(c.value[1])):(e[0]=new Date(c.value.toString()),e[1]=new Date(c.value.toString())),null!=e[0]&&null!=e[1])){switch(e[0].setHours(0,0,0,0),e[1].setHours(0,0,0,0),u.value){case"day":e[1].setDate(e[1].getDate()+1);break;case"month":e[1].setDate(1),e[0].setDate(1),e[1].setMonth(e[1].getMonth()+1);break;case"year":e[1].setMonth(0),e[1].setDate(1),e[0].setMonth(0),e[0].setDate(1),e[1].setFullYear(e[1].getFullYear()+1);break}e[1]=new Date(e[1].getTime()-1)}o("update:modelValue",e),o("change",e)},f=(0,n.EW)(()=>t.filter(e=>-1!=d.allowTypes.indexOf(e.value))),m=(0,n.EW)(()=>{switch(u.value){case"day":return d.isRange?"daterange":"date";case"month":return d.isRange?"monthrange":"month";case"year":return d.isRange?"monthrange":"year";default:return d.isRange?"daterange":"date"}}),h=(0,n.EW)(()=>{switch(u.value){case"day":return"YYYY-MM-DD";case"month":return"YYYY-MM";case"year":return"YYYY";default:return"YYYY-MM-DD"}});return(0,n.wB)(u,(e,a)=>{console.log("daterange dateType changed",e,a),-1==d.allowTypes.indexOf(u.value)&&(u.value=d.allowTypes[0]||"day"),p()},{deep:!0,immediate:!0}),(0,n.wB)(()=>d.modelValue,(e,a)=>{console.log("daterange value change",e,a),e!=a&&(c.value=e)},{deep:!0}),(0,n.wB)(()=>d.defaultDateType,(e,a)=>{console.log("daterange defaultDateType changed",e,a),-1!==d.allowTypes.indexOf(e)?u.value=e:u.value=d.allowTypes[0]},{deep:!0,immediate:!0}),(0,n.wB)(()=>d.isRange,(e,a)=>{console.log("daterange isRange changed",e,a),e?c.value&&!Array.isArray(c.value)&&(c.value=[c.value.toString(),c.value.toString()]):Array.isArray(c.value)&&(c.value=c.value[0])},{deep:!0,immediate:!0}),(e,a)=>{const t=s.P9,o=s.AV,d=l.MG;return(0,n.uX)(),(0,n.CE)("div",i,[!e.hideTypeOnlyOne||(0,r.R1)(f).length>1?((0,n.uX)(),(0,n.Wv)(o,{key:0,modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=e=>u.value=e),size:e.size,style:{"min-width":"100px","max-width":"100px","margin-right":"10px"}},{default:(0,n.k6)(()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)((0,r.R1)(f),e=>((0,n.uX)(),(0,n.Wv)(t,{key:e.value,value:e.value,label:e.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue","size"])):(0,n.Q3)("",!0),(0,n.bF)(d,{style:{"flex-grow":"1"},modelValue:(0,r.R1)(c),"onUpdate:modelValue":a[1]||(a[1]=e=>(0,r.i9)(c)?c.value=e:null),size:e.size,placeholder:e.placeholder,type:(0,r.R1)(m),disabled:e.disabled,format:(0,r.R1)(h),readonly:e.readonly,editable:e.editable,clearable:e.clearable,"start-placeholder":e.startPlaceholder,"end-placeholder":e.endPlaceholder,align:e.align,"range-separator":e.rangeSeparator,"value-format":e.valueFormat,"prefix-icon":e.prefixIcon,"clear-icon":e.clearIcon},null,8,["modelValue","size","placeholder","type","disabled","format","readonly","editable","clearable","start-placeholder","end-placeholder","align","range-separator","value-format","prefix-icon","clear-icon"])])}}}),u=t(71241);const c=(0,u.A)(d,[["__scopeId","data-v-284a6fd8"]]);var p=c},81997:function(e,a,t){t.r(a),t.d(a,{default:function(){return k}});var l=t(25136),s=(t(97042),t(69957),t(21929)),n=(t(98421),t(65451)),r=(t(63390),t(14022)),o=(t(72343),t(76408)),i=(t(87535),t(32465),t(85415)),d=(t(22243),t(7409),t(56768)),u=t(90144),c=t(45130),p=t(61617),f=t(71066),m=t(82572);const h={class:"form-single-fragment third-party-dlg",style:{position:"relative"}};var g=(0,d.pM)({__name:"formRestart",props:{processInstanceId:{},processDefinitionId:{},dialog:{},thirdParamsString:{},dialogKey:{}},setup(e){const a=(0,m.l5)(),t=e,{thirdParams:g,onCloseThirdDialog:v}=(0,f.P)(t),k=(0,d.EW)(()=>a.defaultFormItemSize||g.value.defaultFormItemSize?.value),b=(0,u.KR)(),I=(0,u.KR)({taskList:[],taskComment:void 0}),y={taskList:[{required:!0,message:"请选择复活任务",trigger:"blur"}],taskComment:[{required:!0,message:"请输入备注",trigger:"blur"}]},w=(0,u.KR)([]),_=(0,d.EW)(()=>({processInstanceId:t.processInstanceId||g.value.processInstanceId,processDefinitionId:t.processDefinitionId||g.value.processDefinitionId})),R=()=>{t.dialog?t.dialog.cancel():v(!1)},F=()=>{b.value.validate(e=>{e&&p.wI.restart({processInstanceId:_.value.processInstanceId,taskKeys:I.value.taskList,taskComment:I.value.taskComment}).then(()=>{t.dialog?t.dialog.submit(!0):v(!0)}).catch(e=>{console.log(e)})})},x=()=>{p.wI.listAllUserTask({processDefinitionId:_.value.processDefinitionId}).then(e=>{w.value=e.data}).catch(e=>{console.log(e)})};return(0,d.sV)(()=>{x()}),(e,a)=>{const t=i.P9,p=i.AV,f=s.xE,m=o.uD,g=r.WK,v=n.S2,_=s.US,x=l.S2;return(0,d.uX)(),(0,d.CE)("div",h,[(0,d.bF)(_,{ref_key:"form",ref:b,model:(0,u.R1)(I),class:"full-width-input form-box",rules:y,style:{width:"100%"},"label-width":"80px",size:(0,u.R1)(k),"label-position":"right",onSubmit:a[2]||(a[2]=(0,c.D$)(()=>{},["prevent"]))},{default:(0,d.k6)(()=>[(0,d.bF)(v,{gutter:20},{default:(0,d.k6)(()=>[(0,d.bF)(m,{span:24},{default:(0,d.k6)(()=>[(0,d.bF)(f,{label:"目标任务",prop:"taskList"},{default:(0,d.k6)(()=>[(0,d.bF)(p,{modelValue:(0,u.R1)(I).taskList,"onUpdate:modelValue":a[0]||(a[0]=e=>(0,u.R1)(I).taskList=e),multiple:"",clearable:"",placeholder:"请选择目标任务"},{default:(0,d.k6)(()=>[((0,d.uX)(!0),(0,d.CE)(d.FK,null,(0,d.pI)((0,u.R1)(w),e=>((0,d.uX)(),(0,d.Wv)(t,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),(0,d.bF)(m,{span:24},{default:(0,d.k6)(()=>[(0,d.bF)(f,{label:"操作备注",prop:"taskComment"},{default:(0,d.k6)(()=>[(0,d.bF)(g,{modelValue:(0,u.R1)(I).taskComment,"onUpdate:modelValue":a[1]||(a[1]=e=>(0,u.R1)(I).taskComment=e),placeholder:"请输入操作备注"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","size"]),(0,d.bF)(v,{class:"no-scroll flex-box menu-box",type:"flex",justify:"end"},{default:(0,d.k6)(()=>[(0,d.bF)(x,{size:(0,u.R1)(k),plain:!0,onClick:R},{default:(0,d.k6)(()=>a[3]||(a[3]=[(0,d.eW)(" 取消 ")])),_:1,__:[3]},8,["size"]),(0,d.bF)(x,{type:"primary",size:(0,u.R1)(k),onClick:F},{default:(0,d.k6)(()=>a[4]||(a[4]=[(0,d.eW)(" 提交 ")])),_:1,__:[4]},8,["size"])]),_:1})])}}});const v=g;var k=v}}]);