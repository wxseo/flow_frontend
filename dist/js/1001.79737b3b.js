"use strict";(self["webpackChunkorange"]=self["webpackChunkorange"]||[]).push([[918,1001,1066,6339,8720],{11001:function(e,l,a){a.r(l),a.d(l,{default:function(){return R}});var t=a(21929),i=(a(97042),a(98421),a(68368)),r=(a(81208),a(47001),a(25136)),u=(a(69957),a(77649)),n=(a(87603),a(14022)),o=(a(72343),a(76408)),d=(a(87535),a(32465),a(18888)),s=(a(3172),a(85415)),p=(a(22243),a(7409),a(65451)),m=(a(63390),a(12687)),c=(a(31112),a(44114),a(18111),a(22489),a(7588),a(61701),a(56768)),f=a(90144),v=a(45130),y=a(24232),b=a(61473),T=a(164),V=a(26695),_=a(27007),F=a(34894),h=a(28705),A=a(71066),I=a(92380),g=a(82572),N=(0,c.pM)({__name:"editWidgetIndexColumn",props:{rowData:{},columnList:{},dataset:{},supportColumnWidth:{type:Boolean,default:!1},formParamList:{},reportDictList:{},widgetList:{},defaultFormItemSize:{},dialog:{},thirdParamsString:{},dialogKey:{}},setup(e){const l=(0,g.l5)(),a=e,{thirdParams:N,onCloseThirdDialog:w}=(0,A.P)(a),R=(0,c.EW)(()=>l.defaultFormItemSize),C=(0,f.KR)(),D=(0,f.KR)({id:void 0,columnId:void 0,showName:void 0,fixed:void 0,calculateType:I.CalculateType.SUM,columnWidth:void 0,filterList:[]}),k={columnId:[{required:!0,message:"请选择数据集字段！",trigger:"blur"}],showName:[{required:!0,message:"显示名称不能为空！",trigger:"blur"}]},E=(0,c.EW)(()=>K.value.dataset.datasetType===I.DatasetType.API),L=(0,c.EW)(()=>{let e=K.value.columnList.map(e=>({...e}));return(0,_.BN)(e,"columnId")}),W=(0,c.EW)(()=>null==D.value.columnId||""===D.value.columnId?[]:(0,_.Zi)(L.value,D.value.columnId,"columnId")),K=(0,c.EW)(()=>({rowData:a.rowData||N.value.rowData,dataset:a.dataset||N.value.dataset||{},supportColumnWidth:N.value.supportColumnWidth?N.value.supportColumnWidth:a.supportColumnWidth,columnList:(a.columnList||N.value.columnList||[]).map(e=>({...e,children:void 0})),formParamList:a.formParamList||N.value.formParamList||[],reportDictList:a.reportDictList||N.value.reportDictList||[],widgetList:a.widgetList||N.value.widgetList||[]})),x=(0,c.EW)(()=>[I.FilterValueKind.FORM_PARAM,I.FilterValueKind.WIDGET_DATA,I.FilterValueKind.DICT_DATA,I.FilterValueKind.COLUMN_DATA,I.FilterValueKind.INNER_VARIABLE,I.FilterValueKind.INPUT_DATA]),U=(0,c.EW)(()=>(0,_.PH)(K.value.columnList,D.value.columnId,"columnId")),O=(0,c.EW)(()=>I.CriteriaFilterType.getList().filter(e=>-1!==[I.CriteriaFilterType.EQ,I.CriteriaFilterType.NOT_EQ,I.CriteriaFilterType.GE,I.CriteriaFilterType.GT,I.CriteriaFilterType.LE,I.CriteriaFilterType.LT].indexOf(e.id))),P=(0,c.EW)(()=>null==U.value?[]:K.value.reportDictList.map(e=>({...e,disabled:!!U.value?.dictId&&e.id!==U.value.dictId,dictDataList:e.dictDataList}))),M=()=>{a.dialog?a.dialog.cancel():w(!1)},X=()=>{C.value.validate(e=>{e&&Q()&&(a.dialog?a.dialog.submit(D.value):w(!0,K.value.rowData,D.value))})},S=e=>{D.value.columnId=Array.isArray(e)?e[e.length-1]:void 0},z=(e=null)=>{null==e&&D.value.filterList.push({paramId:void 0,required:!1,filterType:I.CriteriaFilterType.EQ,filterValueType:I.FilterValueKind.INPUT_DATA,paramDictId:void 0,formWidgetId:void 0,formWidgetColumn:void 0,paramValue:void 0,relationId:void 0,paramDictDataList:[]})},G=e=>{T.s.confirm("是否删除此过滤条件？","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{D.value.filterList=D.value.filterList.filter(l=>e!==l)}).catch(e=>{console.warn(e)})},B=e=>{let l=(0,_.PH)(K.value.columnList,e.toString(),"columnId");D.value.showName=l?l.columnName:void 0,D.value.filterList=[]},Q=()=>{if(Array.isArray(D.value.filterList))for(let e=0;e<D.value.filterList.length;e++){let l=D.value.filterList[e];switch(l.filterValueType){case I.FilterValueKind.WIDGET_DATA:{let e=H(l),a=Array.isArray(e?.children)&&e.children.length>0,t=null!=l.formWidgetColumn&&""!==l.formWidgetColumn;if(null==e||a&&!t)return V.nk.error("过滤条件存在空值！"),!1;break}case I.FilterValueKind.FORM_PARAM:case I.FilterValueKind.DICT_DATA:case I.FilterValueKind.COLUMN_DATA:case I.FilterValueKind.PRINT_INPUT_PARAM:case I.FilterValueKind.INNER_VARIABLE:case I.FilterValueKind.INPUT_DATA:if(null==l.paramValue||""===l.paramValue)return V.nk.error("过滤条件存在空值！"),!1;break}}return!0},$=e=>{let l=U.value;return null==l?x.value:(0,h.D3)(x.value,e.filterType,{...l,fieldType:"Double"})},j=e=>e.filterType!==I.CriteriaFilterType.NOT_NULL&&e.filterType!==I.CriteriaFilterType.IS_NULL,q=(e,l)=>{l===I.CriteriaFilterType.IN||l===I.CriteriaFilterType.NOT_IN?e.filterValueType=I.FilterValueKind.DICT_DATA:e.filterValueType=I.FilterValueKind.INPUT_DATA,J(e)},J=e=>{e.paramDictId=void 0,e.innerVeriable=void 0,e.paramValue=void 0,e.paramDictDataList=[]},Y=e=>{for(let l=0;l<P.value.length;l++)if(e.paramDictId===P.value[l].id)return P.value[l];return null},H=e=>(0,_.PH)(K.value.widgetList,e?.formWidgetId,"widgetId"),Z=e=>{ae(e,Y(e)),e.paramValue=void 0},ee=e=>new Promise((l,a)=>{F.vO.listDictData({dictId:e}).then(e=>{l(e.data)}).catch(e=>{a(e)})}),le=(e,l)=>E.value?Promise.resolve():new Promise((a,t)=>{F.TR.listDataWithColumn({datasetId:e,columnId:l}).then(e=>{a(e.data)}).catch(e=>{t(e)})}),ae=(e,l)=>{null==l||Array.isArray(l.dictDataList)?e.paramDictDataList=(l||{}).dictDataList:ee(l.id).then(a=>{e.paramDictDataList=a,l.dictDataList=a}).catch(e=>{console.warn(e)})},te=()=>{U.value&&(Array.isArray(U.value.columnDataList)||le(U.value.datasetId,U.value.columnId).then(e=>{if(U.value){let l=U.value.columnName;U.value.columnDataList=(e||[]).map(e=>null!=e[l+"__DictMap"]?{...e[l+"__DictMap"]}:{id:e[l],name:e[l]})}}).catch(e=>{console.warn(e)}))};return(0,c.wB)(()=>U.value,()=>{te()},{immediate:!0}),(0,c.sV)(()=>{null!=K.value.rowData&&(D.value={...D.value,...K.value.rowData},null==D.value.fixed&&(D.value.fixed=void 0),Array.isArray(D.value.filterList)&&(D.value.filterList=D.value.filterList.map(e=>({...e})),D.value.filterList.forEach(e=>{ae(e,Y(e))})),te())}),(e,l)=>{const a=m.u,T=p.S2,V=s.P9,_=s.AV,F=d._m,h=t.xE,A=o.uD,g=n.WK,N=u.lq,w=r.S2,x=i.o8,Q=i.Up,Y=t.US;return(0,c.uX)(),(0,c.Wv)(T,{class:"form-edit-widget-categroy-column third-party-dlg"},{default:(0,c.k6)(()=>[(0,c.bF)(Y,{ref_key:"formEditWidgetCategroyColumn",ref:C,model:(0,f.R1)(D),class:"full-width-input form-box",rules:k,style:{width:"100%",height:"570px"},"label-width":"100px",size:(0,f.R1)(R),"label-position":"right",onSubmit:l[6]||(l[6]=(0,v.D$)(()=>{},["prevent"]))},{default:(0,c.k6)(()=>[(0,c.bF)(T,{gutter:20},{default:(0,c.k6)(()=>[(0,c.bF)(A,{span:(0,f.R1)(E)?24:12},{default:(0,c.k6)(()=>[(0,c.bF)(h,{label:"数据集字段",prop:"columnId"},{default:(0,c.k6)(()=>[(0,f.R1)(E)?((0,c.uX)(),(0,c.Wv)(F,{key:1,options:(0,f.R1)(L),placeholder:"",clearable:"",modelValue:(0,f.R1)(W),"onUpdate:modelValue":S,disabled:null!=(0,f.R1)(K).rowData,props:{label:"columnName",value:"columnId"},onChange:B},{default:(0,c.k6)(({data:e})=>[(0,c.bF)(T,{type:"flex",justify:"space-between",align:"middle"},{default:(0,c.k6)(()=>[(0,c.Lk)("span",null,(0,y.v_)(e.columnName),1),"Object"!==e.fieldType&&"Array"!==e.fieldType?((0,c.uX)(),(0,c.Wv)(a,{key:0,size:"default",type:e.dimension?"info":"success"},{default:(0,c.k6)(()=>[(0,c.eW)((0,y.v_)(e.dimension?"维度字段":"指标字段"),1)]),_:2},1032,["type"])):(0,c.Q3)("",!0)]),_:2},1024)]),_:1},8,["options","modelValue","disabled"])):((0,c.uX)(),(0,c.Wv)(_,{key:0,modelValue:(0,f.R1)(D).columnId,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,f.R1)(D).columnId=e),placeholder:"",clearable:"",disabled:null!=(0,f.R1)(K).rowData,onChange:B},{default:(0,c.k6)(()=>[((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)((0,f.R1)(K).columnList,e=>((0,c.uX)(),(0,c.Wv)(V,{key:e.columnId,label:e.columnName,value:e.columnId,disabled:e.disabled},{default:(0,c.k6)(()=>[(0,c.bF)(T,{type:"flex",justify:"space-between",align:"middle"},{default:(0,c.k6)(()=>[(0,c.Lk)("span",null,(0,y.v_)(e.columnName),1),(0,c.bF)(a,{size:"default",type:e.dimension?"info":"success"},{default:(0,c.k6)(()=>[(0,c.eW)((0,y.v_)(e.dimension?"维度字段":"指标字段"),1)]),_:2},1032,["type"])]),_:2},1024)]),_:2},1032,["label","value","disabled"]))),128))]),_:1},8,["modelValue","disabled"]))]),_:1})]),_:1},8,["span"]),(0,c.bF)(A,{span:(0,f.R1)(E)?24:12},{default:(0,c.k6)(()=>[(0,c.bF)(h,{label:"显示名称",prop:"showName"},{default:(0,c.k6)(()=>[(0,c.bF)(g,{modelValue:(0,f.R1)(D).showName,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,f.R1)(D).showName=e),placeholder:"",clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["span"]),(0,f.R1)(E)?(0,c.Q3)("",!0):((0,c.uX)(),(0,c.Wv)(A,{key:0,span:(0,f.R1)(E)?24:12},{default:(0,c.k6)(()=>[(0,c.bF)(h,{label:"汇总方式",prop:"calculateType"},{default:(0,c.k6)(()=>[(0,c.bF)(_,{modelValue:(0,f.R1)(D).calculateType,"onUpdate:modelValue":l[2]||(l[2]=e=>(0,f.R1)(D).calculateType=e),placeholder:""},{default:(0,c.k6)(()=>[((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)((0,f.R1)(I.CalculateType).getList(),e=>((0,c.uX)(),(0,c.Wv)(V,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["span"])),(0,c.bF)(A,{span:(0,f.R1)(E)?24:12},{default:(0,c.k6)(()=>[(0,c.bF)(h,{label:"小数位数",prop:"calculateType"},{default:(0,c.k6)(()=>[(0,c.bF)(N,{modelValue:(0,f.R1)(D).fixed,"onUpdate:modelValue":l[3]||(l[3]=e=>(0,f.R1)(D).fixed=e),"controls-position":"right",min:0,max:10},null,8,["modelValue"])]),_:1})]),_:1},8,["span"]),(0,f.R1)(K).supportColumnWidth?((0,c.uX)(),(0,c.Wv)(A,{key:1,span:(0,f.R1)(E)?24:12},{default:(0,c.k6)(()=>[(0,c.bF)(h,{label:"字段最小宽度"},{default:(0,c.k6)(()=>[(0,c.bF)(g,{modelValue:(0,f.R1)(D).columnWidth,"onUpdate:modelValue":l[4]||(l[4]=e=>(0,f.R1)(D).columnWidth=e),placeholder:"最小列宽度，会自动将剩余空间按比例分配",clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["span"])):(0,c.Q3)("",!0),(0,f.R1)(E)?(0,c.Q3)("",!0):((0,c.uX)(),(0,c.Wv)(A,{key:2,span:24,style:{"margin-bottom":"15px"}},{default:(0,c.k6)(()=>[(0,c.bF)(T,{type:"flex",justify:"space-between",align:"middle"},{default:(0,c.k6)(()=>[l[8]||(l[8]=(0,c.Lk)("span",{class:"el-form-item__label"},null,-1)),(0,c.bF)(w,{link:"",onClick:l[5]||(l[5]=e=>z()),size:(0,f.R1)(R)},{default:(0,c.k6)(()=>l[7]||(l[7]=[(0,c.eW)("添加过滤")])),_:1,__:[7]},8,["size"])]),_:1,__:[8]}),(0,c.bF)(T,null,{default:(0,c.k6)(()=>[(0,c.bF)(Q,{data:(0,f.R1)(D).filterList,size:(0,f.R1)(R),"header-cell-class-name":"table-header-gray",height:"350px"},{empty:(0,c.k6)(()=>l[10]||(l[10]=[(0,c.Lk)("div",{class:"table-empty unified-font"},[(0,c.Lk)("img",{src:b}),(0,c.Lk)("span",null,"暂无数据")],-1)])),default:(0,c.k6)(()=>[(0,c.bF)(x,{label:"过滤字段",width:"200px"},{default:(0,c.k6)(()=>[(0,c.Lk)("template",null,[(0,c.Lk)("span",null,(0,y.v_)(((0,f.R1)(U)||{}).columnName),1)])]),_:1}),(0,c.bF)(x,{label:"过滤规则",width:"150px"},{default:(0,c.k6)(e=>[(0,c.bF)(_,{modelValue:e.row.filterType,"onUpdate:modelValue":l=>e.row.filterType=l,size:"default",onChange:l=>q(e.row,l)},{default:(0,c.k6)(()=>[((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)((0,f.R1)(O),e=>((0,c.uX)(),(0,c.Wv)(V,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),(0,c.bF)(x,{label:"过滤值类型",width:"150px"},{default:(0,c.k6)(e=>[(0,c.bF)(_,{modelValue:e.row.filterValueType,"onUpdate:modelValue":l=>e.row.filterValueType=l,size:"default",placeholder:"",disabled:!j(e.row),onChange:l=>J(e.row)},{default:(0,c.k6)(()=>[((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)($(e.row),e=>((0,c.uX)(),(0,c.Wv)(V,{key:e,label:(0,f.R1)(I.FilterValueKind).getValue(e),value:e},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","disabled","onChange"])]),_:1}),(0,c.bF)(x,{label:"过滤值"},{default:(0,c.k6)(e=>[e.row.filterValueType===(0,f.R1)(I.FilterValueKind).FORM_PARAM?((0,c.uX)(),(0,c.Wv)(_,{key:0,style:{width:"200px"},modelValue:e.row.paramValue,"onUpdate:modelValue":l=>e.row.paramValue=l,size:"default",clearable:"",placeholder:""},{default:(0,c.k6)(()=>[((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)((0,f.R1)(K).formParamList,e=>((0,c.uX)(),(0,c.Wv)(V,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):(0,c.Q3)("",!0),e.row.filterValueType===(0,f.R1)(I.FilterValueKind).WIDGET_DATA?((0,c.uX)(),(0,c.Wv)(_,{style:{width:"200px"},modelValue:e.row.formWidgetId,"onUpdate:modelValue":l=>e.row.formWidgetId=l,key:"formWidgetId",size:"default",clearable:"",placeholder:"",onChange:l=>e.row.formWidgetColumn=void 0},{default:(0,c.k6)(()=>[((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)((0,f.R1)(K).widgetList,e=>((0,c.uX)(),(0,c.Wv)(V,{key:e.widgetId,label:e.showName,value:e.widgetId},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])):(0,c.Q3)("",!0),e.row.filterValueType===(0,f.R1)(I.FilterValueKind).WIDGET_DATA&&null!=H(e.row)&&Array.isArray(H(e.row)?.children)&&H(e.row)?.children.length>0?((0,c.uX)(),(0,c.Wv)(_,{modelValue:e.row.formWidgetColumn,"onUpdate:modelValue":l=>e.row.formWidgetColumn=l,key:"formWidgetColumn",style:{width:"200px","margin-left":"15px"},size:"default",clearable:"",placeholder:""},{default:(0,c.k6)(()=>[((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)((H(e.row)||{}).children,e=>((0,c.uX)(),(0,c.Wv)(V,{key:e.id,label:e.showName,value:e.id},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):(0,c.Q3)("",!0),e.row.filterValueType===(0,f.R1)(I.FilterValueKind).DICT_DATA?((0,c.uX)(),(0,c.Wv)(_,{key:3,style:{width:"200px"},placeholder:"请选择参数值字典",modelValue:e.row.paramDictId,"onUpdate:modelValue":l=>e.row.paramDictId=l,size:"default",clearable:"",onChange:l=>Z(e.row)},{default:(0,c.k6)(()=>[((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)((0,f.R1)(P),e=>((0,c.uX)(),(0,c.Wv)(V,{key:e.id,label:e.name,value:e.id,disabled:e.disabled},null,8,["label","value","disabled"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])):(0,c.Q3)("",!0),e.row.filterValueType===(0,f.R1)(I.FilterValueKind).DICT_DATA?((0,c.uX)(),(0,c.Wv)(_,{key:4,style:{width:"200px","margin-left":"15px"},modelValue:e.row.paramValue,"onUpdate:modelValue":l=>e.row.paramValue=l,size:"default",clearable:"",placeholder:"请选择参数值",multiple:e.row.filterType===(0,f.R1)(I.CriteriaFilterType).IN||e.row.filterType===(0,f.R1)(I.CriteriaFilterType).NOT_IN},{default:(0,c.k6)(()=>[((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)(e.row.paramDictDataList,e=>((0,c.uX)(),(0,c.Wv)(V,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","multiple"])):(0,c.Q3)("",!0),e.row.filterValueType===(0,f.R1)(I.FilterValueKind).COLUMN_DATA?((0,c.uX)(),(0,c.Wv)(_,{key:5,style:{width:"200px"},modelValue:e.row.paramValue,"onUpdate:modelValue":l=>e.row.paramValue=l,size:"default",clearable:"",placeholder:"",multiple:e.row.filterType===(0,f.R1)(I.CriteriaFilterType).IN||e.row.filterType===(0,f.R1)(I.CriteriaFilterType).NOT_IN},{default:(0,c.k6)(()=>[((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)(((0,f.R1)(U)||{}).columnDataList,e=>((0,c.uX)(),(0,c.Wv)(V,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","multiple"])):(0,c.Q3)("",!0),e.row.filterValueType===(0,f.R1)(I.FilterValueKind).INNER_VARIABLE?((0,c.uX)(),(0,c.Wv)(_,{key:6,style:{width:"200px"},modelValue:e.row.paramValue,"onUpdate:modelValue":l=>e.row.paramValue=l,size:"default",clearable:"",placeholder:"",disabled:!j(e.row)},{default:(0,c.k6)(()=>[((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)((0,f.R1)(I.CustomDateValueType).getList(),e=>((0,c.uX)(),(0,c.Wv)(V,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])):(0,c.Q3)("",!0),e.row.filterValueType===(0,f.R1)(I.FilterValueKind).INPUT_DATA?((0,c.uX)(),(0,c.Wv)(N,{key:7,style:{width:"200px"},modelValue:e.row.paramValue,"onUpdate:modelValue":l=>e.row.paramValue=l,"controls-position":"right",size:"default",placeholder:"",disabled:!j(e.row)},null,8,["modelValue","onUpdate:modelValue","disabled"])):(0,c.Q3)("",!0)]),_:1}),(0,c.bF)(x,{label:"操作",width:"150px"},{default:(0,c.k6)(e=>[(0,c.bF)(w,{link:"",onClick:l=>G(e.row),size:(0,f.R1)(R)},{default:(0,c.k6)(()=>l[9]||(l[9]=[(0,c.eW)("删除")])),_:2,__:[9]},1032,["onClick","size"])]),_:1})]),_:1},8,["data","size"])]),_:1})]),_:1}))]),_:1})]),_:1},8,["model","size"]),(0,c.bF)(T,{class:"no-scroll menu-box",type:"flex",justify:"end"},{default:(0,c.k6)(()=>[(0,c.bF)(w,{size:(0,f.R1)(R),plain:!0,onClick:M},{default:(0,c.k6)(()=>l[11]||(l[11]=[(0,c.eW)(" 取消 ")])),_:1,__:[11]},8,["size"]),(0,c.bF)(w,{type:"primary",size:(0,f.R1)(R),onClick:X},{default:(0,c.k6)(()=>l[12]||(l[12]=[(0,c.eW)(" 保存 ")])),_:1,__:[12]},8,["size"])]),_:1})]),_:1})}}});const w=N;var R=w},28705:function(e,l,a){a.d(l,{D3:function(){return u},JY:function(){return o},Sb:function(){return d},Uo:function(){return m},dU:function(){return n},oG:function(){return p},ok:function(){return c},q2:function(){return r},wr:function(){return s}});a(44114),a(18111),a(22489),a(7588);var t=a(27007),i=a(92380);function r(e){return i.CriteriaFilterType.getList().filter(l=>{switch(e){case"Boolean":return-1!==[i.CriteriaFilterType.EQ,i.CriteriaFilterType.NOT_EQ].indexOf(l.id);case"String":return-1!==[i.CriteriaFilterType.EQ,i.CriteriaFilterType.NOT_EQ,i.CriteriaFilterType.LIKE,i.CriteriaFilterType.NOT_NULL,i.CriteriaFilterType.IS_NULL,i.CriteriaFilterType.IN,i.CriteriaFilterType.NOT_IN].indexOf(l.id);case"Date":return-1!==[i.CriteriaFilterType.EQ,i.CriteriaFilterType.GE,i.CriteriaFilterType.GT,i.CriteriaFilterType.LE,i.CriteriaFilterType.LT,i.CriteriaFilterType.BETWEEN,i.CriteriaFilterType.NOT_NULL,i.CriteriaFilterType.IS_NULL].indexOf(l.id);case"Integer":case"Long":case"Double":case"BigDecimal":return-1!==[i.CriteriaFilterType.EQ,i.CriteriaFilterType.NOT_EQ,i.CriteriaFilterType.GE,i.CriteriaFilterType.GT,i.CriteriaFilterType.LE,i.CriteriaFilterType.LT,i.CriteriaFilterType.NOT_NULL,i.CriteriaFilterType.IS_NULL,i.CriteriaFilterType.IN,i.CriteriaFilterType.NOT_IN].indexOf(l.id);default:return[]}})}function u(e,l,a){return Array.isArray(e)?e.filter(e=>{switch(a.fieldType){case"Boolean":return-1!==[i.FilterValueKind.FORM_PARAM,i.FilterValueKind.WIDGET_DATA,i.FilterValueKind.DICT_DATA,i.FilterValueKind.PRINT_INPUT_PARAM,i.FilterValueKind.INPUT_DATA].indexOf(e);case"String":return-1!==[i.FilterValueKind.FORM_PARAM,i.FilterValueKind.WIDGET_DATA,i.FilterValueKind.DICT_DATA,i.FilterValueKind.COLUMN_DATA,i.FilterValueKind.PRINT_INPUT_PARAM,i.FilterValueKind.INPUT_DATA].indexOf(e);case"Date":return-1!==[i.FilterValueKind.FORM_PARAM,i.FilterValueKind.WIDGET_DATA,i.FilterValueKind.DICT_DATA,i.FilterValueKind.COLUMN_DATA,i.FilterValueKind.PRINT_INPUT_PARAM,i.FilterValueKind.INNER_VARIABLE,i.FilterValueKind.INPUT_DATA].indexOf(e);case"Integer":case"Long":case"Double":case"BigDecimal":return-1!==[i.FilterValueKind.FORM_PARAM,i.FilterValueKind.WIDGET_DATA,i.FilterValueKind.DICT_DATA,i.FilterValueKind.COLUMN_DATA,i.FilterValueKind.PRINT_INPUT_PARAM,i.FilterValueKind.INPUT_DATA].indexOf(e);default:return[]}}).filter(e=>l!==i.CriteriaFilterType.IN&&l!==i.CriteriaFilterType.NOT_IN||(e===i.FilterValueKind.DICT_DATA||e===i.FilterValueKind.COLUMN_DATA)):[]}function n(e,l){let a=null;if(null==l||""===l)return a;switch(e){case i.CalculateType.SUM:a="sumOf";break;case i.CalculateType.COUNT:a="countOf";break;case i.CalculateType.AVG:a="avgOf";break;case i.CalculateType.MIN_BY:a="minOf";break;case i.CalculateType.MAX_BY:a="maxOf";break;case i.CalculateType.STD_DEV:a="stddevOf";break;case i.CalculateType.MEAN_DEV:a="varpopOf";break}return a+(0,t.ET)(l,1)}const o=(e,l,a)=>{if(null==e)return null;if(Array.isArray(l)){let t=l.length>0?e:void 0;for(let e=0;e<l.length;e++){const a=l[e];if(null==a||null==t){t=void 0;break}t=t[a]}return null!=t&&"number"===typeof t?d(t,a):t}{const a=l+"__DictMap";return e[a]?e[a].name:e[l]}},d=(e,l)=>void 0===l||null==e||null==e.toFixed?e:Number(e.toFixed(l)),s=(e,l)=>{const a=[];return l.forEach(l=>{a.push(d(e[l.columnName],l.fixed))}),a},p=(e,l)=>{if(e){if(Array.isArray(l)){let a=l.length>0?e:void 0;for(let e=0;e<l.length;e++){const t=l[e];if(!t||!a){a=void 0;break}const i=t+"__DictMap";a=a[i]?a[i].name:a[t]}return a}{const a=l,t=a+"__DictMap";return e[t]?e[t].name:e[a]}}},m=e=>Array.isArray(e)?e.join("__"):e,c=(e,l)=>{const a=[];return l.forEach(l=>{a.push(p(e,l.columnName))}),a.join("\r\n")}},34436:function(e,l,a){a.d(l,{wc:function(){return u}});var t=a(24232);const i=100,r=600,u={beforeMount(e,l){const a=l.value,{interval:u=i,delay:n=r}=(0,t.Tn)(a)?{}:a;let o,d;const s=()=>(0,t.Tn)(a)?a():a.handler(),p=()=>{d&&(clearTimeout(d),d=void 0),o&&(clearInterval(o),o=void 0)};e.addEventListener("mousedown",e=>{0===e.button&&(p(),s(),document.addEventListener("mouseup",()=>p(),{once:!0}),d=setTimeout(()=>{o=setInterval(()=>{s()},u)},n))})}}},53629:function(e,l,a){a.d(l,{W:function(){return d},c:function(){return s}});var t=a(16032),i=a(47378),r=a(53845),u=a(12235),n=a(58501),o=a(92056);const d=(0,i.b_)({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.MAX_SAFE_INTEGER},min:{type:Number,default:Number.MIN_SAFE_INTEGER},modelValue:{type:[Number,null]},readonly:Boolean,disabled:Boolean,size:r.mU,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:e=>null===e||(0,u.Et)(e)||["min","max"].includes(e),default:null},name:String,placeholder:String,precision:{type:Number,validator:e=>e>=0&&e===Number.parseInt(`${e}`,10)},validateEvent:{type:Boolean,default:!0},...(0,n.l)(["ariaLabel"]),inputmode:{type:(0,i.jq)(String),default:void 0}}),s={[o.YU]:(e,l)=>l!==e,blur:e=>e instanceof FocusEvent,focus:e=>e instanceof FocusEvent,[o.qs]:e=>(0,u.Et)(e)||(0,t.A)(e),[o.l4]:e=>(0,u.Et)(e)||(0,t.A)(e)}},61473:function(e,l,a){e.exports=a.p+"img/empty.7e47f88a.png"},71066:function(e,l,a){a.d(l,{P:function(){return n},i:function(){return o}});var t=a(81387),i=a(27007),r=a(56768),u=a(90144);const n=e=>{console.log("接收到的第三方参数",e);const l=(0,u.KR)(0),a=(0,r.EW)(()=>{let l={};try{e.thirdParamsString&&(l=JSON.parse(e.thirdParamsString))}catch(a){console.log(a),l={}}return l});console.log("thirdParams",a);const t=(t,i,r)=>{console.log("onCloseThirdDialog",i,r),window.parent&&window.parent.postMessage({type:"closeDialog",data:{index:l.value,dialogKey:e.dialogKey,path:a.value.path,rowData:i?JSON.parse(JSON.stringify(i)):void 0,data:r?JSON.parse(JSON.stringify(r)):void 0,isSuccess:t}},"*")},n=(e,a)=>{switch(e){case"setToken":a.token&&(0,i.WG)(a.token);break;case"dialogIndex":l.value=a;break;case"refreshData":break;case"message":break}},o=e=>{n(e.data.type,e.data.data)};return(0,r.sV)(()=>{console.log("onMounted message"),window.addEventListener("message",o,!1)}),(0,r.hi)(()=>{console.log("onUnmounted message"),window.removeEventListener("message",o)}),{thirdParams:a,onCloseThirdDialog:t}},o=()=>{let e;const l=(0,t.lq)(),a=()=>{window.parent&&window.parent.postMessage({type:"refreshToken"},"*")};-1!==l.path.indexOf("/thirdParty/")&&((0,r.sV)(()=>{(0,i.R7)()&&(e=setInterval(()=>{console.log("refreshToken thirdParty"),a()},18e4))}),(0,r.hi)(()=>{e&&clearInterval(e)}))}},77649:function(e,l,a){a.d(l,{lq:function(){return g}});var t=a(56768),i=a(90144),r=a(24232),u=a(45130),n=a(16032),o=a(14022),d=a(91542),s=a(57477),p=a(53629),m=a(99077),c=a(34436),f=a(36268),v=a(93513),y=a(44216),b=a(12235),T=a(86894),V=a(37207),_=a(92056);const F=(0,t.pM)({name:"ElInputNumber"}),h=(0,t.pM)({...F,props:p.W,emits:p.c,setup(e,{expose:l,emit:a}){const p=e,{t:m}=(0,f.Ym)(),F=(0,v.DU)("input-number"),h=(0,i.KR)(),A=(0,i.Kh)({currentValue:p.modelValue,userInput:null}),{formItem:I}=(0,y.j)(),g=(0,t.EW)(()=>(0,b.Et)(p.modelValue)&&p.modelValue<=p.min),N=(0,t.EW)(()=>(0,b.Et)(p.modelValue)&&p.modelValue>=p.max),w=(0,t.EW)(()=>{const e=L(p.step);return(0,b.b0)(p.precision)?Math.max(L(p.modelValue),e):(e>p.precision&&(0,T.U)("InputNumber","precision should not be less than the decimal places of step"),p.precision)}),R=(0,t.EW)(()=>p.controls&&"right"===p.controlsPosition),C=(0,V.NV)(),D=(0,V.CB)(),k=(0,t.EW)(()=>{if(null!==A.userInput)return A.userInput;let e=A.currentValue;if((0,n.A)(e))return"";if((0,b.Et)(e)){if(Number.isNaN(e))return"";(0,b.b0)(p.precision)||(e=e.toFixed(p.precision))}return e}),E=(e,l)=>{if((0,b.b0)(l)&&(l=w.value),0===l)return Math.round(e);let a=String(e);const t=a.indexOf(".");if(-1===t)return e;const i=a.replace(".","").split(""),r=i[t+l];if(!r)return e;const u=a.length;return"5"===a.charAt(u-1)&&(a=`${a.slice(0,Math.max(0,u-1))}6`),Number.parseFloat(Number(a).toFixed(l))},L=e=>{if((0,n.A)(e))return 0;const l=e.toString(),a=l.indexOf(".");let t=0;return-1!==a&&(t=l.length-a-1),t},W=(e,l=1)=>(0,b.Et)(e)?e>=Number.MAX_SAFE_INTEGER&&1===l?((0,T.U)("InputNumber","The value has reached the maximum safe integer limit."),e):e<=Number.MIN_SAFE_INTEGER&&-1===l?((0,T.U)("InputNumber","The value has reached the minimum safe integer limit."),e):E(e+p.step*l):A.currentValue,K=()=>{if(p.readonly||D.value||N.value)return;const e=Number(k.value)||0,l=W(e);O(l),a(_.qs,A.currentValue),B()},x=()=>{if(p.readonly||D.value||g.value)return;const e=Number(k.value)||0,l=W(e,-1);O(l),a(_.qs,A.currentValue),B()},U=(e,l)=>{const{max:t,min:i,step:u,precision:o,stepStrictly:d,valueOnClear:s}=p;t<i&&(0,T.$)("InputNumber","min should not be greater than max.");let m=Number(e);if((0,n.A)(e)||Number.isNaN(m))return null;if(""===e){if(null===s)return null;m=(0,r.Kg)(s)?{min:i,max:t}[s]:s}return d&&(m=E(Math.round(m/u)*u,o),m!==e&&l&&a(_.l4,m)),(0,b.b0)(o)||(m=E(m,o)),(m>t||m<i)&&(m=m>t?t:i,l&&a(_.l4,m)),m},O=(e,l=!0)=>{var t;const i=A.currentValue,r=U(e);l?i===r&&e||(A.userInput=null,a(_.l4,r),i!==r&&a(_.YU,r,i),p.validateEvent&&(null==(t=null==I?void 0:I.validate)||t.call(I,"change").catch(e=>(0,T.U)(e))),A.currentValue=r):a(_.l4,r)},P=e=>{A.userInput=e;const l=""===e?null:Number(e);a(_.qs,l),O(l,!1)},M=e=>{const l=""!==e?Number(e):"";((0,b.Et)(l)&&!Number.isNaN(l)||""===e)&&O(l),B(),A.userInput=null},X=()=>{var e,l;null==(l=null==(e=h.value)?void 0:e.focus)||l.call(e)},S=()=>{var e,l;null==(l=null==(e=h.value)?void 0:e.blur)||l.call(e)},z=e=>{a("focus",e)},G=e=>{var l,t;A.userInput=null,null===A.currentValue&&(null==(l=h.value)?void 0:l.input)&&(h.value.input.value=""),a("blur",e),p.validateEvent&&(null==(t=null==I?void 0:I.validate)||t.call(I,"blur").catch(e=>(0,T.U)(e)))},B=()=>{A.currentValue!==p.modelValue&&(A.currentValue=p.modelValue)},Q=e=>{document.activeElement===e.target&&e.preventDefault()};return(0,t.wB)(()=>p.modelValue,(e,l)=>{const a=U(e,!0);null===A.userInput&&a!==l&&(A.currentValue=a)},{immediate:!0}),(0,t.sV)(()=>{var e;const{min:l,max:t,modelValue:i}=p,r=null==(e=h.value)?void 0:e.input;if(r.setAttribute("role","spinbutton"),Number.isFinite(t)?r.setAttribute("aria-valuemax",String(t)):r.removeAttribute("aria-valuemax"),Number.isFinite(l)?r.setAttribute("aria-valuemin",String(l)):r.removeAttribute("aria-valuemin"),r.setAttribute("aria-valuenow",A.currentValue||0===A.currentValue?String(A.currentValue):""),r.setAttribute("aria-disabled",String(D.value)),!(0,b.Et)(i)&&null!=i){let e=Number(i);Number.isNaN(e)&&(e=null),a(_.l4,e)}r.addEventListener("wheel",Q,{passive:!1})}),(0,t.$u)(()=>{var e,l;const a=null==(e=h.value)?void 0:e.input;null==a||a.setAttribute("aria-valuenow",`${null!=(l=A.currentValue)?l:""}`)}),l({focus:X,blur:S}),(e,l)=>((0,t.uX)(),(0,t.CE)("div",{class:(0,r.C4)([(0,i.R1)(F).b(),(0,i.R1)(F).m((0,i.R1)(C)),(0,i.R1)(F).is("disabled",(0,i.R1)(D)),(0,i.R1)(F).is("without-controls",!e.controls),(0,i.R1)(F).is("controls-right",(0,i.R1)(R))]),onDragstart:(0,u.D$)(()=>{},["prevent"])},[e.controls?(0,t.bo)(((0,t.uX)(),(0,t.CE)("span",{key:0,role:"button","aria-label":(0,i.R1)(m)("el.inputNumber.decrease"),class:(0,r.C4)([(0,i.R1)(F).e("decrease"),(0,i.R1)(F).is("disabled",(0,i.R1)(g))]),onKeydown:(0,u.jR)(x,["enter"])},[(0,t.RG)(e.$slots,"decrease-icon",{},()=>[(0,t.bF)((0,i.R1)(d.tk),null,{default:(0,t.k6)(()=>[(0,i.R1)(R)?((0,t.uX)(),(0,t.Wv)((0,i.R1)(s.ArrowDown),{key:0})):((0,t.uX)(),(0,t.Wv)((0,i.R1)(s.Minus),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[(0,i.R1)(c.wc),x]]):(0,t.Q3)("v-if",!0),e.controls?(0,t.bo)(((0,t.uX)(),(0,t.CE)("span",{key:1,role:"button","aria-label":(0,i.R1)(m)("el.inputNumber.increase"),class:(0,r.C4)([(0,i.R1)(F).e("increase"),(0,i.R1)(F).is("disabled",(0,i.R1)(N))]),onKeydown:(0,u.jR)(K,["enter"])},[(0,t.RG)(e.$slots,"increase-icon",{},()=>[(0,t.bF)((0,i.R1)(d.tk),null,{default:(0,t.k6)(()=>[(0,i.R1)(R)?((0,t.uX)(),(0,t.Wv)((0,i.R1)(s.ArrowUp),{key:0})):((0,t.uX)(),(0,t.Wv)((0,i.R1)(s.Plus),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[(0,i.R1)(c.wc),K]]):(0,t.Q3)("v-if",!0),(0,t.bF)((0,i.R1)(o.WK),{id:e.id,ref_key:"input",ref:h,type:"number",step:e.step,"model-value":(0,i.R1)(k),placeholder:e.placeholder,readonly:e.readonly,disabled:(0,i.R1)(D),size:(0,i.R1)(C),max:e.max,min:e.min,name:e.name,"aria-label":e.ariaLabel,"validate-event":!1,inputmode:e.inputmode,onKeydown:[(0,u.jR)((0,u.D$)(K,["prevent"]),["up"]),(0,u.jR)((0,u.D$)(x,["prevent"]),["down"])],onBlur:G,onFocus:z,onInput:P,onChange:M},(0,t.eX)({_:2},[e.$slots.prefix?{name:"prefix",fn:(0,t.k6)(()=>[(0,t.RG)(e.$slots,"prefix")])}:void 0,e.$slots.suffix?{name:"suffix",fn:(0,t.k6)(()=>[(0,t.RG)(e.$slots,"suffix")])}:void 0]),1032,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","aria-label","inputmode","onKeydown"])],42,["onDragstart"]))}});var A=(0,m.A)(h,[["__file","input-number.vue"]]),I=a(25376);const g=(0,I.GU)(A)},87603:function(e,l,a){a(97042),a(72343)}}]);