"use strict";(self["webpackChunkorange"]=self["webpackChunkorange"]||[]).push([[8796],{20709:function(e,a,t){t(97042)},48796:function(e,a,t){t.r(a),t.d(a,{default:function(){return I}});var n=t(77195),i=(t(97042),t(38389),t(17851)),l=(t(68489),t(20709),t(61688),t(70944)),s=t(65451),r=(t(63390),t(69080)),o=(t(25374),t(25136)),d=(t(69957),t(44114),t(18111),t(22489),t(56768)),u=t(90144),p=t(24232),g=t(81387),f=t(61617),c=t(60265),m=t(22414),b=t(82572);const h={class:"tab-dialog-box",style:{position:"relative"}};var k=(0,d.pM)({__name:"index",props:{type:{}},setup(e){const a=(0,g.rd)(),t=e,k=(0,b.l5)(),y=(0,d.WQ)("mainContextHeight",200),C=(0,u.KR)("remindingMessage"),I=(0,u.KR)(1),R=e=>(null==e&&(e={}),new Promise((a,t)=>{f.wI.listRemindingTask(e).then(e=>{a({dataList:e.data.dataList,totalCount:e.data.totalCount})}).catch(e=>{t(e)})})),F=()=>!0,v={loadTableData:R,verifyTableParameter:F,paged:!0,orderFieldName:"createTime",ascending:!0},z=(0,u.KR)((0,c.K)(v)),T=e=>(null==e&&(e={}),e.read=1===I.value,new Promise((a,t)=>{f.wI.listCopyMessage(e).then(e=>{a({dataList:e.data.dataList,totalCount:e.data.totalCount})}).catch(e=>{t(e)})})),S=()=>!0,w={loadTableData:T,verifyTableParameter:S,paged:!0,orderFieldName:"createTime",ascending:!0},_=(0,u.KR)((0,c.K)(w)),x=(e=!1)=>{e?z.value.refreshTable(!0,1):z.value.refreshTable()},N=(e=!1)=>{e?_.value.refreshTable(!0,1):_.value.refreshTable()},D=(e=!1)=>{e?(z.value.refreshTable(!0,1),_.value.refreshTable(!0,1)):(z.value.refreshTable(),_.value.refreshTable())},L=(e,t=null)=>{let n=null!=t,i={processInstanceId:e.processInstanceId,processDefinitionId:e.processDefinitionId,taskId:e.taskId},l=n?f.wI.viewInitialHistoricTaskInfo(i):f.wI.viewRuntimeTaskInfo(i);l.then(i=>{i.data&&a.push({name:i.data.routerName||"handlerFlowTask",query:{isRuntime:!n+"",taskId:e.taskId,messageId:t,processDefinitionKey:e.processDefinitionKey,processInstanceId:e.processInstanceId,processDefinitionId:e.processDefinitionId,formId:i.data.formId,routerName:i.data.routerName,readOnly:(!!n||i.data.readOnly)+"",taskName:e.taskName,taskKey:i.data.taskKey,flowEntryName:e.processDefinitionName,processInstanceInitiator:e.processInstanceInitiator,operationList:JSON.stringify((i.data.operationList||[]).filter(e=>e.type!==m.SysFlowTaskOperationType.CO_SIGN&&e.type!==m.SysFlowTaskOperationType.REVOKE&&e.type!==m.SysFlowTaskOperationType.SIGN_REDUCTION)),variableList:JSON.stringify(i.data.variableList)}})}).catch(e=>{console.warn(e)})},P=()=>{D()};return(0,d.sV)(()=>{P()}),(0,d.wB)(()=>t.type,e=>{C.value=e||"remindingMessage",I.value=0},{immediate:!0}),(e,a)=>{const t=(0,d.g2)("vxe-column"),g=o.S2,f=r.aQ,c=s.S2,m=l.A,b=n.v$,R=i.Zh,F=i.MQ,v=n.q;return(0,d.uX)(),(0,d.CE)("div",h,[(0,d.bF)(v,{modelValue:(0,u.R1)(C),"onUpdate:modelValue":a[4]||(a[4]=e=>(0,u.i9)(C)?C.value=e:null)},{default:(0,d.k6)(()=>[(0,d.bF)(b,{label:"催办消息",name:"remindingMessage",style:{width:"100%"}},{default:(0,d.k6)(()=>[(0,d.Lk)("div",{class:"tab-content-box",style:(0,p.Tr)("min-height:"+((0,u.R1)(y)-76)+"px")},[(0,d.bF)(m,{class:"page-table",ref:"flowCategory",data:(0,u.R1)(z).dataList,size:(0,u.R1)(k).defaultFormItemSize,onSortChange:(0,u.R1)(z).onSortChange,onRefresh:a[0]||(a[0]=e=>x(!0)),"seq-config":{startIndex:((0,u.R1)(z).currentPage-1)*(0,u.R1)(z).pageSize}},{pagination:(0,d.k6)(()=>[(0,d.bF)(c,{justify:"end",style:{"margin-top":"16px"}},{default:(0,d.k6)(()=>[(0,d.bF)(f,{total:(0,u.R1)(z).totalCount,"current-page":(0,u.R1)(z).currentPage,"page-size":(0,u.R1)(z).pageSize,"page-sizes":[10,20,50,100],layout:"total, prev, pager, next, sizes",onCurrentChange:(0,u.R1)(z).onCurrentPageChange,onSizeChange:(0,u.R1)(z).onPageSizeChange},null,8,["total","current-page","page-size","onCurrentChange","onSizeChange"])]),_:1})]),default:(0,d.k6)(()=>[(0,d.bF)(t,{title:"序号",type:"seq",width:"70px",index:(0,u.R1)(z).getTableIndex},null,8,["index"]),(0,d.bF)(t,{title:"流程名称",field:"processDefinitionName"}),(0,d.bF)(t,{title:"任务名称",field:"taskName"}),(0,d.bF)(t,{title:"催办人",field:"createUsername"}),(0,d.bF)(t,{title:"任务创建时间",field:"taskStartTime"}),(0,d.bF)(t,{title:"催办时间",field:"createTime"}),(0,d.bF)(t,{title:"操作",width:"100px"},{default:(0,d.k6)(e=>[(0,d.bF)(g,{link:"",type:"primary",size:(0,u.R1)(k).defaultFormItemSize,onClick:a=>L(e.row)},{default:(0,d.k6)(()=>a[5]||(a[5]=[(0,d.eW)("办理")])),_:2,__:[5]},1032,["size","onClick"])]),_:1})]),_:1},8,["data","size","onSortChange","seq-config"])],4)]),_:1}),(0,d.bF)(b,{label:"抄送消息",name:"copyMessage",style:{width:"100%"}},{default:(0,d.k6)(()=>[(0,d.Lk)("div",{class:"tab-content-box",style:(0,p.Tr)("min-height:"+((0,u.R1)(y)-76)+"px")},[(0,d.bF)(m,{class:"page-table",ref:"flowCategory",data:(0,u.R1)(_).dataList,size:(0,u.R1)(k).defaultFormItemSize,onSortChange:(0,u.R1)(_).onSortChange,onRefresh:a[3]||(a[3]=e=>N(!0)),"seq-config":{startIndex:((0,u.R1)(_).currentPage-1)*(0,u.R1)(_).pageSize}},{operator:(0,d.k6)(()=>[(0,d.bF)(F,{size:(0,u.R1)(k).defaultFormItemSize,modelValue:(0,u.R1)(I),"onUpdate:modelValue":a[1]||(a[1]=e=>(0,u.i9)(I)?I.value=e:null),onChange:a[2]||(a[2]=e=>N(!0))},{default:(0,d.k6)(()=>[(0,d.bF)(R,{value:1},{default:(0,d.k6)(()=>a[6]||(a[6]=[(0,d.eW)("已读消息")])),_:1,__:[6]}),(0,d.bF)(R,{value:0},{default:(0,d.k6)(()=>a[7]||(a[7]=[(0,d.eW)("未读消息")])),_:1,__:[7]})]),_:1},8,["size","modelValue"])]),pagination:(0,d.k6)(()=>[(0,d.bF)(c,{justify:"end",style:{"margin-top":"16px"}},{default:(0,d.k6)(()=>[(0,d.bF)(f,{total:(0,u.R1)(_).totalCount,"current-page":(0,u.R1)(_).currentPage,"page-size":(0,u.R1)(_).pageSize,"page-sizes":[10,20,50,100],layout:"total, prev, pager, next, sizes",onCurrentChange:(0,u.R1)(_).onCurrentPageChange,onSizeChange:(0,u.R1)(_).onPageSizeChange},null,8,["total","current-page","page-size","onCurrentChange","onSizeChange"])]),_:1})]),default:(0,d.k6)(()=>[(0,d.bF)(t,{title:"序号",type:"seq",width:"70px",index:(0,u.R1)(_).getTableIndex},null,8,["index"]),(0,d.bF)(t,{title:"流程名称",field:"processDefinitionName"}),(0,d.bF)(t,{title:"任务名称",field:"taskName"}),(0,d.bF)(t,{title:"抄送人",field:"createUsername"}),(0,d.bF)(t,{title:"任务创建时间",field:"taskStartTime"}),(0,d.bF)(t,{title:"抄送时间",field:"createTime"}),(0,d.bF)(t,{title:"操作",width:"100px"},{default:(0,d.k6)(e=>[(0,d.bF)(g,{link:"",type:"primary",size:(0,u.R1)(k).defaultFormItemSize,onClick:a=>L(e.row,e.row.messageId)},{default:(0,d.k6)(()=>a[8]||(a[8]=[(0,d.eW)("详情")])),_:2,__:[8]},1032,["size","onClick"])]),_:1})]),_:1},8,["data","size","onSortChange","seq-config"])],4)]),_:1})]),_:1},8,["modelValue"])])}}}),y=t(71241);const C=(0,y.A)(k,[["__scopeId","data-v-1b0fcb76"]]);var I=C},68489:function(e,a,t){t(97042)}}]);