"use strict";(self["webpackChunkorange"]=self["webpackChunkorange"]||[]).push([[6552],{6552:function(e,a,l){l.r(a),l.d(a,{default:function(){return I}});var t=l(21929),s=(l(97042),l(98421),l(65451)),i=(l(63390),l(68368)),u=(l(81208),l(91542)),n=(l(37985),l(47001),l(77649)),o=(l(87603),l(18888)),d=(l(3172),l(25136)),p=(l(69957),l(3740)),r=(l(42899),l(14022)),v=(l(72343),l(76408)),c=(l(87535),l(32465),l(85415)),m=(l(22243),l(7409),l(44114),l(18111),l(22489),l(7588),l(61701),l(18237),l(56768)),f=l(90144),y=l(45130),b=l(57477),g=l(19183),_=l(54428),h=l(27007),T=l(99564),R=l(99397),k=l(22414),S=l(31372),F=l(71066),w=l(82572),O=l(27385);const E={class:"form-single-fragment third-party-dlg",style:{position:"relative"}};var U=(0,m.pM)({__name:"formEditOperation",props:{rowData:{default:void 0},validStatusList:{default:void 0},flowType:{default:void 0},dialog:{default:void 0},thirdParamsString:{},dialogKey:{}},setup(e){const a=(0,w.l5)(),l=e,{thirdParams:U,onCloseThirdDialog:P}=(0,F.P)(l),L=(0,f.KR)(),I=(0,f.KR)({id:void 0,type:void 0,label:void 0,latestApprovalStatus:void 0,showOrder:0,buttonStyle:"primary",buttonIcon:void 0,buttonPlain:!0}),A=(0,f.KR)(),G=(0,f.KR)(),V=(0,f.KR)(),x=(0,f.KR)([]);let N=[];const C=(0,f.KR)(),D=(0,f.KR)(),z=(0,f.KR)({assigneeType:"USER_GROUP",value:[],assigneeList:[]}),K=(0,f.KR)([]),W={type:[{required:!0,message:"请选择按钮类型",trigger:"blur"}],label:[{required:!0,message:"请输入按钮名称",trigger:"blur"}]},M=(0,f.KR)([]),X=(0,m.EW)(()=>({rowData:l.rowData||U.value.rowData,validStatusList:l.validStatusList||U.value.validStatusList||[],flowType:l.flowType||U.value.flowType})),j=(0,m.EW)(()=>{switch(z.value.assigneeType){case"USER_GROUP":return A.value;case"ROLE_GROUP":return G.value;case"DEPT_GROUP":return V.value;case"POST_GROUP":return C.value;case"DEPT_POST_GROUP":return D.value;default:return[]}}),J=(0,m.EW)(()=>{let e=[k.SysFlowTaskOperationType.REJECT,k.SysFlowTaskOperationType.REJECT_TO_TASK,k.SysFlowTaskOperationType.MULTI_SIGN,k.SysFlowTaskOperationType.MULTI_AGREE,k.SysFlowTaskOperationType.MULTI_REFUSE,k.SysFlowTaskOperationType.MULTI_ABSTAIN];return k.SysFlowTaskOperationType.getList().filter(a=>X.value.flowType===k.FlowEntryType.AUTO_TASK?-1!==e.indexOf(a.id):-1===[k.SysFlowTaskOperationType.INTERVENE,k.SysFlowTaskOperationType.REVIVE,k.SysFlowTaskOperationType.TIMEOUT_AUTO_COMPLETE,k.SysFlowTaskOperationType.EMPTY_USER_AUTO_COMPLETE,k.SysFlowTaskOperationType.EMPTY_USER_AUTO_REJECT].indexOf(a.id))}),Q=()=>{K.value.push({name:"",value:""})},B=e=>{let a=K.value.indexOf(e);K.value.splice(a,1)},$=()=>{l.dialog?l.dialog.cancel():P(!1)},q=()=>{L.value.validate(e=>{if(e){if((I.value.type===k.SysFlowTaskOperationType.MULTI_SIGN||I.value.type===k.SysFlowTaskOperationType.SET_ASSIGNEE)&&Array.isArray(z.value.assigneeList)&&z.value.assigneeList.length>0){let e;"USER_GROUP"===z.value.assigneeType||"ROLE_GROUP"===z.value.assigneeType||"POST_GROUP"===z.value.assigneeType?e=z.value.assigneeList.join(","):"DEPT_GROUP"!==z.value.assigneeType&&"DEPT_POST_GROUP"!==z.value.assigneeType||(e=z.value.assigneeList.map(e=>e[e.length-1]).join(",")),I.value.multiSignAssignee=JSON.stringify({assigneeType:z.value.assigneeType,assigneeList:e})}else I.value.multiSignAssignee=void 0;"undefined"==I.value.latestApprovalStatus&&(I.value.latestApprovalStatus=void 0);let e=K.value.reduce((e,a)=>(a.name&&a.value&&""!==a.name&&""!==a.value&&(e[a.name]=a.value),e),{});I.value.variableList=JSON.stringify(e),l.dialog?l.dialog.submit(I.value):P(!0,void 0,I.value)}})},Y=()=>{z.value.assigneeList=[],M.value=[]},H=e=>{Y(),I.value.label=null==e||""===e?void 0:k.SysFlowTaskOperationType.getValue(e)},Z=e=>new Promise((a,l)=>{if("USER_GROUP"===e)a(!0);else if("ROLE_GROUP"===e){let e={widgetType:"upms_role",filter:{}};_.If.list(e,{showMask:!1}).then(e=>{null==e.data.dataList&&(e.data.dataList=[]),G.value=e.data.dataList.map(e=>({id:String(e.roleId),name:e.roleName,...e})),a(!0)}).catch(e=>{l(e)})}else if("DEPT_GROUP"===e){let e={widgetType:"upms_dept",filter:{}};_.If.list(e,{showMask:!1}).then(e=>{V.value=[],null==e.data.dataList&&(e.data.dataList=[]),e.data.dataList.forEach(e=>{const a={id:String(e.deptId),name:e.deptName,parentId:String(e.parentId),...e};V.value?.push(a)}),N=JSON.parse(JSON.stringify(V.value)),V.value=(0,h.BN)(V.value),a(!0)}).catch(e=>{l(e)})}else if("POST_GROUP"===e){let e={widgetType:"upms_post",filter:{}};_.If.list(e,{showMask:!1}).then(e=>{null==e.data.dataList&&(e.data.dataList=[]),C.value=e.data.dataList.map(e=>({id:String(e.postId),name:e.postName,...e})),a(!0)}).catch(e=>{l(e)})}else if("DEPT_POST_GROUP"===e){let e={widgetType:"upms_dept_post",filter:{}};_.If.list(e,{showMask:!1}).then(e=>{let l=new Map;null==e.data.dataList&&(e.data.dataList=[]),e.data.dataList.forEach(e=>{let a=l.get(e.deptId);null==a&&(a={id:e.deptId,name:e.deptName,children:[]},l.set(e.deptId,a)),a.children.push({id:e.deptPostId,name:e.postShowName})}),D.value=[],l.forEach(e=>{D.value?.push(e)}),a(!0)}).catch(e=>{l(e)})}}),ee=e=>{if(Array.isArray(e)){let a=M.value.map(e=>e.id);const l=[...M.value];e.forEach(e=>{-1===a.indexOf(e.loginName)&&l.push({id:e.loginName,name:e.showName||e.loginName})}),M.value=l}},ae=()=>{let e=z.value.assigneeList;S.l.show("添加抄送人",g["default"],{area:["1000px","650px"]},{multiple:!0,showAssignee:!1,showStartUser:!1,usedUserIdList:e,path:"thirdTaskUserSelect"},{width:"1000px",height:"690px",pathName:"/thirdParty/thirdTaskUserSelect"}).then(e=>{ee(e)}).catch(e=>{console.warn(e)})},le=e=>{const a=[];Array.isArray(e)?(Array.isArray(x.value)?x.value.forEach(e=>{a.push(e)}):x.value=[],e.forEach(e=>{null==(0,h.PH)(x.value,e.id,"id")&&a.push(e)})):(a.push({id:e.deptId,name:e.deptName}),z.value.assigneeList.push([e.deptId])),x.value=a},te=()=>{let e=x.value.map(e=>e.id);S.l.show("选择部门",T["default"],{area:["600px","600px"]},{allGroupList:j.value,usedIdList:e,path:"thirdTaskGroupSelect"},{width:"600px",height:"630px",pathName:"/thirdParty/thirdTaskGroupSelect"}).then(e=>{le(e)}).catch(e=>{console.error(e)})},se=(e,a,l)=>{for(let t=0;t<l.length;t++){const s=l[t];if(s.deptId===a){e.unshift(a),s.parentId&&se(e,s.parentId,l);break}}};return(0,m.wB)(()=>z.value.assigneeType,()=>{j.value||Z(z.value.assigneeType).catch(e=>{console.warn(e)})},{deep:!0,immediate:!0}),(0,m.wB)(()=>M.value,e=>{const a=e.map(e=>e.id);z.value.assigneeList=a},{deep:!0}),(0,m.wB)(()=>x.value,e=>{let a=[];e&&e.forEach(e=>{const l=[e.deptId];se(l,e.parentId,N),a.push(l)}),z.value.assigneeList=a},{deep:!0}),(0,m.sV)(()=>{if(X.value.rowData){if(I.value={...X.value.rowData,latestApprovalStatus:X.value.rowData.latestApprovalStatus?Number.parseInt(X.value.rowData.latestApprovalStatus):void 0,buttonStyle:X.value.rowData.buttonStyle||"primary",buttonIcon:X.value.rowData.buttonIcon||void 0,buttonPlain:X.value.rowData.buttonPlain||!0},X.value.rowData.multiSignAssignee){z.value=JSON.parse(X.value.rowData.multiSignAssignee);let e=z.value.assigneeList;z.value.assigneeList=void 0;let a={widgetType:"upms_user",fieldName:"loginName",fieldValues:e};a.fieldValues=a.fieldValues.split(",").filter(e=>-1===["${startUserName}","${appointedAssignee}"].indexOf(e)).join(","),a.fieldValues?_.If.viewByIds(a).then(a=>{let l=e.split(","),t=e.split(",");a.data.forEach(e=>{t[l.indexOf(e.loginName)]=e.showName}),M.value=l.map((e,a)=>({id:e,name:t[a]}))}):M.value=e.map(e=>({id:e,name:e})),Z(z.value.assigneeType).then(()=>{if("USER_GROUP"===z.value.assigneeType||"ROLE_GROUP"===z.value.assigneeType||"POST_GROUP"===z.value.assigneeType)z.value.assigneeList=e.split(",");else if("DEPT_GROUP"===z.value.assigneeType||"DEPT_POST_GROUP"===z.value.assigneeType){const a=[];z.value.assigneeList=e.split(",").map(e=>{for(let t=0;t<N.length;t++){const l=N[t];if(l.deptId===e){a.push(l);break}}let l=(0,h.Zi)(j.value,e);return l}),x.value=a}}).catch(e=>{console.warn(e)})}if(X.value.rowData.variableList){let e=JSON.parse(X.value.rowData.variableList);e&&(K.value=Object.keys(e).map(a=>({name:a,value:e[a]})))}}}),(e,l)=>{const g=c.P9,_=c.AV,h=t.xE,T=v.uD,S=r.WK,F=p.qi,w=d.S2,U=o._m,P=n.lq,A=i.o8,G=u.tk,V=i.Up,N=s.S2,C=t.US;return(0,m.uX)(),(0,m.CE)("div",E,[(0,m.bF)(C,{ref_key:"form",ref:L,model:(0,f.R1)(I),class:"full-width-input form-box",rules:W,style:{"overflow-x":"hidden","overflow-y":"auto",width:"100%"},"label-width":"100px",size:(0,f.R1)(a).defaultFormItemSize,"label-position":"right",onSubmit:l[13]||(l[13]=(0,y.D$)(()=>{},["prevent"]))},{default:(0,m.k6)(()=>[(0,m.bF)(N,{gutter:20},{default:(0,m.k6)(()=>[(0,m.bF)(T,{span:24},{default:(0,m.k6)(()=>[(0,m.bF)(h,{label:"按钮类型",prop:"type"},{default:(0,m.k6)(()=>[(0,m.bF)(_,{class:"input-item",modelValue:(0,f.R1)(I).type,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,f.R1)(I).type=e),clearable:!0,placeholder:"按钮类型",onChange:H},{default:(0,m.k6)(()=>[((0,m.uX)(!0),(0,m.CE)(m.FK,null,(0,m.pI)((0,f.R1)(J),e=>((0,m.uX)(),(0,m.Wv)(g,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),(0,m.bF)(T,{span:24},{default:(0,m.k6)(()=>[(0,m.bF)(h,{label:"按钮名称",prop:"label"},{default:(0,m.k6)(()=>[(0,m.bF)(S,{class:"input-item",modelValue:(0,f.R1)(I).label,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,f.R1)(I).label=e),clearable:!0,placeholder:"按钮名称"},null,8,["modelValue"])]),_:1})]),_:1}),(0,m.bF)(T,{span:12},{default:(0,m.k6)(()=>[(0,m.bF)(h,{label:"按钮样式",prop:"buttonStyle"},{default:(0,m.k6)(()=>[(0,m.bF)(_,{modelValue:(0,f.R1)(I).buttonStyle,"onUpdate:modelValue":l[2]||(l[2]=e=>(0,f.R1)(I).buttonStyle=e),clearable:""},{default:(0,m.k6)(()=>[(0,m.bF)(g,{label:"primary",value:"primary"}),(0,m.bF)(g,{label:"success",value:"success"}),(0,m.bF)(g,{label:"warning",value:"warning"}),(0,m.bF)(g,{label:"danger",value:"danger"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),(0,m.bF)(T,{span:12},{default:(0,m.k6)(()=>[(0,m.bF)(h,{label:"镂空模式",prop:"buttonPlain"},{default:(0,m.k6)(()=>[(0,m.bF)(F,{modelValue:(0,f.R1)(I).buttonPlain,"onUpdate:modelValue":l[3]||(l[3]=e=>(0,f.R1)(I).buttonPlain=e)},null,8,["modelValue"])]),_:1})]),_:1}),(0,m.bF)(T,{span:12},{default:(0,m.k6)(()=>[(0,m.bF)(h,{label:"按钮图标",prop:"buttonIcon"},{default:(0,m.k6)(()=>[(0,m.bF)(O.A,{value:(0,f.R1)(I).buttonIcon,"onUpdate:value":l[4]||(l[4]=e=>(0,f.R1)(I).buttonIcon=e),height:28},null,8,["value"])]),_:1})]),_:1}),(0,m.bF)(T,{span:24},{default:(0,m.k6)(()=>[(0,m.bF)(h,{label:"审批状态"},{default:(0,m.k6)(()=>[(0,m.bF)(_,{class:"input-item",modelValue:(0,f.R1)(I).latestApprovalStatus,"onUpdate:modelValue":l[5]||(l[5]=e=>(0,f.R1)(I).latestApprovalStatus=e),placeholder:"不更新",clearable:""},{default:(0,m.k6)(()=>[(0,m.bF)(g,{label:"不更新",value:void 0}),((0,m.uX)(!0),(0,m.CE)(m.FK,null,(0,m.pI)((0,f.R1)(X).validStatusList,e=>((0,m.uX)(),(0,m.Wv)(g,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),(0,f.R1)(I).type===(0,f.R1)(k.SysFlowTaskOperationType).MULTI_SIGN||(0,f.R1)(I).type===(0,f.R1)(k.SysFlowTaskOperationType).SET_ASSIGNEE?((0,m.uX)(),(0,m.Wv)(T,{key:0,span:24},{default:(0,m.k6)(()=>[(0,m.bF)(h,{label:"用户类型"},{default:(0,m.k6)(()=>[(0,m.bF)(_,{modelValue:(0,f.R1)(z).assigneeType,"onUpdate:modelValue":l[6]||(l[6]=e=>(0,f.R1)(z).assigneeType=e),placeholder:"",onChange:Y},{default:(0,m.k6)(()=>[(0,m.bF)(g,{label:"用户",value:"USER_GROUP"}),(0,m.bF)(g,{label:"角色",value:"ROLE_GROUP"}),(0,m.bF)(g,{label:"部门",value:"DEPT_GROUP"}),(0,m.bF)(g,{label:"岗位",value:"POST_GROUP"}),(0,m.bF)(g,{label:"部门岗位",value:"DEPT_POST_GROUP"})]),_:1},8,["modelValue"])]),_:1})]),_:1})):(0,m.Q3)("",!0),(0,f.R1)(I).type===(0,f.R1)(k.SysFlowTaskOperationType).MULTI_SIGN||(0,f.R1)(I).type===(0,f.R1)(k.SysFlowTaskOperationType).SET_ASSIGNEE?((0,m.uX)(),(0,m.Wv)(T,{key:1,span:24},{default:(0,m.k6)(()=>[(0,m.bF)(h,{label:"用户选择"},{default:(0,m.k6)(()=>["USER_GROUP"===(0,f.R1)(z).assigneeType?((0,m.uX)(),(0,m.Wv)(R.A,{key:0,value:(0,f.R1)(M),"onUpdate:value":l[7]||(l[7]=e=>(0,f.i9)(M)?M.value=e:null)},{append:(0,m.k6)(()=>[(0,m.bF)(w,{class:"append-add",type:"default",icon:(0,f.R1)(b.Plus),onClick:ae},null,8,["icon"])]),_:1},8,["value"])):(0,m.Q3)("",!0),"ROLE_GROUP"===(0,f.R1)(z).assigneeType||"POST_GROUP"===(0,f.R1)(z).assigneeType?((0,m.uX)(),(0,m.Wv)(_,{key:1,class:"assignee-select",modelValue:(0,f.R1)(z).assigneeList,"onUpdate:modelValue":l[8]||(l[8]=e=>(0,f.R1)(z).assigneeList=e),placeholder:"",multiple:!0},{default:(0,m.k6)(()=>[((0,m.uX)(!0),(0,m.CE)(m.FK,null,(0,m.pI)((0,f.R1)(j),e=>((0,m.uX)(),(0,m.Wv)(g,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):(0,m.Q3)("",!0),"DEPT_GROUP"===(0,f.R1)(z).assigneeType?((0,m.uX)(),(0,m.Wv)(R.A,{key:2,value:(0,f.R1)(x),"onUpdate:value":l[9]||(l[9]=e=>(0,f.i9)(x)?x.value=e:null)},{append:(0,m.k6)(()=>[(0,m.bF)(w,{class:"append-add",type:"default",icon:(0,f.R1)(b.Plus),onClick:te},null,8,["icon"])]),_:1},8,["value"])):(0,m.Q3)("",!0),"DEPT_POST_GROUP"===(0,f.R1)(z).assigneeType?((0,m.uX)(),(0,m.Wv)(U,{modelValue:(0,f.R1)(z).assigneeList,"onUpdate:modelValue":l[10]||(l[10]=e=>(0,f.R1)(z).assigneeList=e),options:(0,f.R1)(j),key:"dept_post_select",props:{multiple:!0,value:"id",label:"name"}},null,8,["modelValue","options"])):(0,m.Q3)("",!0)]),_:1})]),_:1})):(0,m.Q3)("",!0),(0,m.bF)(T,{span:24},{default:(0,m.k6)(()=>[(0,m.bF)(h,{label:"显示顺序"},{default:(0,m.k6)(()=>[(0,m.bF)(P,{class:"input-item",modelValue:(0,f.R1)(I).showOrder,"onUpdate:modelValue":l[11]||(l[11]=e=>(0,f.R1)(I).showOrder=e),clearable:!0,placeholder:"显示顺序"},null,8,["modelValue"])]),_:1})]),_:1}),(0,f.R1)(I).type!==(0,f.R1)(k.SysFlowTaskOperationType).MULTI_SIGN?((0,m.uX)(),(0,m.Wv)(T,{key:2,span:24},{default:(0,m.k6)(()=>[(0,m.bF)(V,{"header-cell-class-name":"table-header-gray",size:e.defaultFormItemSize,data:(0,f.R1)(K),height:"200px","empty-text":"请添加流程变量"},{default:(0,m.k6)(()=>[(0,m.bF)(A,{label:"变量名称",prop:"name"},{default:(0,m.k6)(e=>[(0,m.bF)(S,{modelValue:e.row.name,"onUpdate:modelValue":a=>e.row.name=a,size:"mini"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),(0,m.bF)(A,{label:"变量值",prop:"value"},{default:(0,m.k6)(e=>[(0,m.bF)(S,{modelValue:e.row.value,"onUpdate:modelValue":a=>e.row.value=a,size:"mini"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),(0,m.bF)(A,{label:"操作",width:"50","header-align":"center",align:"center"},{header:(0,m.k6)(()=>[(0,m.bF)(G,{class:"icon-btn",onClick:l[12]||(l[12]=e=>Q())},{default:(0,m.k6)(()=>[(0,m.bF)((0,f.R1)(b.CirclePlus))]),_:1})]),default:(0,m.k6)(e=>[(0,m.bF)(G,{class:"icon-btn",onClick:a=>B(e.row)},{default:(0,m.k6)(()=>[(0,m.bF)((0,f.R1)(b.Remove))]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["size","data"])]),_:1})):(0,m.Q3)("",!0)]),_:1})]),_:1},8,["model","size"]),(0,m.bF)(N,{class:"no-scroll flex-box menu-box",type:"flex",justify:"end",style:{"padding-top":"10px"}},{default:(0,m.k6)(()=>[(0,m.bF)(w,{size:(0,f.R1)(a).defaultFormItemSize,plain:!0,onClick:$},{default:(0,m.k6)(()=>l[14]||(l[14]=[(0,m.eW)(" 取消 ")])),_:1,__:[14]},8,["size"]),(0,m.bF)(w,{type:"primary",size:(0,f.R1)(a).defaultFormItemSize,onClick:q},{default:(0,m.k6)(()=>l[15]||(l[15]=[(0,m.eW)(" 保存 ")])),_:1,__:[15]},8,["size"])]),_:1})])}}}),P=l(71241);const L=(0,P.A)(U,[["__scopeId","data-v-6b52c51f"]]);var I=L},27385:function(e,a,l){l.d(a,{A:function(){return b}});var t=l(52920),s=(l(97042),l(95509),l(69080)),i=(l(25374),l(25136)),u=(l(69957),l(65451)),n=(l(63390),l(44114),l(56768)),o=l(24232),d=l(90144),p=l(57477),r=l(9009);const v={class:"icon-select-dropdown"},c=["onClick","title"];var m=(0,n.pM)({__name:"index",props:{value:{default:""},height:{default:45}},emits:["update:value"],setup(e,{emit:a}){const l=[];for(const[t]of Object.entries(p))l.push(t);const m=a,f=e,y=(0,d.KR)(!1),b=(0,d.KR)(1),g=(0,d.KR)(32),_=e=>{m("update:value",e),y.value=!1},h=()=>{m("update:value",""),y.value=!1},T=()=>{b.value=1;let e=l.indexOf(f.value);e>=0&&(b.value+=Math.floor(e/g.value))},R=(0,n.EW)(()=>l.length),k=(0,n.EW)(()=>{let e=(b.value-1)*g.value,a=e+g.value;return l.slice(e,a)});return(e,a)=>{const l=u.S2,d=i.S2,p=s.aQ,m=t.Vc;return(0,n.uX)(),(0,n.Wv)(m,{width:"510",visible:y.value,"onUpdate:visible":a[1]||(a[1]=e=>y.value=e),onShow:T,trigger:"click"},{reference:(0,n.k6)(()=>[(0,n.Lk)("div",{class:"icon-select-input",style:(0,o.Tr)({width:e.height+"px",height:e.height+"px","line-height":e.height+"px","font-size":.5*e.height+"px"})},[e.value?((0,n.uX)(),(0,n.Wv)(r.A,{key:0,icon:e.value},null,8,["icon"])):(0,n.Q3)("",!0)],4)]),default:(0,n.k6)(()=>[(0,n.Lk)("div",v,[(0,n.bF)(l,{type:"flex",style:{"flex-wrap":"wrap"}},{default:(0,n.k6)(()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(k.value,a=>((0,n.uX)(),(0,n.CE)("div",{key:a,class:(0,o.C4)(["icon-item",{active:e.value===a}]),onClick:e=>_(a),title:a},[(0,n.bF)(r.A,{icon:a},null,8,["icon"])],10,c))),128))]),_:1}),(0,n.bF)(l,{type:"flex",justify:"space-between"},{default:(0,n.k6)(()=>[(0,n.bF)(d,{link:"",onClick:h,style:{"margin-left":"10px"}},{default:(0,n.k6)(()=>a[2]||(a[2]=[(0,n.eW)("清空")])),_:1,__:[2]}),(0,n.bF)(p,{"current-page":b.value,"onUpdate:currentPage":a[0]||(a[0]=e=>b.value=e),"page-size":g.value,layout:"prev, pager, next",total:R.value},null,8,["current-page","page-size","total"])]),_:1})])]),_:1},8,["visible"])}}}),f=l(71241);const y=(0,f.A)(m,[["__scopeId","data-v-634d1fcb"]]);var b=y},99397:function(e,a,l){l.d(a,{A:function(){return c}});var t=l(12687),s=(l(97042),l(31112),l(18111),l(22489),l(61701),l(56768)),i=l(90144),u=l(24232),n=l(82572);const o={class:"tag-select"},d={class:"tag-box"};var p=(0,s.pM)({__name:"TagSelect",props:{value:{}},emits:["update:value"],setup(e,{emit:a}){const l=a,p=e,r=(0,n.l5)(),v=(0,i.KR)([]),c={"${startUserName}":"流程发起人","${appointedAssignee}":"指定审批人 "},m=e=>{let a=v.value.filter(a=>a.id!==e.id);Array.isArray(p.value)?l("update:value",a):l("update:value",a.map(e=>e.id).join(","))};return(0,s.wB)(()=>p.value,e=>{null==e||""===e?v.value=[]:Array.isArray(e)?v.value=[...e].map(e=>({id:e.id,name:c[e.id]?c[e.id]:e.name||e.id})):v.value=e.split(",").map(e=>({id:e,name:c[e]?c[e]:e}))},{immediate:!0,deep:!0}),(e,a)=>{const l=t.u;return(0,s.uX)(),(0,s.CE)("div",o,[(0,s.Lk)("div",d,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,i.R1)(v),e=>((0,s.uX)(),(0,s.Wv)(l,{key:e.id,effect:"dark",style:{"margin-right":"5px"},type:"primary",size:(0,i.R1)(r).defaultFormItemSize,closable:"",onClose:a=>m(e)},{default:(0,s.k6)(()=>[(0,s.eW)((0,u.v_)(e.name),1)]),_:2},1032,["size","onClose"]))),128))]),(0,s.RG)(e.$slots,"append")])}}}),r=l(71241);const v=(0,r.A)(p,[["__scopeId","data-v-907c424c"]]);var c=v},99564:function(e,a,l){l.r(a),l.d(a,{default:function(){return b}});var t=l(76408),s=(l(97042),l(87535),l(68368)),i=(l(81208),l(47001),l(21929)),u=(l(98421),l(65451)),n=(l(63390),l(25136)),o=(l(69957),l(56768)),d=l(90144),p=l(45130),r=l(61473),v=l(71066),c=l(82572);const m={class:"form-single-fragment",style:{position:"relative"}};var f=(0,o.pM)({__name:"TaskGroupSelect",props:{allGroupList:{},usedIdList:{},dialog:{},thirdParamsString:{},dialogKey:{}},setup(e){const a=e,{thirdParams:l,onCloseThirdDialog:f}=(0,v.P)(a),y=(0,c.l5)();let b=(0,d.KR)([]);const g=(0,o.EW)(()=>({allGroupList:a.allGroupList||l.value.allGroupList,usedIdList:a.usedIdList||l.value.usedIdList})),_=(0,o.EW)(()=>b.value.length>0),h=e=>{b.value=e},T=()=>{a.dialog?a.dialog.submit(b.value):f(!0,void 0,b.value)},R=e=>!(Array.isArray(g.value.usedIdList)&&g.value.usedIdList.length>0)||-1===g.value.usedIdList.indexOf(e.id);return(e,a)=>{const l=n.S2,v=u.S2,c=i.US,f=s.o8,b=s.Up,k=t.uD;return(0,o.uX)(),(0,o.CE)("div",m,[(0,o.bF)(c,{"label-width":"100px",size:(0,d.R1)(y).defaultFormItemSize,"label-position":"right",onSubmit:a[0]||(a[0]=(0,p.D$)(()=>{},["prevent"]))},{default:(0,o.k6)(()=>[(0,o.bF)(v,{type:"flex",justify:"end"},{default:(0,o.k6)(()=>[(0,o.bF)(l,{type:"primary",size:(0,d.R1)(y).defaultFormItemSize,onClick:T,disabled:!(0,d.R1)(_)},{default:(0,o.k6)(()=>a[1]||(a[1]=[(0,o.eW)(" 添加分组 ")])),_:1,__:[1]},8,["size","disabled"])]),_:1})]),_:1},8,["size"]),(0,o.bF)(v,{style:{"margin-top":"18px"}},{default:(0,o.k6)(()=>[(0,o.bF)(k,{span:24},{default:(0,o.k6)(()=>[(0,o.bF)(b,{data:(0,d.R1)(g).allGroupList,size:(0,d.R1)(y).defaultFormItemSize,height:"452px","header-cell-class-name":"table-header-gray","row-key":"id","default-expand-all":!0,onSelectionChange:h},{empty:(0,o.k6)(()=>a[2]||(a[2]=[(0,o.Lk)("div",{class:"table-empty unified-font"},[(0,o.Lk)("img",{src:r}),(0,o.Lk)("span",null,"暂无数据")],-1)])),default:(0,o.k6)(()=>[(0,o.bF)(f,{type:"selection",width:"50px","header-align":"center",align:"center",selectable:R}),(0,o.bF)(f,{label:"部门名称",prop:"name"})]),_:1},8,["data","size"])]),_:1})]),_:1})])}}});const y=f;var b=y}}]);