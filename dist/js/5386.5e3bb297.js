"use strict";(self["webpackChunkorange"]=self["webpackChunkorange"]||[]).push([[1066,5386,6339,8720],{21013:function(e,t,s){s.d(t,{A:function(){return u}});var a=s(55583),r=s(18384);class u extends a.w{static getUserList(e,t){return super.post(r.x+"/upms/sysUser/list",e,t)}static addUser(e,t){return super.post(r.x+"/upms/sysUser/add",e,t)}static updateUser(e,t){return super.post(r.x+"/upms/sysUser/update",e,t)}static deleteUser(e,t){return super.post(r.x+"/upms/sysUser/delete",e,t)}static viewMenu(e,t){return super.post(r.x+"/upms/sysMenu/view",e,t)}static syncAzureUser(e){return super.post(r.x+"/upms/sysUser/syncAzureUser",e)}static getUser(e,t){return super.get(r.x+"/upms/sysUser/view",e,t)}static resetUserPassword(e,t){return super.post(r.x+"/upms/sysUser/resetPassword",e,t)}static listSysPermWithDetail(e,t){return super.get(r.x+"/upms/sysUser/listSysPermWithDetail",e,t)}static listSysPermCodeWithDetail(e,t){return super.get(r.x+"/upms/sysUser/listSysPermCodeWithDetail",e,t)}static listSysMenuWithDetail(e,t){return super.get(r.x+"/upms/sysUser/listSysMenuWithDetail",e,t)}}},54428:function(e,t,s){s.d(t,{v9:function(){return l},n5:function(){return i},lE:function(){return x},_4:function(){return h},C7:function(){return o},If:function(){return D},qY:function(){return n},ek:function(){return d},$z:function(){return c},$D:function(){return w},S_:function(){return v},fe:function(){return p},sV:function(){return m},r0:function(){return y.A}});s(18111),s(61701);var a=s(55583),r=s(52081),u=s(18384);class l extends a.w{static dictSysRole(e,t){return new Promise((s,a)=>{super.get(u.x+"/upms/sysRole/listDict",e,t).then(e=>{const t=new r.w("角色字典",e.data);s(t)}).catch(e=>{a(e)})})}static dictGlobalDict(e,t){return new Promise((s,a)=>{super.get(u.x+"/upms/globalDict/listDict",e,t).then(e=>{const t=new r.w("编码字典",(e.data||[]).map(e=>({...e,disabled:1===e.status})));s(t)}).catch(e=>{a(e)})})}static dictGlobalDictByIds(e,t){return new Promise((s,a)=>{super.get(u.x+"/upms/globalDict/listDictByIds",e,t).then(e=>{const t=new r.w("编码字典",e.data);s(t)}).catch(e=>{a(e)})})}static dictAllMenu(e,t){return new Promise((s,a)=>{super.get(u.x+"/upms/sysMenu/listDict",e,t).then(e=>{const t=new r.w("菜单字典",e.data);s(t)}).catch(e=>{a(e)})})}static dictSysMenu(e,t){return new Promise((s,a)=>{super.get(u.x+"/upms/sysMenu/listMenuDict",e,t).then(e=>{const t=new r.w("菜单字典",e.data);s(t)}).catch(e=>{a(e)})})}static dictDeptPost(e,t){return new Promise((s,a)=>{super.get(u.x+"/upms/sysDept/listSysDeptPostWithRelation",e,t).then(e=>{s(e.data)}).catch(e=>{a(e)})})}static dictSysPost(e,t){return new Promise((s,a)=>{super.get(u.x+"/upms/sysPost/listDict",e,t).then(e=>{const t=new r.w("岗位字典",e.data);s(t)}).catch(e=>{a(e)})})}static dictReportDblink(e,t){return new Promise((s,a)=>{super.get(u.x+"/report/reportDblink/listDict",e,t).then(e=>{const t=new r.w("数据库链接",e.data);s(t)}).catch(e=>{a(e)})})}static dictReportDict(e,t){return new Promise((s,a)=>{super.get(u.x+"/report/reportDict/listDict",e,t).then(e=>{const t=new r.w("字典管理",e.data);s(t)}).catch(e=>{a(e)})})}static dictSysUser(e,t){return new Promise((s,a)=>{super.get("/admin/upms/sysUser/listDict",e,t).then(e=>{let t=new r.w("用户字典",e.data);s(t)}).catch(e=>{a(e)})})}static dictSysDept(e,t){return new Promise((s,a)=>{super.get("/admin/upms/sysDept/listDict",e,t).then(e=>{let t=new r.w("部门字典",e.data);s(t)}).catch(e=>{a(e)})})}static dictSysDeptByParentId(e,t){return new Promise((s,a)=>{super.get("/admin/upms/sysDept/listDictByParentId",e,t).then(e=>{let t=new r.w("部门字典",e.data);s(t)}).catch(e=>{a(e)})})}}class i extends a.w{static listSysLoginUser(e,t){return super.post(u.x+"/upms/loginUser/list",e,t)}static deleteSysLoginUser(e,t){return super.post(u.x+"/upms/loginUser/delete",e,t)}}class p extends a.w{static getMenuPermList(e,t){return super.post(u.x+"/upms/sysMenu/list",e,t)}static addMenu(e,t){return super.post(u.x+"/upms/sysMenu/add",e,t)}static updateMenu(e,t){return super.post(u.x+"/upms/sysMenu/update",e,t)}static deleteMenu(e,t){return super.post(u.x+"/upms/sysMenu/delete",e,t)}static viewMenu(e,t){return super.get(u.x+"/upms/sysMenu/view",e,t)}static listMenuPermCode(e,t){return super.get(u.x+"/upms/sysMenu/listMenuPerm",e,t)}static listSysPermByMenuIdWithDetail(e,t){return super.get(u.x+"/upms/sysMenu/listSysPermWithDetail",e,t)}static listSysUserByMenuIdWithDetail(e,t){return super.get(u.x+"/upms/sysMenu/listSysUserWithDetail",e,t)}}class n extends a.w{static updateSysConf(e,t){return super.post(u.x+"/upms/sysConf/update",e,t)}static getSysConf(e,t){return super.get(u.x+"/upms/sysConf/view",e,t)}}class o extends a.w{static getPermCodeList(e,t){return super.get(u.x+"/upms/login/getAllPermCodes",e,t)}}class d extends a.w{static add(e,t){return super.post(u.x+"/upms/sysDataPerm/add",e,t)}static update(e,t){return super.post(u.x+"/upms/sysDataPerm/update",e,t)}static delete(e,t){return super.post(u.x+"/upms/sysDataPerm/delete",e,t)}static list(e,t){return super.post(u.x+"/upms/sysDataPerm/list",e,t)}static view(e,t){return super.get(u.x+"/upms/sysDataPerm/view",e,t)}static listDataPermUser(e,t){return super.post(u.x+"/upms/sysDataPerm/listDataPermUser",e,t)}static addDataPermUser(e,t){return super.post(u.x+"/upms/sysDataPerm/addDataPermUser",e,t)}static deleteDataPermUser(e,t){return super.post(u.x+"/upms/sysDataPerm/deleteDataPermUser",e,t)}static listNotInDataPermUser(e,t){return super.post(u.x+"/upms/sysDataPerm/listNotInDataPermUser",e,t)}}class c extends a.w{static list(e,t){return super.post(u.x+"/upms/sysDept/list",e,t)}static view(e,t){return super.get(u.x+"/upms/sysDept/view",e,t)}static export(e,t){return super.download(u.x+"/upms/sysDept/export",e,t)}static add(e,t){return super.post(u.x+"/upms/sysDept/add",e,t)}static update(e,t){return super.post(u.x+"/upms/sysDept/update",e,t)}static delete(e,t){return super.post(u.x+"/upms/sysDept/delete",e,t)}static listNotInSysDeptPost(e,t){return super.post(u.x+"/upms/sysDept/listNotInSysDeptPost",e,t)}static listSysDeptPost(e,t){return super.post(u.x+"/upms/sysDept/listSysDeptPost",e,t)}static addSysDeptPost(e,t){return super.post(u.x+"/upms/sysDept/addSysDeptPost",e,t)}static updateSysDeptPost(e,t){return super.post(u.x+"/upms/sysDept/updateSysDeptPost",e,t)}static deleteSysDeptPost(e,t){return super.post(u.x+"/upms/sysDept/deleteSysDeptPost",e,t)}static viewSysDeptPost(e,t){return super.get(u.x+"/upms/sysDept/viewSysDeptPost",e,t)}}class m extends a.w{static getRoleList(e,t){return super.post(u.x+"/upms/sysRole/list",e,t)}static getRole(e,t){return super.get(u.x+"/upms/sysRole/view",e,t)}static deleteRole(e,t){return super.post(u.x+"/upms/sysRole/delete",e,t)}static addRole(e,t){return super.post(u.x+"/upms/sysRole/add",e,t)}static updateRole(e,t){return super.post(u.x+"/upms/sysRole/update",e,t)}static listRoleUser(e,t){return super.post(u.x+"/upms/sysRole/listUserRole",e,t)}static listNotInUserRole(e,t){return super.post(u.x+"/upms/sysRole/listNotInUserRole",e,t)}static addRoleUser(e,t){return super.post(u.x+"/upms/sysRole/addUserRole",e,t)}static deleteRoleUser(e,t){return super.post(u.x+"/upms/sysRole/deleteUserRole",e,t)}}var y=s(21013);class v extends a.w{static list(e,t){return super.post(u.x+"/upms/sysPost/list",e,t)}static view(e,t){return super.get(u.x+"/upms/sysPost/view",e,t)}static add(e,t){return super.post(u.x+"/upms/sysPost/add",e,t)}static update(e,t){return super.post(u.x+"/upms/sysPost/update",e,t)}static delete(e,t){return super.post(u.x+"/upms/sysPost/delete",e,t)}}class x extends a.w{static list(e,t){return super.post(u.x+"/mobile/mobileEntry/list",e,t)}static view(e,t){return super.get(u.x+"/mobile/mobileEntry/view",e,t)}static add(e,t){return super.post(u.x+"/mobile/mobileEntry/add",e,t)}static update(e,t){return super.post(u.x+"/mobile/mobileEntry/update",e,t)}static delete(e,t){return super.post(u.x+"/mobile/mobileEntry/delete",e,t)}static uploadImage(e,t){return super.post(u.x+"/mobile/mobileEntry/uploadImage",e,t)}static downloadImage(e,t){return super.post(u.x+"/mobile/mobileEntry/downloadImage",e,t)}}var g=s(53155);class w{static list(e,t){return(0,g.bE)(u.x+"/upms/globalDict/list",e,t)}static listAll(e,t){return(0,g.Jt)(u.x+"/upms/globalDict/listAll",e,t)}static add(e,t){return(0,g.bE)(u.x+"/upms/globalDict/add",e,t)}static update(e,t){return(0,g.bE)(u.x+"/upms/globalDict/update",e,t)}static delete(e,t){return(0,g.bE)(u.x+"/upms/globalDict/delete",e,t)}static addItem(e,t){return(0,g.bE)(u.x+"/upms/globalDict/addItem",e,t)}static updateItem(e,t){return(0,g.bE)(u.x+"/upms/globalDict/updateItem",e,t)}static updateItemStatus(e,t){return(0,g.bE)(u.x+"/upms/globalDict/updateItemStatus",e,t)}static deleteItem(e,t){return(0,g.bE)(u.x+"/upms/globalDict/deleteItem",e,t)}static reloadCachedData(e,t){return(0,g.Jt)(u.x+"/upms/globalDict/reloadCachedData",e,t)}}class h extends a.w{static listSysOperationLog(e,t){return super.post(u.x+"/upms/sysOperationLog/list",e,t)}}class D extends a.w{static list(e,t){return super.post(u.x+"/commonext/bizwidget/list",e,t)}static viewByIds(e,t){return super.post(u.x+"/commonext/bizwidget/view",e,t)}}},61473:function(e,t,s){e.exports=s.p+"img/empty.7e47f88a.png"},71066:function(e,t,s){s.d(t,{P:function(){return i},i:function(){return p}});var a=s(81387),r=s(27007),u=s(56768),l=s(90144);const i=e=>{console.log("接收到的第三方参数",e);const t=(0,l.KR)(0),s=(0,u.EW)(()=>{let t={};try{e.thirdParamsString&&(t=JSON.parse(e.thirdParamsString))}catch(s){console.log(s),t={}}return t});console.log("thirdParams",s);const a=(a,r,u)=>{console.log("onCloseThirdDialog",r,u),window.parent&&window.parent.postMessage({type:"closeDialog",data:{index:t.value,dialogKey:e.dialogKey,path:s.value.path,rowData:r?JSON.parse(JSON.stringify(r)):void 0,data:u?JSON.parse(JSON.stringify(u)):void 0,isSuccess:a}},"*")},i=(e,s)=>{switch(e){case"setToken":s.token&&(0,r.WG)(s.token);break;case"dialogIndex":t.value=s;break;case"refreshData":break;case"message":break}},p=e=>{i(e.data.type,e.data.data)};return(0,u.sV)(()=>{console.log("onMounted message"),window.addEventListener("message",p,!1)}),(0,u.hi)(()=>{console.log("onUnmounted message"),window.removeEventListener("message",p)}),{thirdParams:s,onCloseThirdDialog:a}},p=()=>{let e;const t=(0,a.lq)(),s=()=>{window.parent&&window.parent.postMessage({type:"refreshToken"},"*")};-1!==t.path.indexOf("/thirdParty/")&&((0,u.sV)(()=>{(0,r.R7)()&&(e=setInterval(()=>{console.log("refreshToken thirdParty"),s()},18e4))}),(0,u.hi)(()=>{e&&clearInterval(e)}))}},85386:function(e,t,s){s.r(t),s.d(t,{default:function(){return b}});var a=s(25136),r=(s(97042),s(69957),s(76408)),u=(s(87535),s(21929)),l=(s(98421),s(65451)),i=(s(63390),s(32465),s(14022)),p=(s(72343),s(44114),s(18111),s(22489),s(61701),s(56768)),n=s(45130),o=s(90144),d=s(61473),c=s(99540),m=s(60265),y=s(54428),v=s(27007),x=s(71066);const g={style:{width:"100%"}};var w=(0,p.pM)({__name:"DeptSelectDlg",props:{value:{},props:{default:()=>({label:"deptName",value:"deptId"})},multiple:{type:Boolean,default:!1},dialog:{},thirdParamsString:{},dialogKey:{}},setup(e){const t=e,{thirdParams:s,onCloseThirdDialog:w}=(0,x.P)(t),h=(0,o.KR)(),D=(0,o.Kh)({deptName:void 0}),b=(0,o.KR)(),f=(0,p.EW)(()=>({value:t.value||s.value.value,props:t.props||null==s.value.props?t.props:s.value.props||{},multiple:t.multiple||null==s.value.multiple?t.multiple:s.value.multiple})),P=(0,p.EW)(()=>{let e=f.value.multiple||Array.isArray(b.value)?(b.value||[]).map(e=>e[f.value.props.value]):(b.value||{})[f.value.props.value];return{highlight:!0,checkStrictly:!0,checkRowKeys:f.value.multiple?e:void 0,checkRowKey:f.value.multiple?void 0:e,showHeader:!1}}),S=()=>{null!=h.value&&Array.isArray(C.dataList)&&setTimeout(()=>{if(h.value.clearRadioRow(),h.value.clearCheckboxRow(),f.value.multiple||Array.isArray(b.value))h.value.setCheckboxRow(C.dataList.filter(e=>null!=(0,v.PH)(b.value,e[f.value.props.value],f.value.props.value)),!0);else{let e=(0,v.PH)(C.dataList,(b.value||{})[f.value.props.value],f.value.props.value);h.value.setRadioRow(e)}},50)},k=e=>(e.widgetType="upms_dept",e.filter={deptName:D.deptName},new Promise((t,s)=>{y.If.list(e).then(e=>{e.data.dataList=(0,v.BN)(e.data.dataList,"deptId"),t({dataList:e.data.dataList,totalCount:e.data.totalCount}),(0,p.dY)(()=>{S()})}).catch(e=>{s(e)})})),R=()=>!0,U={loadTableData:k,verifyTableParameter:R},C=(0,o.Kh)((0,m.K)(U)),I=()=>{t.dialog?t.dialog.submit(b.value):w(!0,f.value.value,b.value)},M=()=>{t.dialog&&t.dialog.cancel()},E=(e=!1)=>{e?C.refreshTable(!0,1):C.refreshTable()},L=({checked:e,row:t})=>{f.value.multiple?null==t?(b.value=[],e&&(b.value=C.dataList)):(null==b.value&&(b.value=[]),e?b.value.push(t):b.value=b.value.filter(e=>e[f.value.props.value]!==t[f.value.props.value])):b.value=t},_=({row:e})=>{if(f.value.multiple){const t=h.value.isCheckedByCheckboxRow(e);h.value.setCheckboxRow(e,!t),b.value||(b.value=[]),t?b.value=b.value.filter(t=>t[f.value.props.value]!==e[f.value.props.value]):b.value.push(e)}else h.value.setRadioRow(e),b.value=e};return(0,p.sV)(()=>{Array.isArray(f.value.value)&&f.value.value.length>0&&(f.value.multiple?b.value=f.value.value.map(e=>({...e})):b.value={...f.value.value[0]}),E(!0)}),(e,t)=>{const s=i.WK,m=u.xE,y=l.S2,v=u.US,x=r.uD,w=a.S2;return(0,p.uX)(),(0,p.CE)("div",g,[(0,p.bF)(v,{ref:"formSysDept",model:D,"label-width":"75px",size:"default","label-position":"right",onSubmit:t[2]||(t[2]=(0,n.D$)(()=>{},["prevent"]))},{default:(0,p.k6)(()=>[(0,p.bF)(y,{type:"flex",justify:"space-between"},{default:(0,p.k6)(()=>[(0,p.bF)(m,{label:"部门名称"},{default:(0,p.k6)(()=>[(0,p.bF)(s,{modelValue:D.deptName,"onUpdate:modelValue":t[0]||(t[0]=e=>D.deptName=e),style:{width:"200px"},clearable:!0,placeholder:"部门名称",onChange:t[1]||(t[1]=e=>E(!0))},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model"]),(0,p.bF)(y,null,{default:(0,p.k6)(()=>[(0,p.bF)(x,{span:24},{default:(0,p.k6)(()=>[(0,p.bF)((0,o.R1)(c.CP),{ref_key:"table",ref:h,"row-id":f.value.props.value,data:C.dataList,height:"460","show-overflow":"title","show-header-overflow":"title","row-config":{height:35,isHover:!0},"radio-config":{highlight:!0},"checkbox-config":P.value,"tree-config":{transform:!1,rowField:"deptId",parentField:"parentId",expandAll:!0},onRadioChange:L,onCheckboxAll:L,onCheckboxChange:L,onCellClick:_},{empty:(0,p.k6)(()=>t[3]||(t[3]=[(0,p.Lk)("div",{class:"table-empty unified-font"},[(0,p.Lk)("img",{src:d}),(0,p.Lk)("span",null,"暂无数据")],-1)])),default:(0,p.k6)(()=>[(0,p.bF)((0,o.R1)(c.Wq),{type:f.value.multiple?"checkbox":"radio",width:50},null,8,["type"]),(0,p.bF)((0,o.R1)(c.Wq),{title:"部门名称",field:"deptName","tree-node":""})]),_:1},8,["row-id","data","checkbox-config"])]),_:1}),(0,p.bF)(x,{span:24},{default:(0,p.k6)(()=>[(0,p.bF)(y,{type:"flex",justify:"end",style:{"margin-top":"16px"}},{default:(0,p.k6)(()=>[(0,p.bF)(w,{onClick:M},{default:(0,p.k6)(()=>t[4]||(t[4]=[(0,p.eW)("取消")])),_:1,__:[4]}),(0,p.bF)(w,{type:"primary",onClick:I},{default:(0,p.k6)(()=>t[5]||(t[5]=[(0,p.eW)("确认选择")])),_:1,__:[5]})]),_:1})]),_:1})]),_:1})])}}}),h=s(71241);const D=(0,h.A)(w,[["__scopeId","data-v-55c2adfd"]]);var b=D}}]);