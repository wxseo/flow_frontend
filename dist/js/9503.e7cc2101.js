"use strict";(self["webpackChunkorange"]=self["webpackChunkorange"]||[]).push([[1066,6339,8720,9503],{61473:function(e,a,t){e.exports=t.p+"img/empty.7e47f88a.png"},69503:function(e,a,t){t.r(a),t.d(a,{default:function(){return v}});var r=t(65451),l=(t(97042),t(63390),t(25136)),i=(t(69957),t(76408)),n=(t(87535),t(14022)),o=(t(72343),t(18111),t(61701),t(56768)),s=t(90144),p=t(61473),d=t(99540),u=t(71066),m=t(82572),c=t(43393),g=(0,o.pM)({__name:"previewPrint",props:{printId:{},printName:{},paramList:{},templateType:{},defaultFormItemSize:{},dialog:{},thirdParamsString:{},dialogKey:{}},setup(e){const a=(0,m.l5)(),t=e,{thirdParams:g,onCloseThirdDialog:f}=(0,u.P)(t),v=(0,o.EW)(()=>a.defaultFormItemSize||g.value.defaultFormItemSize?.value),h=(0,o.EW)(()=>({printId:t.printId||g.value.printId,printName:t.printName||g.value.printName,paramList:t.paramList||g.value.paramList||[],templateType:null==t.templateType?g.value.templateType:t.templateType})),y=(0,o.EW)(()=>Array.isArray(h.value.paramList)?h.value.paramList.map(e=>({paramName:e.variableName,paramValue:""})):[]),k=()=>{t.dialog?t.dialog.cancel():f(!1)},w=()=>{(0,c.Lv)(h.value.printId,h.value.templateType,y.value,h.value.printName),t.dialog?t.dialog.submit(!0):f(!0)};return(e,a)=>{const t=n.WK,u=i.uD,m=l.S2,c=r.S2;return(0,o.uX)(),(0,o.Wv)(c,{class:"form-single-fragment print-preview third-party-dlg",style:{position:"relative","flex-direction":"row","flex-wrap":"wrap !important"}},{default:(0,o.k6)(()=>[(0,o.bF)(u,{class:"form-box",span:24},{default:(0,o.k6)(()=>[(0,o.bF)((0,s.R1)(d.CP),{data:(0,s.R1)(y),size:"default",height:"255px","row-config":{isHover:!0},"header-cell-class-name":"table-header-gray"},{empty:(0,o.k6)(()=>a[2]||(a[2]=[(0,o.Lk)("div",{class:"table-empty unified-font"},[(0,o.Lk)("img",{src:p}),(0,o.Lk)("span",null,"暂无数据")],-1)])),default:(0,o.k6)(()=>[(0,o.bF)((0,s.R1)(d.Wq),{type:"seq",title:"序号",width:"55px"}),(0,o.bF)((0,s.R1)(d.Wq),{title:"参数名",field:"paramName",width:"150px"}),(0,o.bF)((0,s.R1)(d.Wq),{title:"参数值",field:"paramValue"},{default:(0,o.k6)(e=>[(0,o.bF)(t,{modelValue:e.row.paramValue,"onUpdate:modelValue":a=>e.row.paramValue=a,size:"default",style:{width:"250px"}},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["data"])]),_:1}),(0,o.bF)(u,{class:"menu-box",span:24,style:{"margin-top":"15px"}},{default:(0,o.k6)(()=>[(0,o.bF)(c,{type:"flex",justify:"end"},{default:(0,o.k6)(()=>[(0,o.bF)(m,{size:(0,s.R1)(v),plain:!0,onClick:a[0]||(a[0]=e=>k())},{default:(0,o.k6)(()=>a[3]||(a[3]=[(0,o.eW)(" 取消 ")])),_:1,__:[3]},8,["size"]),(0,o.bF)(m,{type:"primary",size:(0,s.R1)(v),onClick:a[1]||(a[1]=e=>w())},{default:(0,o.k6)(()=>a[4]||(a[4]=[(0,o.eW)(" 预览 ")])),_:1,__:[4]},8,["size"])]),_:1})]),_:1})]),_:1})}}});const f=g;var v=f},71066:function(e,a,t){t.d(a,{P:function(){return o},i:function(){return s}});var r=t(81387),l=t(27007),i=t(56768),n=t(90144);const o=e=>{console.log("接收到的第三方参数",e);const a=(0,n.KR)(0),t=(0,i.EW)(()=>{let a={};try{e.thirdParamsString&&(a=JSON.parse(e.thirdParamsString))}catch(t){console.log(t),a={}}return a});console.log("thirdParams",t);const r=(r,l,i)=>{console.log("onCloseThirdDialog",l,i),window.parent&&window.parent.postMessage({type:"closeDialog",data:{index:a.value,dialogKey:e.dialogKey,path:t.value.path,rowData:l?JSON.parse(JSON.stringify(l)):void 0,data:i?JSON.parse(JSON.stringify(i)):void 0,isSuccess:r}},"*")},o=(e,t)=>{switch(e){case"setToken":t.token&&(0,l.WG)(t.token);break;case"dialogIndex":a.value=t;break;case"refreshData":break;case"message":break}},s=e=>{o(e.data.type,e.data.data)};return(0,i.sV)(()=>{console.log("onMounted message"),window.addEventListener("message",s,!1)}),(0,i.hi)(()=>{console.log("onUnmounted message"),window.removeEventListener("message",s)}),{thirdParams:t,onCloseThirdDialog:r}},s=()=>{let e;const a=(0,r.lq)(),t=()=>{window.parent&&window.parent.postMessage({type:"refreshToken"},"*")};-1!==a.path.indexOf("/thirdParty/")&&((0,i.sV)(()=>{(0,l.R7)()&&(e=setInterval(()=>{console.log("refreshToken thirdParty"),t()},18e4))}),(0,i.hi)(()=>{e&&clearInterval(e)}))}}}]);