"use strict";(self["webpackChunkorange"]=self["webpackChunkorange"]||[]).push([[1066,6339,6445,8720],{61473:function(e,a,l){e.exports=l.p+"img/empty.7e47f88a.png"},71066:function(e,a,l){l.d(a,{P:function(){return u},i:function(){return d}});var t=l(81387),r=l(27007),o=l(56768),i=l(90144);const u=e=>{console.log("接收到的第三方参数",e);const a=(0,i.KR)(0),l=(0,o.EW)(()=>{let a={};try{e.thirdParamsString&&(a=JSON.parse(e.thirdParamsString))}catch(l){console.log(l),a={}}return a});console.log("thirdParams",l);const t=(t,r,o)=>{console.log("onCloseThirdDialog",r,o),window.parent&&window.parent.postMessage({type:"closeDialog",data:{index:a.value,dialogKey:e.dialogKey,path:l.value.path,rowData:r?JSON.parse(JSON.stringify(r)):void 0,data:o?JSON.parse(JSON.stringify(o)):void 0,isSuccess:t}},"*")},u=(e,l)=>{switch(e){case"setToken":l.token&&(0,r.WG)(l.token);break;case"dialogIndex":a.value=l;break;case"refreshData":break;case"message":break}},d=e=>{u(e.data.type,e.data.data)};return(0,o.sV)(()=>{console.log("onMounted message"),window.addEventListener("message",d,!1)}),(0,o.hi)(()=>{console.log("onUnmounted message"),window.removeEventListener("message",d)}),{thirdParams:l,onCloseThirdDialog:t}},d=()=>{let e;const a=(0,t.lq)(),l=()=>{window.parent&&window.parent.postMessage({type:"refreshToken"},"*")};-1!==a.path.indexOf("/thirdParty/")&&((0,o.sV)(()=>{(0,r.R7)()&&(e=setInterval(()=>{console.log("refreshToken thirdParty"),l()},18e4))}),(0,o.hi)(()=>{e&&clearInterval(e)}))}},71962:function(e,a,l){l.r(a),l.d(a,{default:function(){return P}});var t=l(65451),r=(l(97042),l(63390),l(25136)),o=(l(69957),l(76408)),i=(l(87535),l(68368)),u=(l(81208),l(88284)),d=(l(36715),l(77649)),n=(l(87603),l(14022)),s=(l(72343),l(85415)),p=(l(22243),l(7409),l(47001),l(18111),l(22489),l(61701),l(56768)),m=l(90144),V=l(61473),f=l(27007),c=l(92380),y=l(71066),g=l(82572);const v={class:"set-dataset-param third-party-dlg"};var w=(0,p.pM)({__name:"SetReportDatasetParam",props:{datasetParamList:{},datasetFilterParams:{},formParamList:{},validFilterValueType:{},dialog:{},thirdParamsString:{},dialogKey:{}},setup(e){const a=(0,g.l5)(),l=e,w=(0,p.EW)(()=>a.defaultFormItemSize||h.value.defaultFormItemSize?.value),{thirdParams:h,onCloseThirdDialog:P}=(0,y.P)(l),k=(0,p.EW)(()=>({datasetParamList:l.datasetParamList||h.value.datasetParamList||[],datasetFilterParams:l.datasetFilterParams||h.value.datasetFilterParams||[],formParamList:l.formParamList||h.value.formParamList||[],validFilterValueType:l.validFilterValueType||h.value.validFilterValueType||[]})),T=(0,p.EW)(()=>k.value.datasetParamList.map(e=>{let a=(0,f.PH)(k.value.datasetFilterParams,e.paramName,"paramName")||{};return{...e,filterValueType:a.filterValueType||c.FilterValueKind.INPUT_DATA,paramValue:a.paramValue}})),b=()=>{l.dialog?l.dialog.cancel():P(!1)},F=()=>{l.dialog?l.dialog.submit(T.value.filter(e=>null!=e.paramValue)):P(!0,T.value.filter(e=>null!=e.paramValue))},_=e=>{e.paramValue=void 0};return(e,a)=>{const l=i.o8,f=s.P9,y=s.AV,g=n.WK,h=d.lq,P=u.MG,R=i.Up,U=o.uD,S=r.S2,L=t.S2;return(0,p.uX)(),(0,p.CE)("div",v,[(0,p.bF)(U,{span:24,class:"form-box"},{default:(0,p.k6)(()=>[(0,p.bF)(R,{data:(0,m.R1)(T),size:"default","header-cell-class-name":"table-header-gray",border:"",height:"100%"},{empty:(0,p.k6)(()=>a[0]||(a[0]=[(0,p.Lk)("div",{class:"table-empty unified-font"},[(0,p.Lk)("img",{src:V}),(0,p.Lk)("span",null,"暂无数据")],-1)])),default:(0,p.k6)(()=>[(0,p.bF)(l,{type:"index",width:"55px",label:"序号"}),(0,p.bF)(l,{label:"参数名称",prop:"paramName",width:"200px"}),(0,p.bF)(l,{label:"参数值类型",prop:"filterValueType",width:"200px"},{default:(0,p.k6)(e=>[(0,p.bF)(y,{modelValue:e.row.filterValueType,"onUpdate:modelValue":a=>e.row.filterValueType=a,placeholder:"",size:"default",onChange:a=>_(e.row)},{default:(0,p.k6)(()=>[((0,p.uX)(!0),(0,p.CE)(p.FK,null,(0,p.pI)((0,m.R1)(k).validFilterValueType,e=>((0,p.uX)(),(0,p.Wv)(f,{key:e,label:(0,m.R1)(c.FilterValueKind).getValue(e),value:e},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),(0,p.bF)(l,{label:"参数值",prop:"paramValue"},{default:(0,p.k6)(e=>["String"===e.row.paramType&&e.row.filterValueType===(0,m.R1)(c.FilterValueKind).INPUT_DATA?((0,p.uX)(),(0,p.Wv)(g,{key:0,modelValue:e.row.paramValue,"onUpdate:modelValue":a=>e.row.paramValue=a,size:"default",style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue"])):(0,p.Q3)("",!0),"Number"===e.row.paramType&&e.row.filterValueType===(0,m.R1)(c.FilterValueKind).INPUT_DATA?((0,p.uX)(),(0,p.Wv)(h,{key:1,modelValue:e.row.paramValue,"onUpdate:modelValue":a=>e.row.paramValue=a,size:"default",style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue"])):(0,p.Q3)("",!0),"Date"===e.row.paramType&&e.row.filterValueType===(0,m.R1)(c.FilterValueKind).INPUT_DATA?((0,p.uX)(),(0,p.Wv)(P,{key:2,type:"datetime",modelValue:e.row.paramValue,"onUpdate:modelValue":a=>e.row.paramValue=a,size:"default",style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue"])):(0,p.Q3)("",!0),e.row.filterValueType===(0,m.R1)(c.FilterValueKind).PRINT_INPUT_PARAM||e.row.filterValueType===(0,m.R1)(c.FilterValueKind).FORM_PARAM?((0,p.uX)(),(0,p.Wv)(y,{key:3,modelValue:e.row.paramValue,"onUpdate:modelValue":a=>e.row.paramValue=a,style:{width:"100%"},size:"default",clearable:"",placeholder:""},{default:(0,p.k6)(()=>[((0,p.uX)(!0),(0,p.CE)(p.FK,null,(0,p.pI)((0,m.R1)(k).formParamList,e=>((0,p.uX)(),(0,p.Wv)(f,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):(0,p.Q3)("",!0)]),_:1})]),_:1},8,["data"])]),_:1}),(0,p.bF)(L,{class:"no-scroll menu-box",justify:"end",style:{"margin-top":"15px"}},{default:(0,p.k6)(()=>[(0,p.bF)(S,{size:(0,m.R1)(w),plain:!0,onClick:b},{default:(0,p.k6)(()=>a[1]||(a[1]=[(0,p.eW)(" 取消 ")])),_:1,__:[1]},8,["size"]),(0,p.bF)(S,{type:"primary",size:(0,m.R1)(w),onClick:F},{default:(0,p.k6)(()=>a[2]||(a[2]=[(0,p.eW)(" 保存 ")])),_:1,__:[2]},8,["size"])]),_:1})])}}});const h=w;var P=h},76010:function(e,a,l){l.d(a,{Am:function(){return r},bg:function(){return o}});l(17642),l(58004),l(33853),l(45876),l(32475),l(15024),l(31698);var t=l(24232);const r=e=>[...new Set(e)],o=e=>e||0===e?(0,t.cy)(e)?e:[e]:[]}}]);