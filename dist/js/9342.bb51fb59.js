"use strict";(self["webpackChunkorange"]=self["webpackChunkorange"]||[]).push([[1066,7497,9342],{3736:function(e,n,t){t.d(n,{A:function(){return i}});var a=t(55583),l=t(18384);class i extends a.w{static list(e,n){return super.post(l.x+"/online/onlineApiGroup/list",e,n)}static view(e,n){return super.get(l.x+"/online/onlineApiGroup/view",e,n)}static add(e,n){return super.post(l.x+"/online/onlineApiGroup/add",e,n)}static update(e,n){return super.post(l.x+"/online/onlineApiGroup/update",e,n)}static delete(e,n){return super.post(l.x+"/online/onlineApiGroup/delete",e,n)}static listAll(e={},n){return super.post(l.x+"/online/onlineApiGroup/listAll",e,n)}}},3740:function(e,n,t){t.d(n,{qi:function(){return I}});var a=t(56768),l=t(90144),i=t(24232),o=t(45130),s=t(91542),u=t(57477),r=t(93889),d=t(99077),c=t(44216),p=t(37207),v=t(93513),m=t(93558),b=t(92056),g=t(86894),f=t(12235);const x="ElSwitch",k=(0,a.pM)({name:x}),R=(0,a.pM)({...k,props:r.Z,emits:r.x,setup(e,{expose:n,emit:t}){const r=e,{formItem:d}=(0,c.j)(),k=(0,p.NV)(),R=(0,v.DU)("switch"),{inputId:y}=(0,c.W)(r,{formItemContext:d}),C=(0,p.CB)((0,a.EW)(()=>r.loading)),I=(0,l.KR)(!1!==r.modelValue),h=(0,l.KR)(),D=(0,l.KR)(),w=(0,a.EW)(()=>[R.b(),R.m(k.value),R.is("disabled",C.value),R.is("checked",V.value)]),T=(0,a.EW)(()=>[R.e("label"),R.em("label","left"),R.is("active",!V.value)]),_=(0,a.EW)(()=>[R.e("label"),R.em("label","right"),R.is("active",V.value)]),O=(0,a.EW)(()=>({width:(0,m._V)(r.width)}));(0,a.wB)(()=>r.modelValue,()=>{I.value=!0});const P=(0,a.EW)(()=>!!I.value&&r.modelValue),V=(0,a.EW)(()=>P.value===r.activeValue);[r.activeValue,r.inactiveValue].includes(P.value)||(t(b.l4,r.inactiveValue),t(b.YU,r.inactiveValue),t(b.qs,r.inactiveValue)),(0,a.wB)(V,e=>{var n;h.value.checked=e,r.validateEvent&&(null==(n=null==d?void 0:d.validate)||n.call(d,"change").catch(e=>(0,g.U)(e)))});const F=()=>{const e=V.value?r.inactiveValue:r.activeValue;t(b.l4,e),t(b.YU,e),t(b.qs,e),(0,a.dY)(()=>{h.value.checked=V.value})},N=()=>{if(C.value)return;const{beforeChange:e}=r;if(!e)return void F();const n=e(),t=[(0,i.yL)(n),(0,f.Lm)(n)].includes(!0);t||(0,g.$)(x,"beforeChange must return type `Promise<boolean>` or `boolean`"),(0,i.yL)(n)?n.then(e=>{e&&F()}).catch(e=>{(0,g.U)(x,`some error occurred: ${e}`)}):n&&F()},S=()=>{var e,n;null==(n=null==(e=h.value)?void 0:e.focus)||n.call(e)};return(0,a.sV)(()=>{h.value.checked=V.value}),n({focus:S,checked:V}),(e,n)=>((0,a.uX)(),(0,a.CE)("div",{class:(0,i.C4)((0,l.R1)(w)),onClick:(0,o.D$)(N,["prevent"])},[(0,a.Lk)("input",{id:(0,l.R1)(y),ref_key:"input",ref:h,class:(0,i.C4)((0,l.R1)(R).e("input")),type:"checkbox",role:"switch","aria-checked":(0,l.R1)(V),"aria-disabled":(0,l.R1)(C),"aria-label":e.ariaLabel,name:e.name,"true-value":e.activeValue,"false-value":e.inactiveValue,disabled:(0,l.R1)(C),tabindex:e.tabindex,onChange:F,onKeydown:(0,o.jR)(N,["enter"])},null,42,["id","aria-checked","aria-disabled","aria-label","name","true-value","false-value","disabled","tabindex","onKeydown"]),e.inlinePrompt||!e.inactiveIcon&&!e.inactiveText?(0,a.Q3)("v-if",!0):((0,a.uX)(),(0,a.CE)("span",{key:0,class:(0,i.C4)((0,l.R1)(T))},[e.inactiveIcon?((0,a.uX)(),(0,a.Wv)((0,l.R1)(s.tk),{key:0},{default:(0,a.k6)(()=>[((0,a.uX)(),(0,a.Wv)((0,a.$y)(e.inactiveIcon)))]),_:1})):(0,a.Q3)("v-if",!0),!e.inactiveIcon&&e.inactiveText?((0,a.uX)(),(0,a.CE)("span",{key:1,"aria-hidden":(0,l.R1)(V)},(0,i.v_)(e.inactiveText),9,["aria-hidden"])):(0,a.Q3)("v-if",!0)],2)),(0,a.Lk)("span",{ref_key:"core",ref:D,class:(0,i.C4)((0,l.R1)(R).e("core")),style:(0,i.Tr)((0,l.R1)(O))},[e.inlinePrompt?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,i.C4)((0,l.R1)(R).e("inner"))},[e.activeIcon||e.inactiveIcon?((0,a.uX)(),(0,a.Wv)((0,l.R1)(s.tk),{key:0,class:(0,i.C4)((0,l.R1)(R).is("icon"))},{default:(0,a.k6)(()=>[((0,a.uX)(),(0,a.Wv)((0,a.$y)((0,l.R1)(V)?e.activeIcon:e.inactiveIcon)))]),_:1},8,["class"])):e.activeText||e.inactiveText?((0,a.uX)(),(0,a.CE)("span",{key:1,class:(0,i.C4)((0,l.R1)(R).is("text")),"aria-hidden":!(0,l.R1)(V)},(0,i.v_)((0,l.R1)(V)?e.activeText:e.inactiveText),11,["aria-hidden"])):(0,a.Q3)("v-if",!0)],2)):(0,a.Q3)("v-if",!0),(0,a.Lk)("div",{class:(0,i.C4)((0,l.R1)(R).e("action"))},[e.loading?((0,a.uX)(),(0,a.Wv)((0,l.R1)(s.tk),{key:0,class:(0,i.C4)((0,l.R1)(R).is("loading"))},{default:(0,a.k6)(()=>[(0,a.bF)((0,l.R1)(u.Loading))]),_:1},8,["class"])):(0,l.R1)(V)?(0,a.RG)(e.$slots,"active-action",{key:1},()=>[e.activeActionIcon?((0,a.uX)(),(0,a.Wv)((0,l.R1)(s.tk),{key:0},{default:(0,a.k6)(()=>[((0,a.uX)(),(0,a.Wv)((0,a.$y)(e.activeActionIcon)))]),_:1})):(0,a.Q3)("v-if",!0)]):(0,l.R1)(V)?(0,a.Q3)("v-if",!0):(0,a.RG)(e.$slots,"inactive-action",{key:2},()=>[e.inactiveActionIcon?((0,a.uX)(),(0,a.Wv)((0,l.R1)(s.tk),{key:0},{default:(0,a.k6)(()=>[((0,a.uX)(),(0,a.Wv)((0,a.$y)(e.inactiveActionIcon)))]),_:1})):(0,a.Q3)("v-if",!0)])],2)],6),e.inlinePrompt||!e.activeIcon&&!e.activeText?(0,a.Q3)("v-if",!0):((0,a.uX)(),(0,a.CE)("span",{key:1,class:(0,i.C4)((0,l.R1)(_))},[e.activeIcon?((0,a.uX)(),(0,a.Wv)((0,l.R1)(s.tk),{key:0},{default:(0,a.k6)(()=>[((0,a.uX)(),(0,a.Wv)((0,a.$y)(e.activeIcon)))]),_:1})):(0,a.Q3)("v-if",!0),!e.activeIcon&&e.activeText?((0,a.uX)(),(0,a.CE)("span",{key:1,"aria-hidden":!(0,l.R1)(V)},(0,i.v_)(e.activeText),9,["aria-hidden"])):(0,a.Q3)("v-if",!0)],2))],10,["onClick"]))}});var y=(0,d.A)(R,[["__file","switch.vue"]]),C=t(25376);const I=(0,C.GU)(y)},36947:function(e,n,t){t.d(n,{aq:function(){return d},hp:function(){return r},PC:function(){return u},yu:function(){return i},S1:function(){return o},k$:function(){return m},NZ:function(){return v},Pr:function(){return s},Uz:function(){return c},jk:function(){return p}});var a=t(55583),l=t(18384);class i extends a.w{static list(e,n){return super.post(l.x+"/online/onlineDblink/list",e,n)}static listDblinkTables(e,n){return super.get(l.x+"/online/onlineDblink/listDblinkTables",e,n)}static listDblinkTableColumns(e,n){return super.get(l.x+"/online/onlineDblink/listDblinkTableColumns",e,n)}static view(e,n){return super.get(l.x+"/online/onlineDblink/view",e,n)}static add(e,n){return super.post(l.x+"/online/onlineDblink/add",e,n)}static update(e,n){return super.post(l.x+"/online/onlineDblink/update",e,n)}static delete(e,n){return super.post(l.x+"/online/onlineDblink/delete",e,n)}static testConnection(e,n){return super.get(l.x+"/online/onlineDblink/testConnection",e,n)}}class o extends a.w{static list(e,n){return super.post(l.x+"/online/onlineDict/list",e,n)}static view(e,n){return super.get(l.x+"/online/onlineDict/view",e,n)}static add(e,n){return super.post(l.x+"/online/onlineDict/add",e,n)}static update(e,n){return super.post(l.x+"/online/onlineDict/update",e,n)}static delete(e,n){return super.post(l.x+"/online/onlineDict/delete",e,n)}static listAllGlobalDict(e,n){return super.post(l.x+"/online/onlineDict/listAllGlobalDict",e,n)}}class s extends a.w{static list(e,n){return super.post(l.x+"/online/onlinePage/list",e,n)}static listAllPageAndForm(e,n){return super.post(l.x+"/online/onlinePage/listAllPageAndForm",e,n)}static view(e,n){return super.get(l.x+"/online/onlinePage/view",e,n)}static add(e,n){return super.post(l.x+"/online/onlinePage/add",e,n)}static update(e,n){return super.post(l.x+"/online/onlinePage/update",e,n)}static updatePublished(e,n){return super.post(l.x+"/online/onlinePage/updatePublished",e,n)}static delete(e,n){return super.post(l.x+"/online/onlinePage/delete",e,n)}static updateStatus(e,n){return super.post(l.x+"/online/onlinePage/updateStatus",e,n)}static listOnlinePageDatasource(e,n){return super.post(l.x+"/online/onlinePage/listOnlinePageDatasource",e,n)}static listNotInOnlinePageDatasource(e,n){return super.post(l.x+"/online/onlinePage/listNotInOnlinePageDatasource",e,n)}static addOnlinePageDatasource(e,n){return super.post(l.x+"/online/onlinePage/addOnlinePageDatasource",e,n)}static deleteOnlinePageDatasource(e,n){return super.post(l.x+"/online/onlinePage/deleteOnlinePageDatasource",e,n)}static updateOnlinePageDatasource(e,n){return super.post(l.x+"/online/onlinePage/updateOnlinePageDatasource",e,n)}static viewOnlinePageDatasource(e,n){return super.get(l.x+"/online/onlinePage/viewOnlinePageDatasource",e,n)}static getDblinkIdByPageId(e,n){return super.get(l.x+"/online/onlinePage/getDblinkIdByPageId",e,n)}}class u extends a.w{static list(e,n){return super.post(l.x+"/online/onlineDatasourceRelation/list",e,n)}static view(e,n){return super.get(l.x+"/online/onlineDatasourceRelation/view",e,n)}static add(e,n){return super.post(l.x+"/online/onlineDatasourceRelation/add",e,n)}static update(e,n){return super.post(l.x+"/online/onlineDatasourceRelation/update",e,n)}static delete(e,n){return super.post(l.x+"/online/onlineDatasourceRelation/delete",e,n)}}class r extends a.w{static list(e,n){return super.post(l.x+"/online/onlineDatasource/list",e,n)}static view(e,n){return super.get(l.x+"/online/onlineDatasource/view",e,n)}static add(e,n){return super.post(l.x+"/online/onlineDatasource/add",e,n)}static update(e,n){return super.post(l.x+"/online/onlineDatasource/update",e,n)}static delete(e,n){return super.post(l.x+"/online/onlineDatasource/delete",e,n)}}class d extends a.w{static list(e,n){return super.post(l.x+"/online/onlineColumn/list",e,n)}static view(e,n){return super.get(l.x+"/online/onlineColumn/view",e,n)}static add(e,n){return super.post(l.x+"/online/onlineColumn/add",e,n)}static update(e,n){return super.post(l.x+"/online/onlineColumn/update",e,n)}static refreshColumn(e,n){return super.post(l.x+"/online/onlineColumn/refresh",e,n)}static delete(e,n){return super.post(l.x+"/online/onlineColumn/delete",e,n)}static listOnlineColumnRule(e,n){return super.post(l.x+"/online/onlineColumn/listOnlineColumnRule",e,n)}static listNotInOnlineColumnRule(e,n){return super.post(l.x+"/online/onlineColumn/listNotInOnlineColumnRule",e,n)}static addOnlineColumnRule(e,n){return super.post(l.x+"/online/onlineColumn/addOnlineColumnRule",e,n)}static deleteOnlineColumnRule(e,n){return super.post(l.x+"/online/onlineColumn/deleteOnlineColumnRule",e,n)}static updateOnlineColumnRule(e,n){return super.post(l.x+"/online/onlineColumn/updateOnlineColumnRule",e,n)}static viewOnlineColumnRule(e,n){return super.post(l.x+"/online/onlineColumn/viewOnlineColumnRule",e,n)}}class c extends a.w{static list(e,n){return super.post(l.x+"/online/onlineRule/list",e,n)}static view(e,n){return super.get(l.x+"/online/onlineRule/view",e,n)}static add(e,n){return super.post(l.x+"/online/onlineRule/add",e,n)}static update(e,n){return super.post(l.x+"/online/onlineRule/update",e,n)}static delete(e,n){return super.post(l.x+"/online/onlineRule/delete",e,n)}}class p extends a.w{static list(e,n){return super.post(l.x+"/online/onlineVirtualColumn/list",e,n)}static view(e,n){return super.get(l.x+"/online/onlineVirtualColumn/view",e,n)}static add(e,n){return super.post(l.x+"/online/onlineVirtualColumn/add",e,n)}static update(e,n){return super.post(l.x+"/online/onlineVirtualColumn/update",e,n)}static delete(e,n){return super.post(l.x+"/online/onlineVirtualColumn/delete",e,n)}}class v extends a.w{static listDict(e,n){return super.post(l.x+"/online/onlineOperation/listDict",e,n)}static listByDatasourceId(e,n){return super.post(l.x+"/online/onlineOperation/listByDatasourceId",e,n)}static listByOneToManyRelationId(e,n){return super.post(l.x+"/online/onlineOperation/listByOneToManyRelationId",e,n)}static addDatasource(e,n){return super.post(l.x+"/online/onlineOperation/addDatasource",e,n)}static addOneToManyRelation(e,n){return super.post(l.x+"/online/onlineOperation/addOneToManyRelation",e,n)}static updateDatasource(e,n){return super.post(l.x+"/online/onlineOperation/updateDatasource",e,n)}static updateOneToManyRelation(e,n){return super.post(l.x+"/online/onlineOperation/updateOneToManyRelation",e,n)}static viewByDatasourceId(e,n){return super.get(l.x+"/online/onlineOperation/viewByDatasourceId",e,n)}static viewByOneToManyRelationId(e,n){return super.get(l.x+"/online/onlineOperation/viewByOneToManyRelationId",e,n)}static deleteDatasource(e,n){return super.post(l.x+"/online/onlineOperation/deleteDatasource",e,n)}static deleteOneToManyRelation(e,n){return super.post(l.x+"/online/onlineOperation/deleteOneToManyRelation",e,n)}static getColumnRuleCode(e,n){return super.get(l.x+"/online/onlineOperation/getColumnRuleCode",e,n)}static getPrintTemplate(e,n){return super.post(l.x+"/report/reportPrint/listAll",e,n)}static listTableDict(e,n){return super.post(l.x+"/online/onlineOperation/listTableDict",e,n)}static listTableDictByIds(e,n){return super.post(l.x+"/online/onlineOperation/listTableDictByIds",e,n)}}class m extends a.w{static list(e,n){return super.post(l.x+"/online/onlineForm/list",e,n)}static view(e,n){return super.get(l.x+"/online/onlineForm/view",e,n)}static render(e,n){return super.get(l.x+"/online/onlineForm/render",e,n)}static add(e,n){return super.post(l.x+"/online/onlineForm/add",e,n)}static update(e,n){return super.post(l.x+"/online/onlineForm/update",e,n)}static delete(e,n){return super.post(l.x+"/online/onlineForm/delete",e,n)}static clone(e,n){return super.post(l.x+"/online/onlineForm/clone",e,n)}static saveFormUserExt(e,n){return super.post(l.x+"/online/onlineForm/saveFormUserExt",e,n)}}t(83283),t(3736)},39342:function(e,n,t){t.r(n),t.d(n,{default:function(){return T}});var a=t(25136),l=(t(97042),t(69957),t(21929)),i=(t(98421),t(3740)),o=(t(42899),t(65451)),s=(t(63390),t(85415)),u=(t(22243),t(7409),t(76408)),r=(t(87535),t(32465),t(14022)),d=(t(72343),t(18111),t(22489),t(7588),t(56768)),c=t(90144),p=t(45130),v=t(24232),m=t(26695),b=t(27007),g=t(99080),f=t(36947),x=t(71066),k=t(36525),R=t(82572);const y={class:"form-single-fragment third-party-dlg",style:{position:"relative"}},C={style:{"margin-left":"30px"}},I={key:0,class:"warning-text",style:{"margin-left":"16px"}};var h=(0,d.pM)({__name:"editOnlinePageDatasourceRelation",props:{datasource:{},dblinkInfo:{},relationId:{},usedTableNameList:{},dialog:{},thirdParamsString:{},dialogKey:{}},setup(e){const n=(0,R.l5)(),t=e,{thirdParams:h,onCloseThirdDialog:D}=(0,x.P)(t),w=(0,d.EW)(()=>n.defaultFormItemSize||h.value.defaultFormItemSize?.value),T=(0,c.KR)(),_=(0,c.KR)(),O=(0,c.KR)({relationId:void 0,relationName:void 0,relationType:k.SysOnlineRelationType.ONE_TO_ONE,variableName:void 0,masterColumnId:void 0,slaveTableId:void 0,slaveColumnId:void 0,relationFilterSql:void 0,cascadeDelete:!1,leftJoin:!1}),P=(0,d.EW)(()=>({datasource:t.datasource||h.value.datasource,dblinkInfo:t.dblinkInfo||h.value.dblinkInfo,relationId:t.relationId||h.value.relationId,usedTableNameList:t.usedTableNameList||h.value.usedTableNameList})),V=(0,d.EW)(()=>!!P.value.relationId),F=(0,d.EW)(()=>P.value.datasource.validTableList),N=e=>new Promise((n,t)=>{if(null==e)return void n([]);let a={onlineColumnDtoFilter:{tableId:e}};f.aq.list(a).then(e=>{n(e.data.dataList)}).catch(e=>{t(e)})}),S=()=>new Promise((e,n)=>{N(P.value.datasource.masterTableId).then(n=>{e({dataList:n})}).catch(e=>{n(e)})}),E={loadData:S,isTree:!1},L=(0,c.KR)((0,g.B)(E)),A=()=>Promise.resolve({dataList:F.value.filter(e=>null!=_.value&&_.value===e.name||e.name!==P.value.datasource.masterTableIdDictMap.name&&(null==P.value.usedTableNameList||-1===P.value.usedTableNameList.indexOf(e.name)))}),W={loadData:A,isTree:!1},B=(0,c.KR)((0,g.B)(W)),X=(e,n)=>new Promise((t,a)=>{let l={dblinkId:e,tableName:n};f.yu.listDblinkTableColumns(l).then(e=>{t(e.data)}).catch(e=>{a(e)})}),K=()=>new Promise((e,n)=>{let t=(0,b.PH)(P.value.datasource.validTableList,O.value.slaveTableId,"id");null!=t?t.status===k.SysOnlinePageDatasourceFieldStatus.USED?N(t.id).then(n=>{e({dataList:n})}).catch(e=>{n(e)}):X(P.value.datasource.dblinkId,t.id).then(n=>{n.forEach(e=>{e.columnId=e.columnName}),e({dataList:n})}).catch(e=>{n(e)}):n()}),U={loadData:K,isTree:!1},M=(0,c.KR)((0,g.B)(U)),q={relationName:[{required:!0,message:"请输入关联名称",trigger:"blur"}],variableName:[{required:!0,message:"请输入关联标识",trigger:"blur"},{type:"string",pattern:/^[a-z][a-zA-Z_]+$/,message:"数据源标识必须是小驼峰或者下划线命名",trigger:"blur"}]},Q=()=>{t.dialog?t.dialog.cancel():D(!1)},$=()=>{T.value.validate(e=>{if(!e)return;let n={onlineDatasourceRelationDto:{datasourceId:P.value.datasource.datasourceId,relationId:O.value.relationId,relationName:O.value.relationName,relationType:O.value.relationType,variableName:O.value.variableName,masterColumnId:O.value.masterColumnId,slaveTableId:V.value?O.value.slaveTableId:void 0,slaveTableName:V.value?void 0:O.value.slaveTableId,slaveColumnId:V.value?O.value.slaveColumnId:void 0,slaveColumnName:V.value?void 0:O.value.slaveColumnId,relationFilterSql:O.value.relationFilterSql,cascadeDelete:O.value.cascadeDelete,leftJoin:O.value.leftJoin}},a=V.value?f.PC.update(n):f.PC.add(n);a.then(()=>{m.nk.success("保存成功"),t.dialog?t.dialog.submit(!0):D(!0)}).catch(e=>{console.warn(e)})})},z=()=>{O.value.slaveColumnId=null,O.value.relationFilterSql=void 0,M.value.refresh(),O.value.leftJoin=!1,O.value.cascadeDelete=!1},G=()=>{if(null==O.value.variableName||""===O.value.variableName){let e=(0,b.PH)(L.value.dropdownList,O.value.masterColumnId,"columnId"),n=(0,b.PH)(B.value.dropdownList,O.value.slaveTableId,"id"),t=(0,b.PH)(M.value.dropdownList,O.value.slaveColumnId,"columnId");e&&n&&t&&(O.value.variableName=e.columnName+"_"+n.name+"_"+t.columnName)}};return(0,d.wB)(()=>O.value.slaveColumnId,()=>{G()}),(0,d.sV)(()=>{V.value&&f.PC.view({relationId:P.value.relationId}).then(e=>{_.value=e.data.slaveTable.tableName,O.value={...e.data},L.value.onVisibleChange(!0),B.value.onVisibleChange(!0),M.value.onVisibleChange(!0)}).catch(e=>{console.warn(e)})}),(e,n)=>{const t=r.WK,m=l.xE,b=u.uD,g=s.P9,f=s.AV,x=o.S2,R=i.qi,h=l.US,D=a.S2;return(0,d.uX)(),(0,d.CE)("div",y,[(0,d.bF)(h,{ref_key:"formEditOnlinePageDatasourceRelation",ref:T,model:(0,c.R1)(O),class:"full-width-input form-box",rules:q,style:{width:"100%"},"label-width":"100px",size:(0,c.R1)(w),"label-position":"right",onSubmit:n[9]||(n[9]=(0,p.D$)(()=>{},["prevent"]))},{default:(0,d.k6)(()=>[(0,d.bF)(x,{gutter:20},{default:(0,d.k6)(()=>[(0,d.bF)(b,{span:24},{default:(0,d.k6)(()=>[(0,d.bF)(m,{label:"关联名称",prop:"relationName"},{default:(0,d.k6)(()=>[(0,d.bF)(t,{class:"input-item",modelValue:(0,c.R1)(O).relationName,"onUpdate:modelValue":n[0]||(n[0]=e=>(0,c.R1)(O).relationName=e),clearable:!0},null,8,["modelValue"])]),_:1})]),_:1}),(0,d.bF)(b,{span:24},{default:(0,d.k6)(()=>[(0,d.bF)(m,{label:"关联标识",prop:"variableName"},{default:(0,d.k6)(()=>[(0,d.bF)(t,{class:"input-item",modelValue:(0,c.R1)(O).variableName,"onUpdate:modelValue":n[1]||(n[1]=e=>(0,c.R1)(O).variableName=e),clearable:!0},null,8,["modelValue"])]),_:1})]),_:1}),(0,d.bF)(b,{span:24},{default:(0,d.k6)(()=>[(0,d.bF)(m,{label:"关联类型"},{default:(0,d.k6)(()=>[(0,d.bF)(f,{class:"input-item",modelValue:(0,c.R1)(O).relationType,"onUpdate:modelValue":n[2]||(n[2]=e=>(0,c.R1)(O).relationType=e),placeholder:"关联类型",disabled:(0,c.R1)(V)},{default:(0,d.k6)(()=>[((0,d.uX)(!0),(0,d.CE)(d.FK,null,(0,d.pI)((0,c.R1)(k.SysOnlineRelationType).getList(),e=>((0,d.uX)(),(0,d.Wv)(g,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1}),(0,d.bF)(b,{span:24},{default:(0,d.k6)(()=>[(0,d.bF)(m,{label:"关联主表"},{default:(0,d.k6)(()=>[(0,d.bF)(t,{value:(0,c.R1)(P).dblinkInfo.dblinkName+" / "+(0,c.R1)(P).datasource.masterTableIdDictMap.name,readonly:""},null,8,["value"])]),_:1})]),_:1}),(0,d.bF)(b,{span:24},{default:(0,d.k6)(()=>[(0,d.bF)(m,{label:"主表关联字段",prop:"masterColumnId"},{default:(0,d.k6)(()=>[(0,d.bF)(f,{class:"input-item",modelValue:(0,c.R1)(O).masterColumnId,"onUpdate:modelValue":n[3]||(n[3]=e=>(0,c.R1)(O).masterColumnId=e),clearable:!0,filterable:"",placeholder:"主表关联字段",loading:(0,c.R1)(L).loading,onVisibleChange:(0,c.R1)(L).onVisibleChange},{default:(0,d.k6)(()=>[((0,d.uX)(!0),(0,d.CE)(d.FK,null,(0,d.pI)((0,c.R1)(L).dropdownList,e=>((0,d.uX)(),(0,d.Wv)(g,{key:e.columnId,value:e.columnId,label:e.columnName},{default:(0,d.k6)(()=>[(0,d.bF)(x,{type:"flex",justify:"space-between"},{default:(0,d.k6)(()=>[(0,d.Lk)("span",null,(0,v.v_)(e.columnName),1),(0,d.Lk)("span",C,(0,v.v_)(e.columnComment),1)]),_:2},1024)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue","loading","onVisibleChange"])]),_:1})]),_:1}),(0,d.bF)(b,{span:24},{default:(0,d.k6)(()=>[(0,d.bF)(m,{label:"关联从表",prop:"slaveTableId"},{default:(0,d.k6)(()=>[(0,d.bF)(f,{class:"input-item",modelValue:(0,c.R1)(O).slaveTableId,"onUpdate:modelValue":n[4]||(n[4]=e=>(0,c.R1)(O).slaveTableId=e),clearable:!0,filterable:"",placeholder:"关联从表",loading:(0,c.R1)(B).loading,disabled:(0,c.R1)(V),onVisibleChange:(0,c.R1)(B).onVisibleChange,onChange:z},{default:(0,d.k6)(()=>[((0,d.uX)(!0),(0,d.CE)(d.FK,null,(0,d.pI)((0,c.R1)(B).dropdownList,e=>((0,d.uX)(),(0,d.Wv)(g,{key:e.id,value:e.id,label:e.name},{default:(0,d.k6)(()=>[(0,d.Lk)("span",null,(0,v.v_)(e.name),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue","loading","disabled","onVisibleChange"])]),_:1})]),_:1}),(0,d.bF)(b,{span:24},{default:(0,d.k6)(()=>[(0,d.bF)(m,{label:"从表关联字段",prop:"slaveColumnId"},{default:(0,d.k6)(()=>[(0,d.bF)(f,{class:"input-item",modelValue:(0,c.R1)(O).slaveColumnId,"onUpdate:modelValue":n[5]||(n[5]=e=>(0,c.R1)(O).slaveColumnId=e),clearable:!0,filterable:"",placeholder:"关联从表",loading:(0,c.R1)(M).loading,onVisibleChange:(0,c.R1)(M).onVisibleChange},{default:(0,d.k6)(()=>[((0,d.uX)(!0),(0,d.CE)(d.FK,null,(0,d.pI)((0,c.R1)(M).dropdownList,e=>((0,d.uX)(),(0,d.Wv)(g,{key:e.columnId,value:e.columnId,label:e.columnName},{default:(0,d.k6)(()=>[(0,d.Lk)("span",null,(0,v.v_)(e.columnName),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue","loading","onVisibleChange"])]),_:1})]),_:1}),(0,d.bF)(b,{span:24},{default:(0,d.k6)(()=>[(0,d.bF)(m,{label:"是否级联删除"},{default:(0,d.k6)(()=>[(0,d.bF)(R,{modelValue:(0,c.R1)(O).cascadeDelete,"onUpdate:modelValue":n[6]||(n[6]=e=>(0,c.R1)(O).cascadeDelete=e)},null,8,["modelValue"])]),_:1})]),_:1}),(0,d.bF)(b,{span:24},{default:(0,d.k6)(()=>[(0,d.bF)(m,{label:"是否左连接"},{default:(0,d.k6)(()=>[(0,d.bF)(R,{modelValue:(0,c.R1)(O).leftJoin,"onUpdate:modelValue":n[7]||(n[7]=e=>(0,c.R1)(O).leftJoin=e),disabled:(0,c.R1)(O).relationType===(0,c.R1)(k.SysOnlineRelationType).ONE_TO_MANY},null,8,["modelValue","disabled"]),(0,c.R1)(O).relationType===(0,c.R1)(k.SysOnlineRelationType).ONE_TO_MANY?((0,d.uX)(),(0,d.CE)("span",I," 一对多关联只能为左链接 ")):(0,d.Q3)("",!0)]),_:1})]),_:1}),(0,d.bF)(b,{span:24},{default:(0,d.k6)(()=>[(0,d.bF)(m,{label:"关联过滤SQL"},{default:(0,d.k6)(()=>[(0,d.bF)(t,{class:"input-item",modelValue:(0,c.R1)(O).relationFilterSql,"onUpdate:modelValue":n[8]||(n[8]=e=>(0,c.R1)(O).relationFilterSql=e),type:"textarea",style:{height:"80px"},clearable:!0,placeholder:"表关联过滤SQL"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","size"]),(0,d.bF)(x,{class:"menu-box"},{default:(0,d.k6)(()=>[(0,d.bF)(b,{span:24},{default:(0,d.k6)(()=>[(0,d.bF)(x,{class:"no-scroll flex-box",type:"flex",justify:"end"},{default:(0,d.k6)(()=>[(0,d.bF)(D,{size:(0,c.R1)(w),plain:!0,onClick:Q},{default:(0,d.k6)(()=>n[10]||(n[10]=[(0,d.eW)(" 取消 ")])),_:1,__:[10]},8,["size"]),(0,d.bF)(D,{type:"primary",size:(0,c.R1)(w),onClick:$},{default:(0,d.k6)(()=>n[11]||(n[11]=[(0,d.eW)(" 保存 ")])),_:1,__:[11]},8,["size"])]),_:1})]),_:1})]),_:1})])}}}),D=t(71241);const w=(0,D.A)(h,[["__scopeId","data-v-6c61be6e"]]);var T=w},42899:function(e,n,t){t(97042)},71066:function(e,n,t){t.d(n,{P:function(){return s},i:function(){return u}});var a=t(81387),l=t(27007),i=t(56768),o=t(90144);const s=e=>{console.log("接收到的第三方参数",e);const n=(0,o.KR)(0),t=(0,i.EW)(()=>{let n={};try{e.thirdParamsString&&(n=JSON.parse(e.thirdParamsString))}catch(t){console.log(t),n={}}return n});console.log("thirdParams",t);const a=(a,l,i)=>{console.log("onCloseThirdDialog",l,i),window.parent&&window.parent.postMessage({type:"closeDialog",data:{index:n.value,dialogKey:e.dialogKey,path:t.value.path,rowData:l?JSON.parse(JSON.stringify(l)):void 0,data:i?JSON.parse(JSON.stringify(i)):void 0,isSuccess:a}},"*")},s=(e,t)=>{switch(e){case"setToken":t.token&&(0,l.WG)(t.token);break;case"dialogIndex":n.value=t;break;case"refreshData":break;case"message":break}},u=e=>{s(e.data.type,e.data.data)};return(0,i.sV)(()=>{console.log("onMounted message"),window.addEventListener("message",u,!1)}),(0,i.hi)(()=>{console.log("onUnmounted message"),window.removeEventListener("message",u)}),{thirdParams:t,onCloseThirdDialog:a}},u=()=>{let e;const n=(0,a.lq)(),t=()=>{window.parent&&window.parent.postMessage({type:"refreshToken"},"*")};-1!==n.path.indexOf("/thirdParty/")&&((0,i.sV)(()=>{(0,l.R7)()&&(e=setInterval(()=>{console.log("refreshToken thirdParty"),t()},18e4))}),(0,i.hi)(()=>{e&&clearInterval(e)}))}},83283:function(e,n,t){t.d(n,{A:function(){return i}});var a=t(55583),l=t(18384);class i extends a.w{static testScript(e,n){return super.post(l.x+"/online/onlineApi/testScript",e,n)}static list(e,n){return super.post(l.x+"/online/onlineApi/list",e,n)}static view(e,n){return super.get(l.x+"/online/onlineApi/view",e,n)}static add(e,n){return super.post(l.x+"/online/onlineApi/add",e,n)}static update(e,n){return super.post(l.x+"/online/onlineApi/update",e,n)}static delete(e,n){return super.post(l.x+"/online/onlineApi/delete",e,n)}static deleteBatch(e,n){return super.post(l.x+"/online/onlineApi/deleteBatch",e,n)}}},93889:function(e,n,t){t.d(n,{Z:function(){return d},x:function(){return c}});var a=t(3027),l=t(47378),i=t(20464),o=t(58501),s=t(92056),u=t(12235),r=t(24232);const d=(0,l.b_)({modelValue:{type:[Boolean,String,Number],default:!1},disabled:Boolean,loading:Boolean,size:{type:String,validator:a.x},width:{type:[String,Number],default:""},inlinePrompt:Boolean,inactiveActionIcon:{type:i.Ze},activeActionIcon:{type:i.Ze},activeIcon:{type:i.Ze},inactiveIcon:{type:i.Ze},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},beforeChange:{type:(0,l.jq)(Function)},id:String,tabindex:{type:[String,Number]},...(0,o.l)(["ariaLabel"])}),c={[s.l4]:e=>(0,u.Lm)(e)||(0,r.Kg)(e)||(0,u.Et)(e),[s.YU]:e=>(0,u.Lm)(e)||(0,r.Kg)(e)||(0,u.Et)(e),[s.qs]:e=>(0,u.Lm)(e)||(0,r.Kg)(e)||(0,u.Et)(e)}}}]);