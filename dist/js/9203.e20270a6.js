"use strict";(self["webpackChunkorange"]=self["webpackChunkorange"]||[]).push([[9203],{3740:function(e,t,s){s.d(t,{qi:function(){return k}});var a=s(56768),r=s(90144),i=s(24232),n=s(45130),l=s(91542),u=s(57477),o=s(93889),p=s(99077),d=s(44216),c=s(37207),m=s(93513),y=s(93558),v=s(92056),f=s(86894),x=s(12235);const h="ElSwitch",b=(0,a.pM)({name:h}),g=(0,a.pM)({...b,props:o.Z,emits:o.x,setup(e,{expose:t,emit:s}){const o=e,{formItem:p}=(0,d.j)(),b=(0,c.NV)(),g=(0,m.DU)("switch"),{inputId:D}=(0,d.W)(o,{formItemContext:p}),w=(0,c.CB)((0,a.EW)(()=>o.loading)),k=(0,r.KR)(!1!==o.modelValue),R=(0,r.KR)(),I=(0,r.KR)(),S=(0,a.EW)(()=>[g.b(),g.m(b.value),g.is("disabled",w.value),g.is("checked",F.value)]),P=(0,a.EW)(()=>[g.e("label"),g.em("label","left"),g.is("active",!F.value)]),_=(0,a.EW)(()=>[g.e("label"),g.em("label","right"),g.is("active",F.value)]),C=(0,a.EW)(()=>({width:(0,y._V)(o.width)}));(0,a.wB)(()=>o.modelValue,()=>{k.value=!0});const U=(0,a.EW)(()=>!!k.value&&o.modelValue),F=(0,a.EW)(()=>U.value===o.activeValue);[o.activeValue,o.inactiveValue].includes(U.value)||(s(v.l4,o.inactiveValue),s(v.YU,o.inactiveValue),s(v.qs,o.inactiveValue)),(0,a.wB)(F,e=>{var t;R.value.checked=e,o.validateEvent&&(null==(t=null==p?void 0:p.validate)||t.call(p,"change").catch(e=>(0,f.U)(e)))});const W=()=>{const e=F.value?o.inactiveValue:o.activeValue;s(v.l4,e),s(v.YU,e),s(v.qs,e),(0,a.dY)(()=>{R.value.checked=F.value})},E=()=>{if(w.value)return;const{beforeChange:e}=o;if(!e)return void W();const t=e(),s=[(0,i.yL)(t),(0,x.Lm)(t)].includes(!0);s||(0,f.$)(h,"beforeChange must return type `Promise<boolean>` or `boolean`"),(0,i.yL)(t)?t.then(e=>{e&&W()}).catch(e=>{(0,f.U)(h,`some error occurred: ${e}`)}):t&&W()},V=()=>{var e,t;null==(t=null==(e=R.value)?void 0:e.focus)||t.call(e)};return(0,a.sV)(()=>{R.value.checked=F.value}),t({focus:V,checked:F}),(e,t)=>((0,a.uX)(),(0,a.CE)("div",{class:(0,i.C4)((0,r.R1)(S)),onClick:(0,n.D$)(E,["prevent"])},[(0,a.Lk)("input",{id:(0,r.R1)(D),ref_key:"input",ref:R,class:(0,i.C4)((0,r.R1)(g).e("input")),type:"checkbox",role:"switch","aria-checked":(0,r.R1)(F),"aria-disabled":(0,r.R1)(w),"aria-label":e.ariaLabel,name:e.name,"true-value":e.activeValue,"false-value":e.inactiveValue,disabled:(0,r.R1)(w),tabindex:e.tabindex,onChange:W,onKeydown:(0,n.jR)(E,["enter"])},null,42,["id","aria-checked","aria-disabled","aria-label","name","true-value","false-value","disabled","tabindex","onKeydown"]),e.inlinePrompt||!e.inactiveIcon&&!e.inactiveText?(0,a.Q3)("v-if",!0):((0,a.uX)(),(0,a.CE)("span",{key:0,class:(0,i.C4)((0,r.R1)(P))},[e.inactiveIcon?((0,a.uX)(),(0,a.Wv)((0,r.R1)(l.tk),{key:0},{default:(0,a.k6)(()=>[((0,a.uX)(),(0,a.Wv)((0,a.$y)(e.inactiveIcon)))]),_:1})):(0,a.Q3)("v-if",!0),!e.inactiveIcon&&e.inactiveText?((0,a.uX)(),(0,a.CE)("span",{key:1,"aria-hidden":(0,r.R1)(F)},(0,i.v_)(e.inactiveText),9,["aria-hidden"])):(0,a.Q3)("v-if",!0)],2)),(0,a.Lk)("span",{ref_key:"core",ref:I,class:(0,i.C4)((0,r.R1)(g).e("core")),style:(0,i.Tr)((0,r.R1)(C))},[e.inlinePrompt?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,i.C4)((0,r.R1)(g).e("inner"))},[e.activeIcon||e.inactiveIcon?((0,a.uX)(),(0,a.Wv)((0,r.R1)(l.tk),{key:0,class:(0,i.C4)((0,r.R1)(g).is("icon"))},{default:(0,a.k6)(()=>[((0,a.uX)(),(0,a.Wv)((0,a.$y)((0,r.R1)(F)?e.activeIcon:e.inactiveIcon)))]),_:1},8,["class"])):e.activeText||e.inactiveText?((0,a.uX)(),(0,a.CE)("span",{key:1,class:(0,i.C4)((0,r.R1)(g).is("text")),"aria-hidden":!(0,r.R1)(F)},(0,i.v_)((0,r.R1)(F)?e.activeText:e.inactiveText),11,["aria-hidden"])):(0,a.Q3)("v-if",!0)],2)):(0,a.Q3)("v-if",!0),(0,a.Lk)("div",{class:(0,i.C4)((0,r.R1)(g).e("action"))},[e.loading?((0,a.uX)(),(0,a.Wv)((0,r.R1)(l.tk),{key:0,class:(0,i.C4)((0,r.R1)(g).is("loading"))},{default:(0,a.k6)(()=>[(0,a.bF)((0,r.R1)(u.Loading))]),_:1},8,["class"])):(0,r.R1)(F)?(0,a.RG)(e.$slots,"active-action",{key:1},()=>[e.activeActionIcon?((0,a.uX)(),(0,a.Wv)((0,r.R1)(l.tk),{key:0},{default:(0,a.k6)(()=>[((0,a.uX)(),(0,a.Wv)((0,a.$y)(e.activeActionIcon)))]),_:1})):(0,a.Q3)("v-if",!0)]):(0,r.R1)(F)?(0,a.Q3)("v-if",!0):(0,a.RG)(e.$slots,"inactive-action",{key:2},()=>[e.inactiveActionIcon?((0,a.uX)(),(0,a.Wv)((0,r.R1)(l.tk),{key:0},{default:(0,a.k6)(()=>[((0,a.uX)(),(0,a.Wv)((0,a.$y)(e.inactiveActionIcon)))]),_:1})):(0,a.Q3)("v-if",!0)])],2)],6),e.inlinePrompt||!e.activeIcon&&!e.activeText?(0,a.Q3)("v-if",!0):((0,a.uX)(),(0,a.CE)("span",{key:1,class:(0,i.C4)((0,r.R1)(_))},[e.activeIcon?((0,a.uX)(),(0,a.Wv)((0,r.R1)(l.tk),{key:0},{default:(0,a.k6)(()=>[((0,a.uX)(),(0,a.Wv)((0,a.$y)(e.activeIcon)))]),_:1})):(0,a.Q3)("v-if",!0),!e.activeIcon&&e.activeText?((0,a.uX)(),(0,a.CE)("span",{key:1,"aria-hidden":!(0,r.R1)(F)},(0,i.v_)(e.activeText),9,["aria-hidden"])):(0,a.Q3)("v-if",!0)],2))],10,["onClick"]))}});var D=(0,p.A)(g,[["__file","switch.vue"]]),w=s(25376);const k=(0,w.GU)(D)},7502:function(e,t,s){s.d(t,{s:function(){return i}});var a=s(31372),r=s(56768);const i=()=>{const e=(0,r.WQ)("defaultFormItemSize","default"),t=(t,s,r,i,n)=>(i||(i={}),i.defaultFormItemSize=e,a.l.show(t,s,r,i,n));return{show:t}}},21013:function(e,t,s){s.d(t,{A:function(){return i}});var a=s(55583),r=s(18384);class i extends a.w{static getUserList(e,t){return super.post(r.x+"/upms/sysUser/list",e,t)}static addUser(e,t){return super.post(r.x+"/upms/sysUser/add",e,t)}static updateUser(e,t){return super.post(r.x+"/upms/sysUser/update",e,t)}static deleteUser(e,t){return super.post(r.x+"/upms/sysUser/delete",e,t)}static viewMenu(e,t){return super.post(r.x+"/upms/sysMenu/view",e,t)}static syncAzureUser(e){return super.post(r.x+"/upms/sysUser/syncAzureUser",e)}static getUser(e,t){return super.get(r.x+"/upms/sysUser/view",e,t)}static resetUserPassword(e,t){return super.post(r.x+"/upms/sysUser/resetPassword",e,t)}static listSysPermWithDetail(e,t){return super.get(r.x+"/upms/sysUser/listSysPermWithDetail",e,t)}static listSysPermCodeWithDetail(e,t){return super.get(r.x+"/upms/sysUser/listSysPermCodeWithDetail",e,t)}static listSysMenuWithDetail(e,t){return super.get(r.x+"/upms/sysUser/listSysMenuWithDetail",e,t)}}},30058:function(e,t,s){s.d(t,{A:function(){return f}});var a=s(65451),r=(s(97042),s(63390),s(91542)),i=(s(37985),s(25136)),n=(s(69957),s(76408)),l=(s(87535),s(18111),s(22489),s(56768)),u=s(90144),o=s(24232),p=s(57477);const d={style:{"margin-right":"4px","font-size":"14px"}},c={key:2,style:{"flex-grow":"1","min-width":"10px"}};var m=(0,l.pM)({__name:"index",props:{hasSearch:{type:Boolean,default:!0},hasReset:{type:Boolean,default:!0}},emits:["reset","search"],setup(e,{emit:t}){const s=(0,l.Ht)(),m=t,y=(0,u.KR)(!1),v=()=>{m("search")},f=()=>{m("reset")},x=(0,l.EW)(()=>{let e=s.default?s.default():[];return e.filter(e=>e.type&&e.type.name&&null!==e.type.name)}),h=(0,l.EW)(()=>{if(y.value){let e=x.value.length%4;return 0===e?24:6*(4-e)}return x.value.length<=3?6*(4-x.value.length):6});return(0,l.sV)(()=>{null!=s.operation&&(y.value=!0)}),(e,t)=>{const m=n.uD,b=i.S2,g=r.tk,D=a.S2;return(0,l.uX)(),(0,l.Wv)(D,{class:"flex-box",type:"flex"},{default:(0,l.k6)(()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)((0,u.R1)(x),(e,t)=>((0,l.uX)(),(0,l.CE)(l.FK,{key:t},[t<((0,u.R1)(y)?(0,u.R1)(x).length:3)?((0,l.uX)(),(0,l.Wv)(m,{key:0,span:6},{default:(0,l.k6)(()=>[((0,l.uX)(),(0,l.Wv)((0,l.$y)(e),{style:{width:"100%"}}))]),_:2},1024)):(0,l.Q3)("",!0)],64))),128)),e.hasSearch?((0,l.uX)(),(0,l.Wv)(m,{key:0,span:(0,u.R1)(h),class:"search-box"},{default:(0,l.k6)(()=>[(0,l.bF)(D,{type:"flex",align:"middle"},{default:(0,l.k6)(()=>[(0,l.bF)(b,{class:"search-btn",type:"default",plain:"",onClick:v,icon:(0,u.R1)(p.Search)},{default:(0,l.k6)(()=>t[1]||(t[1]=[(0,l.eW)(" 查询 ")])),_:1,__:[1]},8,["icon"]),e.hasReset?((0,l.uX)(),(0,l.Wv)(b,{key:0,type:"default",plain:"",onClick:f,style:{width:"72px"}},{default:(0,l.k6)(()=>t[2]||(t[2]=[(0,l.eW)("重置")])),_:1,__:[2]})):(0,l.Q3)("",!0),(0,u.R1)(x).length>3&&null==(0,u.R1)(s).operation?((0,l.uX)(),(0,l.Wv)(D,{key:1,type:"flex",align:"middle",class:"expand-btn",onClick:t[0]||(t[0]=e=>y.value=!(0,u.R1)(y))},{default:(0,l.k6)(()=>[(0,l.Lk)("span",d,(0,o.v_)((0,u.R1)(y)?"收起":"展开"),1),(0,l.bF)(g,null,{default:(0,l.k6)(()=>[(0,u.R1)(y)?((0,l.uX)(),(0,l.Wv)((0,u.R1)(p.ArrowUp),{key:0})):((0,l.uX)(),(0,l.Wv)((0,u.R1)(p.ArrowDown),{key:1}))]),_:1})]),_:1})):(0,l.Q3)("",!0),(0,u.R1)(s).operation?((0,l.uX)(),(0,l.CE)("div",c)):(0,l.Q3)("",!0),(0,l.RG)(e.$slots,"operation")]),_:3})]),_:3},8,["span"])):(0,l.Q3)("",!0)]),_:3})}}}),y=s(71241);const v=(0,y.A)(m,[["__scopeId","data-v-3d53564d"]]);var f=v},42899:function(e,t,s){s(97042)},54428:function(e,t,s){s.d(t,{v9:function(){return n},n5:function(){return l},lE:function(){return f},_4:function(){return b},C7:function(){return p},If:function(){return g},qY:function(){return o},ek:function(){return d},$z:function(){return c},$D:function(){return h},S_:function(){return v},fe:function(){return u},sV:function(){return m},r0:function(){return y.A}});s(18111),s(61701);var a=s(55583),r=s(52081),i=s(18384);class n extends a.w{static dictSysRole(e,t){return new Promise((s,a)=>{super.get(i.x+"/upms/sysRole/listDict",e,t).then(e=>{const t=new r.w("角色字典",e.data);s(t)}).catch(e=>{a(e)})})}static dictGlobalDict(e,t){return new Promise((s,a)=>{super.get(i.x+"/upms/globalDict/listDict",e,t).then(e=>{const t=new r.w("编码字典",(e.data||[]).map(e=>({...e,disabled:1===e.status})));s(t)}).catch(e=>{a(e)})})}static dictGlobalDictByIds(e,t){return new Promise((s,a)=>{super.get(i.x+"/upms/globalDict/listDictByIds",e,t).then(e=>{const t=new r.w("编码字典",e.data);s(t)}).catch(e=>{a(e)})})}static dictAllMenu(e,t){return new Promise((s,a)=>{super.get(i.x+"/upms/sysMenu/listDict",e,t).then(e=>{const t=new r.w("菜单字典",e.data);s(t)}).catch(e=>{a(e)})})}static dictSysMenu(e,t){return new Promise((s,a)=>{super.get(i.x+"/upms/sysMenu/listMenuDict",e,t).then(e=>{const t=new r.w("菜单字典",e.data);s(t)}).catch(e=>{a(e)})})}static dictDeptPost(e,t){return new Promise((s,a)=>{super.get(i.x+"/upms/sysDept/listSysDeptPostWithRelation",e,t).then(e=>{s(e.data)}).catch(e=>{a(e)})})}static dictSysPost(e,t){return new Promise((s,a)=>{super.get(i.x+"/upms/sysPost/listDict",e,t).then(e=>{const t=new r.w("岗位字典",e.data);s(t)}).catch(e=>{a(e)})})}static dictReportDblink(e,t){return new Promise((s,a)=>{super.get(i.x+"/report/reportDblink/listDict",e,t).then(e=>{const t=new r.w("数据库链接",e.data);s(t)}).catch(e=>{a(e)})})}static dictReportDict(e,t){return new Promise((s,a)=>{super.get(i.x+"/report/reportDict/listDict",e,t).then(e=>{const t=new r.w("字典管理",e.data);s(t)}).catch(e=>{a(e)})})}static dictSysUser(e,t){return new Promise((s,a)=>{super.get("/admin/upms/sysUser/listDict",e,t).then(e=>{let t=new r.w("用户字典",e.data);s(t)}).catch(e=>{a(e)})})}static dictSysDept(e,t){return new Promise((s,a)=>{super.get("/admin/upms/sysDept/listDict",e,t).then(e=>{let t=new r.w("部门字典",e.data);s(t)}).catch(e=>{a(e)})})}static dictSysDeptByParentId(e,t){return new Promise((s,a)=>{super.get("/admin/upms/sysDept/listDictByParentId",e,t).then(e=>{let t=new r.w("部门字典",e.data);s(t)}).catch(e=>{a(e)})})}}class l extends a.w{static listSysLoginUser(e,t){return super.post(i.x+"/upms/loginUser/list",e,t)}static deleteSysLoginUser(e,t){return super.post(i.x+"/upms/loginUser/delete",e,t)}}class u extends a.w{static getMenuPermList(e,t){return super.post(i.x+"/upms/sysMenu/list",e,t)}static addMenu(e,t){return super.post(i.x+"/upms/sysMenu/add",e,t)}static updateMenu(e,t){return super.post(i.x+"/upms/sysMenu/update",e,t)}static deleteMenu(e,t){return super.post(i.x+"/upms/sysMenu/delete",e,t)}static viewMenu(e,t){return super.get(i.x+"/upms/sysMenu/view",e,t)}static listMenuPermCode(e,t){return super.get(i.x+"/upms/sysMenu/listMenuPerm",e,t)}static listSysPermByMenuIdWithDetail(e,t){return super.get(i.x+"/upms/sysMenu/listSysPermWithDetail",e,t)}static listSysUserByMenuIdWithDetail(e,t){return super.get(i.x+"/upms/sysMenu/listSysUserWithDetail",e,t)}}class o extends a.w{static updateSysConf(e,t){return super.post(i.x+"/upms/sysConf/update",e,t)}static getSysConf(e,t){return super.get(i.x+"/upms/sysConf/view",e,t)}}class p extends a.w{static getPermCodeList(e,t){return super.get(i.x+"/upms/login/getAllPermCodes",e,t)}}class d extends a.w{static add(e,t){return super.post(i.x+"/upms/sysDataPerm/add",e,t)}static update(e,t){return super.post(i.x+"/upms/sysDataPerm/update",e,t)}static delete(e,t){return super.post(i.x+"/upms/sysDataPerm/delete",e,t)}static list(e,t){return super.post(i.x+"/upms/sysDataPerm/list",e,t)}static view(e,t){return super.get(i.x+"/upms/sysDataPerm/view",e,t)}static listDataPermUser(e,t){return super.post(i.x+"/upms/sysDataPerm/listDataPermUser",e,t)}static addDataPermUser(e,t){return super.post(i.x+"/upms/sysDataPerm/addDataPermUser",e,t)}static deleteDataPermUser(e,t){return super.post(i.x+"/upms/sysDataPerm/deleteDataPermUser",e,t)}static listNotInDataPermUser(e,t){return super.post(i.x+"/upms/sysDataPerm/listNotInDataPermUser",e,t)}}class c extends a.w{static list(e,t){return super.post(i.x+"/upms/sysDept/list",e,t)}static view(e,t){return super.get(i.x+"/upms/sysDept/view",e,t)}static export(e,t){return super.download(i.x+"/upms/sysDept/export",e,t)}static add(e,t){return super.post(i.x+"/upms/sysDept/add",e,t)}static update(e,t){return super.post(i.x+"/upms/sysDept/update",e,t)}static delete(e,t){return super.post(i.x+"/upms/sysDept/delete",e,t)}static listNotInSysDeptPost(e,t){return super.post(i.x+"/upms/sysDept/listNotInSysDeptPost",e,t)}static listSysDeptPost(e,t){return super.post(i.x+"/upms/sysDept/listSysDeptPost",e,t)}static addSysDeptPost(e,t){return super.post(i.x+"/upms/sysDept/addSysDeptPost",e,t)}static updateSysDeptPost(e,t){return super.post(i.x+"/upms/sysDept/updateSysDeptPost",e,t)}static deleteSysDeptPost(e,t){return super.post(i.x+"/upms/sysDept/deleteSysDeptPost",e,t)}static viewSysDeptPost(e,t){return super.get(i.x+"/upms/sysDept/viewSysDeptPost",e,t)}}class m extends a.w{static getRoleList(e,t){return super.post(i.x+"/upms/sysRole/list",e,t)}static getRole(e,t){return super.get(i.x+"/upms/sysRole/view",e,t)}static deleteRole(e,t){return super.post(i.x+"/upms/sysRole/delete",e,t)}static addRole(e,t){return super.post(i.x+"/upms/sysRole/add",e,t)}static updateRole(e,t){return super.post(i.x+"/upms/sysRole/update",e,t)}static listRoleUser(e,t){return super.post(i.x+"/upms/sysRole/listUserRole",e,t)}static listNotInUserRole(e,t){return super.post(i.x+"/upms/sysRole/listNotInUserRole",e,t)}static addRoleUser(e,t){return super.post(i.x+"/upms/sysRole/addUserRole",e,t)}static deleteRoleUser(e,t){return super.post(i.x+"/upms/sysRole/deleteUserRole",e,t)}}var y=s(21013);class v extends a.w{static list(e,t){return super.post(i.x+"/upms/sysPost/list",e,t)}static view(e,t){return super.get(i.x+"/upms/sysPost/view",e,t)}static add(e,t){return super.post(i.x+"/upms/sysPost/add",e,t)}static update(e,t){return super.post(i.x+"/upms/sysPost/update",e,t)}static delete(e,t){return super.post(i.x+"/upms/sysPost/delete",e,t)}}class f extends a.w{static list(e,t){return super.post(i.x+"/mobile/mobileEntry/list",e,t)}static view(e,t){return super.get(i.x+"/mobile/mobileEntry/view",e,t)}static add(e,t){return super.post(i.x+"/mobile/mobileEntry/add",e,t)}static update(e,t){return super.post(i.x+"/mobile/mobileEntry/update",e,t)}static delete(e,t){return super.post(i.x+"/mobile/mobileEntry/delete",e,t)}static uploadImage(e,t){return super.post(i.x+"/mobile/mobileEntry/uploadImage",e,t)}static downloadImage(e,t){return super.post(i.x+"/mobile/mobileEntry/downloadImage",e,t)}}var x=s(53155);class h{static list(e,t){return(0,x.bE)(i.x+"/upms/globalDict/list",e,t)}static listAll(e,t){return(0,x.Jt)(i.x+"/upms/globalDict/listAll",e,t)}static add(e,t){return(0,x.bE)(i.x+"/upms/globalDict/add",e,t)}static update(e,t){return(0,x.bE)(i.x+"/upms/globalDict/update",e,t)}static delete(e,t){return(0,x.bE)(i.x+"/upms/globalDict/delete",e,t)}static addItem(e,t){return(0,x.bE)(i.x+"/upms/globalDict/addItem",e,t)}static updateItem(e,t){return(0,x.bE)(i.x+"/upms/globalDict/updateItem",e,t)}static updateItemStatus(e,t){return(0,x.bE)(i.x+"/upms/globalDict/updateItemStatus",e,t)}static deleteItem(e,t){return(0,x.bE)(i.x+"/upms/globalDict/deleteItem",e,t)}static reloadCachedData(e,t){return(0,x.Jt)(i.x+"/upms/globalDict/reloadCachedData",e,t)}}class b extends a.w{static listSysOperationLog(e,t){return super.post(i.x+"/upms/sysOperationLog/list",e,t)}}class g extends a.w{static list(e,t){return super.post(i.x+"/commonext/bizwidget/list",e,t)}static viewByIds(e,t){return super.post(i.x+"/commonext/bizwidget/view",e,t)}}},77512:function(e,t,s){s.r(t),s.d(t,{default:function(){return E}});var a=s(70944),r=s(25136),i=(s(97042),s(69957),s(21929)),n=(s(98421),s(30058)),l=(s(32465),s(14022)),u=(s(72343),s(44114),s(56768)),o=s(90144),p=s(45130),d=s(57477),c=s(81387),m=s(164),y=s(26695),v=s(82572),f=s(54898),x=s(60265),h=s(54428),b=s(27007),g=s(7502),D=s(65451),w=(s(63390),s(77649)),k=(s(87603),s(76408)),R=(s(87535),s(18888)),I=(s(3172),s(99080));const S={class:"form-single-fragment",style:{position:"relative"}};var P=(0,u.pM)({__name:"index",props:{deptId:{},dialog:{}},setup(e){const t=(0,v.l5)(),s=e,a=(0,u.EW)(()=>t.defaultFormItemSize),{checkPermCodeExist:n}=(0,f.S)(),d=(0,o.KR)(),c=(0,o.Kh)({sysDept:{}}),m={"sysDept.deptName":[{required:!0,message:"请输入部门名称",trigger:"blur"}],"sysDept.showOrder":[{required:!0,message:"请输入显示顺序",trigger:"blur"}]},x=()=>new Promise((e,t)=>{let s={};h.v9.dictSysDept(s).then(t=>{e({dataList:t.getList()})}).catch(e=>{t(e)})}),g={loadData:x,idKey:"id",isTree:!0},P=(0,o.Kh)({formFilter:{},formFilterCopy:{},parentId:{impl:(0,I.B)(g),value:[]},isInit:!1}),_=(0,u.EW)(()=>null!=s.deptId),C=()=>{s.dialog&&s.dialog.cancel()},U=e=>{P.parentId.impl.onVisibleChange(e).catch(e=>{console.warn(e)})},F=()=>{P.parentId.impl.onVisibleChange(!0).then(()=>{P.isInit||(P.parentId.value=(0,b.Zi)(P.parentId.impl.dropdownList,c.sysDept.parentId,"id"),P.isInit=!0)})},W=()=>{d.value.validate(e=>{if(!e)return;let t=Array.isArray(P.parentId.value)?P.parentId.value[P.parentId.value.length-1]:void 0;if(null!=t&&_.value){let e=(0,b.Zi)(P.parentId.impl.dropdownList,t);if(Array.isArray(e)&&-1!==e.indexOf(s.deptId))return void y.nk.error("所属部门不能为当前部门的子部门！")}let a={sysDeptDto:{deptName:c.sysDept.deptName,showOrder:c.sysDept.showOrder,parentId:t,deptId:s.deptId}};_.value?h.$z.update(a).then(e=>{y.nk.success("编辑成功"),s.dialog&&s.dialog.submit(e)}).catch(e=>{console.warn(e)}):h.$z.add(a).then(e=>{y.nk.success("新建成功"),s.dialog&&s.dialog.submit(e)}).catch(e=>{console.warn(e)})})},E=()=>{if(!_.value)return Promise.reject();let e={deptId:s.deptId};return new Promise((t,s)=>{h.$z.view(e).then(e=>{c.sysDept={...e.data},t()}).catch(e=>{console.warn(e),s()})})},V=()=>{let e=[E()];Promise.all(e).then(()=>{F()}).catch(e=>{console.warn(e)})};return(0,u.sV)(()=>{V()}),(e,t)=>{const s=R._m,y=i.xE,v=k.uD,f=l.WK,x=w.lq,h=r.S2,b=D.S2,g=i.US;return(0,u.uX)(),(0,u.CE)("div",S,[(0,u.bF)(g,{ref_key:"form",ref:d,model:(0,o.R1)(c),rules:m,style:{width:"100%"},"label-width":"80px",size:(0,o.R1)(a),"label-position":"right",onSubmit:t[5]||(t[5]=(0,p.D$)(()=>{},["prevent"]))},{default:(0,u.k6)(()=>[(0,u.bF)(b,{gutter:20},{default:(0,u.k6)(()=>[(0,u.bF)(v,{span:24},{default:(0,u.k6)(()=>[(0,u.bF)(y,{label:"所属部门",prop:"sysDept.parentId"},{default:(0,u.k6)(()=>[(0,u.bF)(s,{class:"input-item",modelValue:(0,o.R1)(P).parentId.value,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,o.R1)(P).parentId.value=e),clearable:!0,placeholder:"所属部门",size:(0,o.R1)(a),loading:(0,o.R1)(P).parentId.impl.loading,props:{value:"id",label:"name",checkStrictly:!0},onVisibleChange:U,options:(0,o.R1)(P).parentId.impl.dropdownList},null,8,["modelValue","size","loading","options"])]),_:1})]),_:1}),(0,u.bF)(v,{span:24},{default:(0,u.k6)(()=>[(0,u.bF)(y,{label:"部门名称",prop:"sysDept.deptName"},{default:(0,u.k6)(()=>[(0,u.bF)(f,{class:"input-item",modelValue:(0,o.R1)(c).sysDept.deptName,"onUpdate:modelValue":t[1]||(t[1]=e=>(0,o.R1)(c).sysDept.deptName=e),size:(0,o.R1)(a),clearable:!0,placeholder:"部门名称",maxlength:"30"},null,8,["modelValue","size"])]),_:1})]),_:1}),(0,u.bF)(v,{span:24},{default:(0,u.k6)(()=>[(0,u.bF)(y,{label:"显示顺序",prop:"sysDept.showOrder"},{default:(0,u.k6)(()=>[(0,u.bF)(x,{class:"input-item",modelValue:(0,o.R1)(c).sysDept.showOrder,"onUpdate:modelValue":t[2]||(t[2]=e=>(0,o.R1)(c).sysDept.showOrder=e),clearable:!0,size:(0,o.R1)(a),"controls-position":"right",placeholder:"显示顺序"},null,8,["modelValue","size"])]),_:1})]),_:1}),(0,u.bF)(v,{span:24},{default:(0,u.k6)(()=>[(0,u.bF)(b,{type:"flex",justify:"end"},{default:(0,u.k6)(()=>[(0,u.bF)(h,{size:(0,o.R1)(a),plain:!0,onClick:t[3]||(t[3]=e=>C())},{default:(0,u.k6)(()=>t[6]||(t[6]=[(0,u.eW)(" 取消 ")])),_:1,__:[6]},8,["size"]),(0,u.bF)(h,{type:"primary",onClick:t[4]||(t[4]=e=>W()),size:(0,o.R1)(a),disabled:!((0,o.R1)(n)("formSysDept:fragmentSysDept:update")||(0,o.R1)(n)("formSysDept:fragmentSysDept:add"))},{default:(0,u.k6)(()=>t[7]||(t[7]=[(0,u.eW)(" 保存 ")])),_:1,__:[7]},8,["size","disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","size"])])}}});const _=P;var C=_;const U={name:"formSysDept"};var F=(0,u.pM)({...U,setup(e){const t=(0,g.s)(),s=(0,v.l5)(),{checkPermCodeExist:D}=(0,f.S)(),w=(0,o.KR)(),k=(0,c.rd)(),R=()=>{w.value.resetFields(),U(!0)},I=e=>(e.sysDeptDtoFilter={deptName:_.formFilterCopy.deptName},e.orderParam=[{fieldName:"showOrder",asc:!0}],new Promise((t,s)=>{h.$z.list(e).then(e=>{t({dataList:(0,b.BN)(e.data.dataList,"deptId","parentId"),totalCount:e.data.totalCount})}).catch(e=>{s(e)})})),S=()=>(_.formFilterCopy.deptName=_.formFilter.deptName,!0),P={loadTableData:I,verifyTableParameter:S,paged:!1},_=(0,o.Kh)({formFilter:{deptName:void 0},formFilterCopy:{deptName:void 0},SysDeptList:{impl:(0,x.K)(P)}}),U=(e=!1)=>{e?_.SysDeptList.impl.refreshTable(!0,1):_.SysDeptList.impl.refreshTable()},F=()=>{let e={};t.show("新建部门",C,{area:["500px"]},e).then(()=>{U()}).catch(e=>{console.warn(e)})},W=e=>{let s={deptId:e.deptId};t.show("编辑部门",C,{area:["500px"]},s).then(()=>{_.SysDeptList.impl.refreshTable()}).catch(e=>{console.warn(e)})},E=e=>{let t={deptId:e.deptId,closeVisible:1};k.push({name:"formSysDeptPost",query:t})},V=e=>{let t={deptId:e.deptId};m.s.confirm(`是否删除部门【${e.deptName}】？`,"",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{h.$z.delete(t).then(()=>{y.nk.success("删除成功"),U()}).catch(e=>{console.warn(e)})})},z=()=>{U()};return(0,u.sV)(()=>{z()}),(e,t)=>{const c=l.WK,m=i.xE,y=n.A,v=i.US,f=r.S2,x=(0,u.g2)("vxe-column"),h=a.A;return(0,u.uX)(),(0,u.CE)("div",null,[(0,u.bF)(v,{ref_key:"form",ref:w,model:(0,o.R1)(_),"label-width":"75px",size:(0,o.R1)(s).defaultFormItemSize,"label-position":"right",onSubmit:t[2]||(t[2]=(0,p.D$)(()=>{},["prevent"]))},{default:(0,u.k6)(()=>[(0,u.bF)(y,{"item-width":350,onSearch:t[1]||(t[1]=e=>U(!0)),onReset:R},{default:(0,u.k6)(()=>[(0,u.bF)(m,{label:"部门名称",prop:"formFilter.deptName"},{default:(0,u.k6)(()=>[(0,u.bF)(c,{class:"filter-item",modelValue:(0,o.R1)(_).formFilter.deptName,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,o.R1)(_).formFilter.deptName=e),clearable:!0,placeholder:"部门名称"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model","size"]),(0,u.bF)(h,{class:"border-bottom-0 page-table",data:(0,o.R1)(_).SysDeptList.impl.dataList,"tree-config":{rowField:"deptId",parentField:"parentId"},onRefresh:t[4]||(t[4]=e=>U(!0))},{operator:(0,u.k6)(()=>[(0,u.bF)(f,{type:"primary",icon:(0,o.R1)(d.Plus),size:(0,o.R1)(s).defaultFormItemSize,disabled:!(0,o.R1)(D)("formSysDept:fragmentSysDept:add"),onClick:t[3]||(t[3]=e=>F())},{default:(0,u.k6)(()=>t[5]||(t[5]=[(0,u.eW)("新建")])),_:1,__:[5]},8,["icon","size","disabled"])]),default:(0,u.k6)(()=>[(0,u.bF)(x,{title:"序号",type:"seq",width:"80px","tree-node":""}),(0,u.bF)(x,{title:"部门名称",field:"deptName"}),(0,u.bF)(x,{title:"操作",fixed:"right",width:"150px"},{default:(0,u.k6)(e=>[(0,u.bF)(f,{onClick:t=>W(e.row),type:"primary",link:"",size:"default",disabled:!(0,o.R1)(D)("formSysDept:fragmentSysDept:update")},{default:(0,u.k6)(()=>t[6]||(t[6]=[(0,u.eW)(" 编辑 ")])),_:2,__:[6]},1032,["onClick","disabled"]),(0,u.bF)(f,{onClick:t=>E(e.row),type:"primary",link:"",size:"default",disabled:!((0,o.R1)(D)("formSysDept:fragmentSysDept:editPost")||(0,o.R1)(D)("formSysDept:fragmentSysDept:viewPost"))},{default:(0,u.k6)(()=>t[7]||(t[7]=[(0,u.eW)(" 岗位 ")])),_:2,__:[7]},1032,["onClick","disabled"]),(0,u.bF)(f,{onClick:t=>V(e.row),link:"",type:"danger",size:"default",disabled:!(0,o.R1)(D)("formSysDept:fragmentSysDept:delete")},{default:(0,u.k6)(()=>t[8]||(t[8]=[(0,u.eW)(" 删除 ")])),_:2,__:[8]},1032,["onClick","disabled"])]),_:1})]),_:1},8,["data"])])}}});const W=F;var E=W},93889:function(e,t,s){s.d(t,{Z:function(){return p},x:function(){return d}});var a=s(3027),r=s(47378),i=s(20464),n=s(58501),l=s(92056),u=s(12235),o=s(24232);const p=(0,r.b_)({modelValue:{type:[Boolean,String,Number],default:!1},disabled:Boolean,loading:Boolean,size:{type:String,validator:a.x},width:{type:[String,Number],default:""},inlinePrompt:Boolean,inactiveActionIcon:{type:i.Ze},activeActionIcon:{type:i.Ze},activeIcon:{type:i.Ze},inactiveIcon:{type:i.Ze},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},beforeChange:{type:(0,r.jq)(Function)},id:String,tabindex:{type:[String,Number]},...(0,n.l)(["ariaLabel"])}),d={[l.l4]:e=>(0,u.Lm)(e)||(0,o.Kg)(e)||(0,u.Et)(e),[l.YU]:e=>(0,u.Lm)(e)||(0,o.Kg)(e)||(0,u.Et)(e),[l.qs]:e=>(0,u.Lm)(e)||(0,o.Kg)(e)||(0,u.Et)(e)}}}]);