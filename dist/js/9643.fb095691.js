"use strict";(self["webpackChunkorange"]=self["webpackChunkorange"]||[]).push([[9643],{4311:function(e,t,n){n.d(t,{Zq:function(){return w}});n(18111),n(22489);var o=n(56768),l=n(90144),a=n(24232),i=n(6127),s=n(91737),r=n(11154),c=n(77541),u=n(80673),d=n(99077),f=n(62346),v=n(36268),p=n(93513),g=n(53716),m=n(12235),R=n(28587);const k=(0,o.pM)({name:"ElImage",inheritAttrs:!1}),b=(0,o.pM)({...k,props:u.K,emits:u.S,setup(e,{expose:t,emit:n}){const u=e,{t:d}=(0,v.Ym)(),k=(0,p.DU)("image"),b=(0,o.OA)(),h=(0,o.EW)(()=>(0,r.A)(Object.entries(b).filter(([e])=>/^(data-|on[A-Z])/i.test(e)||["id","style"].includes(e)))),y=(0,g.O)({excludeListeners:!0,excludeKeys:(0,o.EW)(()=>Object.keys(h.value))}),w=(0,l.KR)(),C=(0,l.KR)(!1),E=(0,l.KR)(!0),L=(0,l.KR)(!1),x=(0,l.KR)(),I=(0,l.KR)(),_=i.oc&&"loading"in HTMLImageElement.prototype;let z;const F=(0,o.EW)(()=>[k.e("inner"),S.value&&k.e("preview"),E.value&&k.is("loading")]),O=(0,o.EW)(()=>{const{fit:e}=u;return i.oc&&e?{objectFit:e}:{}}),S=(0,o.EW)(()=>{const{previewSrcList:e}=u;return(0,a.cy)(e)&&e.length>0}),A=(0,o.EW)(()=>{const{previewSrcList:e,initialIndex:t}=u;let n=t;return t>e.length-1&&(n=0),n}),X=(0,o.EW)(()=>"eager"!==u.loading&&(!_&&"lazy"===u.loading||u.lazy)),T=()=>{i.oc&&(E.value=!0,C.value=!1,w.value=u.src)};function N(e){E.value=!1,C.value=!1,n("load",e)}function W(e){E.value=!1,C.value=!0,n("error",e)}function K(){(0,f.L7)(x.value,I.value)&&(T(),$())}const M=(0,i.k3)(K,200,!0);async function Y(){var e;if(!i.oc)return;await(0,o.dY)();const{scrollContainer:t}=u;(0,m.vq)(t)?I.value=t:(0,a.Kg)(t)&&""!==t?I.value=null!=(e=document.querySelector(t))?e:void 0:x.value&&(I.value=(0,R.Bo)(x.value)),I.value&&(z=(0,s.MLh)(I,"scroll",M),setTimeout(()=>K(),100))}function $(){i.oc&&I.value&&M&&(null==z||z(),I.value=void 0)}function B(){S.value&&(L.value=!0,n("show"))}function Q(){L.value=!1,n("close")}function G(e){n("switch",e)}return(0,o.wB)(()=>u.src,()=>{X.value?(E.value=!0,C.value=!1,$(),Y()):T()}),(0,o.sV)(()=>{X.value?Y():T()}),t({showPreview:B}),(e,t)=>((0,o.uX)(),(0,o.CE)("div",(0,o.v6)({ref_key:"container",ref:x},(0,l.R1)(h),{class:[(0,l.R1)(k).b(),e.$attrs.class]}),[C.value?(0,o.RG)(e.$slots,"error",{key:0},()=>[(0,o.Lk)("div",{class:(0,a.C4)((0,l.R1)(k).e("error"))},(0,a.v_)((0,l.R1)(d)("el.image.error")),3)]):((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[void 0!==w.value?((0,o.uX)(),(0,o.CE)("img",(0,o.v6)({key:0},(0,l.R1)(y),{src:w.value,loading:e.loading,style:(0,l.R1)(O),class:(0,l.R1)(F),crossorigin:e.crossorigin,onClick:B,onLoad:N,onError:W}),null,16,["src","loading","crossorigin"])):(0,o.Q3)("v-if",!0),E.value?((0,o.uX)(),(0,o.CE)("div",{key:1,class:(0,a.C4)((0,l.R1)(k).e("wrapper"))},[(0,o.RG)(e.$slots,"placeholder",{},()=>[(0,o.Lk)("div",{class:(0,a.C4)((0,l.R1)(k).e("placeholder"))},null,2)])],2)):(0,o.Q3)("v-if",!0)],64)),(0,l.R1)(S)?((0,o.uX)(),(0,o.CE)(o.FK,{key:2},[L.value?((0,o.uX)(),(0,o.Wv)((0,l.R1)(c.Tg),{key:0,"z-index":e.zIndex,"initial-index":(0,l.R1)(A),infinite:e.infinite,"zoom-rate":e.zoomRate,"min-scale":e.minScale,"max-scale":e.maxScale,"show-progress":e.showProgress,"url-list":e.previewSrcList,crossorigin:e.crossorigin,"hide-on-click-modal":e.hideOnClickModal,teleported:e.previewTeleported,"close-on-press-escape":e.closeOnPressEscape,onClose:Q,onSwitch:G},(0,o.eX)({toolbar:(0,o.k6)(t=>[(0,o.RG)(e.$slots,"toolbar",(0,a._B)((0,o.Ng)(t)))]),default:(0,o.k6)(()=>[e.$slots.viewer?((0,o.uX)(),(0,o.CE)("div",{key:0},[(0,o.RG)(e.$slots,"viewer")])):(0,o.Q3)("v-if",!0)]),_:2},[e.$slots.progress?{name:"progress",fn:(0,o.k6)(t=>[(0,o.RG)(e.$slots,"progress",(0,a._B)((0,o.Ng)(t)))])}:void 0]),1032,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","show-progress","url-list","crossorigin","hide-on-click-modal","teleported","close-on-press-escape"])):(0,o.Q3)("v-if",!0)],64)):(0,o.Q3)("v-if",!0)],16))}});var h=(0,d.A)(b,[["__file","image.vue"]]),y=n(25376);const w=(0,y.GU)(h)},25393:function(e,t,n){n(97042)},42261:function(e,t,n){n.d(t,{M:function(){return s},Q:function(){return i}});var o=n(47378),l=n(76769),a=n(12235);const i=(0,o.b_)({urlList:{type:(0,o.jq)(Array),default:()=>(0,l.f)([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},showProgress:Boolean,crossorigin:{type:(0,o.jq)(String)}}),s={close:()=>!0,switch:e=>(0,a.Et)(e),rotate:e=>(0,a.Et)(e)}},62346:function(e,t,n){n.d(t,{L7:function(){return l},aS:function(){return i},h$:function(){return s}});var o=n(6127);const l=(e,t)=>{if(!o.oc||!e||!t)return!1;const n=e.getBoundingClientRect();let l;return l=t instanceof Element?t.getBoundingClientRect():{top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},n.top<l.bottom&&n.bottom>l.top&&n.right>l.left&&n.left<l.right},a=e=>{let t=0,n=e;while(n)t+=n.offsetTop,n=n.offsetParent;return t},i=(e,t)=>Math.abs(a(e)-a(t)),s=e=>{let t,n;return"touchend"===e.type?(n=e.changedTouches[0].clientY,t=e.changedTouches[0].clientX):e.type.startsWith("touch")?(n=e.touches[0].clientY,t=e.touches[0].clientX):(n=e.clientY,t=e.clientX),{clientX:t,clientY:n}}},65943:function(e,t,n){var o=n(6301),l=n(60168),a="Expected a function";function i(e,t,n){var i=!0,s=!0;if("function"!=typeof e)throw new TypeError(a);return(0,l.A)(n)&&(i="leading"in n?!!n.leading:i,s="trailing"in n?!!n.trailing:s),(0,o.A)(e,t,{leading:i,maxWait:t,trailing:s})}t.A=i},77541:function(e,t,n){n.d(t,{Tg:function(){return E}});var o=n(56768),l=n(90144),a=n(45130),i=n(24232),s=n(91737),r=n(65943),c=n(66401),u=n(98769),d=n(91542),f=n(57477),v=n(42261),p=n(99077),g=n(36268),m=n(93513),R=n(62401),k=n(10515),b=n(64340);const h=(0,o.pM)({name:"ElImageViewer"}),y=(0,o.pM)({...h,props:v.Q,emits:v.M,setup(e,{expose:t,emit:n}){var v;const p=e,h={CONTAIN:{name:"contain",icon:(0,l.IG)(f.FullScreen)},ORIGINAL:{name:"original",icon:(0,l.IG)(f.ScaleToOriginal)}};let y,w="";const{t:C}=(0,g.Ym)(),E=(0,m.DU)("image-viewer"),{nextZIndex:L}=(0,R.YK)(),x=(0,l.KR)(),I=(0,l.KR)([]),_=(0,l.uY)(),z=(0,l.KR)(!0),F=(0,l.KR)(p.initialIndex),O=(0,l.IJ)(h.CONTAIN),S=(0,l.KR)({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),A=(0,l.KR)(null!=(v=p.zIndex)?v:L()),X=(0,o.EW)(()=>{const{urlList:e}=p;return e.length<=1}),T=(0,o.EW)(()=>0===F.value),N=(0,o.EW)(()=>F.value===p.urlList.length-1),W=(0,o.EW)(()=>p.urlList[F.value]),K=(0,o.EW)(()=>[E.e("btn"),E.e("prev"),E.is("disabled",!p.infinite&&T.value)]),M=(0,o.EW)(()=>[E.e("btn"),E.e("next"),E.is("disabled",!p.infinite&&N.value)]),Y=(0,o.EW)(()=>{const{scale:e,deg:t,offsetX:n,offsetY:o,enableTransition:l}=S.value;let a=n/e,i=o/e;const s=t*Math.PI/180,r=Math.cos(s),c=Math.sin(s);a=a*r+i*c,i=i*r-n/e*c;const u={transform:`scale(${e}) rotate(${t}deg) translate(${a}px, ${i}px)`,transition:l?"transform .3s":""};return O.value.name===h.CONTAIN.name&&(u.maxWidth=u.maxHeight="100%"),u}),$=(0,o.EW)(()=>`${F.value+1} / ${p.urlList.length}`);function B(){G(),null==y||y(),document.body.style.overflow=w,n("close")}function Q(){const e=(0,r.A)(e=>{switch(e.code){case k.R.esc:p.closeOnPressEscape&&B();break;case k.R.space:Z();break;case k.R.left:V();break;case k.R.up:J("zoomIn");break;case k.R.right:H();break;case k.R.down:J("zoomOut");break}}),t=(0,r.A)(e=>{const t=e.deltaY||e.deltaX;J(t<0?"zoomIn":"zoomOut",{zoomRate:p.zoomRate,enableTransition:!1})});_.run(()=>{(0,s.MLh)(document,"keydown",e),(0,s.MLh)(document,"wheel",t)})}function G(){_.stop()}function P(){z.value=!1}function j(e){z.value=!1,e.target.alt=C("el.image.error")}function q(e){if(z.value||0!==e.button||!x.value)return;S.value.enableTransition=!1;const{offsetX:t,offsetY:n}=S.value,o=e.pageX,l=e.pageY,a=(0,r.A)(e=>{S.value={...S.value,offsetX:t+e.pageX-o,offsetY:n+e.pageY-l}}),i=(0,s.MLh)(document,"mousemove",a);(0,s.MLh)(document,"mouseup",()=>{i()}),e.preventDefault()}function D(){S.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function Z(){if(z.value)return;const e=(0,b.YD)(h),t=Object.values(h),n=O.value.name,o=t.findIndex(e=>e.name===n),l=(o+1)%e.length;O.value=h[e[l]],D()}function U(e){const t=p.urlList.length;F.value=(e+t)%t}function V(){T.value&&!p.infinite||U(F.value-1)}function H(){N.value&&!p.infinite||U(F.value+1)}function J(e,t={}){if(z.value)return;const{minScale:o,maxScale:l}=p,{zoomRate:a,rotateDeg:i,enableTransition:s}={zoomRate:p.zoomRate,rotateDeg:90,enableTransition:!0,...t};switch(e){case"zoomOut":S.value.scale>o&&(S.value.scale=Number.parseFloat((S.value.scale/a).toFixed(3)));break;case"zoomIn":S.value.scale<l&&(S.value.scale=Number.parseFloat((S.value.scale*a).toFixed(3)));break;case"clockwise":S.value.deg+=i,n("rotate",S.value.deg);break;case"anticlockwise":S.value.deg-=i,n("rotate",S.value.deg);break}S.value.enableTransition=s}function ee(e){var t;"pointer"===(null==(t=e.detail)?void 0:t.focusReason)&&e.preventDefault()}function te(){p.closeOnPressEscape&&B()}function ne(e){if(e.ctrlKey)return e.deltaY<0||e.deltaY>0?(e.preventDefault(),!1):void 0}return(0,o.wB)(W,()=>{(0,o.dY)(()=>{const e=I.value[0];(null==e?void 0:e.complete)||(z.value=!0)})}),(0,o.wB)(F,e=>{D(),n("switch",e)}),(0,o.sV)(()=>{Q(),y=(0,s.MLh)("wheel",ne,{passive:!1}),w=document.body.style.overflow,document.body.style.overflow="hidden"}),t({setActiveItem:U}),(e,t)=>((0,o.uX)(),(0,o.Wv)((0,l.R1)(u.Nr),{to:"body",disabled:!e.teleported},{default:(0,o.k6)(()=>[(0,o.bF)(a.eB,{name:"viewer-fade",appear:""},{default:(0,o.k6)(()=>[(0,o.Lk)("div",{ref_key:"wrapper",ref:x,tabindex:-1,class:(0,i.C4)((0,l.R1)(E).e("wrapper")),style:(0,i.Tr)({zIndex:A.value})},[(0,o.bF)((0,l.R1)(c.A),{loop:"",trapped:"","focus-trap-el":x.value,"focus-start-el":"container",onFocusoutPrevented:ee,onReleaseRequested:te},{default:(0,o.k6)(()=>[(0,o.Lk)("div",{class:(0,i.C4)((0,l.R1)(E).e("mask")),onClick:(0,a.D$)(t=>e.hideOnClickModal&&B(),["self"])},null,10,["onClick"]),(0,o.Q3)(" CLOSE "),(0,o.Lk)("span",{class:(0,i.C4)([(0,l.R1)(E).e("btn"),(0,l.R1)(E).e("close")]),onClick:B},[(0,o.bF)((0,l.R1)(d.tk),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,l.R1)(f.Close))]),_:1})],2),(0,o.Q3)(" ARROW "),(0,l.R1)(X)?(0,o.Q3)("v-if",!0):((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.Lk)("span",{class:(0,i.C4)((0,l.R1)(K)),onClick:V},[(0,o.bF)((0,l.R1)(d.tk),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,l.R1)(f.ArrowLeft))]),_:1})],2),(0,o.Lk)("span",{class:(0,i.C4)((0,l.R1)(M)),onClick:H},[(0,o.bF)((0,l.R1)(d.tk),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,l.R1)(f.ArrowRight))]),_:1})],2)],64)),e.$slots.progress||e.showProgress?((0,o.uX)(),(0,o.CE)("div",{key:1,class:(0,i.C4)([(0,l.R1)(E).e("btn"),(0,l.R1)(E).e("progress")])},[(0,o.RG)(e.$slots,"progress",{activeIndex:F.value,total:e.urlList.length},()=>[(0,o.eW)((0,i.v_)((0,l.R1)($)),1)])],2)):(0,o.Q3)("v-if",!0),(0,o.Q3)(" ACTIONS "),(0,o.Lk)("div",{class:(0,i.C4)([(0,l.R1)(E).e("btn"),(0,l.R1)(E).e("actions")])},[(0,o.Lk)("div",{class:(0,i.C4)((0,l.R1)(E).e("actions__inner"))},[(0,o.RG)(e.$slots,"toolbar",{actions:J,prev:V,next:H,reset:Z,activeIndex:F.value,setActiveItem:U},()=>[(0,o.bF)((0,l.R1)(d.tk),{onClick:e=>J("zoomOut")},{default:(0,o.k6)(()=>[(0,o.bF)((0,l.R1)(f.ZoomOut))]),_:1},8,["onClick"]),(0,o.bF)((0,l.R1)(d.tk),{onClick:e=>J("zoomIn")},{default:(0,o.k6)(()=>[(0,o.bF)((0,l.R1)(f.ZoomIn))]),_:1},8,["onClick"]),(0,o.Lk)("i",{class:(0,i.C4)((0,l.R1)(E).e("actions__divider"))},null,2),(0,o.bF)((0,l.R1)(d.tk),{onClick:Z},{default:(0,o.k6)(()=>[((0,o.uX)(),(0,o.Wv)((0,o.$y)((0,l.R1)(O).icon)))]),_:1}),(0,o.Lk)("i",{class:(0,i.C4)((0,l.R1)(E).e("actions__divider"))},null,2),(0,o.bF)((0,l.R1)(d.tk),{onClick:e=>J("anticlockwise")},{default:(0,o.k6)(()=>[(0,o.bF)((0,l.R1)(f.RefreshLeft))]),_:1},8,["onClick"]),(0,o.bF)((0,l.R1)(d.tk),{onClick:e=>J("clockwise")},{default:(0,o.k6)(()=>[(0,o.bF)((0,l.R1)(f.RefreshRight))]),_:1},8,["onClick"])])],2)],2),(0,o.Q3)(" CANVAS "),(0,o.Lk)("div",{class:(0,i.C4)((0,l.R1)(E).e("canvas"))},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.urlList,(t,n)=>((0,o.uX)(),(0,o.CE)(o.FK,{key:n},[n===F.value?((0,o.uX)(),(0,o.CE)("img",{key:0,ref_for:!0,ref:e=>I.value[n]=e,src:t,style:(0,i.Tr)((0,l.R1)(Y)),class:(0,i.C4)((0,l.R1)(E).e("img")),crossorigin:e.crossorigin,onLoad:P,onError:j,onMousedown:q},null,46,["src","crossorigin"])):(0,o.Q3)("v-if",!0)],64))),128))],2),(0,o.RG)(e.$slots,"default")]),_:3},8,["focus-trap-el"])],6)]),_:3})]),_:3},8,["disabled"]))}});var w=(0,p.A)(y,[["__file","image-viewer.vue"]]),C=n(25376);const E=(0,C.GU)(w)},80673:function(e,t,n){n.d(t,{K:function(){return i},S:function(){return s}});var o=n(47378),l=n(76769),a=n(12235);const i=(0,o.b_)({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:(0,o.jq)([String,Object])},previewSrcList:{type:(0,o.jq)(Array),default:()=>(0,l.f)([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},showProgress:Boolean,crossorigin:{type:(0,o.jq)(String)}}),s={load:e=>e instanceof Event,error:e=>e instanceof Event,switch:e=>(0,a.Et)(e),close:()=>!0,show:()=>!0}}}]);