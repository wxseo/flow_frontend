"use strict";(self["webpackChunkorange"]=self["webpackChunkorange"]||[]).push([[1408,7491],{30058:function(e,t,a){a.d(t,{A:function(){return m}});var l=a(65451),n=(a(97042),a(63390),a(91542)),r=(a(37985),a(25136)),i=(a(69957),a(76408)),o=(a(87535),a(18111),a(22489),a(56768)),s=a(90144),u=a(24232),p=a(57477);const d={style:{"margin-right":"4px","font-size":"14px"}},f={key:2,style:{"flex-grow":"1","min-width":"10px"}};var g=(0,o.pM)({__name:"index",props:{hasSearch:{type:Boolean,default:!0},hasReset:{type:Boolean,default:!0}},emits:["reset","search"],setup(e,{emit:t}){const a=(0,o.Ht)(),g=t,c=(0,s.KR)(!1),h=()=>{g("search")},m=()=>{g("reset")},y=(0,o.EW)(()=>{let e=a.default?a.default():[];return e.filter(e=>e.type&&e.type.name&&null!==e.type.name)}),b=(0,o.EW)(()=>{if(c.value){let e=y.value.length%4;return 0===e?24:6*(4-e)}return y.value.length<=3?6*(4-y.value.length):6});return(0,o.sV)(()=>{null!=a.operation&&(c.value=!0)}),(e,t)=>{const g=i.uD,k=r.S2,F=n.tk,R=l.S2;return(0,o.uX)(),(0,o.Wv)(R,{class:"flex-box",type:"flex"},{default:(0,o.k6)(()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)((0,s.R1)(y),(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,{key:t},[t<((0,s.R1)(c)?(0,s.R1)(y).length:3)?((0,o.uX)(),(0,o.Wv)(g,{key:0,span:6},{default:(0,o.k6)(()=>[((0,o.uX)(),(0,o.Wv)((0,o.$y)(e),{style:{width:"100%"}}))]),_:2},1024)):(0,o.Q3)("",!0)],64))),128)),e.hasSearch?((0,o.uX)(),(0,o.Wv)(g,{key:0,span:(0,s.R1)(b),class:"search-box"},{default:(0,o.k6)(()=>[(0,o.bF)(R,{type:"flex",align:"middle"},{default:(0,o.k6)(()=>[(0,o.bF)(k,{class:"search-btn",type:"default",plain:"",onClick:h,icon:(0,s.R1)(p.Search)},{default:(0,o.k6)(()=>t[1]||(t[1]=[(0,o.eW)(" 查询 ")])),_:1,__:[1]},8,["icon"]),e.hasReset?((0,o.uX)(),(0,o.Wv)(k,{key:0,type:"default",plain:"",onClick:m,style:{width:"72px"}},{default:(0,o.k6)(()=>t[2]||(t[2]=[(0,o.eW)("重置")])),_:1,__:[2]})):(0,o.Q3)("",!0),(0,s.R1)(y).length>3&&null==(0,s.R1)(a).operation?((0,o.uX)(),(0,o.Wv)(R,{key:1,type:"flex",align:"middle",class:"expand-btn",onClick:t[0]||(t[0]=e=>c.value=!(0,s.R1)(c))},{default:(0,o.k6)(()=>[(0,o.Lk)("span",d,(0,u.v_)((0,s.R1)(c)?"收起":"展开"),1),(0,o.bF)(F,null,{default:(0,o.k6)(()=>[(0,s.R1)(c)?((0,o.uX)(),(0,o.Wv)((0,s.R1)(p.ArrowUp),{key:0})):((0,o.uX)(),(0,o.Wv)((0,s.R1)(p.ArrowDown),{key:1}))]),_:1})]),_:1})):(0,o.Q3)("",!0),(0,s.R1)(a).operation?((0,o.uX)(),(0,o.CE)("div",f)):(0,o.Q3)("",!0),(0,o.RG)(e.$slots,"operation")]),_:3})]),_:3},8,["span"])):(0,o.Q3)("",!0)]),_:3})}}}),c=a(71241);const h=(0,c.A)(g,[["__scopeId","data-v-3d53564d"]]);var m=h},31408:function(e,t,a){a.r(t),a.d(t,{default:function(){return I}});var l=a(70944),n=a(65451),r=(a(97042),a(63390),a(69080)),i=(a(25374),a(3740)),o=(a(42899),a(12687)),s=(a(31112),a(25136)),u=(a(69957),a(21929)),p=(a(98421),a(30058)),d=a(14022),f=(a(72343),a(32465),a(85415)),g=(a(22243),a(7409),a(56768)),c=a(90144),h=a(45130),m=a(24232),y=a(57477),b=a(164),k=a(26695),F=a(8588),R=a(36525),v=a(36947),_=a(71066),C=a(82572),S=a(74097);const w={style:{position:"relative"}},z={name:"formOnlinePage"};var x=(0,g.pM)({...z,setup(e){const t=(0,C.l5)();(0,_.i)();const{clientHeight:a,useTable:z,Dialog:x}=(0,F.x)(),T=(0,c.KR)(),I=(0,c.Kh)({formFilter:{pageType:void 0,pageName:void 0},formFilterCopy:{pageType:void 0,pageName:void 0},isInit:!1}),P=e=>(null==e&&(e={}),e={...e,onlinePageDtoFilter:{pageType:I.formFilterCopy.pageType,pageName:I.formFilterCopy.pageName}},new Promise((t,a)=>{v.Pr.list(e).then(e=>{t({dataList:e.data.dataList,totalCount:e.data.totalCount})}).catch(e=>{a(e)})})),W=()=>(I.formFilterCopy.pageType=I.formFilter.pageType,I.formFilterCopy.pageName=I.formFilter.pageName,!0),N={loadTableData:P,verifyTableParameter:W,paged:!0},V=(0,c.Kh)(z(N)),X=()=>{T.value.resetFields(),A(!0)},E=e=>{switch(e){case R.SysOnlinePageStatus.BASIC:return"warning";case R.SysOnlinePageStatus.DATASOURCE:return"primary";case R.SysOnlinePageStatus.DESIGNING:return"success"}},O=e=>{let t={pageId:e.pageId,published:e.published};v.Pr.updatePublished(t).catch(t=>{e.published=!e.published})},A=(e=!1)=>{e?V.refreshTable(!0,1):V.refreshTable(),I.isInit,I.isInit=!0},D=()=>{A()},K=()=>{x.show("新建页面",S["default"],{area:["100vw","100vh"],skin:"fullscreen-dialog"},{clientHeight:a},{fullscreen:!0,pathName:"/thirdParty/thirdEditOnlinePage"}).then(e=>{V.refreshTable()}).catch(e=>{console.log(e),V.refreshTable()})},U=e=>{x.show("编辑页面",S["default"],{area:["100vw","100vh"],skin:"fullscreen-dialog"},{pageId:e.pageId,clientHeight:a},{fullscreen:!0,pathName:"/thirdParty/thirdEditOnlinePage"}).then(()=>{V.refreshTable()}).catch(e=>{console.warn(e),V.refreshTable()})},B=e=>{b.s.confirm(`是否删除页面【${e.pageName}】？`,"",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(t=>{let a={pageId:e.pageId};return v.Pr.delete(a)}).then(e=>{k.nk.success("删除成功！"),V.refreshTable()}).catch(e=>{console.warn(e)})};return(0,g.sV)(()=>{D()}),(e,a)=>{const b=f.P9,k=f.AV,F=u.xE,v=d.WK,_=p.A,C=u.US,S=s.S2,z=(0,g.g2)("vxe-column"),x=o.u,P=i.qi,W=r.aQ,N=n.S2,D=l.A;return(0,g.uX)(),(0,g.CE)("div",w,[(0,g.bF)(C,{ref_key:"form",ref:T,model:(0,c.R1)(I),"label-width":"75px",size:(0,c.R1)(t).defaultFormItemSize,"label-position":"right",onSubmit:a[3]||(a[3]=(0,h.D$)(()=>{},["prevent"]))},{default:(0,g.k6)(()=>[(0,g.bF)(_,{"item-width":350,onSearch:a[2]||(a[2]=e=>A(!0)),onReset:X},{default:(0,g.k6)(()=>[(0,g.bF)(F,{label:"表单类型",prop:"formFilter.pageType"},{default:(0,g.k6)(()=>[(0,g.bF)(k,{class:"filter-item",modelValue:(0,c.R1)(I).formFilter.pageType,"onUpdate:modelValue":a[0]||(a[0]=e=>(0,c.R1)(I).formFilter.pageType=e),placeholder:"表单类型",clearable:!0},{default:(0,g.k6)(()=>[((0,g.uX)(!0),(0,g.CE)(g.FK,null,(0,g.pI)((0,c.R1)(R.SysOnlinePageType).getList(),e=>((0,g.uX)(),(0,g.Wv)(b,{key:e.id,value:e.id,label:e.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),(0,g.bF)(F,{label:"表单名称",prop:"formFilter.pageName"},{default:(0,g.k6)(()=>[(0,g.bF)(v,{class:"filter-item",modelValue:(0,c.R1)(I).formFilter.pageName,"onUpdate:modelValue":a[1]||(a[1]=e=>(0,c.R1)(I).formFilter.pageName=e),clearable:!0,placeholder:"表单名称"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model","size"]),(0,g.bF)(D,{class:"page-table",ref:"class",hasExtend:!0,data:(0,c.R1)(V).dataList,size:(0,c.R1)(t).defaultFormItemSize,onSortChange:(0,c.R1)(V).onSortChange,onRefresh:a[5]||(a[5]=e=>A(!0)),"seq-config":{startIndex:((0,c.R1)(V).currentPage-1)*(0,c.R1)(V).pageSize}},{operator:(0,g.k6)(()=>[(0,g.bF)(S,{type:"primary",icon:(0,c.R1)(y.Plus),size:(0,c.R1)(t).defaultFormItemSize,onClick:a[4]||(a[4]=e=>K())},{default:(0,g.k6)(()=>a[6]||(a[6]=[(0,g.eW)("新建")])),_:1,__:[6]},8,["icon","size"])]),pagination:(0,g.k6)(()=>[(0,g.bF)(N,{type:"flex",justify:"end",style:{"margin-top":"16px"}},{default:(0,g.k6)(()=>[(0,g.bF)(W,{total:(0,c.R1)(V).totalCount,"current-page":(0,c.R1)(V).currentPage,"page-size":(0,c.R1)(V).pageSize,"page-sizes":[10,20,50,100],layout:"total, prev, pager, next, sizes",onCurrentChange:(0,c.R1)(V).onCurrentPageChange,onSizeChange:(0,c.R1)(V).onPageSizeChange},null,8,["total","current-page","page-size","onCurrentChange","onSizeChange"])]),_:1})]),default:(0,g.k6)(()=>[(0,g.bF)(z,{title:"序号",type:"seq",width:"55px",index:(0,c.R1)(V).getTableIndex},null,8,["index"]),(0,g.bF)(z,{title:"页面名称",field:"pageName"}),(0,g.bF)(z,{title:"页面代码",field:"pageCode"}),(0,g.bF)(z,{title:"页面类型"},{default:(0,g.k6)(e=>[(0,g.bF)(x,{size:(0,c.R1)(t).defaultFormItemSize,type:e.row.pageType===(0,c.R1)(R.SysOnlinePageType).BIZ?"success":"primary"},{default:(0,g.k6)(()=>[(0,g.eW)((0,m.v_)((0,c.R1)(R.SysOnlinePageType).getValue(e.row.pageType)),1)]),_:2},1032,["size","type"])]),_:1}),(0,g.bF)(z,{title:"页面状态",field:"statusDictMap.name"},{default:(0,g.k6)(e=>[(0,g.bF)(x,{size:(0,c.R1)(t).defaultFormItemSize,type:E(e.row.status)},{default:(0,g.k6)(()=>[(0,g.eW)((0,m.v_)((0,c.R1)(R.SysOnlinePageStatus).getValue(e.row.status)),1)]),_:2},1032,["size","type"])]),_:1}),(0,g.bF)(z,{title:"发布状态"},{default:(0,g.k6)(e=>[(0,g.bF)(P,{modelValue:e.row.published,"onUpdate:modelValue":t=>e.row.published=t,onChange:t=>O(e.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),(0,g.bF)(z,{title:"创建时间",field:"createTime"}),(0,g.bF)(z,{title:"操作",width:"100px",fixed:"right"},{default:(0,g.k6)(e=>[(0,g.bF)(S,{link:"",type:"primary",size:(0,c.R1)(t).defaultFormItemSize,onClick:t=>U(e.row)},{default:(0,g.k6)(()=>a[7]||(a[7]=[(0,g.eW)("编辑")])),_:2,__:[7]},1032,["size","onClick"]),(0,g.bF)(S,{type:"danger",link:"",size:(0,c.R1)(t).defaultFormItemSize,onClick:t=>B(e.row)},{default:(0,g.k6)(()=>a[8]||(a[8]=[(0,g.eW)("删除")])),_:2,__:[8]},1032,["size","onClick"])]),_:1})]),_:1},8,["data","size","onSortChange","seq-config"])])}}});const T=x;var I=T}}]);