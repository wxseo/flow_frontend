"use strict";(self["webpackChunkorange"]=self["webpackChunkorange"]||[]).push([[1066,7353],{34436:function(e,t,r){r.d(t,{wc:function(){return o}});var l=r(24232);const a=100,n=600,o={beforeMount(e,t){const r=t.value,{interval:o=a,delay:u=n}=(0,l.Tn)(r)?{}:r;let i,s;const d=()=>(0,l.Tn)(r)?r():r.handler(),c=()=>{s&&(clearTimeout(s),s=void 0),i&&(clearInterval(i),i=void 0)};e.addEventListener("mousedown",e=>{0===e.button&&(c(),d(),document.addEventListener("mouseup",()=>c(),{once:!0}),s=setTimeout(()=>{i=setInterval(()=>{d()},o)},u))})}}},53629:function(e,t,r){r.d(t,{W:function(){return s},c:function(){return d}});var l=r(16032),a=r(47378),n=r(53845),o=r(12235),u=r(58501),i=r(92056);const s=(0,a.b_)({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.MAX_SAFE_INTEGER},min:{type:Number,default:Number.MIN_SAFE_INTEGER},modelValue:{type:[Number,null]},readonly:Boolean,disabled:Boolean,size:n.mU,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:e=>null===e||(0,o.Et)(e)||["min","max"].includes(e),default:null},name:String,placeholder:String,precision:{type:Number,validator:e=>e>=0&&e===Number.parseInt(`${e}`,10)},validateEvent:{type:Boolean,default:!0},...(0,u.l)(["ariaLabel"]),inputmode:{type:(0,a.jq)(String),default:void 0}}),d={[i.YU]:(e,t)=>t!==e,blur:e=>e instanceof FocusEvent,focus:e=>e instanceof FocusEvent,[i.qs]:e=>(0,o.Et)(e)||(0,l.A)(e),[i.l4]:e=>(0,o.Et)(e)||(0,l.A)(e)}},57353:function(e,t,r){r.r(t),r.d(t,{default:function(){return w}});var l=r(25136),a=(r(97042),r(69957),r(21929)),n=(r(98421),r(65451)),o=(r(63390),r(77649)),u=(r(87603),r(76408)),i=(r(87535),r(32465),r(14022)),s=(r(72343),r(56768)),d=r(90144),c=r(45130),m=r(26695),p=r(81201),v=r(71066),g=r(82572);const b={class:"form-single-fragment third-party-dlg",style:{position:"relative"}};var f=(0,s.pM)({__name:"formEditFlowCategory",props:{categoryId:{},dialog:{},thirdParamsString:{},dialogKey:{}},setup(e){const t=(0,g.l5)(),r=e,{thirdParams:f,onCloseThirdDialog:y}=(0,v.P)(r),w=(0,s.EW)(()=>t.defaultFormItemSize||f.value.defaultFormItemSize?.value),h=(0,d.KR)(),R=(0,d.Kh)({FlowCategory:{categoryId:void 0,name:void 0,code:void 0,showOrder:void 0,isDatasourceInit:!1}}),F=(0,d.Kh)({formFilter:{},formFilterCopy:{},menuBlock:{isInit:!1},isInit:!1}),N={"FlowCategory.code":[{required:!0,message:"请输入分类编码",trigger:"blur"},{type:"string",pattern:/^[A-Za-z0-9]+$/,message:"分类编码只能输入英文字母和数字",trigger:"blur"}],"FlowCategory.showOrder":[{required:!0,message:"请输入显示顺序",trigger:"blur"},{type:"integer",message:"显示顺序只允许输入整数",trigger:"blur",transform:e=>Number(e)},{type:"number",min:0,message:"显示顺序必须大于0",trigger:"blur",transform:e=>Number(e)}],"FlowCategory.name":[{required:!0,message:"请输入流程分类名称",trigger:"blur"}]},E=(0,s.EW)(()=>({categoryId:r.categoryId||f.value.categoryId})),I=(0,s.EW)(()=>null!=E.value.categoryId&&""!==E.value.categoryId),C=()=>{r.dialog?r.dialog.cancel():y(!1)},k=()=>{h.value.validate(e=>{if(!e)return;if(null==R.FlowCategory.name||null==R.FlowCategory.code||null==R.FlowCategory.showOrder)return void m.nk.error("请求失败，发现必填参数为空！");let t={flowCategoryDto:{categoryId:I.value?E.value.categoryId:void 0,name:R.FlowCategory.name,code:R.FlowCategory.code,showOrder:R.FlowCategory.showOrder}},l=I.value?p.A.update(t):p.A.add(t);l.then(e=>{m.nk.success("保存成功"),r.dialog?r.dialog.submit(e):y(!0)}).catch(e=>{console.warn(e)})})},x=()=>{h.value.resetFields()},V=()=>new Promise((e,t)=>{if(!R.FlowCategory.isDatasourceInit&&I.value){if(null==E.value.categoryId)return x(),void t();let r={categoryId:E.value.categoryId};p.A.view(r).then(t=>{R.FlowCategory={...t.data,isDatasourceInit:!0},e(t)}).catch(e=>{t(e)})}else e(null)}),S=()=>{V().then(()=>{F.isInit||console.log(""),F.isInit=!0}).catch(e=>{console.warn(e)})},_=()=>{S()};return(0,s.sV)(()=>{_()}),(e,t)=>{const r=i.WK,m=a.xE,p=u.uD,v=o.lq,g=n.S2,f=a.US,y=l.S2;return(0,s.uX)(),(0,s.CE)("div",b,[(0,s.bF)(f,{ref_key:"form",ref:h,model:(0,d.R1)(R),class:"full-width-input form-box",rules:N,style:{width:"100%"},"label-width":"80px",size:(0,d.R1)(w),"label-position":"right",onSubmit:t[3]||(t[3]=(0,c.D$)(()=>{},["prevent"]))},{default:(0,s.k6)(()=>[(0,s.bF)(g,{gutter:20},{default:(0,s.k6)(()=>[(0,s.bF)(p,{span:24},{default:(0,s.k6)(()=>[(0,s.bF)(m,{label:"分类名称",prop:"FlowCategory.name"},{default:(0,s.k6)(()=>[(0,s.bF)(r,{class:"input-item",modelValue:(0,d.R1)(R).FlowCategory.name,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,d.R1)(R).FlowCategory.name=e),clearable:!0,placeholder:"流程分类名称"},null,8,["modelValue"])]),_:1})]),_:1}),(0,s.bF)(p,{span:24},{default:(0,s.k6)(()=>[(0,s.bF)(m,{label:"分类编码",prop:"FlowCategory.code"},{default:(0,s.k6)(()=>[(0,s.bF)(r,{class:"input-item",modelValue:(0,d.R1)(R).FlowCategory.code,"onUpdate:modelValue":t[1]||(t[1]=e=>(0,d.R1)(R).FlowCategory.code=e),disabled:(0,d.R1)(I),clearable:!0,placeholder:"分类编码"},null,8,["modelValue","disabled"])]),_:1})]),_:1}),(0,s.bF)(p,{span:24},{default:(0,s.k6)(()=>[(0,s.bF)(m,{label:"显示顺序",prop:"FlowCategory.showOrder"},{default:(0,s.k6)(()=>[(0,s.bF)(v,{class:"input-item",modelValue:(0,d.R1)(R).FlowCategory.showOrder,"onUpdate:modelValue":t[2]||(t[2]=e=>(0,d.R1)(R).FlowCategory.showOrder=e),clearable:!0,"controls-position":"right",placeholder:"显示顺序"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","size"]),(0,s.bF)(g,{class:"no-scroll flex-box menu-box",type:"flex",justify:"end"},{default:(0,s.k6)(()=>[(0,s.bF)(y,{size:(0,d.R1)(w),plain:!0,onClick:C},{default:(0,s.k6)(()=>t[5]||(t[5]=[(0,s.eW)(" 取消 ")])),_:1,__:[5]},8,["size"]),(0,s.bF)(y,{type:"primary",size:(0,d.R1)(w),onClick:t[4]||(t[4]=e=>k())},{default:(0,s.k6)(()=>t[6]||(t[6]=[(0,s.eW)(" 保存 ")])),_:1,__:[6]},8,["size"])]),_:1})])}}});const y=f;var w=y},71066:function(e,t,r){r.d(t,{P:function(){return u},i:function(){return i}});var l=r(81387),a=r(27007),n=r(56768),o=r(90144);const u=e=>{console.log("接收到的第三方参数",e);const t=(0,o.KR)(0),r=(0,n.EW)(()=>{let t={};try{e.thirdParamsString&&(t=JSON.parse(e.thirdParamsString))}catch(r){console.log(r),t={}}return t});console.log("thirdParams",r);const l=(l,a,n)=>{console.log("onCloseThirdDialog",a,n),window.parent&&window.parent.postMessage({type:"closeDialog",data:{index:t.value,dialogKey:e.dialogKey,path:r.value.path,rowData:a?JSON.parse(JSON.stringify(a)):void 0,data:n?JSON.parse(JSON.stringify(n)):void 0,isSuccess:l}},"*")},u=(e,r)=>{switch(e){case"setToken":r.token&&(0,a.WG)(r.token);break;case"dialogIndex":t.value=r;break;case"refreshData":break;case"message":break}},i=e=>{u(e.data.type,e.data.data)};return(0,n.sV)(()=>{console.log("onMounted message"),window.addEventListener("message",i,!1)}),(0,n.hi)(()=>{console.log("onUnmounted message"),window.removeEventListener("message",i)}),{thirdParams:r,onCloseThirdDialog:l}},i=()=>{let e;const t=(0,l.lq)(),r=()=>{window.parent&&window.parent.postMessage({type:"refreshToken"},"*")};-1!==t.path.indexOf("/thirdParty/")&&((0,n.sV)(()=>{(0,a.R7)()&&(e=setInterval(()=>{console.log("refreshToken thirdParty"),r()},18e4))}),(0,n.hi)(()=>{e&&clearInterval(e)}))}},77649:function(e,t,r){r.d(t,{lq:function(){return I}});var l=r(56768),a=r(90144),n=r(24232),o=r(45130),u=r(16032),i=r(14022),s=r(91542),d=r(57477),c=r(53629),m=r(99077),p=r(34436),v=r(36268),g=r(93513),b=r(44216),f=r(12235),y=r(86894),w=r(37207),h=r(92056);const R=(0,l.pM)({name:"ElInputNumber"}),F=(0,l.pM)({...R,props:c.W,emits:c.c,setup(e,{expose:t,emit:r}){const c=e,{t:m}=(0,v.Ym)(),R=(0,g.DU)("input-number"),F=(0,a.KR)(),N=(0,a.Kh)({currentValue:c.modelValue,userInput:null}),{formItem:E}=(0,b.j)(),I=(0,l.EW)(()=>(0,f.Et)(c.modelValue)&&c.modelValue<=c.min),C=(0,l.EW)(()=>(0,f.Et)(c.modelValue)&&c.modelValue>=c.max),k=(0,l.EW)(()=>{const e=D(c.step);return(0,f.b0)(c.precision)?Math.max(D(c.modelValue),e):(e>c.precision&&(0,y.U)("InputNumber","precision should not be less than the decimal places of step"),c.precision)}),x=(0,l.EW)(()=>c.controls&&"right"===c.controlsPosition),V=(0,w.NV)(),S=(0,w.CB)(),_=(0,l.EW)(()=>{if(null!==N.userInput)return N.userInput;let e=N.currentValue;if((0,u.A)(e))return"";if((0,f.Et)(e)){if(Number.isNaN(e))return"";(0,f.b0)(c.precision)||(e=e.toFixed(c.precision))}return e}),A=(e,t)=>{if((0,f.b0)(t)&&(t=k.value),0===t)return Math.round(e);let r=String(e);const l=r.indexOf(".");if(-1===l)return e;const a=r.replace(".","").split(""),n=a[l+t];if(!n)return e;const o=r.length;return"5"===r.charAt(o-1)&&(r=`${r.slice(0,Math.max(0,o-1))}6`),Number.parseFloat(Number(r).toFixed(t))},D=e=>{if((0,u.A)(e))return 0;const t=e.toString(),r=t.indexOf(".");let l=0;return-1!==r&&(l=t.length-r-1),l},W=(e,t=1)=>(0,f.Et)(e)?e>=Number.MAX_SAFE_INTEGER&&1===t?((0,y.U)("InputNumber","The value has reached the maximum safe integer limit."),e):e<=Number.MIN_SAFE_INTEGER&&-1===t?((0,y.U)("InputNumber","The value has reached the minimum safe integer limit."),e):A(e+c.step*t):N.currentValue,K=()=>{if(c.readonly||S.value||C.value)return;const e=Number(_.value)||0,t=W(e);T(t),r(h.qs,N.currentValue),G()},O=()=>{if(c.readonly||S.value||I.value)return;const e=Number(_.value)||0,t=W(e,-1);T(t),r(h.qs,N.currentValue),G()},M=(e,t)=>{const{max:l,min:a,step:o,precision:i,stepStrictly:s,valueOnClear:d}=c;l<a&&(0,y.$)("InputNumber","min should not be greater than max.");let m=Number(e);if((0,u.A)(e)||Number.isNaN(m))return null;if(""===e){if(null===d)return null;m=(0,n.Kg)(d)?{min:a,max:l}[d]:d}return s&&(m=A(Math.round(m/o)*o,i),m!==e&&t&&r(h.l4,m)),(0,f.b0)(i)||(m=A(m,i)),(m>l||m<a)&&(m=m>l?l:a,t&&r(h.l4,m)),m},T=(e,t=!0)=>{var l;const a=N.currentValue,n=M(e);t?a===n&&e||(N.userInput=null,r(h.l4,n),a!==n&&r(h.YU,n,a),c.validateEvent&&(null==(l=null==E?void 0:E.validate)||l.call(E,"change").catch(e=>(0,y.U)(e))),N.currentValue=n):r(h.l4,n)},U=e=>{N.userInput=e;const t=""===e?null:Number(e);r(h.qs,t),T(t,!1)},$=e=>{const t=""!==e?Number(e):"";((0,f.Et)(t)&&!Number.isNaN(t)||""===e)&&T(t),G(),N.userInput=null},P=()=>{var e,t;null==(t=null==(e=F.value)?void 0:e.focus)||t.call(e)},z=()=>{var e,t;null==(t=null==(e=F.value)?void 0:e.blur)||t.call(e)},q=e=>{r("focus",e)},X=e=>{var t,l;N.userInput=null,null===N.currentValue&&(null==(t=F.value)?void 0:t.input)&&(F.value.input.value=""),r("blur",e),c.validateEvent&&(null==(l=null==E?void 0:E.validate)||l.call(E,"blur").catch(e=>(0,y.U)(e)))},G=()=>{N.currentValue!==c.modelValue&&(N.currentValue=c.modelValue)},B=e=>{document.activeElement===e.target&&e.preventDefault()};return(0,l.wB)(()=>c.modelValue,(e,t)=>{const r=M(e,!0);null===N.userInput&&r!==t&&(N.currentValue=r)},{immediate:!0}),(0,l.sV)(()=>{var e;const{min:t,max:l,modelValue:a}=c,n=null==(e=F.value)?void 0:e.input;if(n.setAttribute("role","spinbutton"),Number.isFinite(l)?n.setAttribute("aria-valuemax",String(l)):n.removeAttribute("aria-valuemax"),Number.isFinite(t)?n.setAttribute("aria-valuemin",String(t)):n.removeAttribute("aria-valuemin"),n.setAttribute("aria-valuenow",N.currentValue||0===N.currentValue?String(N.currentValue):""),n.setAttribute("aria-disabled",String(S.value)),!(0,f.Et)(a)&&null!=a){let e=Number(a);Number.isNaN(e)&&(e=null),r(h.l4,e)}n.addEventListener("wheel",B,{passive:!1})}),(0,l.$u)(()=>{var e,t;const r=null==(e=F.value)?void 0:e.input;null==r||r.setAttribute("aria-valuenow",`${null!=(t=N.currentValue)?t:""}`)}),t({focus:P,blur:z}),(e,t)=>((0,l.uX)(),(0,l.CE)("div",{class:(0,n.C4)([(0,a.R1)(R).b(),(0,a.R1)(R).m((0,a.R1)(V)),(0,a.R1)(R).is("disabled",(0,a.R1)(S)),(0,a.R1)(R).is("without-controls",!e.controls),(0,a.R1)(R).is("controls-right",(0,a.R1)(x))]),onDragstart:(0,o.D$)(()=>{},["prevent"])},[e.controls?(0,l.bo)(((0,l.uX)(),(0,l.CE)("span",{key:0,role:"button","aria-label":(0,a.R1)(m)("el.inputNumber.decrease"),class:(0,n.C4)([(0,a.R1)(R).e("decrease"),(0,a.R1)(R).is("disabled",(0,a.R1)(I))]),onKeydown:(0,o.jR)(O,["enter"])},[(0,l.RG)(e.$slots,"decrease-icon",{},()=>[(0,l.bF)((0,a.R1)(s.tk),null,{default:(0,l.k6)(()=>[(0,a.R1)(x)?((0,l.uX)(),(0,l.Wv)((0,a.R1)(d.ArrowDown),{key:0})):((0,l.uX)(),(0,l.Wv)((0,a.R1)(d.Minus),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[(0,a.R1)(p.wc),O]]):(0,l.Q3)("v-if",!0),e.controls?(0,l.bo)(((0,l.uX)(),(0,l.CE)("span",{key:1,role:"button","aria-label":(0,a.R1)(m)("el.inputNumber.increase"),class:(0,n.C4)([(0,a.R1)(R).e("increase"),(0,a.R1)(R).is("disabled",(0,a.R1)(C))]),onKeydown:(0,o.jR)(K,["enter"])},[(0,l.RG)(e.$slots,"increase-icon",{},()=>[(0,l.bF)((0,a.R1)(s.tk),null,{default:(0,l.k6)(()=>[(0,a.R1)(x)?((0,l.uX)(),(0,l.Wv)((0,a.R1)(d.ArrowUp),{key:0})):((0,l.uX)(),(0,l.Wv)((0,a.R1)(d.Plus),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[(0,a.R1)(p.wc),K]]):(0,l.Q3)("v-if",!0),(0,l.bF)((0,a.R1)(i.WK),{id:e.id,ref_key:"input",ref:F,type:"number",step:e.step,"model-value":(0,a.R1)(_),placeholder:e.placeholder,readonly:e.readonly,disabled:(0,a.R1)(S),size:(0,a.R1)(V),max:e.max,min:e.min,name:e.name,"aria-label":e.ariaLabel,"validate-event":!1,inputmode:e.inputmode,onKeydown:[(0,o.jR)((0,o.D$)(K,["prevent"]),["up"]),(0,o.jR)((0,o.D$)(O,["prevent"]),["down"])],onBlur:X,onFocus:q,onInput:U,onChange:$},(0,l.eX)({_:2},[e.$slots.prefix?{name:"prefix",fn:(0,l.k6)(()=>[(0,l.RG)(e.$slots,"prefix")])}:void 0,e.$slots.suffix?{name:"suffix",fn:(0,l.k6)(()=>[(0,l.RG)(e.$slots,"suffix")])}:void 0]),1032,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","aria-label","inputmode","onKeydown"])],42,["onDragstart"]))}});var N=(0,m.A)(F,[["__file","input-number.vue"]]),E=r(25376);const I=(0,E.GU)(N)},81201:function(e,t,r){r.d(t,{A:function(){return n}});var l=r(55583),a=r(18384);class n extends l.w{static list(e,t){return super.post(a.x+"/flow/flowCategory/list",e,t)}static view(e,t){return super.get(a.x+"/flow/flowCategory/view",e,t)}static add(e,t){return super.post(a.x+"/flow/flowCategory/add",e,t)}static update(e,t){return super.post(a.x+"/flow/flowCategory/update",e,t)}static delete(e,t){return super.post(a.x+"/flow/flowCategory/delete",e,t)}}},87603:function(e,t,r){r(97042),r(72343)}}]);