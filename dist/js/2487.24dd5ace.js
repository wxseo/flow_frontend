"use strict";(self["webpackChunkorange"]=self["webpackChunkorange"]||[]).push([[1066,2487,6339,7497,8720],{3740:function(e,a,l){l.d(a,{qi:function(){return V}});var t=l(56768),i=l(90144),o=l(24232),n=l(45130),u=l(91542),r=l(57477),d=l(93889),s=l(99077),c=l(44216),v=l(37207),m=l(93513),p=l(93558),f=l(92056),k=l(86894),y=l(12235);const b="ElSwitch",w=(0,t.pM)({name:b}),g=(0,t.pM)({...w,props:d.Z,emits:d.x,setup(e,{expose:a,emit:l}){const d=e,{formItem:s}=(0,c.j)(),w=(0,v.NV)(),g=(0,m.DU)("switch"),{inputId:h}=(0,c.W)(d,{formItemContext:s}),_=(0,v.CB)((0,t.EW)(()=>d.loading)),V=(0,i.KR)(!1!==d.modelValue),C=(0,i.KR)(),R=(0,i.KR)(),E=(0,t.EW)(()=>[g.b(),g.m(w.value),g.is("disabled",_.value),g.is("checked",X.value)]),W=(0,t.EW)(()=>[g.e("label"),g.em("label","left"),g.is("active",!X.value)]),x=(0,t.EW)(()=>[g.e("label"),g.em("label","right"),g.is("active",X.value)]),I=(0,t.EW)(()=>({width:(0,p._V)(d.width)}));(0,t.wB)(()=>d.modelValue,()=>{V.value=!0});const T=(0,t.EW)(()=>!!V.value&&d.modelValue),X=(0,t.EW)(()=>T.value===d.activeValue);[d.activeValue,d.inactiveValue].includes(T.value)||(l(f.l4,d.inactiveValue),l(f.YU,d.inactiveValue),l(f.qs,d.inactiveValue)),(0,t.wB)(X,e=>{var a;C.value.checked=e,d.validateEvent&&(null==(a=null==s?void 0:s.validate)||a.call(s,"change").catch(e=>(0,k.U)(e)))});const N=()=>{const e=X.value?d.inactiveValue:d.activeValue;l(f.l4,e),l(f.YU,e),l(f.qs,e),(0,t.dY)(()=>{C.value.checked=X.value})},P=()=>{if(_.value)return;const{beforeChange:e}=d;if(!e)return void N();const a=e(),l=[(0,o.yL)(a),(0,y.Lm)(a)].includes(!0);l||(0,k.$)(b,"beforeChange must return type `Promise<boolean>` or `boolean`"),(0,o.yL)(a)?a.then(e=>{e&&N()}).catch(e=>{(0,k.U)(b,`some error occurred: ${e}`)}):a&&N()},L=()=>{var e,a;null==(a=null==(e=C.value)?void 0:e.focus)||a.call(e)};return(0,t.sV)(()=>{C.value.checked=X.value}),a({focus:L,checked:X}),(e,a)=>((0,t.uX)(),(0,t.CE)("div",{class:(0,o.C4)((0,i.R1)(E)),onClick:(0,n.D$)(P,["prevent"])},[(0,t.Lk)("input",{id:(0,i.R1)(h),ref_key:"input",ref:C,class:(0,o.C4)((0,i.R1)(g).e("input")),type:"checkbox",role:"switch","aria-checked":(0,i.R1)(X),"aria-disabled":(0,i.R1)(_),"aria-label":e.ariaLabel,name:e.name,"true-value":e.activeValue,"false-value":e.inactiveValue,disabled:(0,i.R1)(_),tabindex:e.tabindex,onChange:N,onKeydown:(0,n.jR)(P,["enter"])},null,42,["id","aria-checked","aria-disabled","aria-label","name","true-value","false-value","disabled","tabindex","onKeydown"]),e.inlinePrompt||!e.inactiveIcon&&!e.inactiveText?(0,t.Q3)("v-if",!0):((0,t.uX)(),(0,t.CE)("span",{key:0,class:(0,o.C4)((0,i.R1)(W))},[e.inactiveIcon?((0,t.uX)(),(0,t.Wv)((0,i.R1)(u.tk),{key:0},{default:(0,t.k6)(()=>[((0,t.uX)(),(0,t.Wv)((0,t.$y)(e.inactiveIcon)))]),_:1})):(0,t.Q3)("v-if",!0),!e.inactiveIcon&&e.inactiveText?((0,t.uX)(),(0,t.CE)("span",{key:1,"aria-hidden":(0,i.R1)(X)},(0,o.v_)(e.inactiveText),9,["aria-hidden"])):(0,t.Q3)("v-if",!0)],2)),(0,t.Lk)("span",{ref_key:"core",ref:R,class:(0,o.C4)((0,i.R1)(g).e("core")),style:(0,o.Tr)((0,i.R1)(I))},[e.inlinePrompt?((0,t.uX)(),(0,t.CE)("div",{key:0,class:(0,o.C4)((0,i.R1)(g).e("inner"))},[e.activeIcon||e.inactiveIcon?((0,t.uX)(),(0,t.Wv)((0,i.R1)(u.tk),{key:0,class:(0,o.C4)((0,i.R1)(g).is("icon"))},{default:(0,t.k6)(()=>[((0,t.uX)(),(0,t.Wv)((0,t.$y)((0,i.R1)(X)?e.activeIcon:e.inactiveIcon)))]),_:1},8,["class"])):e.activeText||e.inactiveText?((0,t.uX)(),(0,t.CE)("span",{key:1,class:(0,o.C4)((0,i.R1)(g).is("text")),"aria-hidden":!(0,i.R1)(X)},(0,o.v_)((0,i.R1)(X)?e.activeText:e.inactiveText),11,["aria-hidden"])):(0,t.Q3)("v-if",!0)],2)):(0,t.Q3)("v-if",!0),(0,t.Lk)("div",{class:(0,o.C4)((0,i.R1)(g).e("action"))},[e.loading?((0,t.uX)(),(0,t.Wv)((0,i.R1)(u.tk),{key:0,class:(0,o.C4)((0,i.R1)(g).is("loading"))},{default:(0,t.k6)(()=>[(0,t.bF)((0,i.R1)(r.Loading))]),_:1},8,["class"])):(0,i.R1)(X)?(0,t.RG)(e.$slots,"active-action",{key:1},()=>[e.activeActionIcon?((0,t.uX)(),(0,t.Wv)((0,i.R1)(u.tk),{key:0},{default:(0,t.k6)(()=>[((0,t.uX)(),(0,t.Wv)((0,t.$y)(e.activeActionIcon)))]),_:1})):(0,t.Q3)("v-if",!0)]):(0,i.R1)(X)?(0,t.Q3)("v-if",!0):(0,t.RG)(e.$slots,"inactive-action",{key:2},()=>[e.inactiveActionIcon?((0,t.uX)(),(0,t.Wv)((0,i.R1)(u.tk),{key:0},{default:(0,t.k6)(()=>[((0,t.uX)(),(0,t.Wv)((0,t.$y)(e.inactiveActionIcon)))]),_:1})):(0,t.Q3)("v-if",!0)])],2)],6),e.inlinePrompt||!e.activeIcon&&!e.activeText?(0,t.Q3)("v-if",!0):((0,t.uX)(),(0,t.CE)("span",{key:1,class:(0,o.C4)((0,i.R1)(x))},[e.activeIcon?((0,t.uX)(),(0,t.Wv)((0,i.R1)(u.tk),{key:0},{default:(0,t.k6)(()=>[((0,t.uX)(),(0,t.Wv)((0,t.$y)(e.activeIcon)))]),_:1})):(0,t.Q3)("v-if",!0),!e.activeIcon&&e.activeText?((0,t.uX)(),(0,t.CE)("span",{key:1,"aria-hidden":!(0,i.R1)(X)},(0,o.v_)(e.activeText),9,["aria-hidden"])):(0,t.Q3)("v-if",!0)],2))],10,["onClick"]))}});var h=(0,s.A)(g,[["__file","switch.vue"]]),_=l(25376);const V=(0,_.GU)(h)},42487:function(e,a,l){l.r(a),l.d(a,{default:function(){return I}});var t=l(76408),i=(l(97042),l(87535),l(68368)),o=(l(81208),l(18888)),n=(l(3172),l(85415)),u=(l(22243),l(7409),l(17851)),r=(l(68489),l(62436),l(47001),l(21929)),d=(l(98421),l(25136)),s=(l(69957),l(3740)),c=(l(42899),l(32465),l(14022)),v=(l(72343),l(44114),l(18111),l(22489),l(61701),l(56768)),m=l(90144),p=l(45130),f=l(24232),k=l(61473),y=l(164),b=l(26695),w=l(27007),g=l(71066),h=l(82572);const _={class:"form-edit-report-operation third-party-dlg",style:{position:"relative"}},V={class:"form-box"},C={key:0},R={key:0},E={key:0};var W=(0,v.pM)({__name:"editRouteOperation",props:{rowData:{},activeMode:{},operationItem:{},isTreeColumn:{type:Boolean},columnList:{},dialog:{},thirdParamsString:{},dialogKey:{}},setup(e){const a=(0,h.l5)(),l=e,{thirdParams:W,onCloseThirdDialog:x}=(0,g.P)(l),I=(0,v.EW)(()=>a.defaultFormItemSize||W.value.defaultFormItemSize?.value),T=(0,m.KR)(),X=(0,m.KR)({routeName:void 0,enabled:!1,routeParams:[]}),N=(0,m.KR)(),P={routeName:[{required:!0,message:"路由名称不能为空",trigger:"blur"}]},L=(0,v.EW)(()=>(X.value.routeParams||[]).filter(e=>e.isEdit).length>0),S=(0,v.EW)(()=>({rowData:l.rowData||W.value.rowData,activeMode:l.activeMode||W.value.activeMode,columnList:l.columnList||W.value.columnList||[],isTreeColumn:l.isTreeColumn||W.value.isTreeColumn})),F=(0,v.EW)(()=>l.isTreeColumn?(0,w.BN)(S.value.columnList,"columnId"):S.value.columnList),U=()=>{X.value.routeParams.push({id:(new Date).getTime(),paramName:void 0,valueType:"fixed",paramValue:void 0,isNew:!0,isEdit:!0})},D=e=>{N.value={...e},e.isEdit=!0},K=e=>{y.s.confirm("是否删除此参数？","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{X.value.routeParams=X.value.routeParams.filter(a=>a!==e)}).catch(e=>{console.warn(e)})},Q=e=>{e.isNew?X.value.routeParams=X.value.routeParams.filter(a=>a!==e):X.value.routeParams=X.value.routeParams.map(a=>a===e?N.value:a)},B=e=>{null!=e.paramName&&""!==e.paramName?null!=e.paramValue&&""!==e.paramValue?(e.isEdit=!1,e.isNew=!1,X.value.routeParams=[...X.value.routeParams]):b.nk.error("参数值不能为空！"):b.nk.error("参数名不能为空！")},A=e=>(0,w.Zi)(F.value,e,"columnId"),z=(e,a)=>{e.paramValue=Array.isArray(a)?a[a.length-1]:void 0},M=e=>{e.paramValue=void 0},$=e=>{if("bind"!==e.valueType)return e.paramValue;{let a=(0,w.I_)(F.value,e.paramValue,"columnId");if(Array.isArray(a)&&a.length>0)return a.map(e=>e.columnName).join(" / ")}},q=e=>"fixed"===e?"固定值":"绑定字段",O=()=>{T.value.validate(e=>{if(!e)return;const a={...X.value,routeParams:X.value.routeParams.map(e=>({...e,isEdit:void 0,isNew:void 0}))};l.dialog?l.dialog.submit(a):x(!1,S.value.rowData,a)})};return(0,v.sV)(()=>{S.value.rowData&&(X.value={...S.value.rowData,routeParams:(S.value.rowData.routeParams||[]).map(e=>({...e,isEdit:!1,isNew:!1}))})}),(e,a)=>{const l=c.WK,y=r.xE,b=s.qi,w=d.S2,g=r.US,h=i.o8,W=u.ll,x=u.MQ,S=n.P9,Z=n.AV,J=o._m,j=i.Up,G=t.uD;return(0,v.uX)(),(0,v.CE)("div",_,[(0,v.Lk)("div",V,[(0,v.bF)(g,{ref_key:"form",ref:T,model:(0,m.R1)(X),class:"full-width-input",rules:P,style:{width:"100%"},"label-width":"80px",inline:!0,size:(0,m.R1)(I),"label-position":"left",onSubmit:a[4]||(a[4]=(0,p.D$)(()=>{},["prevent"]))},{default:(0,v.k6)(()=>[(0,v.bF)(y,{label:"路由名称",prop:"routeName"},{default:(0,v.k6)(()=>[(0,v.bF)(l,{modelValue:(0,m.R1)(X).routeName,"onUpdate:modelValue":a[0]||(a[0]=e=>(0,m.R1)(X).routeName=e),clearable:""},null,8,["modelValue"])]),_:1}),(0,v.bF)(y,{label:"是否启用"},{default:(0,v.k6)(()=>[(0,v.bF)(b,{modelValue:(0,m.R1)(X).enabled,"onUpdate:modelValue":a[1]||(a[1]=e=>(0,m.R1)(X).enabled=e)},null,8,["modelValue"])]),_:1}),(0,v.bF)(y,{style:{float:"right","text-align":"right"}},{default:(0,v.k6)(()=>[(0,v.bF)(w,{type:"success",disabled:(0,m.R1)(L),onClick:a[2]||(a[2]=e=>U())},{default:(0,v.k6)(()=>a[5]||(a[5]=[(0,v.eW)(" 添加参数 ")])),_:1,__:[5]},8,["disabled"]),(0,v.bF)(w,{type:"primary",disabled:(0,m.R1)(L),onClick:a[3]||(a[3]=e=>O())},{default:(0,v.k6)(()=>a[6]||(a[6]=[(0,v.eW)(" 保存 ")])),_:1,__:[6]},8,["disabled"])]),_:1})]),_:1},8,["model","size"]),(0,v.bF)(G,{span:24,style:{"margin-bottom":"18px"}},{default:(0,v.k6)(()=>[(0,v.bF)(j,{data:(0,m.R1)(X).routeParams,size:"default",border:"",height:"400px","header-cell-class-name":"table-header-gray"},{empty:(0,v.k6)(()=>a[13]||(a[13]=[(0,v.Lk)("div",{class:"table-empty unified-font"},[(0,v.Lk)("img",{src:k}),(0,v.Lk)("span",null,"暂无数据")],-1)])),default:(0,v.k6)(()=>[(0,v.bF)(h,{label:"参数名",prop:"paramName",width:"200px"},{default:(0,v.k6)(e=>[e.row.isEdit?((0,v.uX)(),(0,v.Wv)(l,{key:1,class:"table-input",size:"default",modelValue:e.row.paramName,"onUpdate:modelValue":a=>e.row.paramName=a},null,8,["modelValue","onUpdate:modelValue"])):((0,v.uX)(),(0,v.CE)("span",C,(0,f.v_)(e.row.paramName),1))]),_:1}),(0,v.bF)(h,{label:"参数值类型",prop:"valueType",width:"300px"},{default:(0,v.k6)(e=>[e.row.isEdit?((0,v.uX)(),(0,v.Wv)(x,{key:1,modelValue:e.row.valueType,"onUpdate:modelValue":a=>e.row.valueType=a,size:"default",onChange:a=>M(e.row)},{default:(0,v.k6)(()=>[(0,v.bF)(W,{value:"fixed"},{default:(0,v.k6)(()=>a[7]||(a[7]=[(0,v.eW)("固定值")])),_:1,__:[7]}),(0,v.bF)(W,{value:"bind"},{default:(0,v.k6)(()=>a[8]||(a[8]=[(0,v.eW)("字段绑定")])),_:1,__:[8]})]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])):((0,v.uX)(),(0,v.CE)("span",R,(0,f.v_)(q(e.row.valueType)),1))]),_:1}),(0,v.bF)(h,{label:"参数值"},{default:(0,v.k6)(a=>[a.row.isEdit?((0,v.uX)(),(0,v.CE)(v.FK,{key:1},["fixed"===a.row.valueType?((0,v.uX)(),(0,v.Wv)(l,{key:0,modelValue:a.row.paramValue,"onUpdate:modelValue":e=>a.row.paramValue=e,size:"default"},null,8,["modelValue","onUpdate:modelValue"])):"bind"===a.row.valueType?((0,v.uX)(),(0,v.CE)(v.FK,{key:1},[e.isTreeColumn?((0,v.uX)(),(0,v.Wv)(J,{key:1,size:"default",placeholder:"",clearable:"",options:e.columnList,value:A(a.row.paramValue),onInput:e=>z(a.row,e),props:{label:"columnName",value:"columnId"}},null,8,["options","value","onInput"])):((0,v.uX)(),(0,v.Wv)(Z,{key:0,size:"default",clearable:"",placeholder:"",modelValue:a.row.paramValue,"onUpdate:modelValue":e=>a.row.paramValue=e},{default:(0,v.k6)(()=>[((0,v.uX)(!0),(0,v.CE)(v.FK,null,(0,v.pI)((0,m.R1)(F),e=>((0,v.uX)(),(0,v.Wv)(S,{key:e.columnId,label:e.columnName,value:e.columnId},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"]))],64)):(0,v.Q3)("",!0)],64)):((0,v.uX)(),(0,v.CE)("span",E,(0,f.v_)($(a.row)),1))]),_:1}),(0,v.bF)(h,{label:"操作",width:"110px",align:"center"},{default:(0,v.k6)(e=>[e.row.isEdit?(0,v.Q3)("",!0):((0,v.uX)(),(0,v.Wv)(w,{key:0,link:"",disabled:((0,m.R1)(N)||{}).id===e.row.id,onClick:a=>D(e.row)},{default:(0,v.k6)(()=>a[9]||(a[9]=[(0,v.eW)(" 编辑 ")])),_:2,__:[9]},1032,["disabled","onClick"])),e.row.isEdit?(0,v.Q3)("",!0):((0,v.uX)(),(0,v.Wv)(w,{key:1,link:"",disabled:((0,m.R1)(N)||{}).id===e.row.id,onClick:a=>K(e.row)},{default:(0,v.k6)(()=>a[10]||(a[10]=[(0,v.eW)(" 删除 ")])),_:2,__:[10]},1032,["disabled","onClick"])),e.row.isEdit?((0,v.uX)(),(0,v.Wv)(w,{key:2,link:"",onClick:a=>B(e.row)},{default:(0,v.k6)(()=>a[11]||(a[11]=[(0,v.eW)(" 保存 ")])),_:2,__:[11]},1032,["onClick"])):(0,v.Q3)("",!0),e.row.isEdit?((0,v.uX)(),(0,v.Wv)(w,{key:3,link:"",onClick:a=>Q(e.row)},{default:(0,v.k6)(()=>a[12]||(a[12]=[(0,v.eW)(" 取消 ")])),_:2,__:[12]},1032,["onClick"])):(0,v.Q3)("",!0)]),_:1})]),_:1},8,["data"])]),_:1})])])}}});const x=W;var I=x},42899:function(e,a,l){l(97042)},61473:function(e,a,l){e.exports=l.p+"img/empty.7e47f88a.png"},68489:function(e,a,l){l(97042)},71066:function(e,a,l){l.d(a,{P:function(){return u},i:function(){return r}});var t=l(81387),i=l(27007),o=l(56768),n=l(90144);const u=e=>{console.log("接收到的第三方参数",e);const a=(0,n.KR)(0),l=(0,o.EW)(()=>{let a={};try{e.thirdParamsString&&(a=JSON.parse(e.thirdParamsString))}catch(l){console.log(l),a={}}return a});console.log("thirdParams",l);const t=(t,i,o)=>{console.log("onCloseThirdDialog",i,o),window.parent&&window.parent.postMessage({type:"closeDialog",data:{index:a.value,dialogKey:e.dialogKey,path:l.value.path,rowData:i?JSON.parse(JSON.stringify(i)):void 0,data:o?JSON.parse(JSON.stringify(o)):void 0,isSuccess:t}},"*")},u=(e,l)=>{switch(e){case"setToken":l.token&&(0,i.WG)(l.token);break;case"dialogIndex":a.value=l;break;case"refreshData":break;case"message":break}},r=e=>{u(e.data.type,e.data.data)};return(0,o.sV)(()=>{console.log("onMounted message"),window.addEventListener("message",r,!1)}),(0,o.hi)(()=>{console.log("onUnmounted message"),window.removeEventListener("message",r)}),{thirdParams:l,onCloseThirdDialog:t}},r=()=>{let e;const a=(0,t.lq)(),l=()=>{window.parent&&window.parent.postMessage({type:"refreshToken"},"*")};-1!==a.path.indexOf("/thirdParty/")&&((0,o.sV)(()=>{(0,i.R7)()&&(e=setInterval(()=>{console.log("refreshToken thirdParty"),l()},18e4))}),(0,o.hi)(()=>{e&&clearInterval(e)}))}},93889:function(e,a,l){l.d(a,{Z:function(){return s},x:function(){return c}});var t=l(3027),i=l(47378),o=l(20464),n=l(58501),u=l(92056),r=l(12235),d=l(24232);const s=(0,i.b_)({modelValue:{type:[Boolean,String,Number],default:!1},disabled:Boolean,loading:Boolean,size:{type:String,validator:t.x},width:{type:[String,Number],default:""},inlinePrompt:Boolean,inactiveActionIcon:{type:o.Ze},activeActionIcon:{type:o.Ze},activeIcon:{type:o.Ze},inactiveIcon:{type:o.Ze},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},beforeChange:{type:(0,i.jq)(Function)},id:String,tabindex:{type:[String,Number]},...(0,n.l)(["ariaLabel"])}),c={[u.l4]:e=>(0,r.Lm)(e)||(0,d.Kg)(e)||(0,r.Et)(e),[u.YU]:e=>(0,r.Lm)(e)||(0,d.Kg)(e)||(0,r.Et)(e),[u.qs]:e=>(0,r.Lm)(e)||(0,d.Kg)(e)||(0,r.Et)(e)}}}]);