(self["webpackChunkorange"]=self["webpackChunkorange"]||[]).push([[449,1066],{10115:function(e,n,a){"use strict";a.d(n,{A:function(){return d}});var t=a(56768),o=a(90144),r=a(37569);const i={triggerCharacters:["."],getCompletions:function(e,n,a,t,o){const r=n.getLine(a.row),i=r.substring(0,a.column),s=i.includes("//")||i.includes("/*");if(s)return void o(null,[]);const m=i.split("."),l=(m[m.length-1],{instance:[{caption:"formData",value:"formData",meta:"property",docText:"表单数据对象",type:"object",score:100},{caption:"props",value:"props",meta:"property",docText:"组件props对象",type:"object",score:100},{caption:"formProps",value:"formProps",meta:"property",docText:"表单props对象",type:"object",score:100},{caption:"loginStore",value:"loginStore",meta:"property",docText:"登录状态管理对象",type:"object",score:100},{caption:"ElMessage",value:"ElMessage('')",meta:"method",docText:"Element Plus消息提示组件",type:"object",score:100},{caption:"router",value:"router",meta:"property",docText:"路由对象",type:"object",score:100},{caption:"Dialog",value:"Dialog",meta:"property",docText:"对话框组件",type:"object",score:100},{caption:"showDialog",value:"showDialog",meta:"method",docText:"显示对话框方法",type:"function",score:100},{caption:"showOnlineDialog",value:"showOnlineDialog",meta:"method",docText:"显示在线对话框方法",type:"function",score:100},{caption:"getFormWidget",value:"getFormWidget()",meta:"method",docText:"获取表单组件实例",type:"function",score:100},{caption:"showMessage",value:"showMessage(type, message)",meta:"method",docText:"显示消息提示",type:"function",score:100},{caption:"close",value:"close()",meta:"method",docText:"关闭当前页面",type:"function",score:100},{caption:"refresh",value:"refresh()",meta:"method",docText:"刷新当前页面",type:"function",score:100},{caption:"axios",value:"axios",meta:"property",docText:"axios请求对象，包含post和get方法",type:"object",score:100},{caption:"tableInstance",value:"tableInstance",meta:"property",docText:"表格实例对象",type:"object",score:100}]});let c=[];c=l.instance,o(null,c)}},s=[{name:"consl",tabTrigger:"console.log",content:"console.log('${1:message}');"},{name:"conserr",tabTrigger:"console.error",content:"console.error('${1:message}');"},{name:"select*",tabTrigger:"select",content:"select * from ${1:table} where ${2:condition}"},{name:"insert*",tabTrigger:"insert",content:"insert into ${1:table} (${2:column1}, ${3:column2}) values (${4:value1}, ${5:value2})"},{name:"update*",tabTrigger:"update",content:"update ${1:table} set ${2:column1} = ${3:value1}, ${4:column2} = ${5:value2} where ${6:condition}"},{name:"delete*",tabTrigger:"delete",content:"delete from ${1:table} where ${2:condition}"},{name:"useDbLink*",tabTrigger:"useDbLink",content:"api.useDblink('${1:数据源名称}', true);"},{name:"newQueryBuilder*",tabTrigger:"newQueryBuilder",content:'var queryBuilder = new ApiQueryBuilder()\n    .sql("${1:sql}")\n    .addParams(${2:params})\n    .pageParam(new MyPageParam(${3:pageNum}, ${4:pageSize}))\n    .relations(${5:relations})\n    .dictRelations(${6:relationDicts});\n    '},{name:"axiosget*",tabTrigger:"axios.get",content:"axios.get('${1:url}', ${2:params})\n    .then(res => {\n      console.log(res);\n    })\n    .catch(err => {\n      console.error(err);\n    });\n    "},{name:"axiospost*",tabTrigger:"axios.post",content:"axios.post('${1:url}', ${2:params})\n    .then(res => {\n      console.log(res);\n    })\n    .catch(err => {\n      console.error(err);\n    });\n    "}];var m=a(1145),l=a.n(m);a(69931),a(85306),a(80776),a(15612);const c={useWrapMode:!1,enableSnippets:!0,useWorker:!1,enableLiveAutocompletion:!0,enableBasicAutocompletion:!0,tabSize:2,fontSize:14};var p=(0,t.pM)({__name:"index",props:{value:{},type:{default:"javascript"},options:{default:()=>c},completer:{}},emits:["update:value","save"],setup(e,{expose:n,emit:a}){const m=a,p=e,u=(0,o.KR)();let d=null;(0,t.wB)(()=>p.value,e=>{d&&d.getValue()!==e&&(d.setValue(e||""),d.moveCursorTo(0,0))},{deep:!0,immediate:!0}),(0,t.sV)(()=>{let e={...c,...p.options};d=(0,r.edit)(u.value,e),d.getSession().setMode("ace/mode/javascript"),d.session.setMode("ace/mode/javascript");const n=window.ace.require("ace/ext/language_tools"),a=window.ace.require("ace/snippets").snippetManager;a.register(s,"javascript"),d.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0}),n.addCompleter(i),d.getSession().on("change",()=>{d&&m("update:value",d.getValue())}),p.value&&d.setValue(p.value),d.commands.addCommand({name:"saveCommand",bindKey:{win:"Ctrl-S",mac:"Command-S"},exec:e=>{m("save")}})}),(0,t.wB)(()=>p.completer,e=>{if(d&&e&&"function"===typeof e.getCompletions){const n=window.ace.require("ace/ext/language_tools");n.addCompleter(e)}},{deep:!0}),(0,t.xo)(()=>{d&&(d.destroy(),d.container.remove(),d=null)});const f=()=>{if(d){var e=d.getValue(),n=l().js_beautify(e);d.setValue(n)}};return n({formatCode:f}),(e,n)=>((0,t.uX)(),(0,t.CE)("div",{ref_key:"root",ref:u,style:{position:"absolute","font-size":"14px"}},null,512))}});const u=p;var d=u},46304:function(e,n,a){"use strict";a.r(n),a.d(n,{default:function(){return D}});var t=a(21929),o=(a(97042),a(98421),a(65451)),r=(a(63390),a(25136)),i=(a(69957),a(76408)),s=(a(87535),a(32465),a(85415)),m=(a(22243),a(7409),a(44114),a(18111),a(22489),a(7588),a(61701),a(56768)),l=a(90144),c=a(45130),p=a(10766),u=a(27007),d=a(10115),f=a(21016),v=a(36525),g=a(71066),y=a(82572);const T="\nexport default {\n  props: {\n  },\n  data () {\n    return {\n      formData: {\n        <%_ if (Array.isArray(form.tableList)) { -%>\n          <%_ form.tableList.forEach(table => { -%>\n        // <%= table.showName %>\n            <%_ if (table.isObject) { -%>\n        <%= table.variableName %>: {\n              <%_ table.columnList.forEach(column => { -%>\n          // <%= column.columnComment %>\n          <%= column.columnName %>: undefined,\n              <%_ }) -%>\n        },\n            <%_ } else { -%>\n              <%_ table.columnList.forEach(column => { -%>\n        // <%= column.columnName %>: <%= column.columnComment %>\n              <%_ }) -%>\n        <%= table.variableName %>: [],\n            <%_ } -%>\n          <%_ }) -%>\n        <%_ } -%>\n        // 自定义字段\n        customField: {\n          <%_ if (Array.isArray(form.customFieldList)) { -%>\n            <%_ form.customFieldList.forEach(field => { -%>\n          <%= field.fieldName %>: undefined,\n            <%_ }); -%>\n          <%_ } -%>\n        }\n      }\n    };\n  }\n};\n",b="\nexport default {\n  props: {\n  },\n  data () {\n    return {\n      formData: {\n        <%_ if (Array.isArray(form.widgetList)) { -%>\n          <%_ form.widgetList.forEach(widget => { -%>\n        // <%= widget.showName %>\n        <%= widget.variableName %>: undefined,\n          <%_ }) -%>\n        <%_ } -%>\n      }\n    };\n  }\n};\n";var L={queryFrom:T,reportForm:b},E=a(69106);const h={class:"form-single-fragment third-party-dlg",style:{position:"relative"}};var N=(0,m.pM)({__name:"editCustomEvent",props:{rowData:{},eventList:{},formConfig:{},mode:{},dialog:{},thirdParamsString:{},dialogKey:{}},setup(e){const n=(0,y.l5)(),a=(0,l.KR)({}),T=e,b=(0,m.EW)(()=>n.defaultFormItemSize),{thirdParams:N,onCloseThirdDialog:O}=(0,g.P)(T),D=(0,l.KR)(),F=(0,l.KR)({eventType:"",scriptString:""}),_=(0,l.KR)(""),w={eventType:{required:!0,message:"请选择脚本类型",trigger:"blur"}},C=(0,m.EW)(()=>({rowData:T.rowData||N.value.rowData,eventList:T.eventList||N.value.eventList,formConfig:T.formConfig||N.value.formConfig,mode:T.mode||N.value.mode})),A=(0,m.EW)(()=>(0,u.PH)("pc"===C.value.mode?E.MD:E.aX,F.value.eventType,"id")),R=()=>{let e={...F.value,showName:f.OnlineFormEventType.getValue(F.value.eventType)};D.value.validate(n=>{n&&(T.dialog?T.dialog.submit(e):O(!0,C.value.rowData,e))})},x=()=>{F.value.scriptString=A.value?A.value.comment.trim():""};return(0,m.sV)(()=>{let e={tableList:[],customFieldList:C.value.formConfig.form.customFieldList,widgetList:C.value.formConfig.form.allWidgetList};if(C.value.formConfig.getMasterTable)if(null==C.value.formConfig.getMasterTable.relationType)C.value.formConfig.form.formType===f.SysOnlineFormType.QUERY?e.tableList=C.value.formConfig.getAllTableList.map(e=>e.relationType!==v.SysOnlineRelationType.ONE_TO_MANY?{showName:`${e.tag.datasourceName||e.tag.relationName} (${v.SysOnlineRelationType.getValue(e.relationType)||"主表"})`,variableName:e.tag.variableName,columnList:e.columnList.filter(e=>0!==e.filterType),isObject:!0}:void 0).filter(e=>null!=e):e.tableList=C.value.formConfig.getAllTableList.map(e=>({showName:`${e.tag.datasourceName||e.tag.relationName} (${v.SysOnlineRelationType.getValue(e.relationType)||"主表"})`,variableName:e.tag.variableName,columnList:e.columnList,isObject:e.relationType!==v.SysOnlineRelationType.ONE_TO_MANY})).filter(e=>null!=e);else{let n=T.formConfig.getMasterTable;e.tableList=[{showName:`${n.tag.datasourceName||n.tag.relationName} (${v.SysOnlineRelationType.getValue(n.relationType)||"主表"})`,variableName:n.tag.variableName,columnList:T.formConfig.form.formType===f.SysOnlineFormType.QUERY?n.columnList.filter(e=>0!==e.filterType):n.columnList,isObject:!0}]}let n=null==C.value.formConfig.form.pageCode?L.queryFrom.trim():L.reportForm.trim();_.value=(0,p.render)(n,{form:e}),a.value={triggerCharacters:["formData."],getCompletions:function(n,a,t,o,r){let i=[];e.tableList.forEach((e,n)=>{i.push({caption:e.variableName,value:e.variableName,meta:e.isObject?"object":"array",docText:e.showName,type:e.isObject?"object":"array",score:100-n}),e.isObject?e.columnList.forEach((a,t)=>{i.push({caption:`${e.variableName}.${a.columnName}`,value:`${e.variableName}.${a.columnName}`,meta:"property",docText:a.columnComment||a.columnName,type:"object",score:99-n-.01*t})}):e.columnList.forEach((a,t)=>{i.push({caption:`${e.variableName}[].${a.columnName}`,value:`${e.variableName}[].${a.columnName}`,meta:"property",docText:a.columnComment||a.columnName,type:"object",score:99-n-.01*t})})}),e.customFieldList&&e.customFieldList.length>0&&(i.push({caption:"customField",value:"customField",meta:"object",docText:"自定义字段",type:"object",score:50}),e.customFieldList.forEach((e,n)=>{i.push({caption:`customField.${e.fieldName}`,value:`customField.${e.fieldName}`,meta:"property",docText:e.fieldComment||e.fieldName,type:"object",score:49-.01*n})})),r(null,i)}},C.value.rowData&&(F.value={...C.value.rowData})}),(e,n)=>{const p=s.P9,u=s.AV,f=t.xE,v=i.uD,g=r.S2,y=o.S2,T=t.US;return(0,m.uX)(),(0,m.CE)("div",h,[(0,m.bF)(T,{ref_key:"form",ref:D,class:"full-width-input form-box",model:(0,l.R1)(F),rules:w,style:{width:"100%"},"label-width":"80px",size:(0,l.R1)(b),"label-position":"left",onSubmit:n[2]||(n[2]=(0,c.D$)(()=>{},["prevent"]))},{default:(0,m.k6)(()=>[(0,m.bF)(y,{gutter:20},{default:(0,m.k6)(()=>[(0,m.bF)(v,{span:8},{default:(0,m.k6)(()=>[(0,m.bF)(f,{label:"脚本类型",prop:"eventType"},{default:(0,m.k6)(()=>[(0,m.bF)(u,{modelValue:(0,l.R1)(F).eventType,"onUpdate:modelValue":n[0]||(n[0]=e=>(0,l.R1)(F).eventType=e),clearable:!0,placeholder:"脚本类型",style:{width:"200px"},onChange:x},{default:(0,m.k6)(()=>[((0,m.uX)(!0),(0,m.CE)(m.FK,null,(0,m.pI)((0,l.R1)(C).eventList,e=>((0,m.uX)(),(0,m.Wv)(p,{key:e.id,label:e.name,value:e.id,disabled:e.disabled},null,8,["label","value","disabled"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),(0,m.bF)(v,{span:16},{default:(0,m.k6)(()=>[(0,m.bF)(f,null,{default:(0,m.k6)(()=>[(0,m.bF)(y,{class:"no-scroll flex-box",style:{width:"100%"},justify:"end"},{default:(0,m.k6)(()=>[(0,m.bF)(g,{type:"primary",size:(0,l.R1)(b),onClick:R},{default:(0,m.k6)(()=>n[3]||(n[3]=[(0,m.eW)(" 保存 ")])),_:1,__:[3]},8,["size"])]),_:1})]),_:1})]),_:1})]),_:1}),(0,m.bF)(y,{gutter:15,justify:"space-between"},{default:(0,m.k6)(()=>[(0,m.bF)(v,{span:11,style:{height:"640px"}},{default:(0,m.k6)(()=>[(0,m.bF)(y,null,{default:(0,m.k6)(()=>[(0,m.bF)(d.A,{value:(0,l.R1)(_),title:"表单数据",options:{readOnly:!0},style:{width:"100%",height:"640px",border:"1px solid #dcdcdc"}},null,8,["value"])]),_:1})]),_:1}),(0,m.bF)(v,{span:13,style:{height:"640px"}},{default:(0,m.k6)(()=>[(0,m.bF)(y,null,{default:(0,m.k6)(()=>[(0,m.bF)(d.A,{value:(0,l.R1)(F).scriptString,"onUpdate:value":n[1]||(n[1]=e=>(0,l.R1)(F).scriptString=e),style:{width:"100%",height:"640px",border:"1px solid #dcdcdc"},title:(0,l.R1)(A)?(0,l.R1)(A).functionName:"事件脚本",completer:(0,l.R1)(a)},null,8,["value","title","completer"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","size"])])}}});const O=N;var D=O},69106:function(e,n,a){"use strict";a.d(n,{MD:function(){return r},aX:function(){return i},tp:function(){return s}});var t=a(21016),o=a(27007);const r=[{id:t.OnlineFormEventType.CHANGE,name:"组件数据改变",functionName:"onChange",paramList:["val","detail","instance"],comment:"\n/**\n * 组件数据改变时触发\n * @params val 组件当前值\n * @params detail 组件当前值详情(selectRow, dictData)\n * @params instance 表单组件\n */\n"},{id:t.OnlineFormEventType.BLUR,name:"组件失去焦点",functionName:"onBlur",paramList:["instance"],comment:"\n/**\n * 组件失去焦点时触发\n * @params instance 表单组件\n */\n"},{id:t.OnlineFormEventType.FOCUS,name:"组件获取焦点",functionName:"onFocus",paramList:["instance"],comment:"\n/**\n * 组件获取焦点时触发\n * @params instance 表单组件\n */\n"},{id:t.OnlineFormEventType.DISABLE,name:"是否禁用",functionName:"disabled",paramList:["instance"],comment:"\n/**\n * 组件是否禁用\n * @params instance\n */\nreturn false;\n"},{id:t.OnlineFormEventType.VISIBLE,name:"是否可见",functionName:"visible",paramList:["instance"],comment:"\n/**\n * 组件是否可见\n * @params instance\n */\nreturn true;\n"},{id:t.OnlineFormEventType.DROPDOWN_CHANGE,name:"组件下拉数据改变",functionName:"onDropdownChange",paramList:["dataList","instance"],comment:"\n/**\n * 组件下拉数据改变时触发\n * @params dataList 下拉数据\n * @params instance 表单组件\n */\nreturn dataList;\n"},{id:t.OnlineFormEventType.DISABLED_DATE,name:"日期组件设置日期是否禁用函数",functionName:"disabledDate",paramList:["date"],comment:"\n/**\n * 日期组件设置日期是否禁用函数，返回Boolean\n * @params date 当前日期\n */\nreturn false;\n"},{id:t.OnlineFormEventType.AFTER_LOAD_TABLE_DATA,name:"表格读取数据后回调",functionName:"afterLoadTableData",paramList:["dataList","instance"],comment:"\n/**\n * 读取列表数据后触发\n * @params dataList\n * @params instance\n */\nreturn dataList;\n"},{id:t.OnlineFormEventType.BEFORE_LOAD_TABLE_DATA,name:"表格读取数据前回调",functionName:"beforeLoadTableData",paramList:["params","instance"],comment:"\n/**\n * 读取表格数据前触发\n * @params params 请求参数\n * @params instance 表单组件\n */\n return params;\n"},{id:t.OnlineFormEventType.AFTER_LOAD_FORM_DATA,name:"表单页面加载数据后回调",functionName:"afterLoadFormData",paramList:["instance"],comment:"\n/**\n * 表单页面加载数据后触发\n * @params instance 表单组件\n */\n"},{id:t.OnlineFormEventType.BEFORE_COMMIT_FORM_DATA,name:"表单页面提交数据前回调",functionName:"beforeCommitFormData",paramList:["params","instance"],comment:"\n/**\n * 表单页面提交数据前触发\n * @params params 请求参数\n * @params instance 表单组件\n */\nreturn params;\n"},{id:t.OnlineFormEventType.AFTER_CREATE_FORM,name:"表单页面创建完毕",functionName:"formCreated",paramList:["instance"],comment:"\n/**\n * 表单页面创建完毕，可用于初始化表单数据\n * @params instance 表单组件\n */\n"},{id:t.OnlineFormEventType.OPERATION_VISIBLE,name:"操作是否可见",functionName:"operationVisible",paramList:["rowData","instance"],comment:"\n/**\n * 操作是否可见\n * @params rowData 表格行内操作当前行数据\n * @params instance 表单组件\n */\nreturn true;\n"},{id:t.OnlineFormEventType.OPERATION_DISABLED,name:"操作是否禁用",functionName:"operationDisabled",paramList:["rowData","instance"],comment:"\n/**\n * 操作是否禁用\n * @params rowData 表格行内操作当前行数据\n * @params instance 表单组件\n */\nreturn false;\n"},{id:t.OnlineFormEventType.LINK_HERF,name:"超链接地址",functionName:"linkHerf",paramList:["herf","instance"],comment:"\n/**\n * 计算超链接地址\n * @params herf 参数中设置的herf\n * @params instance 表单组件\n * @return 返回新的地址\n */\nreturn herf;\n"},{id:t.OnlineFormEventType.OPERATION_CLICK,name:"操作点击事件",functionName:"operationClick",paramList:["rowData","instance"],comment:"\n/**\n * 操作点击事件\n * @params rowData 表格行内操作当前行数据\n * @params instance 表单组件\n */\n"},{id:t.OnlineFormEventType.CELL_CLICK,name:"表格单元格点击事件",functionName:"tableCellClick",paramList:["rowData","instance"],comment:"\n/**\n * 表格单元格点击事件\n * @params rowData 表格行内操作当前行数据\n * @params instance 表单组件\n */\n"},{id:t.OnlineFormEventType.CELL_RENDER,name:"表格单元格渲染事件",functionName:"tableCellRender",paramList:["rowData","instance","h","elComp"],comment:"\n/**\n * 表格单元格渲染事件\n * @params rowData 表格行内操作当前行数据\n * @params instance 表单组件\n * @params h vue h函数\n * @params elComp element组件实例\n */\n"},{id:t.OnlineFormEventType.DIALOG_OPEN,name:"选择对话框过滤事件",functionName:"dialogOpen",paramList:["params","instance"],comment:"\n/**\n  * 选择对话框过滤事件\n  * @params params 请求参数\n  * @params instance 表单组件\n  */\nreturn params;\n"},{id:t.OnlineFormEventType.DIALOG_SUBMIT,name:"选择对话框回调事件",functionName:"dialogSubmit",paramList:["selectItem","instance"],comment:"\n/**\n  * 选择对话框回调事件\n  * @params selectItem 选择的数据列表或者对象\n  * @params instance 表单组件\n  */\n"},{id:t.OnlineFormEventType.INLINE_VALUE_CHANGE,name:"行内编辑值改变",functionName:"inlineValueChange",paramList:["value","rowData","detail","instance"],comment:"\n/**\n * 行内编辑值改变\n * @params value 当前值\n * @params rowData 当前行数据\n * @params detail 组件当前值详情(selectRow, dictData)\n * @params instance 表单组件\n */\n"},{id:t.OnlineFormEventType.CELL_TAG_TYPE,name:"单元格标签类型",functionName:"cellTagType",paramList:["rowData"],comment:"\n/**\n * 单元格标签类型\n * @params rowData 当前行数据\n * @params instance 表单组件\n */\nreturn 'primary';\n"},{id:t.OnlineFormEventType.FOOTER_DATA,name:"表格底部数据",functionName:"footerData",paramList:["dataList","instance"],comment:"\n/**\n * 表格底部数据\n * @params dataList 表格数据\n * @params instance 表单组件\n * @return 返回底部数据，https://vxetable.cn/#/component/table/base/footer\n */\nreturn undefined;\n"},{id:t.OnlineFormEventType.LINK_CLICK,name:"超链接点击事件",functionName:"linkClick",paramList:["herf","instance"],comment:"\n/**\n * 超链接点击事件\n * @params herf 超链接地址\n * @params instance 表单组件\n */\nreturn herf;\n"},{id:t.OnlineFormEventType.REPORT_CELL_CLICK,name:"报表单元格点击事件",functionName:"reportCellClick",paramList:["rowData","colData","instance"],comment:"\n/**\n * 报表单元格点击事件\n * @params rowData 报表行数据\n * @param colData 报表列数据\n * @params instance 表单组件\n */\n"},{id:t.OnlineFormEventType.SERIE_CLICK,name:"点击事件",functionName:"serieClick",paramList:["rowData","instance"],comment:"\n/**\n * 点击事件\n * @params rowData 报表行数据\n * @params instance 表单组件\n */\n"}],i=[{id:t.OnlineFormEventType.CHANGE,name:"组件数据改变",functionName:"onChange",paramList:["val"],comment:"\n/**\n * 组件数据改变时触发\n * @params val 组件当前值\n * @params this 表单组件\n */\n"},{id:t.OnlineFormEventType.DISABLE,name:"是否禁用",functionName:"disabled",paramList:[],comment:"\n/**\n * 组件是否禁用\n * @params this\n */\nreturn false;\n"},{id:t.OnlineFormEventType.VISIBLE,name:"是否可见",functionName:"visible",paramList:[],comment:"\n/**\n * 组件是否可见\n * @params this\n */\nreturn true;\n"},{id:t.OnlineFormEventType.DROPDOWN_CHANGE,name:"组件下拉数据改变",functionName:"onDropdownChange",paramList:["dataList"],comment:"\n/**\n * 组件下拉数据改变时触发\n * @params dataList 下拉数据\n * @params this 表单组件\n */\nreturn dataList;\n"},{id:t.OnlineFormEventType.DISABLED_DATE,name:"日期组件设置日期是否禁用函数",functionName:"disabledDate",paramList:["date"],comment:"\n/**\n * 日期组件设置日期是否禁用函数，返回Boolean\n * @params date 当前日期\n */\nreturn false;\n"},{id:t.OnlineFormEventType.AFTER_LOAD_TABLE_DATA,name:"表格读取数据后回调",functionName:"afterLoadTableData",paramList:["dataList"],comment:"\n/**\n * 读取列表数据后触发\n * @params dataList\n * @params this 表单组件\n */\nreturn dataList;\n"},{id:t.OnlineFormEventType.BEFORE_LOAD_TABLE_DATA,name:"表格读取数据前回调",functionName:"beforeLoadTableData",paramList:["params"],comment:"\n/**\n * 读取表格数据前触发\n * @params params 请求参数\n * @params this 表单组件\n */\nreturn params;\n"},{id:t.OnlineFormEventType.AFTER_LOAD_FORM_DATA,name:"表单页面加载数据后回调",functionName:"afterLoadFormData",paramList:[],comment:"\n/**\n * 表单页面加载数据后触发\n * @params this 表单组件\n */\n"},{id:t.OnlineFormEventType.BEFORE_COMMIT_FORM_DATA,name:"表单页面提交数据前回调",functionName:"beforeCommitFormData",paramList:["params"],comment:"\n/**\n * 表单页面提交数据前触发\n * @params params 请求参数\n * @params this 表单组件\n */\nreturn params;\n"},{id:t.OnlineFormEventType.AFTER_CREATE_FORM,name:"表单页面创建完毕",functionName:"formCreated",paramList:[],comment:"\n/**\n * 表单页面创建完毕，可用于初始化表单数据\n * @params this 表单组件\n */\n"},{id:t.OnlineFormEventType.OPERATION_VISIBLE,name:"操作是否可见",functionName:"operationVisible",paramList:["rowData"],comment:"\n/**\n * 操作是否可见\n * @params rowData 表格行内操作当前行数据\n * @params this 表单组件\n */\nreturn true;\n"},{id:t.OnlineFormEventType.OPERATION_DISABLED,name:"操作是否禁用",functionName:"operationDisabled",paramList:["rowData"],comment:"\n/**\n * 操作是否禁用\n * @params rowData 表格行内操作当前行数据\n * @params this 表单组件\n */\nreturn false;\n"},{id:t.OnlineFormEventType.LINK_HERF,name:"超链接地址",functionName:"linkHerf",paramList:["herf"],comment:"\n/**\n * 计算超链接地址\n * @params herf 参数中设置的herf\n * @params this 表单组件\n * @return 返回新的地址\n */\nreturn herf;\n"}];function s(e){if(!e)return null;const n=(0,o.PH)(r,e.eventType,"id");return n&&null!=e.scriptString&&""!==e.scriptString?new Function(n.paramList,e.scriptString):(console.warn("eventFunction eventInfo is null, eventType=",e.eventType),null)}},71066:function(e,n,a){"use strict";a.d(n,{P:function(){return s},i:function(){return m}});var t=a(81387),o=a(27007),r=a(56768),i=a(90144);const s=e=>{console.log("接收到的第三方参数",e);const n=(0,i.KR)(0),a=(0,r.EW)(()=>{let n={};try{e.thirdParamsString&&(n=JSON.parse(e.thirdParamsString))}catch(a){console.log(a),n={}}return n});console.log("thirdParams",a);const t=(t,o,r)=>{console.log("onCloseThirdDialog",o,r),window.parent&&window.parent.postMessage({type:"closeDialog",data:{index:n.value,dialogKey:e.dialogKey,path:a.value.path,rowData:o?JSON.parse(JSON.stringify(o)):void 0,data:r?JSON.parse(JSON.stringify(r)):void 0,isSuccess:t}},"*")},s=(e,a)=>{switch(e){case"setToken":a.token&&(0,o.WG)(a.token);break;case"dialogIndex":n.value=a;break;case"refreshData":break;case"message":break}},m=e=>{s(e.data.type,e.data.data)};return(0,r.sV)(()=>{console.log("onMounted message"),window.addEventListener("message",m,!1)}),(0,r.hi)(()=>{console.log("onUnmounted message"),window.removeEventListener("message",m)}),{thirdParams:a,onCloseThirdDialog:t}},m=()=>{let e;const n=(0,t.lq)(),a=()=>{window.parent&&window.parent.postMessage({type:"refreshToken"},"*")};-1!==n.path.indexOf("/thirdParty/")&&((0,r.sV)(()=>{(0,o.R7)()&&(e=setInterval(()=>{console.log("refreshToken thirdParty"),a()},18e4))}),(0,r.hi)(()=>{e&&clearInterval(e)}))}},77280:function(){}}]);